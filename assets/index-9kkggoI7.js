var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i={exports:{}},a={},s={exports:{}},o={},l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),y=Symbol.iterator;var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,w={};function k(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||x}function N(){}function j(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||x}k.prototype.isReactComponent={},k.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},k.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},N.prototype=k.prototype;var S=j.prototype=new N;S.constructor=j,_(S,k.prototype),S.isPureReactComponent=!0;var C=Array.isArray,E=Object.prototype.hasOwnProperty,P={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,r)&&!$.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return{$$typeof:l,type:e,key:a,ref:s,props:i,_owner:P.current}}function D(e){return"object"==typeof e&&null!==e&&e.$$typeof===l}var I=/\/+/g;function A(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function R(e,t,n,r,i){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var s=!1;if(null===e)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case l:case c:s=!0}}if(s)return i=i(s=e),e=""===r?"."+A(s,0):r,C(i)?(n="",null!=e&&(n=e.replace(I,"$&/")+"/"),R(i,t,n,"",function(e){return e})):null!=i&&(D(i)&&(i=function(e,t){return{$$typeof:l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(I,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=""===r?".":r+":",C(e))for(var o=0;o<e.length;o++){var u=r+A(a=e[o],o);s+=R(a,t,n,u,i)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=y&&e[y]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),o=0;!(a=e.next()).done;)s+=R(a=a.value,t,n,u=r+A(a,o++),i);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function F(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",function(e){return t.call(n,e,i++)}),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},z={transition:null},L={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:z,ReactCurrentOwner:P};function B(){throw Error("act(...) is not supported in production builds of React.")}o.Children={map:F,forEach:function(e,t,n){F(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return F(e,function(){t++}),t},toArray:function(e){return F(e,function(e){return e})||[]},only:function(e){if(!D(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},o.Component=k,o.Fragment=u,o.Profiler=h,o.PureComponent=j,o.StrictMode=d,o.Suspense=g,o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,o.act=B,o.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=_({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=P.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)E.call(t,c)&&!$.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==o?o[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:l,type:e.type,key:i,ref:a,props:r,_owner:s}},o.createContext=function(e){return(e={$$typeof:f,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:p,_context:e},e.Consumer=e},o.createElement=T,o.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},o.createRef=function(){return{current:null}},o.forwardRef=function(e){return{$$typeof:m,render:e}},o.isValidElement=D,o.lazy=function(e){return{$$typeof:b,_payload:{_status:-1,_result:e},_init:O}},o.memo=function(e,t){return{$$typeof:v,type:e,compare:void 0===t?null:t}},o.startTransition=function(e){var t=z.transition;z.transition={};try{e()}finally{z.transition=t}},o.unstable_act=B,o.useCallback=function(e,t){return M.current.useCallback(e,t)},o.useContext=function(e){return M.current.useContext(e)},o.useDebugValue=function(){},o.useDeferredValue=function(e){return M.current.useDeferredValue(e)},o.useEffect=function(e,t){return M.current.useEffect(e,t)},o.useId=function(){return M.current.useId()},o.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},o.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},o.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},o.useMemo=function(e,t){return M.current.useMemo(e,t)},o.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},o.useRef=function(e){return M.current.useRef(e)},o.useState=function(e){return M.current.useState(e)},o.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},o.useTransition=function(){return M.current.useTransition()},o.version="18.3.1",s.exports=o;var U=s.exports;const H=r(U);
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V=U,q=Symbol.for("react.element"),W=Symbol.for("react.fragment"),K=Object.prototype.hasOwnProperty,G=V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y={key:!0,ref:!0,__self:!0,__source:!0};function Z(e,t,n){var r,i={},a=null,s=null;for(r in void 0!==n&&(a=""+n),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(s=t.ref),t)K.call(t,r)&&!Y.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:q,type:e,key:a,ref:s,props:i,_owner:G.current}}a.Fragment=W,a.jsx=Z,a.jsxs=Z,i.exports=a;var X=i.exports,Q={exports:{}},J={},ee={exports:{}},te={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,s=a>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<a&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],c=[],u=1,d=null,h=3,p=!1,f=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function x(e){if(m=!1,y(e),!f)if(null!==n(l))f=!0,D(_);else{var t=n(c);null!==t&&I(x,t.startTime-e)}}function _(t,i){f=!1,m&&(m=!1,v(j),j=-1),p=!0;var a=h;try{for(y(i),d=n(l);null!==d&&(!(d.expirationTime>i)||t&&!E());){var s=d.callback;if("function"==typeof s){d.callback=null,h=d.priorityLevel;var o=s(d.expirationTime<=i);i=e.unstable_now(),"function"==typeof o?d.callback=o:d===n(l)&&r(l),y(i)}else r(l);d=n(l)}if(null!==d)var u=!0;else{var g=n(c);null!==g&&I(x,g.startTime-i),u=!1}return u}finally{d=null,h=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,k=!1,N=null,j=-1,S=5,C=-1;function E(){return!(e.unstable_now()-C<S)}function P(){if(null!==N){var t=e.unstable_now();C=t;var n=!0;try{n=N(!0,t)}finally{n?w():(k=!1,N=null)}}else k=!1}if("function"==typeof b)w=function(){b(P)};else if("undefined"!=typeof MessageChannel){var $=new MessageChannel,T=$.port2;$.port1.onmessage=P,w=function(){T.postMessage(null)}}else w=function(){g(P,0)};function D(e){N=e,k||(k=!0,w())}function I(t,n){j=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,D(_))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,i,a){var s=e.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?s+a:s:a=s,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(r.sortIndex=a,t(c,r),null===n(l)&&r===n(c)&&(m?(v(j),j=-1):m=!0,I(x,a-s))):(r.sortIndex=o,t(l,r),f||p||(f=!0,D(_))),r},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(te),ee.exports=te;var ne=ee.exports,re=U,ie=ne;
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var se=new Set,oe={};function le(e,t){ce(e,t),ce(e+"Capture",t)}function ce(e,t){for(oe[e]=t,e=0;e<t.length;e++)se.add(t[e])}var ue=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),de=Object.prototype.hasOwnProperty,he=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pe={},fe={};function me(e,t,n,r,i,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ge[e]=new me(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ge[t]=new me(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ge[e]=new me(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ge[e]=new me(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ge[e]=new me(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){ge[e]=new me(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){ge[e]=new me(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){ge[e]=new me(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){ge[e]=new me(e,5,!1,e.toLowerCase(),null,!1,!1)});var ve=/[\-:]([a-z])/g;function be(e){return e[1].toUpperCase()}function ye(e,t,n,r){var i=ge.hasOwnProperty(t)?ge[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!de.call(fe,e)||!de.call(pe,e)&&(he.test(e)?fe[e]=!0:(pe[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ve,be);ge[t]=new me(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ve,be);ge[t]=new me(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ve,be);ge[t]=new me(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){ge[e]=new me(e,1,!1,e.toLowerCase(),null,!1,!1)}),ge.xlinkHref=new me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){ge[e]=new me(e,1,!1,e.toLowerCase(),null,!0,!0)});var xe=re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_e=Symbol.for("react.element"),we=Symbol.for("react.portal"),ke=Symbol.for("react.fragment"),Ne=Symbol.for("react.strict_mode"),je=Symbol.for("react.profiler"),Se=Symbol.for("react.provider"),Ce=Symbol.for("react.context"),Ee=Symbol.for("react.forward_ref"),Pe=Symbol.for("react.suspense"),$e=Symbol.for("react.suspense_list"),Te=Symbol.for("react.memo"),De=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),Ae=Symbol.iterator;function Re(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Ae&&e[Ae]||e["@@iterator"])?e:null}var Fe,Oe=Object.assign;function Me(e){if(void 0===Fe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Fe=t&&t[1]||""}return"\n"+Fe+e}var ze=!1;function Le(e,t){if(!e||ze)return"";ze=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{ze=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Me(e):""}function Be(e){switch(e.tag){case 5:return Me(e.type);case 16:return Me("Lazy");case 13:return Me("Suspense");case 19:return Me("SuspenseList");case 0:case 2:case 15:return e=Le(e.type,!1);case 11:return e=Le(e.type.render,!1);case 1:return e=Le(e.type,!0);default:return""}}function Ue(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ke:return"Fragment";case we:return"Portal";case je:return"Profiler";case Ne:return"StrictMode";case Pe:return"Suspense";case $e:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Ce:return(e.displayName||"Context")+".Consumer";case Se:return(e._context.displayName||"Context")+".Provider";case Ee:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Te:return null!==(t=e.displayName||null)?t:Ue(e.type)||"Memo";case De:t=e._payload,e=e._init;try{return Ue(e(t))}catch(n){}}return null}function He(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ue(t);case 8:return t===Ne?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Ve(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function qe(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function We(e){e._valueTracker||(e._valueTracker=function(e){var t=qe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ke(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=qe(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ge(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ye(e,t){var n=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ze(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Xe(e,t){null!=(t=t.checked)&&ye(e,"checked",t,!1)}function Qe(e,t){Xe(e,t);var n=Ve(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?et(e,t.type,n):t.hasOwnProperty("defaultValue")&&et(e,t.type,Ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Je(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function et(e,t,n){"number"===t&&Ge(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var tt=Array.isArray;function nt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ve(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function rt(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(ae(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function it(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(ae(92));if(tt(n)){if(1<n.length)throw Error(ae(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Ve(n)}}function at(e,t){var n=Ve(t.value),r=Ve(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function st(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ot(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ot(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ct,ut,dt=(ut=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ct.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ut(e,t)})}:ut);function ht(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];function mt(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||pt.hasOwnProperty(e)&&pt[e]?(""+t).trim():t+"px"}function gt(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=mt(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pt).forEach(function(e){ft.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pt[t]=pt[e]})});var vt=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bt(e,t){if(t){if(vt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(ae(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(ae(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(ae(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(ae(62))}}function yt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=null;function _t(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var wt=null,kt=null,Nt=null;function jt(e){if(e=ya(e)){if("function"!=typeof wt)throw Error(ae(280));var t=e.stateNode;t&&(t=_a(t),wt(e.stateNode,e.type,t))}}function St(e){kt?Nt?Nt.push(e):Nt=[e]:kt=e}function Ct(){if(kt){var e=kt,t=Nt;if(Nt=kt=null,jt(e),t)for(e=0;e<t.length;e++)jt(t[e])}}function Et(e,t){return e(t)}function Pt(){}var $t=!1;function Tt(e,t,n){if($t)return e(t,n);$t=!0;try{return Et(e,t,n)}finally{$t=!1,(null!==kt||null!==Nt)&&(Pt(),Ct())}}function Dt(e,t){var n=e.stateNode;if(null===n)return null;var r=_a(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(ae(231,t,typeof n));return n}var It=!1;if(ue)try{var At={};Object.defineProperty(At,"passive",{get:function(){It=!0}}),window.addEventListener("test",At,At),window.removeEventListener("test",At,At)}catch(ut){It=!1}function Rt(e,t,n,r,i,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ft=!1,Ot=null,Mt=!1,zt=null,Lt={onError:function(e){Ft=!0,Ot=e}};function Bt(e,t,n,r,i,a,s,o,l){Ft=!1,Ot=null,Rt.apply(Lt,arguments)}function Ut(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ht(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Vt(e){if(Ut(e)!==e)throw Error(ae(188))}function qt(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ut(e)))throw Error(ae(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Vt(i),e;if(a===r)return Vt(i),t;a=a.sibling}throw Error(ae(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(3!==n.tag)throw Error(ae(188));return n.stateNode.current===n?e:t}(e))?Wt(e):null}function Wt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Wt(e);if(null!==t)return t;e=e.sibling}return null}var Kt=ie.unstable_scheduleCallback,Gt=ie.unstable_cancelCallback,Yt=ie.unstable_shouldYield,Zt=ie.unstable_requestPaint,Xt=ie.unstable_now,Qt=ie.unstable_getCurrentPriorityLevel,Jt=ie.unstable_ImmediatePriority,en=ie.unstable_UserBlockingPriority,tn=ie.unstable_NormalPriority,nn=ie.unstable_LowPriority,rn=ie.unstable_IdlePriority,an=null,sn=null;var on=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ln(e)/cn|0)|0},ln=Math.log,cn=Math.LN2;var un=64,dn=4194304;function hn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pn(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=hn(o):0!==(a&=s)&&(r=hn(a))}else 0!==(s=n&~i)?r=hn(s):0!==a&&(r=hn(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&4194240&a))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-on(t)),r|=e[n],t&=~i;return r}function fn(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gn(){var e=un;return!(4194240&(un<<=1))&&(un=64),e}function vn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bn(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-on(t)]=n}function yn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-on(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var xn=0;function _n(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var wn,kn,Nn,jn,Sn,Cn=!1,En=[],Pn=null,$n=null,Tn=null,Dn=new Map,In=new Map,An=[],Rn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fn(e,t){switch(e){case"focusin":case"focusout":Pn=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Tn=null;break;case"pointerover":case"pointerout":Dn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":In.delete(t.pointerId)}}function On(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ya(t))&&kn(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mn(e){var t=ba(e.target);if(null!==t){var n=Ut(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ht(n)))return e.blockedOn=t,void Sn(e.priority,function(){Nn(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ya(n))&&kn(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xt=r,n.target.dispatchEvent(r),xt=null,t.shift()}return!0}function Ln(e,t,n){zn(e)&&n.delete(t)}function Bn(){Cn=!1,null!==Pn&&zn(Pn)&&(Pn=null),null!==$n&&zn($n)&&($n=null),null!==Tn&&zn(Tn)&&(Tn=null),Dn.forEach(Ln),In.forEach(Ln)}function Un(e,t){e.blockedOn===t&&(e.blockedOn=null,Cn||(Cn=!0,ie.unstable_scheduleCallback(ie.unstable_NormalPriority,Bn)))}function Hn(e){function t(t){return Un(t,e)}if(0<En.length){Un(En[0],e);for(var n=1;n<En.length;n++){var r=En[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Pn&&Un(Pn,e),null!==$n&&Un($n,e),null!==Tn&&Un(Tn,e),Dn.forEach(t),In.forEach(t),n=0;n<An.length;n++)(r=An[n]).blockedOn===e&&(r.blockedOn=null);for(;0<An.length&&null===(n=An[0]).blockedOn;)Mn(n),null===n.blockedOn&&An.shift()}var Vn=xe.ReactCurrentBatchConfig,qn=!0;function Wn(e,t,n,r){var i=xn,a=Vn.transition;Vn.transition=null;try{xn=1,Gn(e,t,n,r)}finally{xn=i,Vn.transition=a}}function Kn(e,t,n,r){var i=xn,a=Vn.transition;Vn.transition=null;try{xn=4,Gn(e,t,n,r)}finally{xn=i,Vn.transition=a}}function Gn(e,t,n,r){if(qn){var i=Zn(e,t,n,r);if(null===i)Vi(e,t,r,Yn,n),Fn(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Pn=On(Pn,e,t,n,r,i),!0;case"dragenter":return $n=On($n,e,t,n,r,i),!0;case"mouseover":return Tn=On(Tn,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dn.set(a,On(Dn.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,In.set(a,On(In.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Fn(e,r),4&t&&-1<Rn.indexOf(e)){for(;null!==i;){var a=ya(i);if(null!==a&&wn(a),null===(a=Zn(e,t,n,r))&&Vi(e,t,r,Yn,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Vi(e,t,r,null,n)}}var Yn=null;function Zn(e,t,n,r){if(Yn=null,null!==(e=ba(e=_t(r))))if(null===(t=Ut(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ht(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yn=e,null}function Xn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qt()){case Jt:return 1;case en:return 4;case tn:case nn:return 16;case rn:return 536870912;default:return 16}default:return 16}}var Qn=null,Jn=null,er=null;function tr(){if(er)return er;var e,t,n=Jn,r=n.length,i="value"in Qn?Qn.value:Qn.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return er=i.slice(e,1<t?1-t:void 0)}function nr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function ir(){return!1}function ar(e){function t(t,n,r,i,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rr:ir,this.isPropagationStopped=ir,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var sr,or,lr,cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=ar(cr),dr=Oe({},cr,{view:0,detail:0}),hr=ar(dr),pr=Oe({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lr&&(lr&&"mousemove"===e.type?(sr=e.screenX-lr.screenX,or=e.screenY-lr.screenY):or=sr=0,lr=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:or}}),fr=ar(pr),mr=ar(Oe({},pr,{dataTransfer:0})),gr=ar(Oe({},dr,{relatedTarget:0})),vr=ar(Oe({},cr,{animationName:0,elapsedTime:0,pseudoElement:0})),br=Oe({},cr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=ar(br),xr=ar(Oe({},cr,{data:0})),_r={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kr[e])&&!!t[e]}function jr(){return Nr}var Sr=Oe({},dr,{key:function(e){if(e.key){var t=_r[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jr,charCode:function(e){return"keypress"===e.type?nr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cr=ar(Sr),Er=ar(Oe({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pr=ar(Oe({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jr})),$r=ar(Oe({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tr=Oe({},pr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dr=ar(Tr),Ir=[9,13,27,32],Ar=ue&&"CompositionEvent"in window,Rr=null;ue&&"documentMode"in document&&(Rr=document.documentMode);var Fr=ue&&"TextEvent"in window&&!Rr,Or=ue&&(!Ar||Rr&&8<Rr&&11>=Rr),Mr=String.fromCharCode(32),zr=!1;function Lr(e,t){switch(e){case"keyup":return-1!==Ir.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Br(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ur=!1;var Hr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hr[e.type]:"textarea"===t}function qr(e,t,n,r){St(r),0<(t=Wi(t,"onChange")).length&&(n=new ur("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wr=null,Kr=null;function Gr(e){Mi(e,0)}function Yr(e){if(Ke(xa(e)))return e}function Zr(e,t){if("change"===e)return t}var Xr=!1;if(ue){var Qr;if(ue){var Jr="oninput"in document;if(!Jr){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Jr="function"==typeof ei.oninput}Qr=Jr}else Qr=!1;Xr=Qr&&(!document.documentMode||9<document.documentMode)}function ti(){Wr&&(Wr.detachEvent("onpropertychange",ni),Kr=Wr=null)}function ni(e){if("value"===e.propertyName&&Yr(Kr)){var t=[];qr(t,Kr,e,_t(e)),Tt(Gr,t)}}function ri(e,t,n){"focusin"===e?(ti(),Kr=n,(Wr=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ii(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yr(Kr)}function ai(e,t){if("click"===e)return Yr(t)}function si(e,t){if("input"===e||"change"===e)return Yr(t)}var oi="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function li(e,t){if(oi(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!de.call(t,i)||!oi(e[i],t[i]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,r=ci(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ci(r)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=Ge();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Ge((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=hi(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==r&&pi(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=ui(n,a);var s=ui(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=ue&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,bi=null,yi=!1;function xi(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yi||null==gi||gi!==Ge(r)||("selectionStart"in(r=gi)&&pi(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},bi&&li(bi,r)||(bi=r,0<(r=Wi(vi,"onSelect")).length&&(t=new ur("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gi)))}function _i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},ki={},Ni={};function ji(e){if(ki[e])return ki[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ni)return ki[e]=n[t];return e}ue&&(Ni=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Si=ji("animationend"),Ci=ji("animationiteration"),Ei=ji("animationstart"),Pi=ji("transitionend"),$i=new Map,Ti="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(e,t){$i.set(e,t),le(t,[e])}for(var Ii=0;Ii<Ti.length;Ii++){var Ai=Ti[Ii];Di(Ai.toLowerCase(),"on"+(Ai[0].toUpperCase()+Ai.slice(1)))}Di(Si,"onAnimationEnd"),Di(Ci,"onAnimationIteration"),Di(Ei,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(Pi,"onTransitionEnd"),ce("onMouseEnter",["mouseout","mouseover"]),ce("onMouseLeave",["mouseout","mouseover"]),ce("onPointerEnter",["pointerout","pointerover"]),ce("onPointerLeave",["pointerout","pointerover"]),le("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),le("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),le("onBeforeInput",["compositionend","keypress","textInput","paste"]),le("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),le("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),le("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ri));function Oi(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,o,l){if(Bt.apply(this,arguments),Ft){if(!Ft)throw Error(ae(198));var c=Ot;Ft=!1,Ot=null,Mt||(Mt=!0,zt=c)}}(r,t,void 0,e),e.currentTarget=null}function Mi(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;Oi(i,o,c),a=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;Oi(i,o,c),a=l}}}if(Mt)throw e=zt,Mt=!1,zt=null,e}function zi(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Hi(t,e,2,!1),n.add(r))}function Li(e,t,n){var r=0;t&&(r|=4),Hi(n,e,r,t)}var Bi="_reactListening"+Math.random().toString(36).slice(2);function Ui(e){if(!e[Bi]){e[Bi]=!0,se.forEach(function(t){"selectionchange"!==t&&(Fi.has(t)||Li(t,!1,e),Li(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bi]||(t[Bi]=!0,Li("selectionchange",!1,t))}}function Hi(e,t,n,r){switch(Xn(t)){case 1:var i=Wn;break;case 4:i=Kn;break;default:i=Gn}n=i.bind(null,t,n,e),i=void 0,!It||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vi(e,t,n,r,i){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==o;){if(null===(s=ba(o)))return;if(5===(l=s.tag)||6===l){r=a=s;continue e}o=o.parentNode}}r=r.return}Tt(function(){var r=a,i=_t(n),s=[];e:{var o=$i.get(e);if(void 0!==o){var l=ur,c=e;switch(e){case"keypress":if(0===nr(n))break e;case"keydown":case"keyup":l=Cr;break;case"focusin":c="focus",l=gr;break;case"focusout":c="blur",l=gr;break;case"beforeblur":case"afterblur":l=gr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pr;break;case Si:case Ci:case Ei:l=vr;break;case Pi:l=$r;break;case"scroll":l=hr;break;case"wheel":l=Dr;break;case"copy":case"cut":case"paste":l=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Er}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Dt(f,h))&&u.push(qi(f,m,p)))),d)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,i),s.push({event:o,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xt||!(c=n.relatedTarget||n.fromElement)||!ba(c)&&!c[fa])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ba(c):null)&&(c!==(d=Ut(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fr,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Er,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?o:xa(l),p=null==c?o:xa(c),(o=new u(m,f+"leave",l,n,i)).target=d,o.relatedTarget=p,m=null,ba(i)===r&&((u=new u(h,f+"enter",c,n,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Ki(p))f++;for(p=0,m=h;m;m=Ki(m))p++;for(;0<f-p;)u=Ki(u),f--;for(;0<p-f;)h=Ki(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Ki(u),h=Ki(h)}u=null}else u=null;null!==l&&Gi(s,o,l,u,!1),null!==c&&null!==d&&Gi(s,d,c,u,!0)}if("select"===(l=(o=r?xa(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Zr;else if(Vr(o))if(Xr)g=si;else{g=ii;var v=ri}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ai);switch(g&&(g=g(e,r))?qr(s,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&et(o,"number",o.value)),v=r?xa(r):window,e){case"focusin":(Vr(v)||"true"===v.contentEditable)&&(gi=v,vi=r,bi=null);break;case"focusout":bi=vi=gi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,xi(s,n,i);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":xi(s,n,i)}var b;if(Ar)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ur?Lr(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Or&&"ko"!==n.locale&&(Ur||"onCompositionStart"!==y?"onCompositionEnd"===y&&Ur&&(b=tr()):(Jn="value"in(Qn=i)?Qn.value:Qn.textContent,Ur=!0)),0<(v=Wi(r,y)).length&&(y=new xr(y,e,null,n,i),s.push({event:y,listeners:v}),b?y.data=b:null!==(b=Br(n))&&(y.data=b))),(b=Fr?function(e,t){switch(e){case"compositionend":return Br(t);case"keypress":return 32!==t.which?null:(zr=!0,Mr);case"textInput":return(e=t.data)===Mr&&zr?null:e;default:return null}}(e,n):function(e,t){if(Ur)return"compositionend"===e||!Ar&&Lr(e,t)?(e=tr(),er=Jn=Qn=null,Ur=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Or&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wi(r,"onBeforeInput")).length&&(i=new xr("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=b))}Mi(s,t)})}function qi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wi(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Dt(e,n))&&r.unshift(qi(e,a,i)),null!=(a=Dt(e,t))&&r.push(qi(e,a,i))),e=e.return}return r}function Ki(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gi(e,t,n,r,i){for(var a=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Dt(n,a))&&s.unshift(qi(n,l,o)):i||null!=(l=Dt(n,a))&&s.push(qi(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yi=/\r\n?/g,Zi=/\u0000|\uFFFD/g;function Xi(e){return("string"==typeof e?e:""+e).replace(Yi,"\n").replace(Zi,"")}function Qi(e,t,n){if(t=Xi(t),Xi(e)!==t&&n)throw Error(ae(425))}function Ji(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"==typeof setTimeout?setTimeout:void 0,ia="function"==typeof clearTimeout?clearTimeout:void 0,aa="function"==typeof Promise?Promise:void 0,sa="function"==typeof queueMicrotask?queueMicrotask:void 0!==aa?function(e){return aa.resolve(null).then(e).catch(oa)}:ra;function oa(e){setTimeout(function(){throw e})}function la(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Hn(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Hn(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,pa="__reactProps$"+da,fa="__reactContainer$"+da,ma="__reactEvents$"+da,ga="__reactListeners$"+da,va="__reactHandles$"+da;function ba(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fa]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[ha])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function ya(e){return!(e=e[ha]||e[fa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(ae(33))}function _a(e){return e[pa]||null}var wa=[],ka=-1;function Na(e){return{current:e}}function ja(e){0>ka||(e.current=wa[ka],wa[ka]=null,ka--)}function Sa(e,t){ka++,wa[ka]=e.current,e.current=t}var Ca={},Ea=Na(Ca),Pa=Na(!1),$a=Ca;function Ta(e,t){var n=e.type.contextTypes;if(!n)return Ca;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Da(e){return null!=(e=e.childContextTypes)}function Ia(){ja(Pa),ja(Ea)}function Aa(e,t,n){if(Ea.current!==Ca)throw Error(ae(168));Sa(Ea,t),Sa(Pa,n)}function Ra(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(ae(108,He(e)||"Unknown",i));return Oe({},n,r)}function Fa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ca,$a=Ea.current,Sa(Ea,e),Sa(Pa,Pa.current),!0}function Oa(e,t,n){var r=e.stateNode;if(!r)throw Error(ae(169));n?(e=Ra(e,t,$a),r.__reactInternalMemoizedMergedChildContext=e,ja(Pa),ja(Ea),Sa(Ea,e)):ja(Pa),Sa(Pa,n)}var Ma=null,za=!1,La=!1;function Ba(e){null===Ma?Ma=[e]:Ma.push(e)}function Ua(){if(!La&&null!==Ma){La=!0;var e=0,t=xn;try{var n=Ma;for(xn=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ma=null,za=!1}catch(i){throw null!==Ma&&(Ma=Ma.slice(e+1)),Kt(Jt,Ua),i}finally{xn=t,La=!1}}return null}var Ha=[],Va=0,qa=null,Wa=0,Ka=[],Ga=0,Ya=null,Za=1,Xa="";function Qa(e,t){Ha[Va++]=Wa,Ha[Va++]=qa,qa=e,Wa=t}function Ja(e,t,n){Ka[Ga++]=Za,Ka[Ga++]=Xa,Ka[Ga++]=Ya,Ya=e;var r=Za;e=Xa;var i=32-on(r)-1;r&=~(1<<i),n+=1;var a=32-on(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Za=1<<32-on(t)+i|n<<i|r,Xa=a+e}else Za=1<<a|n<<i|r,Xa=e}function es(e){null!==e.return&&(Qa(e,1),Ja(e,1,0))}function ts(e){for(;e===qa;)qa=Ha[--Va],Ha[Va]=null,Wa=Ha[--Va],Ha[Va]=null;for(;e===Ya;)Ya=Ka[--Ga],Ka[Ga]=null,Xa=Ka[--Ga],Ka[Ga]=null,Za=Ka[--Ga],Ka[Ga]=null}var ns=null,rs=null,is=!1,as=null;function ss(e,t){var n=Tu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ya?{id:Za,overflow:Xa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return!(!(1&e.mode)||128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(ae(418));t=ca(n.nextSibling);var r=ns;t&&os(e,t)?ss(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(ae(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(ae(418));for(;t;)ss(e,t),t=ca(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ca(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ca(e.nextSibling)}function ps(){rs=ns=null,is=!1}function fs(e){null===as?as=[e]:as.push(e)}var ms=xe.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(ae(284));if(!n._owner)throw Error(ae(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(ae(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bs(e){return(0,e._init)(e._payload)}function ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Iu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=Ou(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===ke?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===De&&bs(a)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Au(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Mu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,a){return null===t||7!==t.tag?((t=Ru(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Ou(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case _e:return(n=Au(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case we:return(t=Mu(t,e.mode,n)).return=e,t;case De:return d(e,(0,t._init)(t._payload),n)}if(tt(t)||Re(t))return(t=Ru(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case _e:return n.key===i?l(e,t,n,r):null;case we:return n.key===i?c(e,t,n,r):null;case De:return h(e,t,(i=n._init)(n._payload),r)}if(tt(n)||Re(n))return null!==i?null:u(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return o(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case _e:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case we:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case De:return p(e,t,n,(0,r._init)(r._payload),i)}if(tt(r)||Re(r))return u(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}return function o(l,c,u,f){if("object"==typeof u&&null!==u&&u.type===ke&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case _e:e:{for(var m=u.key,g=c;null!==g;){if(g.key===m){if((m=u.type)===ke){if(7===g.tag){n(l,g.sibling),(c=i(g,u.props.children)).return=l,l=c;break e}}else if(g.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===De&&bs(m)===g.type){n(l,g.sibling),(c=i(g,u.props)).ref=gs(l,g,u),c.return=l,l=c;break e}n(l,g);break}t(l,g),g=g.sibling}u.type===ke?((c=Ru(u.props.children,l.mode,f,u.key)).return=l,l=c):((f=Au(u.type,u.key,u.props,null,l.mode,f)).ref=gs(l,c,u),f.return=l,l=f)}return s(l);case we:e:{for(g=u.key;null!==c;){if(c.key===g){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(c=i(c,u.children||[])).return=l,l=c;break e}n(l,c);break}t(l,c),c=c.sibling}(c=Mu(u,l.mode,f)).return=l,l=c}return s(l);case De:return o(l,c,(g=u._init)(u._payload),f)}if(tt(u))return function(i,s,o,l){for(var c=null,u=null,f=s,m=s=0,g=null;null!==f&&m<o.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var v=h(i,f,o[m],l);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(i,f),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,f=g}if(m===o.length)return n(i,f),is&&Qa(i,m),c;if(null===f){for(;m<o.length;m++)null!==(f=d(i,o[m],l))&&(s=a(f,s,m),null===u?c=f:u.sibling=f,u=f);return is&&Qa(i,m),c}for(f=r(i,f);m<o.length;m++)null!==(g=p(f,i,m,o[m],l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&f.forEach(function(e){return t(i,e)}),is&&Qa(i,m),c}(l,c,u,f);if(Re(u))return function(i,s,o,l){var c=Re(o);if("function"!=typeof c)throw Error(ae(150));if(null==(o=c.call(o)))throw Error(ae(151));for(var u=c=null,f=s,m=s=0,g=null,v=o.next();null!==f&&!v.done;m++,v=o.next()){f.index>m?(g=f,f=null):g=f.sibling;var b=h(i,f,v.value,l);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&t(i,f),s=a(b,s,m),null===u?c=b:u.sibling=b,u=b,f=g}if(v.done)return n(i,f),is&&Qa(i,m),c;if(null===f){for(;!v.done;m++,v=o.next())null!==(v=d(i,v.value,l))&&(s=a(v,s,m),null===u?c=v:u.sibling=v,u=v);return is&&Qa(i,m),c}for(f=r(i,f);!v.done;m++,v=o.next())null!==(v=p(f,i,m,v.value,l))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v);return e&&f.forEach(function(e){return t(i,e)}),is&&Qa(i,m),c}(l,c,u,f);vs(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(c=i(c,u)).return=l,l=c):(n(l,c),(c=Ou(u,l.mode,f)).return=l,l=c),s(l)):n(l,c)}}var xs=ys(!0),_s=ys(!1),ws=Na(null),ks=null,Ns=null,js=null;function Ss(){js=Ns=ks=null}function Cs(e){var t=ws.current;ja(ws),e._currentValue=t}function Es(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ps(e,t){ks=e,js=Ns=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yl=!0),e.firstContext=null)}function $s(e){var t=e._currentValue;if(js!==e)if(e={context:e,memoizedValue:t,next:null},null===Ns){if(null===ks)throw Error(ae(308));Ns=e,ks.dependencies={lanes:0,firstContext:e}}else Ns=Ns.next=e;return t}var Ts=null;function Ds(e){null===Ts?Ts=[e]:Ts.push(e)}function Is(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ds(t)):(n.next=i.next,i.next=n),t.interleaved=n,As(e,r)}function As(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Rs=!1;function Fs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Os(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ms(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Ec){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,As(e,n)}return null===(i=r.interleaved)?(t.next=t,Ds(r)):(t.next=i.next,i.next=t),r.interleaved=t,As(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yn(e,n)}}function Bs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Us(e,t,n,r){var i=e.updateQueue;Rs=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(s=0,u=c=l=null,o=a;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(h="function"==typeof(f=m.payload)?f.call(p,d,h):f))break e;d=Oe({},d,h);break e;case 2:Rs=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fc|=s,e.lanes=s,e.memoizedState=d}}function Hs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(ae(191,i));i.call(r)}}}var Vs={},qs=Na(Vs),Ws=Na(Vs),Ks=Na(Vs);function Gs(e){if(e===Vs)throw Error(ae(174));return e}function Ys(e,t){switch(Sa(Ks,t),Sa(Ws,e),Sa(qs,Vs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lt(null,"");break;default:t=lt(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ja(qs),Sa(qs,t)}function Zs(){ja(qs),ja(Ws),ja(Ks)}function Xs(e){Gs(Ks.current);var t=Gs(qs.current),n=lt(t,e.type);t!==n&&(Sa(Ws,e),Sa(qs,n))}function Qs(e){Ws.current===e&&(ja(qs),ja(Ws))}var Js=Na(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=xe.ReactCurrentDispatcher,io=xe.ReactCurrentBatchConfig,ao=0,so=null,oo=null,lo=null,co=!1,uo=!1,ho=0,po=0;function fo(){throw Error(ae(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,a){if(ao=a,so=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Jo:el,e=n(r,i),uo){a=0;do{if(uo=!1,ho=0,25<=a)throw Error(ae(301));a+=1,lo=oo=null,t.updateQueue=null,ro.current=tl,e=n(r,i)}while(uo)}if(ro.current=Qo,t=null!==oo&&null!==oo.next,ao=0,lo=oo=so=null,co=!1,t)throw Error(ae(300));return e}function vo(){var e=0!==ho;return ho=0,e}function bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?so.memoizedState=lo=e:lo=lo.next=e,lo}function yo(){if(null===oo){var e=so.alternate;e=null!==e?e.memoizedState:null}else e=oo.next;var t=null===lo?so.memoizedState:lo.next;if(null!==t)lo=t,oo=e;else{if(null===e)throw Error(ae(310));e={memoizedState:(oo=e).memoizedState,baseState:oo.baseState,baseQueue:oo.baseQueue,queue:oo.queue,next:null},null===lo?so.memoizedState=lo=e:lo=lo.next=e}return lo}function xo(e,t){return"function"==typeof t?t(e):t}function _o(e){var t=yo(),n=t.queue;if(null===n)throw Error(ae(311));n.lastRenderedReducer=e;var r=oo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var o=s=null,l=null,c=a;do{var u=c.lane;if((ao&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(o=l=d,s=r):l=l.next=d,so.lanes|=u,Fc|=u}c=c.next}while(null!==c&&c!==a);null===l?s=r:l.next=o,oi(r,t.memoizedState)||(yl=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,so.lanes|=a,Fc|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wo(e){var t=yo(),n=t.queue;if(null===n)throw Error(ae(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);oi(a,t.memoizedState)||(yl=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ko(){}function No(e,t){var n=so,r=yo(),i=t(),a=!oi(r.memoizedState,i);if(a&&(r.memoizedState=i,yl=!0),r=r.queue,Fo(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,To(9,So.bind(null,n,r,i,t),void 0,null),null===Pc)throw Error(ae(349));30&ao||jo(n,t,i)}return i}function jo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=so.updateQueue)?(t={lastEffect:null,stores:null},so.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function So(e,t,n,r){t.value=n,t.getSnapshot=r,Eo(t)&&Po(e)}function Co(e,t,n){return n(function(){Eo(t)&&Po(e)})}function Eo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(r){return!0}}function Po(e){var t=As(e,1);null!==t&&nu(t,e,1,-1)}function $o(e){var t=bo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=Go.bind(null,so,e),[t.memoizedState,e]}function To(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=so.updateQueue)?(t={lastEffect:null,stores:null},so.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Do(){return yo().memoizedState}function Io(e,t,n,r){var i=bo();so.flags|=e,i.memoizedState=To(1|t,n,void 0,void 0===r?null:r)}function Ao(e,t,n,r){var i=yo();r=void 0===r?null:r;var a=void 0;if(null!==oo){var s=oo.memoizedState;if(a=s.destroy,null!==r&&mo(r,s.deps))return void(i.memoizedState=To(t,n,a,r))}so.flags|=e,i.memoizedState=To(1|t,n,a,r)}function Ro(e,t){return Io(8390656,8,e,t)}function Fo(e,t){return Ao(2048,8,e,t)}function Oo(e,t){return Ao(4,2,e,t)}function Mo(e,t){return Ao(4,4,e,t)}function zo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Lo(e,t,n){return n=null!=n?n.concat([e]):null,Ao(4,4,zo.bind(null,t,e),n)}function Bo(){}function Uo(e,t){var n=yo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ho(e,t){var n=yo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Vo(e,t,n){return 21&ao?(oi(n,t)||(n=gn(),so.lanes|=n,Fc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yl=!0),e.memoizedState=n)}function qo(e,t){var n=xn;xn=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{xn=n,io.transition=r}}function Wo(){return yo().memoizedState}function Ko(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yo(e))Zo(t,n);else if(null!==(n=Is(e,t,n,r))){nu(n,e,r,eu()),Xo(n,t,r)}}function Go(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Zo(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,oi(o,s)){var l=t.interleaved;return null===l?(i.next=i,Ds(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Is(e,t,i,r))&&(nu(n,e,r,i=eu()),Xo(n,t,r))}}function Yo(e){var t=e.alternate;return e===so||null!==t&&t===so}function Zo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xo(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yn(e,n)}}var Qo={readContext:$s,useCallback:fo,useContext:fo,useEffect:fo,useImperativeHandle:fo,useInsertionEffect:fo,useLayoutEffect:fo,useMemo:fo,useReducer:fo,useRef:fo,useState:fo,useDebugValue:fo,useDeferredValue:fo,useTransition:fo,useMutableSource:fo,useSyncExternalStore:fo,useId:fo,unstable_isNewReconciler:!1},Jo={readContext:$s,useCallback:function(e,t){return bo().memoizedState=[e,void 0===t?null:t],e},useContext:$s,useEffect:Ro,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Io(4194308,4,zo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Io(4194308,4,e,t)},useInsertionEffect:function(e,t){return Io(4,2,e,t)},useMemo:function(e,t){var n=bo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ko.bind(null,so,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bo().memoizedState=e},useState:$o,useDebugValue:Bo,useDeferredValue:function(e){return bo().memoizedState=e},useTransition:function(){var e=$o(!1),t=e[0];return e=qo.bind(null,e[1]),bo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=so,i=bo();if(is){if(void 0===n)throw Error(ae(407));n=n()}else{if(n=t(),null===Pc)throw Error(ae(349));30&ao||jo(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ro(Co.bind(null,r,a,e),[e]),r.flags|=2048,To(9,So.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=bo(),t=Pc.identifierPrefix;if(is){var n=Xa;t=":"+t+"R"+(n=(Za&~(1<<32-on(Za)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},el={readContext:$s,useCallback:Uo,useContext:$s,useEffect:Fo,useImperativeHandle:Lo,useInsertionEffect:Oo,useLayoutEffect:Mo,useMemo:Ho,useReducer:_o,useRef:Do,useState:function(){return _o(xo)},useDebugValue:Bo,useDeferredValue:function(e){return Vo(yo(),oo.memoizedState,e)},useTransition:function(){return[_o(xo)[0],yo().memoizedState]},useMutableSource:ko,useSyncExternalStore:No,useId:Wo,unstable_isNewReconciler:!1},tl={readContext:$s,useCallback:Uo,useContext:$s,useEffect:Fo,useImperativeHandle:Lo,useInsertionEffect:Oo,useLayoutEffect:Mo,useMemo:Ho,useReducer:wo,useRef:Do,useState:function(){return wo(xo)},useDebugValue:Bo,useDeferredValue:function(e){var t=yo();return null===oo?t.memoizedState=e:Vo(t,oo.memoizedState,e)},useTransition:function(){return[wo(xo)[0],yo().memoizedState]},useMutableSource:ko,useSyncExternalStore:No,useId:Wo,unstable_isNewReconciler:!1};function nl(e,t){if(e&&e.defaultProps){for(var n in t=Oe({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rl(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Oe({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var il={isMounted:function(e){return!!(e=e._reactInternals)&&Ut(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Ms(r,i);a.payload=t,null!=n&&(a.callback=n),null!==(t=zs(e,a,i))&&(nu(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Ms(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=zs(e,a,i))&&(nu(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=Ms(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=zs(e,i,r))&&(nu(t,e,r,n),Ls(t,e,r))}};function al(e,t,n,r,i,a,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,r)||!li(i,a))}function sl(e,t,n){var r=!1,i=Ca,a=t.contextType;return"object"==typeof a&&null!==a?a=$s(a):(i=Da(t)?$a:Ea.current,a=(r=null!=(r=t.contextTypes))?Ta(e,i):Ca),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=il,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ol(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&il.enqueueReplaceState(t,t.state,null)}function ll(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Fs(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=$s(a):(a=Da(t)?$a:Ea.current,i.context=Ta(e,a)),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(rl(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&il.enqueueReplaceState(i,i.state,null),Us(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function cl(e,t){try{var n="",r=t;do{n+=Be(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function ul(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function dl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hl="function"==typeof WeakMap?WeakMap:Map;function pl(e,t,n){(n=Ms(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vc||(Vc=!0,qc=r),dl(0,t)},n}function fl(e,t,n){(n=Ms(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){dl(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){dl(0,t),"function"!=typeof r&&(null===Wc?Wc=new Set([this]):Wc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ml(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hl;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=ju.bind(null,e,t,n),t.then(e,e))}function gl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vl(e,t,n,r,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ms(-1,1)).tag=2,zs(n,t,1))),n.lanes|=1),e)}var bl=xe.ReactCurrentOwner,yl=!1;function xl(e,t,n,r){t.child=null===e?_s(t,null,n,r):xs(t,e.child,n,r)}function _l(e,t,n,r,i){n=n.render;var a=t.ref;return Ps(t,i),r=go(e,t,n,r,a,i),n=vo(),null===e||yl?(is&&n&&es(t),t.flags|=1,xl(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vl(e,t,i))}function wl(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||Du(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Au(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,kl(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:li)(s,r)&&e.ref===t.ref)return Vl(e,t,i)}return t.flags|=1,(e=Iu(a,r)).ref=t.ref,e.return=t,t.child=e}function kl(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(li(a,r)&&e.ref===t.ref){if(yl=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Vl(e,t,i);131072&e.flags&&(yl=!0)}}return Sl(e,t,n,r,i)}function Nl(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sa(Ic,Dc),Dc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Sa(Ic,Dc),Dc|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sa(Ic,Dc),Dc|=n;else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Sa(Ic,Dc),Dc|=r;return xl(e,t,i,n),t.child}function jl(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Sl(e,t,n,r,i){var a=Da(n)?$a:Ea.current;return a=Ta(t,a),Ps(t,i),n=go(e,t,n,r,a,i),r=vo(),null===e||yl?(is&&r&&es(t),t.flags|=1,xl(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vl(e,t,i))}function Cl(e,t,n,r,i){if(Da(n)){var a=!0;Fa(t)}else a=!1;if(Ps(t,i),null===t.stateNode)Hl(e,t),sl(t,n,r),ll(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"==typeof c&&null!==c?c=$s(c):c=Ta(t,c=Da(n)?$a:Ea.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;d||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==r||l!==c)&&ol(t,s,r,c),Rs=!1;var h=t.memoizedState;s.state=h,Us(t,r,s,i),l=t.memoizedState,o!==r||h!==l||Pa.current||Rs?("function"==typeof u&&(rl(t,n,u,r),l=t.memoizedState),(o=Rs||al(t,n,o,r,h,l,c))?(d||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Os(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:nl(t.type,o),s.props=c,d=t.pendingProps,h=s.context,"object"==typeof(l=n.contextType)&&null!==l?l=$s(l):l=Ta(t,l=Da(n)?$a:Ea.current);var p=n.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==d||h!==l)&&ol(t,s,r,l),Rs=!1,h=t.memoizedState,s.state=h,Us(t,r,s,i);var f=t.memoizedState;o!==d||h!==f||Pa.current||Rs?("function"==typeof p&&(rl(t,n,p,r),f=t.memoizedState),(c=Rs||al(t,n,c,r,h,f,l)||!1)?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return El(e,t,n,r,a,i)}function El(e,t,n,r,i,a){jl(e,t);var s=!!(128&t.flags);if(!r&&!s)return i&&Oa(t,n,!1),Vl(e,t,a);r=t.stateNode,bl.current=t;var o=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=xs(t,e.child,null,a),t.child=xs(t,null,o,a)):xl(e,t,o,a),t.memoizedState=r.state,i&&Oa(t,n,!0),t.child}function Pl(e){var t=e.stateNode;t.pendingContext?Aa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Aa(0,t.context,!1),Ys(e,t.containerInfo)}function $l(e,t,n,r,i){return ps(),fs(i),t.flags|=256,xl(e,t,n,r),t.child}var Tl,Dl,Il,Al,Rl={dehydrated:null,treeContext:null,retryLane:0};function Fl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ol(e,t,n){var r,i=t.pendingProps,a=Js.current,s=!1,o=!!(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&!!(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Sa(Js,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},1&i||null===s?s=Fu(o,i,0,null):(s.childLanes=0,s.pendingProps=o),e=Ru(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fl(n),t.memoizedState=Rl,e):Ml(t,o));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,zl(e,t,s,r=ul(Error(ae(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Fu({mode:"visible",children:r.children},i,0,null),(a=Ru(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,1&t.mode&&xs(t,e.child,null,s),t.child.memoizedState=Fl(s),t.memoizedState=Rl,a);if(!(1&t.mode))return zl(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var o=r.dgst;return r=o,zl(e,t,s,r=ul(a=Error(ae(419)),r,void 0))}if(o=0!==(s&e.childLanes),yl||o){if(null!==(r=Pc)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,As(e,i),nu(r,e,i,-1))}return mu(),zl(e,t,s,r=ul(Error(ae(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cu.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ca(i.nextSibling),ns=t,is=!0,as=null,null!==e&&(Ka[Ga++]=Za,Ka[Ga++]=Xa,Ka[Ga++]=Ya,Za=e.id,Xa=e.overflow,Ya=t),t=Ml(t,r.children),t.flags|=4096,t)}(e,t,o,i,r,a,n);if(s){s=i.fallback,o=t.mode,r=(a=e.child).sibling;var l={mode:"hidden",children:i.children};return 1&o||t.child===a?(i=Iu(a,l)).subtreeFlags=14680064&a.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null),null!==r?s=Iu(r,s):(s=Ru(s,o,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=null===(o=e.child.memoizedState)?Fl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=Rl,i}return e=(s=e.child).sibling,i=Iu(s,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ml(e,t){return(t=Fu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zl(e,t,n,r){return null!==r&&fs(r),xs(t,e.child,null,n),(e=Ml(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ll(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Es(e.return,t,n)}function Bl(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Ul(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(xl(e,t,r.children,n),2&(r=Js.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ll(e,n,t);else if(19===e.tag)Ll(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Sa(Js,r),1&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bl(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bl(t,!0,n,null,a);break;case"together":Bl(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Hl(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(ae(153));if(null!==t.child){for(n=Iu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Iu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ql(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Kl(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wl(t),null;case 1:case 17:return Da(t.type)&&Ia(),Wl(t),null;case 3:return r=t.stateNode,Zs(),ja(Pa),ja(Ea),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==as&&(su(as),as=null))),Dl(e,t),Wl(t),null;case 5:Qs(t);var i=Gs(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Il(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(ae(166));return Wl(t),null}if(e=Gs(qs.current),ds(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[ha]=t,r[pa]=a,e=!!(1&t.mode),n){case"dialog":zi("cancel",r),zi("close",r);break;case"iframe":case"object":case"embed":zi("load",r);break;case"video":case"audio":for(i=0;i<Ri.length;i++)zi(Ri[i],r);break;case"source":zi("error",r);break;case"img":case"image":case"link":zi("error",r),zi("load",r);break;case"details":zi("toggle",r);break;case"input":Ze(r,a),zi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zi("invalid",r);break;case"textarea":it(r,a),zi("invalid",r)}for(var s in bt(n,a),i=null,a)if(a.hasOwnProperty(s)){var o=a[s];"children"===s?"string"==typeof o?r.textContent!==o&&(!0!==a.suppressHydrationWarning&&Qi(r.textContent,o,e),i=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(!0!==a.suppressHydrationWarning&&Qi(r.textContent,o,e),i=["children",""+o]):oe.hasOwnProperty(s)&&null!=o&&"onScroll"===s&&zi("scroll",r)}switch(n){case"input":We(r),Je(r,a,!0);break;case"textarea":We(r),st(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Ji)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ot(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ha]=t,e[pa]=r,Tl(e,t,!1,!1),t.stateNode=e;e:{switch(s=yt(n,r),n){case"dialog":zi("cancel",e),zi("close",e),i=r;break;case"iframe":case"object":case"embed":zi("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ri.length;i++)zi(Ri[i],e);i=r;break;case"source":zi("error",e),i=r;break;case"img":case"image":case"link":zi("error",e),zi("load",e),i=r;break;case"details":zi("toggle",e),i=r;break;case"input":Ze(e,r),i=Ye(e,r),zi("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Oe({},r,{value:void 0}),zi("invalid",e);break;case"textarea":it(e,r),i=rt(e,r),zi("invalid",e)}for(a in bt(n,i),o=i)if(o.hasOwnProperty(a)){var l=o[a];"style"===a?gt(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&dt(e,l):"children"===a?"string"==typeof l?("textarea"!==n||""!==l)&&ht(e,l):"number"==typeof l&&ht(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(oe.hasOwnProperty(a)?null!=l&&"onScroll"===a&&zi("scroll",e):null!=l&&ye(e,a,l,s))}switch(n){case"input":We(e),Je(e,r,!1);break;case"textarea":We(e),st(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Ve(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?nt(e,!!r.multiple,a,!1):null!=r.defaultValue&&nt(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Ji)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wl(t),null;case 6:if(e&&null!=t.stateNode)Al(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(ae(166));if(n=Gs(Ks.current),Gs(qs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Qi(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qi(r.nodeValue,n,!!(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return Wl(t),null;case 13:if(ja(Js),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&1&t.mode&&!(128&t.flags))hs(),ps(),t.flags|=98560,a=!1;else if(a=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(ae(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(ae(317));a[ha]=t}else ps(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wl(t),a=!1}else null!==as&&(su(as),as=null),a=!0;if(!a)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Js.current?0===Ac&&(Ac=3):mu())),null!==t.updateQueue&&(t.flags|=4),Wl(t),null);case 4:return Zs(),Dl(e,t),null===e&&Ui(t.stateNode.containerInfo),Wl(t),null;case 10:return Cs(t.type._context),Wl(t),null;case 19:if(ja(Js),null===(a=t.memoizedState))return Wl(t),null;if(r=!!(128&t.flags),null===(s=a.rendering))if(r)ql(a,!1);else{if(0!==Ac||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(s=eo(e))){for(t.flags|=128,ql(a,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(s=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Sa(Js,1&Js.current|2),t.child}e=e.sibling}null!==a.tail&&Xt()>Uc&&(t.flags|=128,r=!0,ql(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ql(a,!0),null===a.tail&&"hidden"===a.tailMode&&!s.alternate&&!is)return Wl(t),null}else 2*Xt()-a.renderingStartTime>Uc&&1073741824!==n&&(t.flags|=128,r=!0,ql(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=a.last)?n.sibling=s:t.child=s,a.last=s)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xt(),t.sibling=null,n=Js.current,Sa(Js,r?1&n|2:1&n),t):(Wl(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Dc)&&(Wl(t),6&t.subtreeFlags&&(t.flags|=8192)):Wl(t),null;case 24:case 25:return null}throw Error(ae(156,t.tag))}function Gl(e,t){switch(ts(t),t.tag){case 1:return Da(t.type)&&Ia(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zs(),ja(Pa),ja(Ea),no(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qs(t),null;case 13:if(ja(Js),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(ae(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ja(Js),null;case 4:return Zs(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Tl=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Dl=function(){},Il=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gs(qs.current);var a,s=null;switch(n){case"input":i=Ye(e,i),r=Ye(e,r),s=[];break;case"select":i=Oe({},i,{value:void 0}),r=Oe({},r,{value:void 0}),s=[];break;case"textarea":i=rt(e,i),r=rt(e,r),s=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Ji)}for(c in bt(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(oe.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(o=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(null!=l||null!=o))if("style"===c)if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(s=s||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(s=s||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(oe.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&zi("scroll",e),s||o===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},Al=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yl=!1,Zl=!1,Xl="function"==typeof WeakSet?WeakSet:Set,Ql=null;function Jl(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){Nu(e,t,r)}else n.current=null}function ec(e,t,n){try{n()}catch(r){Nu(e,t,r)}}var tc=!1;function nc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ec(t,n,a)}i=i.next}while(i!==r)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ic(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function ac(e){var t=e.alternate;null!==t&&(e.alternate=null,ac(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[pa],delete t[ma],delete t[ga],delete t[va])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sc(e){return 5===e.tag||3===e.tag||4===e.tag}function oc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Ji));else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}function cc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}var uc=null,dc=!1;function hc(e,t,n){for(n=n.child;null!==n;)pc(e,t,n),n=n.sibling}function pc(e,t,n){if(sn&&"function"==typeof sn.onCommitFiberUnmount)try{sn.onCommitFiberUnmount(an,n)}catch(o){}switch(n.tag){case 5:Zl||Jl(n,t);case 6:var r=uc,i=dc;uc=null,hc(e,t,n),dc=i,null!==(uc=r)&&(dc?(e=uc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):uc.removeChild(n.stateNode));break;case 18:null!==uc&&(dc?(e=uc,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),Hn(e)):la(uc,n.stateNode));break;case 4:r=uc,i=dc,uc=n.stateNode.containerInfo,dc=!0,hc(e,t,n),uc=r,dc=i;break;case 0:case 11:case 14:case 15:if(!Zl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,void 0!==s&&(2&a||4&a)&&ec(n,t,s),i=i.next}while(i!==r)}hc(e,t,n);break;case 1:if(!Zl&&(Jl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Nu(n,t,o)}hc(e,t,n);break;case 21:hc(e,t,n);break;case 22:1&n.mode?(Zl=(r=Zl)||null!==n.memoizedState,hc(e,t,n),Zl=r):hc(e,t,n);break;default:hc(e,t,n)}}function fc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xl),t.forEach(function(t){var r=Eu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function mc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,o=s;e:for(;null!==o;){switch(o.tag){case 5:uc=o.stateNode,dc=!1;break e;case 3:case 4:uc=o.stateNode.containerInfo,dc=!0;break e}o=o.return}if(null===uc)throw Error(ae(160));pc(a,s,i),uc=null,dc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){Nu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gc(t,e),t=t.sibling}function gc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),vc(e),4&r){try{nc(3,e,e.return),rc(3,e)}catch(ym){Nu(e,e.return,ym)}try{nc(5,e,e.return)}catch(ym){Nu(e,e.return,ym)}}break;case 1:mc(t,e),vc(e),512&r&&null!==n&&Jl(n,n.return);break;case 5:if(mc(t,e),vc(e),512&r&&null!==n&&Jl(n,n.return),32&e.flags){var i=e.stateNode;try{ht(i,"")}catch(ym){Nu(e,e.return,ym)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===a.type&&null!=a.name&&Xe(i,a),yt(o,s);var c=yt(o,a);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];"style"===u?gt(i,d):"dangerouslySetInnerHTML"===u?dt(i,d):"children"===u?ht(i,d):ye(i,u,d,c)}switch(o){case"input":Qe(i,a);break;case"textarea":at(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?nt(i,!!a.multiple,p,!1):h!==!!a.multiple&&(null!=a.defaultValue?nt(i,!!a.multiple,a.defaultValue,!0):nt(i,!!a.multiple,a.multiple?[]:"",!1))}i[pa]=a}catch(ym){Nu(e,e.return,ym)}}break;case 6:if(mc(t,e),vc(e),4&r){if(null===e.stateNode)throw Error(ae(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(ym){Nu(e,e.return,ym)}}break;case 3:if(mc(t,e),vc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Hn(t.containerInfo)}catch(ym){Nu(e,e.return,ym)}break;case 4:default:mc(t,e),vc(e);break;case 13:mc(t,e),vc(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Bc=Xt())),4&r&&fc(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Zl=(c=Zl)||u,mc(t,e),Zl=c):mc(t,e),vc(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&1&e.mode)for(Ql=e,u=e.child;null!==u;){for(d=Ql=u;null!==Ql;){switch(p=(h=Ql).child,h.tag){case 0:case 11:case 14:case 15:nc(4,h,h.return);break;case 1:Jl(h,h.return);var f=h.stateNode;if("function"==typeof f.componentWillUnmount){r=h,n=h.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(ym){Nu(r,n,ym)}}break;case 5:Jl(h,h.return);break;case 22:if(null!==h.memoizedState){_c(d);continue}}null!==p?(p.return=h,Ql=p):_c(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{i=d.stateNode,c?"function"==typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(o=d.stateNode,s=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=mt("display",s))}catch(ym){Nu(e,e.return,ym)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(ym){Nu(e,e.return,ym)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mc(t,e),vc(e),4&r&&fc(e);case 21:}}function vc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sc(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(ht(i,""),r.flags&=-33),cc(e,oc(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;lc(e,oc(e),a);break;default:throw Error(ae(161))}}catch(s){Nu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bc(e,t,n){Ql=e,yc(e)}function yc(e,t,n){for(var r=!!(1&e.mode);null!==Ql;){var i=Ql,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Yl;if(!s){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Zl;o=Yl;var c=Zl;if(Yl=s,(Zl=l)&&!c)for(Ql=i;null!==Ql;)l=(s=Ql).child,22===s.tag&&null!==s.memoizedState?wc(i):null!==l?(l.return=s,Ql=l):wc(i);for(;null!==a;)Ql=a,yc(a),a=a.sibling;Ql=i,Yl=o,Zl=c}xc(e)}else 8772&i.subtreeFlags&&null!==a?(a.return=i,Ql=a):xc(e)}}function xc(e){for(;null!==Ql;){var t=Ql;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Zl||rc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:nl(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Hs(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hs(t,s,n)}break;case 5:var o=t.stateNode;if(null===n&&4&t.flags){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Hn(d)}}}break;default:throw Error(ae(163))}Zl||512&t.flags&&ic(t)}catch(h){Nu(t,t.return,h)}}if(t===e){Ql=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ql=n;break}Ql=t.return}}function _c(e){for(;null!==Ql;){var t=Ql;if(t===e){Ql=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ql=n;break}Ql=t.return}}function wc(e){for(;null!==Ql;){var t=Ql;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rc(4,t)}catch(l){Nu(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Nu(t,i,l)}}var a=t.return;try{ic(t)}catch(l){Nu(t,a,l)}break;case 5:var s=t.return;try{ic(t)}catch(l){Nu(t,s,l)}}}catch(l){Nu(t,t.return,l)}if(t===e){Ql=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Ql=o;break}Ql=t.return}}var kc,Nc=Math.ceil,jc=xe.ReactCurrentDispatcher,Sc=xe.ReactCurrentOwner,Cc=xe.ReactCurrentBatchConfig,Ec=0,Pc=null,$c=null,Tc=0,Dc=0,Ic=Na(0),Ac=0,Rc=null,Fc=0,Oc=0,Mc=0,zc=null,Lc=null,Bc=0,Uc=1/0,Hc=null,Vc=!1,qc=null,Wc=null,Kc=!1,Gc=null,Yc=0,Zc=0,Xc=null,Qc=-1,Jc=0;function eu(){return 6&Ec?Xt():-1!==Qc?Qc:Qc=Xt()}function tu(e){return 1&e.mode?2&Ec&&0!==Tc?Tc&-Tc:null!==ms.transition?(0===Jc&&(Jc=gn()),Jc):0!==(e=xn)?e:e=void 0===(e=window.event)?16:Xn(e.type):1}function nu(e,t,n,r){if(50<Zc)throw Zc=0,Xc=null,Error(ae(185));bn(e,n,r),2&Ec&&e===Pc||(e===Pc&&(!(2&Ec)&&(Oc|=n),4===Ac&&ou(e,Tc)),ru(e,r),1===n&&0===Ec&&!(1&t.mode)&&(Uc=Xt()+500,za&&Ua()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-on(a),o=1<<s,l=i[s];-1===l?0!==(o&n)&&0===(o&r)||(i[s]=fn(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=pn(e,e===Pc?Tc:0);if(0===r)null!==n&&Gt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Gt(n),1===t)0===e.tag?function(e){za=!0,Ba(e)}(lu.bind(null,e)):Ba(lu.bind(null,e)),sa(function(){!(6&Ec)&&Ua()}),n=null;else{switch(_n(r)){case 1:n=Jt;break;case 4:n=en;break;case 16:default:n=tn;break;case 536870912:n=rn}n=Pu(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Qc=-1,Jc=0,6&Ec)throw Error(ae(327));var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var r=pn(e,e===Pc?Tc:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var i=Ec;Ec|=2;var a=fu();for(Pc===e&&Tc===t||(Hc=null,Uc=Xt()+500,hu(e,t));;)try{bu();break}catch(o){pu(e,o)}Ss(),jc.current=a,Ec=i,null!==$c?t=0:(Pc=null,Tc=0,t=Ac)}if(0!==t){if(2===t&&(0!==(i=mn(e))&&(r=i,t=au(e,i))),1===t)throw n=Rc,hu(e,0),ou(e,r),ru(e,Xt()),n;if(6===t)ou(e,r);else{if(i=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!oi(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=gu(e,r),2===t&&(a=mn(e),0!==a&&(r=a,t=au(e,a))),1!==t)))throw n=Rc,hu(e,0),ou(e,r),ru(e,Xt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ae(345));case 2:case 5:_u(e,Lc,Hc);break;case 3:if(ou(e,r),(130023424&r)===r&&10<(t=Bc+500-Xt())){if(0!==pn(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ra(_u.bind(null,e,Lc,Hc),t);break}_u(e,Lc,Hc);break;case 4:if(ou(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-on(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Xt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nc(r/1960))-r)){e.timeoutHandle=ra(_u.bind(null,e,Lc,Hc),r);break}_u(e,Lc,Hc);break;default:throw Error(ae(329))}}}return ru(e,Xt()),e.callbackNode===n?iu.bind(null,e):null}function au(e,t){var n=zc;return e.current.memoizedState.isDehydrated&&(hu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=Lc,Lc=n,null!==t&&su(t)),e}function su(e){null===Lc?Lc=e:Lc.push.apply(Lc,e)}function ou(e,t){for(t&=~Mc,t&=~Oc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-on(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(6&Ec)throw Error(ae(327));wu();var t=pn(e,0);if(!(1&t))return ru(e,Xt()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=mn(e);0!==r&&(t=r,n=au(e,r))}if(1===n)throw n=Rc,hu(e,0),ou(e,t),ru(e,Xt()),n;if(6===n)throw Error(ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_u(e,Lc,Hc),ru(e,Xt()),null}function cu(e,t){var n=Ec;Ec|=1;try{return e(t)}finally{0===(Ec=n)&&(Uc=Xt()+500,za&&Ua())}}function uu(e){null!==Gc&&0===Gc.tag&&!(6&Ec)&&wu();var t=Ec;Ec|=1;var n=Cc.transition,r=xn;try{if(Cc.transition=null,xn=1,e)return e()}finally{xn=r,Cc.transition=n,!(6&(Ec=t))&&Ua()}}function du(){Dc=Ic.current,ja(Ic)}function hu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ia(n)),null!==$c)for(n=$c.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ia();break;case 3:Zs(),ja(Pa),ja(Ea),no();break;case 5:Qs(r);break;case 4:Zs();break;case 13:case 19:ja(Js);break;case 10:Cs(r.type._context);break;case 22:case 23:du()}n=n.return}if(Pc=e,$c=e=Iu(e.current,null),Tc=Dc=t,Ac=0,Rc=null,Mc=Oc=Fc=0,Lc=zc=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(r=(n=Ts[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}Ts=null}return e}function pu(e,t){for(;;){var n=$c;try{if(Ss(),ro.current=Qo,co){for(var r=so.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(ao=0,lo=oo=so=null,uo=!1,ho=0,Sc.current=null,null===n||null===n.return){Ac=1,Rc=t,$c=null;break}e:{var a=e,s=n.return,o=n,l=t;if(t=Tc,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,u=o,d=u.tag;if(!(1&u.mode||0!==d&&11!==d&&15!==d)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=gl(s);if(null!==p){p.flags&=-257,vl(p,s,o,0,t),1&p.mode&&ml(a,c,t),l=c;var f=(t=p).updateQueue;if(null===f){var m=new Set;m.add(l),t.updateQueue=m}else f.add(l);break e}if(!(1&t)){ml(a,c,t),mu();break e}l=Error(ae(426))}else if(is&&1&o.mode){var g=gl(s);if(null!==g){!(65536&g.flags)&&(g.flags|=256),vl(g,s,o,0,t),fs(cl(l,o));break e}}a=l=cl(l,o),4!==Ac&&(Ac=2),null===zc?zc=[a]:zc.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bs(a,pl(0,l,t));break e;case 1:o=l;var v=a.type,b=a.stateNode;if(!(128&a.flags||"function"!=typeof v.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==Wc&&Wc.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Bs(a,fl(a,o,t));break e}}a=a.return}while(null!==a)}xu(n)}catch(y){t=y,$c===n&&null!==n&&($c=n=n.return);continue}break}}function fu(){var e=jc.current;return jc.current=Qo,null===e?Qo:e}function mu(){0!==Ac&&3!==Ac&&2!==Ac||(Ac=4),null===Pc||!(268435455&Fc)&&!(268435455&Oc)||ou(Pc,Tc)}function gu(e,t){var n=Ec;Ec|=2;var r=fu();for(Pc===e&&Tc===t||(Hc=null,hu(e,t));;)try{vu();break}catch(i){pu(e,i)}if(Ss(),Ec=n,jc.current=r,null!==$c)throw Error(ae(261));return Pc=null,Tc=0,Ac}function vu(){for(;null!==$c;)yu($c)}function bu(){for(;null!==$c&&!Yt();)yu($c)}function yu(e){var t=kc(e.alternate,e,Dc);e.memoizedProps=e.pendingProps,null===t?xu(e):$c=t,Sc.current=null}function xu(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Gl(n,t)))return n.flags&=32767,void($c=n);if(null===e)return Ac=6,void($c=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Kl(n,t,Dc)))return void($c=n);if(null!==(t=t.sibling))return void($c=t);$c=t=e}while(null!==t);0===Ac&&(Ac=5)}function _u(e,t,n){var r=xn,i=Cc.transition;try{Cc.transition=null,xn=1,function(e,t,n,r){do{wu()}while(null!==Gc);if(6&Ec)throw Error(ae(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ae(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-on(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,a),e===Pc&&($c=Pc=null,Tc=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Kc||(Kc=!0,Pu(tn,function(){return wu(),null})),a=!!(15990&n.flags),!!(15990&n.subtreeFlags)||a){a=Cc.transition,Cc.transition=null;var s=xn;xn=1;var o=Ec;Ec|=4,Sc.current=null,function(e,t){if(ea=qn,pi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var s=0,o=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(o=s+i),d!==a||0!==r&&3!==d.nodeType||(l=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===i&&(o=s),h===a&&++u===r&&(l=s),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}n=-1===o||-1===l?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},qn=!1,Ql=t;null!==Ql;)if(e=(t=Ql).child,1028&t.subtreeFlags&&null!==e)e.return=t,Ql=e;else for(;null!==Ql;){t=Ql;try{var f=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,g=f.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:nl(t.type,m),g);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(ae(163))}}catch(x){Nu(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Ql=e;break}Ql=t.return}f=tc,tc=!1}(e,n),gc(n,e),fi(ta),qn=!!ea,ta=ea=null,e.current=n,bc(n),Zt(),Ec=o,xn=s,Cc.transition=a}else e.current=n;if(Kc&&(Kc=!1,Gc=e,Yc=i),a=e.pendingLanes,0===a&&(Wc=null),function(e){if(sn&&"function"==typeof sn.onCommitFiberRoot)try{sn.onCommitFiberRoot(an,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),ru(e,Xt()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vc)throw Vc=!1,e=qc,qc=null,e;!!(1&Yc)&&0!==e.tag&&wu(),a=e.pendingLanes,1&a?e===Xc?Zc++:(Zc=0,Xc=e):Zc=0,Ua()}(e,t,n,r)}finally{Cc.transition=i,xn=r}return null}function wu(){if(null!==Gc){var e=_n(Yc),t=Cc.transition,n=xn;try{if(Cc.transition=null,xn=16>e?16:e,null===Gc)var r=!1;else{if(e=Gc,Gc=null,Yc=0,6&Ec)throw Error(ae(331));var i=Ec;for(Ec|=4,Ql=e.current;null!==Ql;){var a=Ql,s=a.child;if(16&Ql.flags){var o=a.deletions;if(null!==o){for(var l=0;l<o.length;l++){var c=o[l];for(Ql=c;null!==Ql;){var u=Ql;switch(u.tag){case 0:case 11:case 15:nc(8,u,a)}var d=u.child;if(null!==d)d.return=u,Ql=d;else for(;null!==Ql;){var h=(u=Ql).sibling,p=u.return;if(ac(u),u===c){Ql=null;break}if(null!==h){h.return=p,Ql=h;break}Ql=p}}}var f=a.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Ql=a}}if(2064&a.subtreeFlags&&null!==s)s.return=a,Ql=s;else e:for(;null!==Ql;){if(2048&(a=Ql).flags)switch(a.tag){case 0:case 11:case 15:nc(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Ql=v;break e}Ql=a.return}}var b=e.current;for(Ql=b;null!==Ql;){var y=(s=Ql).child;if(2064&s.subtreeFlags&&null!==y)y.return=s,Ql=y;else e:for(s=b;null!==Ql;){if(2048&(o=Ql).flags)try{switch(o.tag){case 0:case 11:case 15:rc(9,o)}}catch(_){Nu(o,o.return,_)}if(o===s){Ql=null;break e}var x=o.sibling;if(null!==x){x.return=o.return,Ql=x;break e}Ql=o.return}}if(Ec=i,Ua(),sn&&"function"==typeof sn.onPostCommitFiberRoot)try{sn.onPostCommitFiberRoot(an,e)}catch(_){}r=!0}return r}finally{xn=n,Cc.transition=t}}return!1}function ku(e,t,n){e=zs(e,t=pl(0,t=cl(n,t),1),1),t=eu(),null!==e&&(bn(e,1,t),ru(e,t))}function Nu(e,t,n){if(3===e.tag)ku(e,e,n);else for(;null!==t;){if(3===t.tag){ku(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Wc||!Wc.has(r))){t=zs(t,e=fl(t,e=cl(n,e),1),1),e=eu(),null!==t&&(bn(t,1,e),ru(t,e));break}}t=t.return}}function ju(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Pc===e&&(Tc&n)===n&&(4===Ac||3===Ac&&(130023424&Tc)===Tc&&500>Xt()-Bc?hu(e,0):Mc|=n),ru(e,t)}function Su(e,t){0===t&&(1&e.mode?(t=dn,!(130023424&(dn<<=1))&&(dn=4194304)):t=1);var n=eu();null!==(e=As(e,t))&&(bn(e,t,n),ru(e,n))}function Cu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Su(e,n)}function Eu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ae(314))}null!==r&&r.delete(t),Su(e,n)}function Pu(e,t){return Kt(e,t)}function $u(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tu(e,t,n,r){return new $u(e,t,n,r)}function Du(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Iu(e,t){var n=e.alternate;return null===n?((n=Tu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Au(e,t,n,r,i,a){var s=2;if(r=e,"function"==typeof e)Du(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case ke:return Ru(n.children,i,a,t);case Ne:s=8,i|=8;break;case je:return(e=Tu(12,n,t,2|i)).elementType=je,e.lanes=a,e;case Pe:return(e=Tu(13,n,t,i)).elementType=Pe,e.lanes=a,e;case $e:return(e=Tu(19,n,t,i)).elementType=$e,e.lanes=a,e;case Ie:return Fu(n,i,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Se:s=10;break e;case Ce:s=9;break e;case Ee:s=11;break e;case Te:s=14;break e;case De:s=16,r=null;break e}throw Error(ae(130,null==e?e:typeof e,""))}return(t=Tu(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Ru(e,t,n,r){return(e=Tu(7,e,r,t)).lanes=n,e}function Fu(e,t,n,r){return(e=Tu(22,e,r,t)).elementType=Ie,e.lanes=n,e.stateNode={isHidden:!1},e}function Ou(e,t,n){return(e=Tu(6,e,null,t)).lanes=n,e}function Mu(e,t,n){return(t=Tu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vn(0),this.expirationTimes=vn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vn(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Lu(e,t,n,r,i,a,s,o,l){return e=new zu(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Tu(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fs(a),e}function Bu(e){if(!e)return Ca;e:{if(Ut(e=e._reactInternals)!==e||1!==e.tag)throw Error(ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Da(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(ae(171))}if(1===e.tag){var n=e.type;if(Da(n))return Ra(e,n,t)}return t}function Uu(e,t,n,r,i,a,s,o,l){return(e=Lu(n,r,!0,e,0,a,0,o,l)).context=Bu(null),n=e.current,(a=Ms(r=eu(),i=tu(n))).callback=null!=t?t:null,zs(n,a,i),e.current.lanes=i,bn(e,i,r),ru(e,r),e}function Hu(e,t,n,r){var i=t.current,a=eu(),s=tu(i);return n=Bu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ms(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zs(i,t,s))&&(nu(e,i,s,a),Ls(e,i,s)),s}function Vu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wu(e,t){qu(e,t),(e=e.alternate)&&qu(e,t)}kc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pa.current)yl=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return yl=!1,function(e,t,n){switch(t.tag){case 3:Pl(t),ps();break;case 5:Xs(t);break;case 1:Da(t.type)&&Fa(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Sa(ws,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Sa(Js,1&Js.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ol(e,t,n):(Sa(Js,1&Js.current),null!==(e=Vl(e,t,n))?e.sibling:null);Sa(Js,1&Js.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Ul(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Sa(Js,Js.current),r)break;return null;case 22:case 23:return t.lanes=0,Nl(e,t,n)}return Vl(e,t,n)}(e,t,n);yl=!!(131072&e.flags)}else yl=!1,is&&1048576&t.flags&&Ja(t,Wa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hl(e,t),e=t.pendingProps;var i=Ta(t,Ea.current);Ps(t,n),i=go(null,t,r,e,i,n);var a=vo();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Da(r)?(a=!0,Fa(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Fs(t),i.updater=il,t.stateNode=i,i._reactInternals=t,ll(t,r,e,n),t=El(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),xl(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hl(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Du(e)?1:0;if(null!=e){if((e=e.$$typeof)===Ee)return 11;if(e===Te)return 14}return 2}(r),e=nl(r,e),i){case 0:t=Sl(null,t,r,e,n);break e;case 1:t=Cl(null,t,r,e,n);break e;case 11:t=_l(null,t,r,e,n);break e;case 14:t=wl(null,t,r,nl(r.type,e),n);break e}throw Error(ae(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Sl(e,t,r,i=t.elementType===r?i:nl(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cl(e,t,r,i=t.elementType===r?i:nl(r,i),n);case 3:e:{if(Pl(t),null===e)throw Error(ae(387));r=t.pendingProps,i=(a=t.memoizedState).element,Os(e,t),Us(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=$l(e,t,r,n,i=cl(Error(ae(423)),t));break e}if(r!==i){t=$l(e,t,r,n,i=cl(Error(ae(424)),t));break e}for(rs=ca(t.stateNode.containerInfo.firstChild),ns=t,is=!0,as=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=Vl(e,t,n);break e}xl(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,na(r,i)?s=null:null!==a&&na(r,a)&&(t.flags|=32),jl(e,t),xl(e,t,s,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ol(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xs(t,null,r,n):xl(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_l(e,t,r,i=t.elementType===r?i:nl(r,i),n);case 7:return xl(e,t,t.pendingProps,n),t.child;case 8:case 12:return xl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Sa(ws,r._currentValue),r._currentValue=s,null!==a)if(oi(a.value,s)){if(a.children===i.children&&!Pa.current){t=Vl(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var o=a.dependencies;if(null!==o){s=a.child;for(var l=o.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=Ms(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Es(a.return,n,t),o.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(ae(341));s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),Es(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xl(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ps(t,n),r=r(i=$s(i)),t.flags|=1,xl(e,t,r,n),t.child;case 14:return i=nl(r=t.type,t.pendingProps),wl(e,t,r,i=nl(r.type,i),n);case 15:return kl(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:nl(r,i),Hl(e,t),t.tag=1,Da(r)?(e=!0,Fa(t)):e=!1,Ps(t,n),sl(t,r,i),ll(t,r,i,n),El(null,t,r,!0,e,n);case 19:return Ul(e,t,n);case 22:return Nl(e,t,n)}throw Error(ae(156,t.tag))};var Ku="function"==typeof reportError?reportError:function(e){console.error(e)};function Gu(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qu(){}function Ju(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if("function"==typeof i){var o=i;i=function(){var e=Vu(s);o.call(e)}}Hu(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"==typeof r){var a=r;r=function(){var e=Vu(s);a.call(e)}}var s=Uu(t,r,e,0,null,!1,0,"",Qu);return e._reactRootContainer=s,e[fa]=s.current,Ui(8===e.nodeType?e.parentNode:e),uu(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var o=r;r=function(){var e=Vu(l);o.call(e)}}var l=Lu(e,0,!1,null,0,!1,0,"",Qu);return e._reactRootContainer=l,e[fa]=l.current,Ui(8===e.nodeType?e.parentNode:e),uu(function(){Hu(t,l,n,r)}),l}(n,t,e,i,r);return Vu(s)}Yu.prototype.render=Gu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(ae(409));Hu(e,t,null,null)},Yu.prototype.unmount=Gu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uu(function(){Hu(null,e,null,null)}),t[fa]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=jn();e={blockedOn:null,target:e,priority:t};for(var n=0;n<An.length&&0!==t&&t<An[n].priority;n++);An.splice(n,0,e),0===n&&Mn(e)}},wn=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=hn(t.pendingLanes);0!==n&&(yn(t,1|n),ru(t,Xt()),!(6&Ec)&&(Uc=Xt()+500,Ua()))}break;case 13:uu(function(){var t=As(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}}),Wu(e,1)}},kn=function(e){if(13===e.tag){var t=As(e,134217728);if(null!==t)nu(t,e,134217728,eu());Wu(e,134217728)}},Nn=function(e){if(13===e.tag){var t=tu(e),n=As(e,t);if(null!==n)nu(n,e,t,eu());Wu(e,t)}},jn=function(){return xn},Sn=function(e,t){var n=xn;try{return xn=e,t()}finally{xn=n}},wt=function(e,t,n){switch(t){case"input":if(Qe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_a(r);if(!i)throw Error(ae(90));Ke(r),Qe(r,i)}}}break;case"textarea":at(e,n);break;case"select":null!=(t=n.value)&&nt(e,!!n.multiple,t,!1)}},Et=cu,Pt=uu;var ed={usingClientEntryPoint:!1,Events:[ya,xa,_a,St,Ct,cu]},td={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xe.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qt(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{an=rd.inject(nd),sn=rd}catch(ut){}}J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,J.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zu(t))throw Error(ae(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:we,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},J.createRoot=function(e,t){if(!Zu(e))throw Error(ae(299));var n=!1,r="",i=Ku;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Lu(e,1,!1,null,0,n,0,r,i),e[fa]=t.current,Ui(8===e.nodeType?e.parentNode:e),new Gu(t)},J.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(ae(188));throw e=Object.keys(e).join(","),Error(ae(268,e))}return e=null===(e=qt(t))?null:e.stateNode},J.flushSync=function(e){return uu(e)},J.hydrate=function(e,t,n){if(!Xu(t))throw Error(ae(200));return Ju(null,e,t,!0,n)},J.hydrateRoot=function(e,t,n){if(!Zu(e))throw Error(ae(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Ku;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Uu(t,null,e,1,null!=n?n:null,i,0,a,s),e[fa]=t.current,Ui(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yu(t)},J.render=function(e,t,n){if(!Xu(t))throw Error(ae(200));return Ju(null,e,t,!1,n)},J.unmountComponentAtNode=function(e){if(!Xu(e))throw Error(ae(40));return!!e._reactRootContainer&&(uu(function(){Ju(null,null,e,!1,function(){e._reactRootContainer=null,e[fa]=null})}),!0)},J.unstable_batchedUpdates=cu,J.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xu(n))throw Error(ae(200));if(null==e||void 0===e._reactInternals)throw Error(ae(38));return Ju(e,t,n,!1,r)},J.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),Q.exports=J;var id,ad=Q.exports;id=ad.createRoot,ad.hydrateRoot;var sd="undefined"!=typeof window?window:void 0,od="undefined"!=typeof globalThis?globalThis:sd;"undefined"==typeof self&&(od.self=od),"undefined"==typeof File&&(od.File=function(){});var ld=Array.prototype,cd=ld.forEach,ud=ld.indexOf,dd=null==od?void 0:od.navigator,hd=null==od?void 0:od.document,pd=null==od?void 0:od.location,fd=null==od?void 0:od.fetch,md=null!=od&&od.XMLHttpRequest&&"withCredentials"in new od.XMLHttpRequest?od.XMLHttpRequest:void 0,gd=null==od?void 0:od.AbortController,vd=null==dd?void 0:dd.userAgent,bd=null!=sd?sd:{},yd={DEBUG:!1,LIB_VERSION:"1.319.2"};function xd(e,t,n,r,i,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(r,i)}function _d(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){xd(a,r,i,s,o,"next",e)}function o(e){xd(a,r,i,s,o,"throw",e)}s(void 0)})}}function wd(){return wd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wd.apply(null,arguments)}function kd(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}var Nd=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],jd=function(e,t){if(void 0===t&&(t=[]),!e)return!1;var n=e.toLowerCase();return Nd.concat(t).some(e=>{var t=e.toLowerCase();return-1!==n.indexOf(t)})},Sd=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function Cd(e,t){return-1!==e.indexOf(t)}var Ed=function(e){return e.trim()},Pd=function(e){return e.replace(/^\$/,"")},$d=Array.isArray,Td=Object.prototype,Dd=Td.hasOwnProperty,Id=Td.toString,Ad=$d||function(e){return"[object Array]"===Id.call(e)},Rd=e=>"function"==typeof e,Fd=e=>e===Object(e)&&!Ad(e),Od=e=>{if(Fd(e)){for(var t in e)if(Dd.call(e,t))return!1;return!0}return!1},Md=e=>void 0===e,zd=e=>"[object String]"==Id.call(e),Ld=e=>zd(e)&&0===e.trim().length,Bd=e=>null===e,Ud=e=>Md(e)||Bd(e),Hd=e=>"[object Number]"==Id.call(e)&&e==e,Vd=e=>Hd(e)&&e>0,qd=e=>"[object Boolean]"===Id.call(e),Wd=e=>Cd(Sd,e);function Kd(e){return null===e||"object"!=typeof e}function Gd(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function Yd(e){return!Md(Event)&&function(e,t){try{return e instanceof t}catch(n){return!1}}(e,Event)}var Zd=[!0,"true",1,"1","yes"],Xd=e=>Cd(Zd,e),Qd=[!1,"false",0,"0","no"];function Jd(e,t,n,r,i){return t>n&&(r.warn("min cannot be greater than max."),t=n),Hd(e)?e>n?(r.warn(" cannot be  greater than max: "+n+". Using max value instead."),n):e<t?(r.warn(" cannot be less than min: "+t+". Using min value instead."),t):e:(r.warn(" must be a number. using max or fallback. max: "+n+", fallback: "+i),Jd(i||n,t,n,r))}class eh{constructor(e){this.t={},this.i=e.i,this.o=Jd(e.bucketSize,0,100,e.h),this.m=Jd(e.refillRate,0,this.o,e.h),this.$=Jd(e.refillInterval,0,864e5,e.h)}S(e,t){var n=t-e.lastAccess,r=Math.floor(n/this.$);if(r>0){var i=r*this.m;e.tokens=Math.min(e.tokens+i,this.o),e.lastAccess=e.lastAccess+r*this.$}}consumeRateLimit(e){var t,n=Date.now(),r=String(e),i=this.t[r];return i?this.S(i,n):(i={tokens:this.o,lastAccess:n},this.t[r]=i),0===i.tokens||(i.tokens--,0===i.tokens&&(null==(t=this.i)||t.call(this,e)),0===i.tokens)}stop(){this.t={}}}var th,nh,rh,ih="Mobile",ah="iOS",sh="Android",oh="Tablet",lh=sh+" "+oh,ch="iPad",uh="Apple",dh=uh+" Watch",hh="Safari",ph="BlackBerry",fh="Samsung",mh=fh+"Browser",gh=fh+" Internet",vh="Chrome",bh=vh+" OS",yh=vh+" "+ah,xh="Internet Explorer",_h=xh+" "+ih,wh="Opera",kh=wh+" Mini",Nh="Edge",jh="Microsoft "+Nh,Sh="Firefox",Ch=Sh+" "+ah,Eh="Nintendo",Ph="PlayStation",$h="Xbox",Th=sh+" "+ih,Dh=ih+" "+hh,Ih="Windows",Ah=Ih+" Phone",Rh="Nokia",Fh="Ouya",Oh="Generic",Mh=Oh+" "+ih.toLowerCase(),zh=Oh+" "+oh.toLowerCase(),Lh="Konqueror",Bh="(\\d+(\\.\\d+)?)",Uh=new RegExp("Version/"+Bh),Hh=new RegExp($h,"i"),Vh=new RegExp(Ph+" \\w+","i"),qh=new RegExp(Eh+" \\w+","i"),Wh=new RegExp(ph+"|PlayBook|BB10","i"),Kh={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},Gh=function(e,t){return t=t||"",Cd(e," OPR/")&&Cd(e,"Mini")?kh:Cd(e," OPR/")?wh:Wh.test(e)?ph:Cd(e,"IE"+ih)||Cd(e,"WPDesktop")?_h:Cd(e,mh)?gh:Cd(e,Nh)||Cd(e,"Edg/")?jh:Cd(e,"FBIOS")?"Facebook "+ih:Cd(e,"UCWEB")||Cd(e,"UCBrowser")?"UC Browser":Cd(e,"CriOS")?yh:Cd(e,"CrMo")||Cd(e,vh)?vh:Cd(e,sh)&&Cd(e,hh)?Th:Cd(e,"FxiOS")?Ch:Cd(e.toLowerCase(),Lh.toLowerCase())?Lh:((e,t)=>{return t&&Cd(t,uh)||Cd(n=e,hh)&&!Cd(n,vh)&&!Cd(n,sh);var n})(e,t)?Cd(e,ih)?Dh:hh:Cd(e,Sh)?Sh:Cd(e,"MSIE")||Cd(e,"Trident/")?xh:Cd(e,"Gecko")?Sh:""},Yh={[_h]:[new RegExp("rv:"+Bh)],[jh]:[new RegExp(Nh+"?\\/"+Bh)],[vh]:[new RegExp("("+vh+"|CrMo)\\/"+Bh)],[yh]:[new RegExp("CriOS\\/"+Bh)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+Bh)],[hh]:[Uh],[Dh]:[Uh],[wh]:[new RegExp("(Opera|OPR)\\/"+Bh)],[Sh]:[new RegExp(Sh+"\\/"+Bh)],[Ch]:[new RegExp("FxiOS\\/"+Bh)],[Lh]:[new RegExp("Konqueror[:/]?"+Bh,"i")],[ph]:[new RegExp(ph+" "+Bh),Uh],[Th]:[new RegExp("android\\s"+Bh,"i")],[gh]:[new RegExp(mh+"\\/"+Bh)],[xh]:[new RegExp("(rv:|MSIE )"+Bh)],Mozilla:[new RegExp("rv:"+Bh)]},Zh=function(e,t){var n=Gh(e,t),r=Yh[n];if(Md(r))return null;for(var i=0;i<r.length;i++){var a=r[i],s=e.match(a);if(s)return parseFloat(s[s.length-2])}return null},Xh=[[new RegExp($h+"; "+$h+" (.*?)[);]","i"),e=>[$h,e&&e[1]||""]],[new RegExp(Eh,"i"),[Eh,""]],[new RegExp(Ph,"i"),[Ph,""]],[Wh,[ph,""]],[new RegExp(Ih,"i"),(e,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[Ah,""];if(new RegExp(ih).test(t)&&!/IEMobile\b/.test(t))return[Ih+" "+ih,""];var n=/Windows NT ([0-9.]+)/i.exec(t);if(n&&n[1]){var r=n[1],i=Kh[r]||"";return/arm/i.test(t)&&(i="RT"),[Ih,i]}return[Ih,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,e=>{if(e&&e[3]){var t=[e[3],e[4],e[5]||"0"];return[ah,t.join(".")]}return[ah,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,e=>{var t="";return e&&e.length>=3&&(t=Md(e[2])?e[3]:e[2]),["watchOS",t]}],[new RegExp("("+sh+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+sh+")","i"),e=>{if(e&&e[2]){var t=[e[2],e[3],e[4]||"0"];return[sh,t.join(".")]}return[sh,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,e=>{var t=["Mac OS X",""];if(e&&e[1]){var n=[e[1],e[2],e[3]||"0"];t[1]=n.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[bh,""]],[/Linux|debian/i,["Linux",""]]],Qh=function(e){return qh.test(e)?Eh:Vh.test(e)?Ph:Hh.test(e)?$h:new RegExp(Fh,"i").test(e)?Fh:new RegExp("("+Ah+"|WPDesktop)","i").test(e)?Ah:/iPad/.test(e)?ch:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?dh:Wh.test(e)?ph:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":new RegExp(Rh,"i").test(e)?Rh:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?new RegExp(ih).test(e)&&!/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)||/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?sh:lh:new RegExp("(pda|"+ih+")","i").test(e)?Mh:new RegExp(oh,"i").test(e)&&!new RegExp(oh+" pc","i").test(e)?zh:""},Jh=e=>e instanceof Error;function ep(e){var t=globalThis._posthogChunkIds;if(t){var n=Object.keys(t);return rh&&n.length===nh||(nh=n.length,rh=n.reduce((n,r)=>{th||(th={});var i=th[r];if(i)n[i[0]]=i[1];else for(var a=e(r),s=a.length-1;s>=0;s--){var o=a[s],l=null==o?void 0:o.filename,c=t[r];if(l&&c){n[l]=c,th[r]=[l,c];break}}return n},{})),rh}}class tp{constructor(e,t,n){void 0===n&&(n=[]),this.coercers=e,this.stackParser=t,this.modifiers=n}buildFromUnknown(e,t){void 0===t&&(t={});var n=t&&t.mechanism||{handled:!0,type:"generic"},r=this.buildCoercingContext(n,t,0).apply(e),i=this.buildParsingContext(),a=this.parseStacktrace(r,i);return{$exception_list:this.convertToExceptionList(a,n),$exception_level:"error"}}modifyFrames(e){var t=this;return _d(function*(){for(var n of e)n.stacktrace&&n.stacktrace.frames&&Ad(n.stacktrace.frames)&&(n.stacktrace.frames=yield t.applyModifiers(n.stacktrace.frames));return e})()}coerceFallback(e){var t;return{type:"Error",value:"Unknown error",stack:null==(t=e.syntheticException)?void 0:t.stack,synthetic:!0}}parseStacktrace(e,t){var n,r;return null!=e.cause&&(n=this.parseStacktrace(e.cause,t)),""!=e.stack&&null!=e.stack&&(r=this.applyChunkIds(this.stackParser(e.stack,e.synthetic?1:0),t.chunkIdMap)),wd({},e,{cause:n,stack:r})}applyChunkIds(e,t){return e.map(e=>(e.filename&&t&&(e.chunk_id=t[e.filename]),e))}applyCoercers(e,t){for(var n of this.coercers)if(n.match(e))return n.coerce(e,t);return this.coerceFallback(t)}applyModifiers(e){var t=this;return _d(function*(){var n=e;for(var r of t.modifiers)n=yield r(n);return n})()}convertToExceptionList(e,t){var n,r,i,a={type:e.type,value:e.value,mechanism:{type:null!==(n=t.type)&&void 0!==n?n:"generic",handled:null===(r=t.handled)||void 0===r||r,synthetic:null!==(i=e.synthetic)&&void 0!==i&&i}};e.stack&&(a.stacktrace={type:"raw",frames:e.stack});var s=[a];return null!=e.cause&&s.push(...this.convertToExceptionList(e.cause,wd({},t,{handled:!0}))),s}buildParsingContext(){return{chunkIdMap:ep(this.stackParser)}}buildCoercingContext(e,t,n){void 0===n&&(n=0);var r=(n,r)=>{if(r<=4){var i=this.buildCoercingContext(e,t,r);return this.applyCoercers(n,i)}};return wd({},t,{syntheticException:0==n?t.syntheticException:void 0,mechanism:e,apply:e=>r(e,n),next:e=>r(e,n+1)})}}var np="?";function rp(e,t,n,r,i){var a={platform:e,filename:t,function:"<anonymous>"===n?np:n,in_app:!0};return Md(r)||(a.lineno=r),Md(i)||(a.colno=i),a}var ip=(e,t)=>{var n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:np,n?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]},ap=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,sp=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,op=/\((\S*)(?::(\d+))(?::(\d+))\)/,lp=(e,t)=>{var n=ap.exec(e);if(n){var[,r,i,a]=n;return rp(t,r,np,+i,+a)}var s=sp.exec(e);if(s){if(s[2]&&0===s[2].indexOf("eval")){var o=op.exec(s[2]);o&&(s[2]=o[1],s[3]=o[2],s[4]=o[3])}var[l,c]=ip(s[1]||np,s[2]);return rp(t,c,l,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}},cp=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,up=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,dp=(e,t)=>{var n=cp.exec(e);if(n){if(n[3]&&n[3].indexOf(" > eval")>-1){var r=up.exec(n[3]);r&&(n[1]=n[1]||"eval",n[3]=r[1],n[4]=r[2],n[5]="")}var i=n[3],a=n[1]||np;return[a,i]=ip(a,i),rp(t,i,a,n[4]?+n[4]:void 0,n[5]?+n[5]:void 0)}},hp=/\(error: (.*)\)/;class pp{match(e){return this.isDOMException(e)||this.isDOMError(e)}coerce(e,t){var n=zd(e.stack);return{type:this.getType(e),value:this.getValue(e),stack:n?e.stack:void 0,cause:e.cause?t.next(e.cause):void 0,synthetic:!1}}getType(e){return this.isDOMError(e)?"DOMError":"DOMException"}getValue(e){var t=e.name||(this.isDOMError(e)?"DOMError":"DOMException");return e.message?t+": "+e.message:t}isDOMException(e){return Gd(e,"DOMException")}isDOMError(e){return Gd(e,"DOMError")}}class fp{match(e){return e instanceof Error}coerce(e,t){return{type:this.getType(e),value:this.getMessage(e,t),stack:this.getStack(e),cause:e.cause?t.next(e.cause):void 0,synthetic:!1}}getType(e){return e.name||e.constructor.name}getMessage(e,t){var n=e.message;return n.error&&"string"==typeof n.error.message?String(n.error.message):String(n)}getStack(e){return e.stacktrace||e.stack||void 0}}class mp{constructor(){}match(e){return Gd(e,"ErrorEvent")&&null!=e.error}coerce(e,t){var n;return t.apply(e.error)||{type:"ErrorEvent",value:e.message,stack:null==(n=t.syntheticException)?void 0:n.stack,synthetic:!0}}}var gp=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;class vp{match(e){return"string"==typeof e}coerce(e,t){var n,[r,i]=this.getInfos(e);return{type:null!=r?r:"Error",value:null!=i?i:e,stack:null==(n=t.syntheticException)?void 0:n.stack,synthetic:!0}}getInfos(e){var t="Error",n=e,r=e.match(gp);return r&&(t=r[1],n=r[2]),[t,n]}}var bp=["fatal","error","warning","log","info","debug"];function yp(e,t){void 0===t&&(t=40);var n=Object.keys(e);if(n.sort(),!n.length)return"[object has no keys]";for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length||i.length<=t?i:i.slice(0,t)+"..."}return""}class xp{match(e){return"object"==typeof e&&null!==e}coerce(e,t){var n,r=this.getErrorPropertyFromObject(e);return r?t.apply(r):{type:this.getType(e),value:this.getValue(e),stack:null==(n=t.syntheticException)?void 0:n.stack,level:this.isSeverityLevel(e.level)?e.level:"error",synthetic:!0}}getType(e){return Yd(e)?e.constructor.name:"Error"}getValue(e){if("name"in e&&"string"==typeof e.name){var t="'"+e.name+"' captured as exception";return"message"in e&&"string"==typeof e.message&&(t+=" with message: '"+e.message+"'"),t}if("message"in e&&"string"==typeof e.message)return e.message;var n=this.getObjectClassName(e);return(n&&"Object"!==n?"'"+n+"'":"Object")+" captured as exception with keys: "+yp(e)}isSeverityLevel(e){return zd(e)&&!Ld(e)&&bp.indexOf(e)>=0}getErrorPropertyFromObject(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];if(Jh(n))return n}}getObjectClassName(e){try{var t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(n){return}}}class _p{match(e){return Yd(e)}coerce(e,t){var n,r=e.constructor.name;return{type:r,value:r+" captured as exception with keys: "+yp(e),stack:null==(n=t.syntheticException)?void 0:n.stack,synthetic:!0}}}class wp{match(e){return Kd(e)}coerce(e,t){var n;return{type:"Error",value:"Primitive value captured as exception: "+String(e),stack:null==(n=t.syntheticException)?void 0:n.stack,synthetic:!0}}}class kp{match(e){return Gd(e,"PromiseRejectionEvent")}coerce(e,t){var n,r=this.getUnhandledRejectionReason(e);return Kd(r)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(r),stack:null==(n=t.syntheticException)?void 0:n.stack,synthetic:!0}:t.apply(r)}getUnhandledRejectionReason(e){if(Kd(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(t){}return e}}var Np=function(e,t){var{debugEnabled:n}=void 0===t?{}:t,r={k:function(t){if(sd&&(yd.DEBUG||bd.POSTHOG_DEBUG||n)&&!Md(sd.console)&&sd.console){for(var r=("__rrweb_original__"in sd.console[t]?sd.console[t].__rrweb_original__:sd.console[t]),i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];r(e,...a)}},info:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.k("log",...t)},warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.k("warn",...t)},error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.k("error",...t)},critical:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];console.error(e,...n)},uninitializedWarning:e=>{r.error("You must initialize PostHog before calling "+e)},createLogger:(t,n)=>Np(e+" "+t,n)};return r},jp=Np("[PostHog.js]"),Sp=jp.createLogger,Cp=Sp("[ExternalScriptsLoader]"),Ep=(e,t,n)=>{if(e.config.disable_external_dependency_loading)return Cp.warn(t+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var r=null==hd?void 0:hd.querySelectorAll("script");if(r)for(var i,a=function(){if(r[s].src===t){var e=r[s];return e.__posthog_loading_callback_fired?{v:n()}:(e.addEventListener("load",t=>{e.__posthog_loading_callback_fired=!0,n(void 0,t)}),e.onerror=e=>n(e),{v:void 0})}},s=0;s<r.length;s++)if(i=a())return i.v;var o=()=>{if(!hd)return n("document not found");var r=hd.createElement("script");if(r.type="text/javascript",r.crossOrigin="anonymous",r.src=t,r.onload=e=>{r.__posthog_loading_callback_fired=!0,n(void 0,e)},r.onerror=e=>n(e),e.config.prepare_external_dependency_script&&(r=e.config.prepare_external_dependency_script(r)),!r)return n("prepare_external_dependency_script returned null");var i,a=hd.querySelectorAll("body > script");a.length>0?null==(i=a[0].parentNode)||i.insertBefore(r,a[0]):hd.body.appendChild(r)};null!=hd&&hd.body?o():null==hd||hd.addEventListener("DOMContentLoaded",o)};bd.__PosthogExtensions__=bd.__PosthogExtensions__||{},bd.__PosthogExtensions__.loadExternalDependency=(e,t,n)=>{var r="/static/"+t+".js?v="+e.version;if("remote-config"===t&&(r="/array/"+e.config.token+"/config.js"),"toolbar"===t){var i=3e5;r=r+"&t="+Math.floor(Date.now()/i)*i}var a=e.requestRouter.endpointFor("assets",r);Ep(e,a,n)},bd.__PosthogExtensions__.loadSiteApp=(e,t,n)=>{var r=e.requestRouter.endpointFor("api",t);Ep(e,r,n)};var Pp={};function $p(e,t,n){if(Ad(e))if(cd&&e.forEach===cd)e.forEach(t,n);else if("length"in e&&e.length===+e.length)for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===Pp)return}function Tp(e,t,n){if(!Ud(e)){if(Ad(e))return $p(e,t,n);if((e=>e instanceof FormData)(e)){for(var r of e.entries())if(t.call(n,r[1],r[0])===Pp)return}else for(var i in e)if(Dd.call(e,i)&&t.call(n,e[i],i)===Pp)return}}var Dp=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $p(n,function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])}),e},Ip=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $p(n,function(t){$p(t,function(t){e.push(t)})}),e};function Ap(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}var Rp=function(e){try{return e()}catch(t){return}},Fp=function(e){return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(this,n)}catch(i){jp.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),jp.critical(i)}}},Op=function(e){var t={};return Tp(e,function(e,n){(zd(e)&&e.length>0||Hd(e))&&(t[n]=e)}),t};var Mp=["herokuapp.com","vercel.app","netlify.app"];function zp(e){var t=null==e?void 0:e.hostname;if(!zd(t))return!1;var n=t.split(".").slice(-2).join(".");for(var r of Mp)if(n===r)return!1;return!0}function Lp(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function Bp(e,t,n,r){var{capture:i=!1,passive:a=!0}=null!=r?r:{};null==e||e.addEventListener(t,n,{capture:i,passive:a})}var Up="$people_distinct_id",Hp="__alias",Vp="__timers",qp="$autocapture_disabled_server_side",Wp="$heatmaps_enabled_server_side",Kp="$exception_capture_enabled_server_side",Gp="$error_tracking_suppression_rules",Yp="$error_tracking_capture_extension_exceptions",Zp="$web_vitals_enabled_server_side",Xp="$dead_clicks_enabled_server_side",Qp="$product_tours_enabled_server_side",Jp="$web_vitals_allowed_metrics",ef="$session_recording_remote_config",tf="$sesid",nf="$session_is_sampled",rf="$enabled_feature_flags",af="$early_access_features",sf="$feature_flag_details",of="$stored_person_properties",lf="$stored_group_properties",cf="$surveys",uf="$flag_call_reported",df="$user_state",hf="$client_session_props",pf="$capture_rate_limit",ff="$initial_campaign_params",mf="$initial_referrer_info",gf="$initial_person_info",vf="$epp",bf="__POSTHOG_TOOLBAR__",yf="$posthog_cookieless",xf=[Up,Hp,"__cmpns",Vp,"$session_recording_enabled_server_side",Wp,tf,rf,Gp,df,af,sf,lf,of,cf,uf,hf,pf,ff,mf,vf,gf,"$conversations_widget_session_id","$conversations_ticket_id","$conversations_widget_state","$conversations_user_traits"];function _f(e){return e instanceof Element&&(e.id===bf||!(null==e.closest||!e.closest(".toolbar-global-fade-container")))}function wf(e){return!!e&&1===e.nodeType}function kf(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function Nf(e){return!!e&&3===e.nodeType}function jf(e){return!!e&&11===e.nodeType}function Sf(e){return e?Ed(e).split(/\s+/):[]}function Cf(e){var t=null==sd?void 0:sd.location.href;return!!(t&&e&&e.some(e=>t.match(e)))}function Ef(e){var t="";switch(typeof e.className){case"string":t=e.className;break;case"object":t=(e.className&&"baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return Sf(t)}function Pf(e){return Ud(e)?null:Ed(e).split(/(\s+)/).filter(e=>Kf(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function $f(e){var t="";return zf(e)&&!Lf(e)&&e.childNodes&&e.childNodes.length&&Tp(e.childNodes,function(e){var n;Nf(e)&&e.textContent&&(t+=null!==(n=Pf(e.textContent))&&void 0!==n?n:"")}),Ed(t)}function Tf(e){return Md(e.target)?e.srcElement||null:null!=(t=e.target)&&t.shadowRoot?e.composedPath()[0]||null:e.target||null;var t}var Df=["a","button","form","input","select","textarea","label"];function If(e,t){if(Md(t))return!0;var n,r=function(e){if(t.some(t=>e.matches(t)))return{v:!0}};for(var i of e)if(n=r(i))return n.v;return!1}function Af(e){var t=e.parentNode;return!(!t||!wf(t))&&t}var Rf=["next","previous","prev",">","<"],Ff=[".ph-no-rageclick",".ph-no-capture"];var Of=e=>!e||kf(e,"html")||!wf(e),Mf=(e,t)=>{if(!sd||Of(e))return{parentIsUsefulElement:!1,targetElementList:[]};for(var n=!1,r=[e],i=e;i.parentNode&&!kf(i,"body");)if(jf(i.parentNode))r.push(i.parentNode.host),i=i.parentNode.host;else{var a=Af(i);if(!a)break;if(t||Df.indexOf(a.tagName.toLowerCase())>-1)n=!0;else{var s=sd.getComputedStyle(a);s&&"pointer"===s.getPropertyValue("cursor")&&(n=!0)}r.push(a),i=a}return{parentIsUsefulElement:n,targetElementList:r}};function zf(e){for(var t=e;t.parentNode&&!kf(t,"body");t=t.parentNode){var n=Ef(t);if(Cd(n,"ph-sensitive")||Cd(n,"ph-no-capture"))return!1}if(Cd(Ef(e),"ph-include"))return!0;var r=e.type||"";if(zd(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=e.name||e.id||"";return!zd(i)||!/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,""))}function Lf(e){return!!(kf(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||kf(e,"select")||kf(e,"textarea")||"true"===e.getAttribute("contenteditable"))}var Bf="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",Uf=new RegExp("^(?:"+Bf+")$"),Hf=new RegExp(Bf),Vf="\\d{3}-?\\d{2}-?\\d{4}",qf=new RegExp("^("+Vf+")$"),Wf=new RegExp("("+Vf+")");function Kf(e,t){if(void 0===t&&(t=!0),Ud(e))return!1;if(zd(e)){if(e=Ed(e),(t?Uf:Hf).test((e||"").replace(/[- ]/g,"")))return!1;if((t?qf:Wf).test(e))return!1}return!0}function Gf(e){var t=$f(e);return Kf(t=(t+" "+Yf(e)).trim())?t:""}function Yf(e){var t="";return e&&e.childNodes&&e.childNodes.length&&Tp(e.childNodes,function(e){var n;if(e&&"span"===(null==(n=e.tagName)?void 0:n.toLowerCase()))try{var r=$f(e);t=(t+" "+r).trim(),e.childNodes&&e.childNodes.length&&(t=(t+" "+Yf(e)).trim())}catch(i){jp.error("[AutoCapture]",i)}}),t}function Zf(e){return e.replace(/"|\\"/g,'\\"')}function Xf(e){var t=e.attr__class;return t?Ad(t)?t:Sf(t):void 0}class Qf{constructor(e){this.disabled=!1===e;var t=Fd(e)?e:{};this.thresholdPx=t.threshold_px||30,this.timeoutMs=t.timeout_ms||1e3,this.clickCount=t.click_count||3,this.clicks=[]}isRageClick(e,t,n){if(this.disabled)return!1;var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(t-r.y)<this.thresholdPx&&n-r.timestamp<this.timeoutMs){if(this.clicks.push({x:e,y:t,timestamp:n}),this.clicks.length===this.clickCount)return!0}else this.clicks=[{x:e,y:t,timestamp:n}];return!1}}var Jf=e=>{var t=null==hd?void 0:hd.createElement("a");return Md(t)?null:(t.href=e,t)},em=function(e,t){for(var n,r=((e.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),i=0;i<r.length;i++){var a=r[i].split("=");if(a[0]===t){n=a;break}}if(!Ad(n)||n.length<2)return"";var s=n[1];try{s=decodeURIComponent(s)}catch(o){jp.error("Skipping decoding for malformed query param: "+s)}return s.replace(/\+/g," ")},tm=function(e,t,n){if(!e||!t||!t.length)return e;for(var r=e.split("#"),i=r[0]||"",a=r[1],s=i.split("?"),o=s[1],l=s[0],c=(o||"").split("&"),u=[],d=0;d<c.length;d++){var h=c[d].split("=");Ad(h)&&(t.includes(h[0])?u.push(h[0]+"="+n):u.push(c[d]))}var p=l;return null!=o&&(p+="?"+u.join("&")),null!=a&&(p+="#"+a),p},nm=function(e,t){var n=e.match(new RegExp(t+"=([^&]*)"));return n?n[1]:null},rm="$copy_autocapture",im=Sp("[AutoCapture]");function am(e,t){return t.length>e?t.slice(0,e)+"...":t}function sm(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do{t=t.previousSibling}while(t&&!wf(t));return t}function om(e,t){for(var n,r,{e:i,maskAllElementAttributes:a,maskAllText:s,elementAttributeIgnoreList:o,elementsChainAsString:l}=t,c=[e],u=e;u.parentNode&&!kf(u,"body");)jf(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,h,p,f=[],m={},g=!1,v=!1;if(Tp(c,e=>{var t=zf(e);"a"===e.tagName.toLowerCase()&&(g=e.getAttribute("href"),g=t&&g&&Kf(g)&&g),Cd(Ef(e),"ph-no-capture")&&(v=!0),f.push(function(e,t,n,r){var i=e.tagName.toLowerCase(),a={tag_name:i};Df.indexOf(i)>-1&&!n&&("a"===i.toLowerCase()||"button"===i.toLowerCase()?a.$el_text=am(1024,Gf(e)):a.$el_text=am(1024,$f(e)));var s=Ef(e);s.length>0&&(a.classes=s.filter(function(e){return""!==e})),Tp(e.attributes,function(n){var i;if((!Lf(e)||-1!==["name","id","class","aria-label"].indexOf(n.name))&&(null==r||!r.includes(n.name))&&!t&&Kf(n.value)&&(i=n.name,!zd(i)||"_ngcontent"!==i.substring(0,10)&&"_nghost"!==i.substring(0,7))){var s=n.value;"class"===n.name&&(s=Sf(s).join(" ")),a["attr__"+n.name]=am(1024,s)}});for(var o=1,l=1,c=e;c=sm(c);)o++,c.tagName===e.tagName&&l++;return a.nth_child=o,a.nth_of_type=l,a}(e,a,s,o));var n=function(e){if(!zf(e))return{};var t={};return Tp(e.attributes,function(e){if(e.name&&0===e.name.indexOf("data-ph-capture-attribute")){var n=e.name.replace("data-ph-capture-attribute-",""),r=e.value;n&&r&&Kf(r)&&(t[n]=r)}}),t}(e);Dp(m,n)}),v)return{props:{},explicitNoCapture:v};if(s||("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase()?f[0].$el_text=Gf(e):f[0].$el_text=$f(e)),g){var b,y;f[0].attr__href=g;var x=null==(b=Jf(g))?void 0:b.host,_=null==sd||null==(y=sd.location)?void 0:y.host;x&&_&&x!==_&&(d=g)}return{props:Dp({$event_type:i.type,$ce_version:1},l?{}:{$elements:f},{$elements_chain:(p=f,h=p.map(e=>{var t,n,r={text:null==(t=e.$el_text)?void 0:t.slice(0,400),tag_name:e.tag_name,href:null==(n=e.attr__href)?void 0:n.slice(0,2048),attr_class:Xf(e),attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return Ap(e).filter(e=>{var[t]=e;return 0===t.indexOf("attr__")}).forEach(e=>{var[t,n]=e;return r.attributes[t]=n}),r}),h.map(e=>{var t,n,r="";if(e.tag_name&&(r+=e.tag_name),e.attr_class)for(var i of(e.attr_class.sort(),e.attr_class))r+="."+i.replace(/"/g,"");var a=wd({},e.text?{text:e.text}:{},{"nth-child":null!==(t=e.nth_child)&&void 0!==t?t:0,"nth-of-type":null!==(n=e.nth_of_type)&&void 0!==n?n:0},e.href?{href:e.href}:{},e.attr_id?{attr_id:e.attr_id}:{},e.attributes),s={};return Ap(a).sort((e,t)=>{var[n]=e,[r]=t;return n.localeCompare(r)}).forEach(e=>{var[t,n]=e;return s[Zf(t.toString())]=Zf(n.toString())}),(r+=":")+Ap(s).map(e=>{var[t,n]=e;return t+'="'+n+'"'}).join("")}).join(";"))},null!=(n=f[0])&&n.$el_text?{$el_text:null==(r=f[0])?void 0:r.$el_text}:{},d&&"click"===i.type?{$external_click_url:d}:{},m)}}class lm{constructor(e){this.P=!1,this.T=null,this.I=!1,this.instance=e,this.rageclicks=new Qf(e.config.rageclick),this.C=null}get R(){var e,t,n=Fd(this.instance.config.autocapture)?this.instance.config.autocapture:{};return n.url_allowlist=null==(e=n.url_allowlist)?void 0:e.map(e=>new RegExp(e)),n.url_ignorelist=null==(t=n.url_ignorelist)?void 0:t.map(e=>new RegExp(e)),n}F(){if(this.isBrowserSupported()){if(sd&&hd){var e=e=>{e=e||(null==sd?void 0:sd.event);try{this.M(e)}catch(ym){im.error("Failed to capture event",ym)}};if(Bp(hd,"submit",e,{capture:!0}),Bp(hd,"change",e,{capture:!0}),Bp(hd,"click",e,{capture:!0}),this.R.capture_copied_text){var t=e=>{e=e||(null==sd?void 0:sd.event),this.M(e,rm)};Bp(hd,"copy",t,{capture:!0}),Bp(hd,"cut",t,{capture:!0})}}}else im.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.P&&(this.F(),this.P=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.I=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[qp]:!!e.autocapture_opt_out}),this.T=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.C=e}getElementSelectors(e){var t,n=[];return null==(t=this.C)||t.forEach(t=>{var r=null==hd?void 0:hd.querySelectorAll(t);null==r||r.forEach(r=>{e===r&&n.push(t)})}),n}get isEnabled(){var e,t,n=null==(e=this.instance.persistence)?void 0:e.props[qp],r=this.T;if(Bd(r)&&!qd(n)&&!this.instance.O())return!1;var i=null!==(t=this.T)&&void 0!==t?t:!!n;return!!this.instance.config.autocapture&&!i}M(e,t){if(void 0===t&&(t="$autocapture"),this.isEnabled){var n,r=Tf(e);Nf(r)&&(r=r.parentNode||null),"$autocapture"===t&&"click"===e.type&&e instanceof MouseEvent&&this.instance.config.rageclick&&null!=(n=this.rageclicks)&&n.isRageClick(e.clientX,e.clientY,e.timeStamp||(new Date).getTime())&&function(e,t){if(!sd||Of(e))return!1;var n,r,i;if(qd(t)?(n=!!t&&Ff,r=void 0):(n=null!==(i=null==t?void 0:t.css_selector_ignorelist)&&void 0!==i?i:Ff,r=null==t?void 0:t.content_ignorelist),!1===n)return!1;var{targetElementList:a}=Mf(e,!1);return!function(e,t){if(!1===e||Md(e))return!1;var n;if(!0===e)n=Rf;else{if(!Ad(e))return!1;if(e.length>10)return jp.error("[PostHog] content_ignorelist array cannot exceed 10 items. Use css_selector_ignorelist for more complex matching."),!1;n=e.map(e=>e.toLowerCase())}return t.some(e=>{var{safeText:t,ariaLabel:r}=e;return n.some(e=>t.includes(e)||r.includes(e))})}(r,a.map(e=>{var t;return{safeText:$f(e).toLowerCase(),ariaLabel:(null==(t=e.getAttribute("aria-label"))?void 0:t.toLowerCase().trim())||""}}))&&!If(a,n)}(r,this.instance.config.rageclick)&&this.M(e,"$rageclick");var i=t===rm;if(r&&function(e,t,n,r,i){var a,s,o,l;if(void 0===n&&(n=void 0),!sd||Of(e))return!1;if(null!=(a=n)&&a.url_allowlist&&!Cf(n.url_allowlist))return!1;if(null!=(s=n)&&s.url_ignorelist&&Cf(n.url_ignorelist))return!1;if(null!=(o=n)&&o.dom_event_allowlist){var c=n.dom_event_allowlist;if(c&&!c.some(e=>t.type===e))return!1}var{parentIsUsefulElement:u,targetElementList:d}=Mf(e,r);if(!function(e,t){var n=null==t?void 0:t.element_allowlist;if(Md(n))return!0;var r,i=function(e){if(n.some(t=>e.tagName.toLowerCase()===t))return{v:!0}};for(var a of e)if(r=i(a))return r.v;return!1}(d,n))return!1;if(!If(d,null==(l=n)?void 0:l.css_selector_allowlist))return!1;var h=sd.getComputedStyle(e);if(h&&"pointer"===h.getPropertyValue("cursor")&&"click"===t.type)return!0;var p=e.tagName.toLowerCase();switch(p){case"html":return!1;case"form":return(i||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(t.type)>=0;default:return u?(i||["click"]).indexOf(t.type)>=0:(i||["click"]).indexOf(t.type)>=0&&(Df.indexOf(p)>-1||"true"===e.getAttribute("contenteditable"))}}(r,e,this.R,i,i?["copy","cut"]:void 0)){var{props:a,explicitNoCapture:s}=om(r,{e:e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.R.element_attribute_ignorelist,elementsChainAsString:this.I});if(s)return!1;var o=this.getElementSelectors(r);if(o&&o.length>0&&(a.$element_selectors=o),t===rm){var l,c=Pf(null==sd||null==(l=sd.getSelection())?void 0:l.toString()),u=e.type||"clipboard";if(!c)return!1;a.$selected_content=c,a.$copy_type=u}return this.instance.capture(t,a),!0}}}isBrowserSupported(){return Rd(null==hd?void 0:hd.querySelectorAll)}}Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return Hd(e)&&isFinite(e)&&Math.floor(e)===e});var cm="0123456789abcdef";class um{constructor(e){if(this.bytes=e,16!==e.length)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,t,n,r){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(r)||e<0||t<0||n<0||r<0||e>0xffffffffffff||t>4095||n>1073741823||r>4294967295)throw new RangeError("invalid field value");var i=new Uint8Array(16);return i[0]=e/Math.pow(2,40),i[1]=e/Math.pow(2,32),i[2]=e/Math.pow(2,24),i[3]=e/Math.pow(2,16),i[4]=e/Math.pow(2,8),i[5]=e,i[6]=112|t>>>8,i[7]=t,i[8]=128|n>>>24,i[9]=n>>>16,i[10]=n>>>8,i[11]=n,i[12]=r>>>24,i[13]=r>>>16,i[14]=r>>>8,i[15]=r,new um(i)}toString(){for(var e="",t=0;t<this.bytes.length;t++)e=e+cm.charAt(this.bytes[t]>>>4)+cm.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");if(36!==e.length)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new um(this.bytes.slice(0))}equals(e){return 0===this.compareTo(e)}compareTo(e){for(var t=0;t<16;t++){var n=this.bytes[t]-e.bytes[t];if(0!==n)return Math.sign(n)}return 0}}class dm{constructor(){this.A=0,this.D=0,this.j=new fm}generate(){var e=this.generateOrAbort();if(Md(e)){this.A=0;var t=this.generateOrAbort();if(Md(t))throw new Error("Could not generate UUID after timestamp reset");return t}return e}generateOrAbort(){var e=Date.now();if(e>this.A)this.A=e,this.L();else{if(!(e+1e4>this.A))return;this.D++,this.D>4398046511103&&(this.A++,this.L())}return um.fromFieldsV7(this.A,Math.trunc(this.D/Math.pow(2,30)),this.D&Math.pow(2,30)-1,this.j.nextUint32())}L(){this.D=1024*this.j.nextUint32()+(1023&this.j.nextUint32())}}var hm,pm=e=>{if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};sd&&!Md(sd.crypto)&&crypto.getRandomValues&&(pm=e=>crypto.getRandomValues(e));class fm{constructor(){this.N=new Uint32Array(8),this.U=1/0}nextUint32(){return this.U>=this.N.length&&(pm(this.N),this.U=0),this.N[this.U++]}}var mm=()=>gm().toString(),gm=()=>(hm||(hm=new dm)).generate(),vm="",bm=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;var ym,xm={H:()=>!!hd,B:function(e){jp.error("cookieStore error: "+e)},q:function(e){if(hd){try{for(var t=e+"=",n=hd.cookie.split(";").filter(e=>e.length),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}}catch(a){}return null}},W:function(e){var t;try{t=JSON.parse(xm.q(e))||{}}catch(n){}return t},G:function(e,t,n,r,i){if(hd)try{var a="",s="",o=function(e,t){if(t){var n=function(e,t){if(void 0===t&&(t=hd),vm)return vm;if(!t)return"";if(["localhost","127.0.0.1"].includes(e))return"";for(var n=e.split("."),r=Math.min(n.length,8),i="dmn_chk_"+mm();!vm&&r--;){var a=n.slice(r).join("."),s=i+"=1;domain=."+a+";path=/";t.cookie=s+";max-age=3",t.cookie.includes(i)&&(t.cookie=s+";max-age=0",vm=a)}return vm}(e);if(!n){var r=(i=e.match(bm))?i[0]:"";r!==n&&jp.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}var i;return""}(hd.location.hostname,r);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),a="; expires="+l.toUTCString()}i&&(s="; secure");var c=e+"="+encodeURIComponent(JSON.stringify(t))+a+"; SameSite=Lax; path=/"+o+s;return c.length>3686.4&&jp.warn("cookieStore warning: large cookie, len="+c.length),hd.cookie=c,c}catch(u){return}},V:function(e,t){if(null!=hd&&hd.cookie)try{xm.G(e,"",-1,t)}catch(n){return}}},_m=null,wm={H:function(){if(!Bd(_m))return _m;var e=!0;if(Md(sd))e=!1;else try{var t="__mplssupport__";wm.G(t,"xyz"),'"xyz"'!==wm.q(t)&&(e=!1),wm.V(t)}catch(ym){e=!1}return e||jp.error("localStorage unsupported; falling back to cookie store"),_m=e,e},B:function(e){jp.error("localStorage error: "+e)},q:function(e){try{return null==sd?void 0:sd.localStorage.getItem(e)}catch(ym){wm.B(ym)}return null},W:function(e){try{return JSON.parse(wm.q(e))||{}}catch(t){}return null},G:function(e,t){try{null==sd||sd.localStorage.setItem(e,JSON.stringify(t))}catch(ym){wm.B(ym)}},V:function(e){try{null==sd||sd.localStorage.removeItem(e)}catch(ym){wm.B(ym)}}},km=["$device_id","distinct_id",tf,nf,vf,gf],Nm={},jm={H:function(){return!0},B:function(e){jp.error("memoryStorage error: "+e)},q:function(e){return Nm[e]||null},W:function(e){return Nm[e]||null},G:function(e,t){Nm[e]=t},V:function(e){delete Nm[e]}},Sm=null,Cm={H:function(){if(!Bd(Sm))return Sm;if(Sm=!0,Md(sd))Sm=!1;else try{var e="__support__";Cm.G(e,"xyz"),'"xyz"'!==Cm.q(e)&&(Sm=!1),Cm.V(e)}catch(ym){Sm=!1}return Sm},B:function(e){jp.error("sessionStorage error: ",e)},q:function(e){try{return null==sd?void 0:sd.sessionStorage.getItem(e)}catch(ym){Cm.B(ym)}return null},W:function(e){try{return JSON.parse(Cm.q(e))||null}catch(t){}return null},G:function(e,t){try{null==sd||sd.sessionStorage.setItem(e,JSON.stringify(t))}catch(ym){Cm.B(ym)}},V:function(e){try{null==sd||sd.sessionStorage.removeItem(e)}catch(ym){Cm.B(ym)}}},Em=((ym={})[ym.PENDING=-1]="PENDING",ym[ym.DENIED=0]="DENIED",ym[ym.GRANTED=1]="GRANTED",ym);class Pm{constructor(e){this._instance=e}get R(){return this._instance.config}get consent(){return this.J()?Em.DENIED:this.K}isOptedOut(){return"always"===this.R.cookieless_mode||this.consent===Em.DENIED||this.consent===Em.PENDING&&(this.R.opt_out_capturing_by_default||"on_reject"===this.R.cookieless_mode)}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===Em.DENIED}optInOut(e){this.Y.G(this.X,e?1:0,this.R.cookie_expiration,this.R.cross_subdomain_cookie,this.R.secure_cookie)}reset(){this.Y.V(this.X,this.R.cross_subdomain_cookie)}get X(){var{token:e,opt_out_capturing_cookie_prefix:t,consent_persistence_name:n}=this._instance.config;return n||(t?t+e:"__ph_opt_in_out_"+e)}get K(){var e=this.Y.q(this.X);return Xd(e)?Em.GRANTED:Cd(Qd,e)?Em.DENIED:Em.PENDING}get Y(){if(!this.Z){var e=this.R.opt_out_capturing_persistence_type;this.Z="localStorage"===e?wm:xm;var t="localStorage"===e?xm:wm;t.q(this.X)&&(this.Z.q(this.X)||this.optInOut(Xd(t.q(this.X))),t.V(this.X,this.R.cross_subdomain_cookie))}return this.Z}J(){return!!this.R.respect_dnt&&!!Lp([null==dd?void 0:dd.doNotTrack,null==dd?void 0:dd.msDoNotTrack,bd.doNotTrack],e=>Xd(e))}}var $m=Sp("[Dead Clicks]"),Tm=()=>!0,Dm=e=>{var t,n=!(null==(t=e.instance.persistence)||!t.get_property(Xp)),r=e.instance.config.capture_dead_clicks;return qd(r)?r:!!Fd(r)||n};class Im{get lazyLoadedDeadClicksAutocapture(){return this.tt}constructor(e,t,n){this.instance=e,this.isEnabled=t,this.onCapture=n,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[Xp]:null==e?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.it(()=>{this.et()})}it(e){var t,n;null!=(t=bd.__PosthogExtensions__)&&t.initDeadClicksAutocapture&&e(),null==(n=bd.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this.instance,"dead-clicks-autocapture",t=>{t?$m.error("failed to load script",t):e()})}et(){var e;if(hd){if(!this.tt&&null!=(e=bd.__PosthogExtensions__)&&e.initDeadClicksAutocapture){var t=Fd(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};t.__onCapture=this.onCapture,this.tt=bd.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,t),this.tt.start(hd),$m.info("starting...")}}else $m.error("`document` not found. Cannot start.")}stop(){this.tt&&(this.tt.stop(),this.tt=void 0,$m.info("stopping..."))}}var Am=Sp("[ExceptionAutocapture]");class Rm{constructor(e){var t,n,r;this.rt=()=>{var e;if(sd&&this.isEnabled&&null!=(e=bd.__PosthogExtensions__)&&e.errorWrappingFunctions){var t=bd.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,n=bd.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,r=bd.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.st&&this.R.capture_unhandled_errors&&(this.st=t(this.captureException.bind(this))),!this.nt&&this.R.capture_unhandled_rejections&&(this.nt=n(this.captureException.bind(this))),!this.ot&&this.R.capture_console_errors&&(this.ot=r(this.captureException.bind(this)))}catch(ym){Am.error("failed to start",ym),this.ut()}}},this._instance=e,this.ht=!(null==(t=this._instance.persistence)||!t.props[Kp]),this.dt=new eh({refillRate:null!==(n=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)&&void 0!==n?n:1,bucketSize:null!==(r=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)&&void 0!==r?r:10,refillInterval:1e4,h:Am}),this.R=this.vt(),this.startIfEnabledOrStop()}vt(){var e=this._instance.config.capture_exceptions,t={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return Fd(e)?t=wd({},t,e):(Md(e)?this.ht:e)&&(t=wd({},t,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),t}get isEnabled(){return this.R.capture_console_errors||this.R.capture_unhandled_errors||this.R.capture_unhandled_rejections}startIfEnabledOrStop(){this.isEnabled?(Am.info("enabled"),this.ut(),this.it(this.rt)):this.ut()}it(e){var t,n;null!=(t=bd.__PosthogExtensions__)&&t.errorWrappingFunctions&&e(),null==(n=bd.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,"exception-autocapture",t=>{if(t)return Am.error("failed to load script",t);e()})}ut(){var e,t,n;null==(e=this.st)||e.call(this),this.st=void 0,null==(t=this.nt)||t.call(this),this.nt=void 0,null==(n=this.ot)||n.call(this),this.ot=void 0}onRemoteConfig(e){var t=e.autocaptureExceptions;this.ht=!!t||!1,this._instance.persistence&&this._instance.persistence.register({[Kp]:this.ht}),this.R=this.vt(),this.startIfEnabledOrStop()}onConfigChange(){this.R=this.vt()}captureException(e){var t,n,r=null!==(t=null==e||null==(n=e.$exception_list)||null==(n=n[0])?void 0:n.type)&&void 0!==t?t:"Exception";this.dt.consumeRateLimit(r)?Am.info("Skipping exception capture because of client rate limiting.",{exception:r}):this._instance.exceptions.sendExceptionEvent(e)}}function Fm(e,t,n){try{if(!(t in e))return()=>{};var r=e[t],i=n(r);return Rd(i)&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__posthog_wrapped__:{enumerable:!1,value:!0}})),e[t]=i,()=>{e[t]=r}}catch(a){return()=>{}}}class Om{constructor(e){var t;this._instance=e,this.ct=(null==sd||null==(t=sd.location)?void 0:t.pathname)||""}get isEnabled(){return"history_change"===this._instance.config.capture_pageview}startIfEnabled(){this.isEnabled&&(jp.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.ft&&this.ft(),this.ft=void 0,jp.info("History API monitoring stopped")}monitorHistoryChanges(){var e,t;if(sd&&sd.history){var n=this;null!=(e=sd.history.pushState)&&e.__posthog_wrapped__||Fm(sd.history,"pushState",e=>function(t,r,i){e.call(this,t,r,i),n._t("pushState")}),null!=(t=sd.history.replaceState)&&t.__posthog_wrapped__||Fm(sd.history,"replaceState",e=>function(t,r,i){e.call(this,t,r,i),n._t("replaceState")}),this.yt()}}_t(e){try{var t,n=null==sd||null==(t=sd.location)?void 0:t.pathname;if(!n)return;n!==this.ct&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ct=n}catch(ym){jp.error("Error capturing "+e+" pageview",ym)}}yt(){if(!this.ft){var e=()=>{this._t("popstate")};Bp(sd,"popstate",e),this.ft=()=>{sd&&sd.removeEventListener("popstate",e)}}}}var Mm=Sp("[SegmentIntegration]");var zm="posthog-js";function Lm(e,t){var{organization:n,projectId:r,prefix:i,severityAllowList:a=["error"],sendExceptionsToPostHog:s=!0}=void 0===t?{}:t;return t=>{var o,l,c,u,d;if("*"!==a&&!a.includes(t.level)||!e.__loaded)return t;t.tags||(t.tags={});var h=e.requestRouter.endpointFor("ui","/project/"+e.config.token+"/person/"+e.get_distinct_id());t.tags["PostHog Person URL"]=h,e.sessionRecordingStarted()&&(t.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var p=(null==(o=t.exception)?void 0:o.values)||[],f=p.map(e=>wd({},e,{stacktrace:e.stacktrace?wd({},e.stacktrace,{type:"raw",frames:(e.stacktrace.frames||[]).map(e=>wd({},e,{platform:"web:javascript"}))}):void 0})),m={$exception_message:(null==(l=p[0])?void 0:l.value)||t.message,$exception_type:null==(c=p[0])?void 0:c.type,$exception_level:t.level,$exception_list:f,$sentry_event_id:t.event_id,$sentry_exception:t.exception,$sentry_exception_message:(null==(u=p[0])?void 0:u.value)||t.message,$sentry_exception_type:null==(d=p[0])?void 0:d.type,$sentry_tags:t.tags};return n&&r&&(m.$sentry_url=(i||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+t.event_id),s&&e.exceptions.sendExceptionEvent(m),t}}class Bm{constructor(e,t,n,r,i,a){this.name=zm,this.setupOnce=function(s){s(Lm(e,{organization:t,projectId:n,prefix:r,severityAllowList:i,sendExceptionsToPostHog:null==a||a}))}}}var Um=null!=sd&&sd.location?nm(sd.location.hash,"__posthog")||nm(location.hash,"state"):null,Hm="_postHogToolbarParams",Vm=Sp("[Toolbar]"),qm=function(e){return e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e}(qm||{});class Wm{constructor(e){this.instance=e}bt(e){bd.ph_toolbar_state=e}wt(){var e;return null!==(e=bd.ph_toolbar_state)&&void 0!==e?e:qm.UNINITIALIZED}maybeLoadToolbar(e,t,n){if(void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===n&&(n=void 0),!sd||!hd)return!1;e=null!=e?e:sd.location,n=null!=n?n:sd.history;try{if(!t){try{sd.localStorage.setItem("test","test"),sd.localStorage.removeItem("test")}catch(ym){return!1}t=null==sd?void 0:sd.localStorage}var r,i=Um||nm(e.hash,"__posthog")||nm(e.hash,"state"),a=i?Rp(()=>JSON.parse(atob(decodeURIComponent(i))))||Rp(()=>JSON.parse(decodeURIComponent(i))):null;return a&&"ph_authorize"===a.action?((r=a).source="url",r&&Object.keys(r).length>0&&(a.desiredHash?e.hash=a.desiredHash:n?n.replaceState(n.state,"",e.pathname+e.search):e.hash="")):((r=JSON.parse(t.getItem(Hm)||"{}")).source="localstorage",delete r.userIntent),!(!r.token||this.instance.config.token!==r.token||(this.loadToolbar(r),0))}catch(ym){return!1}}xt(e){var t=bd.ph_load_toolbar||bd.ph_load_editor;!Ud(t)&&Rd(t)?t(e,this.instance):Vm.warn("No toolbar load function found")}loadToolbar(e){var t=!(null==hd||!hd.getElementById(bf));if(!sd||t)return!1;var n="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,r=wd({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},n?{instrument:!1}:{});if(sd.localStorage.setItem(Hm,JSON.stringify(wd({},r,{source:void 0}))),this.wt()===qm.LOADED)this.xt(r);else if(this.wt()===qm.UNINITIALIZED){var i;this.bt(qm.LOADING),null==(i=bd.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this.instance,"toolbar",e=>{if(e)return Vm.error("[Toolbar] Failed to load",e),void this.bt(qm.UNINITIALIZED);this.bt(qm.LOADED),this.xt(r)}),Bp(sd,"turbolinks:load",()=>{this.bt(qm.UNINITIALIZED),this.loadToolbar(r)})}return!0}Et(e){return this.loadToolbar(e)}maybeLoadEditor(e,t,n){return void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===n&&(n=void 0),this.maybeLoadToolbar(e,t,n)}}var Km=Sp("[TracingHeaders]");class Gm{constructor(e){this.$t=void 0,this.St=void 0,this.rt=()=>{var e,t;Md(this.$t)&&(null==(e=bd.__PosthogExtensions__)||null==(e=e.tracingHeadersPatchFns)||e._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),Md(this.St)&&(null==(t=bd.__PosthogExtensions__)||null==(t=t.tracingHeadersPatchFns)||t._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}it(e){var t,n;null!=(t=bd.__PosthogExtensions__)&&t.tracingHeadersPatchFns&&e(),null==(n=bd.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,"tracing-headers",t=>{if(t)return Km.error("failed to load script",t);e()})}startIfEnabledOrStop(){var e,t;this._instance.config.__add_tracing_headers?this.it(this.rt):(null==(e=this.$t)||e.call(this),null==(t=this.St)||t.call(this),this.$t=void 0,this.St=void 0)}}var Ym="https?://(.*)",Zm=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],Xm=Ip(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],Zm),Qm="<masked>",Jm=["li_fat_id"];function eg(e,t,n){if(!hd)return{};var r,i=t?Ip([],Zm,n||[]):[],a=tg(tm(hd.URL,i,Qm),e),s=(r={},Tp(Jm,function(e){var t=xm.q(e);r[e]=t||null}),r);return Dp(s,a)}function tg(e,t){var n=Xm.concat(t||[]),r={};return Tp(n,function(t){var n=em(e,t);r[t]=n||null}),r}function ng(e){var t,n=(t=e)?0===t.search(Ym+"google.([^/?]*)")?"google":0===t.search(Ym+"bing.com")?"bing":0===t.search(Ym+"yahoo.com")?"yahoo":0===t.search(Ym+"duckduckgo.com")?"duckduckgo":null:null,r="yahoo"!=n?"q":"p",i={};if(!Bd(n)){i.$search_engine=n;var a=hd?em(hd.referrer,r):"";a.length&&(i.ph_keyword=a)}return i}function rg(){return navigator.language||navigator.userLanguage}function ig(){return(null==hd?void 0:hd.referrer)||"$direct"}function ag(e,t){var n=e?Ip([],Zm,t||[]):[],r=null==pd?void 0:pd.href.substring(0,1e3);return{r:ig().substring(0,1e3),u:r?tm(r,n,Qm):void 0}}function sg(e){var t,{r:n,u:r}=e,i={$referrer:n,$referring_domain:null==n?void 0:"$direct"==n?"$direct":null==(t=Jf(n))?void 0:t.host};if(r){i.$current_url=r;var a=Jf(r);i.$host=null==a?void 0:a.host,i.$pathname=null==a?void 0:a.pathname;var s=tg(r);Dp(i,s)}if(n){var o=ng(n);Dp(i,o)}return i}function og(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(ym){return}}function lg(){try{return(new Date).getTimezoneOffset()}catch(ym){return}}var cg=Sp("[Web Vitals]"),ug=9e5;class dg{constructor(e){var t;this.kt=!1,this.P=!1,this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Pt=()=>{clearTimeout(this.Tt),0!==this.N.metrics.length&&(this._instance.capture("$web_vitals",this.N.metrics.reduce((e,t)=>wd({},e,{["$web_vitals_"+t.name+"_event"]:wd({},t),["$web_vitals_"+t.name+"_value"]:t.value}),{})),this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.It=e=>{var t,n=null==(t=this._instance.sessionManager)?void 0:t.checkAndGetSessionAndWindowId(!0);if(Md(n))cg.error("Could not read session ID. Dropping metrics!");else{this.N=this.N||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var r=this.Ct();Md(r)||(Ud(null==e?void 0:e.name)||Ud(null==e?void 0:e.value)?cg.error("Invalid metric received",e):this.Rt&&e.value>=this.Rt?cg.error("Ignoring metric with value >= "+this.Rt,e):(this.N.url!==r&&(this.Pt(),this.Tt=setTimeout(this.Pt,this.flushToCaptureTimeoutMs)),Md(this.N.url)&&(this.N.url=r),this.N.firstMetricTimestamp=Md(this.N.firstMetricTimestamp)?Date.now():this.N.firstMetricTimestamp,e.attribution&&e.attribution.interactionTargetElement&&(e.attribution.interactionTargetElement=void 0),this.N.metrics.push(wd({},e,{$current_url:r,$session_id:n.sessionId,$window_id:n.windowId,timestamp:Date.now()})),this.N.metrics.length===this.allowedMetrics.length&&this.Pt()))}},this.rt=()=>{var e,t,n,r,i=bd.__PosthogExtensions__;Md(i)||Md(i.postHogWebVitalsCallbacks)||({onLCP:e,onCLS:t,onFCP:n,onINP:r}=i.postHogWebVitalsCallbacks),e&&t&&n&&r?(this.allowedMetrics.indexOf("LCP")>-1&&e(this.It.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&t(this.It.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&n(this.It.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&r(this.It.bind(this)),this.P=!0):cg.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.kt=!(null==(t=this._instance.persistence)||!t.props[Zp]),this.startIfEnabled()}get allowedMetrics(){var e,t,n=Fd(this._instance.config.capture_performance)?null==(e=this._instance.config.capture_performance)?void 0:e.web_vitals_allowed_metrics:void 0;return Md(n)?(null==(t=this._instance.persistence)?void 0:t.props[Jp])||["CLS","FCP","INP","LCP"]:n}get flushToCaptureTimeoutMs(){return(Fd(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get Rt(){var e=Fd(this._instance.config.capture_performance)&&Hd(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:ug;return 0<e&&e<=6e4?ug:e}get isEnabled(){var e=null==pd?void 0:pd.protocol;if("http:"!==e&&"https:"!==e)return cg.info("Web Vitals are disabled on non-http/https protocols"),!1;var t=Fd(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:qd(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return qd(t)?t:this.kt}startIfEnabled(){this.isEnabled&&!this.P&&(cg.info("enabled, starting..."),this.it(this.rt))}onRemoteConfig(e){var t=Fd(e.capturePerformance)&&!!e.capturePerformance.web_vitals,n=Fd(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[Zp]:t}),this._instance.persistence.register({[Jp]:n})),this.kt=t,this.startIfEnabled()}it(e){var t,n;null!=(t=bd.__PosthogExtensions__)&&t.postHogWebVitalsCallbacks&&e(),null==(n=bd.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,"web-vitals",t=>{t?cg.error("failed to load script",t):e()})}Ct(){var e=sd?sd.location.href:void 0;if(e){var t=this._instance.config.mask_personal_data_properties,n=this._instance.config.custom_personal_data_properties,r=t?Ip([],Zm,n||[]):[];return tm(e,r,Qm)}cg.error("Could not determine current URL")}}var hg=Sp("[Heatmaps]");function pg(e){return Fd(e)&&"clientX"in e&&"clientY"in e&&Hd(e.clientX)&&Hd(e.clientY)}class fg{constructor(e){var t;this.kt=!1,this.P=!1,this.Ft=null,this.instance=e,this.kt=!(null==(t=this.instance.persistence)||!t.props[Wp]),this.rageclicks=new Qf(e.config.rageclick)}get flushIntervalMilliseconds(){var e=5e3;return Fd(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return Md(this.instance.config.capture_heatmaps)?Md(this.instance.config.enable_heatmaps)?this.kt:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}startIfEnabled(){if(this.isEnabled){if(this.P)return;hg.info("starting..."),this.Mt(),this.Ot()}else{var e;clearInterval(null!==(e=this.Ft)&&void 0!==e?e:void 0),this.At(),this.getAndClearBuffer()}}onRemoteConfig(e){var t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[Wp]:t}),this.kt=t,this.startIfEnabled()}getAndClearBuffer(){var e=this.N;return this.N=void 0,e}Dt(e){this.jt(e.originalEvent,"deadclick")}Ot(){this.Ft&&clearInterval(this.Ft),this.Ft="visible"===(null==hd?void 0:hd.visibilityState)?setInterval(this.Lt.bind(this),this.flushIntervalMilliseconds):null}Mt(){sd&&hd&&(this.Nt=this.Lt.bind(this),Bp(sd,"beforeunload",this.Nt),this.Ut=e=>this.jt(e||(null==sd?void 0:sd.event)),Bp(hd,"click",this.Ut,{capture:!0}),this.zt=e=>this.Ht(e||(null==sd?void 0:sd.event)),Bp(hd,"mousemove",this.zt,{capture:!0}),this.Bt=new Im(this.instance,Tm,this.Dt.bind(this)),this.Bt.startIfEnabled(),this.qt=this.Ot.bind(this),Bp(hd,"visibilitychange",this.qt),this.P=!0)}At(){var e;sd&&hd&&(this.Nt&&sd.removeEventListener("beforeunload",this.Nt),this.Ut&&hd.removeEventListener("click",this.Ut,{capture:!0}),this.zt&&hd.removeEventListener("mousemove",this.zt,{capture:!0}),this.qt&&hd.removeEventListener("visibilitychange",this.qt),clearTimeout(this.Wt),null==(e=this.Bt)||e.stop(),this.P=!1)}Gt(e,t){var n=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),i=this.instance.scrollManager.scrollElement(),a=function(e,t,n){for(var r=e;r&&wf(r)&&!kf(r,"body");){if(r===n)return!1;if(Cd(t,null==sd?void 0:sd.getComputedStyle(r).position))return!0;r=Af(r)}return!1}(Tf(e),["fixed","sticky"],i);return{x:e.clientX+(a?0:r),y:e.clientY+(a?0:n),target_fixed:a,type:t}}jt(e,t){var n;if(void 0===t&&(t="click"),!_f(e.target)&&pg(e)){var r=this.Gt(e,t);null!=(n=this.rageclicks)&&n.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this.Vt(wd({},r,{type:"rageclick"})),this.Vt(r)}}Ht(e){!_f(e.target)&&pg(e)&&(clearTimeout(this.Wt),this.Wt=setTimeout(()=>{this.Vt(this.Gt(e,"mousemove"))},500))}Vt(e){if(sd){var t=sd.location.href,n=this.instance.config.mask_personal_data_properties,r=this.instance.config.custom_personal_data_properties,i=n?Ip([],Zm,r||[]):[],a=tm(t,i,Qm);this.N=this.N||{},this.N[a]||(this.N[a]=[]),this.N[a].push(e)}}Lt(){this.N&&!Od(this.N)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class mg{constructor(e){this.Jt=(e,t,n)=>{n&&(n.noSessionId||n.activityTimeout||n.sessionPastMaximumLength)&&(jp.info("[PageViewManager] Session rotated, clearing pageview state",{sessionId:e,changeReason:n}),this.Kt=void 0,this._instance.scrollManager.resetContext())},this._instance=e,this.Yt()}Yt(){var e;this.Xt=null==(e=this._instance.sessionManager)?void 0:e.onSessionId(this.Jt)}destroy(){var e;null==(e=this.Xt)||e.call(this),this.Xt=void 0}doPageView(e,t){var n,r=this.Qt(e,t);return this.Kt={pathname:null!==(n=null==sd?void 0:sd.location.pathname)&&void 0!==n?n:"",pageViewId:t,timestamp:e},this._instance.scrollManager.resetContext(),r}doPageLeave(e){var t;return this.Qt(e,null==(t=this.Kt)?void 0:t.pageViewId)}doEvent(){var e;return{$pageview_id:null==(e=this.Kt)?void 0:e.pageViewId}}Qt(e,t){var n=this.Kt;if(!n)return{$pageview_id:t};var r={$pageview_id:t,$prev_pageview_id:n.pageViewId},i=this._instance.scrollManager.getContext();if(i&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:a,lastScrollY:s,maxScrollY:o,maxContentHeight:l,lastContentY:c,maxContentY:u}=i;if(!(Md(a)||Md(s)||Md(o)||Md(l)||Md(c)||Md(u))){a=Math.ceil(a),s=Math.ceil(s),o=Math.ceil(o),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u);var d=a<=1?1:Jd(s/a,0,1,jp),h=a<=1?1:Jd(o/a,0,1,jp),p=l<=1?1:Jd(c/l,0,1,jp),f=l<=1?1:Jd(u/l,0,1,jp);r=Dp(r,{$prev_pageview_last_scroll:s,$prev_pageview_last_scroll_percentage:d,$prev_pageview_max_scroll:o,$prev_pageview_max_scroll_percentage:h,$prev_pageview_last_content:c,$prev_pageview_last_content_percentage:p,$prev_pageview_max_content:u,$prev_pageview_max_content_percentage:f})}}return n.pathname&&(r.$prev_pageview_pathname=n.pathname),n.timestamp&&(r.$prev_pageview_duration=(e.getTime()-n.timestamp.getTime())/1e3),r}}var gg=function(e){return e.GZipJS="gzip-js",e.Base64="base64",e}({}),vg=Uint8Array,bg=Uint16Array,yg=Uint32Array,xg=new vg([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_g=new vg([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wg=new vg([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kg=function(e,t){for(var n=new bg(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new yg(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return[n,i]},Ng=kg(xg,2),jg=Ng[0],Sg=Ng[1];jg[28]=258,Sg[258]=28;for(var Cg=kg(_g,0)[1],Eg=new bg(32768),Pg=0;Pg<32768;++Pg){var $g=(43690&Pg)>>>1|(21845&Pg)<<1;$g=(61680&($g=(52428&$g)>>>2|(13107&$g)<<2))>>>4|(3855&$g)<<4,Eg[Pg]=((65280&$g)>>>8|(255&$g)<<8)>>>1}var Tg=function(e,t,n){for(var r=e.length,i=0,a=new bg(t);i<r;++i)++a[e[i]-1];var s,o=new bg(t);for(i=0;i<t;++i)o[i]=o[i-1]+a[i-1]<<1;for(s=new bg(r),i=0;i<r;++i)s[i]=Eg[o[e[i]-1]++]>>>15-e[i];return s},Dg=new vg(288);for(Pg=0;Pg<144;++Pg)Dg[Pg]=8;for(Pg=144;Pg<256;++Pg)Dg[Pg]=9;for(Pg=256;Pg<280;++Pg)Dg[Pg]=7;for(Pg=280;Pg<288;++Pg)Dg[Pg]=8;var Ig=new vg(32);for(Pg=0;Pg<32;++Pg)Ig[Pg]=5;var Ag=Tg(Dg,9),Rg=Tg(Ig,5),Fg=function(e){return(e/8|0)+(7&e&&1)},Og=function(e,t,n){(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof bg?bg:e instanceof yg?yg:vg)(n-t);return r.set(e.subarray(t,n)),r},Mg=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},zg=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},Lg=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,a=n.slice();if(!i)return[new vg(0),0];if(1==i){var s=new vg(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=i-1;)o=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:o.f+l.f,l:o,r:l};var h=a[0].s;for(r=1;r<i;++r)a[r].s>h&&(h=a[r].s);var p=new bg(h+1),f=Bg(n[u-1],p,0);if(f>t){r=0;var m=0,g=f-t,v=1<<g;for(a.sort(function(e,t){return p[t.s]-p[e.s]||e.f-t.f});r<i;++r){var b=a[r].s;if(!(p[b]>t))break;m+=v-(1<<f-p[b]),p[b]=t}for(m>>>=g;m>0;){var y=a[r].s;p[y]<t?m-=1<<t-p[y]++-1:++r}for(;r>=0&&m;--r){var x=a[r].s;p[x]==t&&(--p[x],++m)}f=t}return[new vg(p),f]},Bg=function(e,t,n){return-1==e.s?Math.max(Bg(e.l,t,n+1),Bg(e.r,t,n+1)):t[e.s]=n},Ug=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new bg(++t),r=0,i=e[0],a=1,s=function(e){n[r++]=e},o=1;o<=t;++o)if(e[o]==i&&o!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=e[o]}return[n.subarray(0,r),t]},Hg=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},Vg=function(e,t,n){var r=n.length,i=Fg(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var a=0;a<r;++a)e[i+a+4]=n[a];return 8*(i+4+r)},qg=function(e,t,n,r,i,a,s,o,l,c,u){Mg(t,u++,n),++i[256];for(var d=Lg(i,15),h=d[0],p=d[1],f=Lg(a,15),m=f[0],g=f[1],v=Ug(h),b=v[0],y=v[1],x=Ug(m),_=x[0],w=x[1],k=new bg(19),N=0;N<b.length;++N)k[31&b[N]]++;for(N=0;N<_.length;++N)k[31&_[N]]++;for(var j=Lg(k,7),S=j[0],C=j[1],E=19;E>4&&!S[wg[E-1]];--E);var P,$,T,D,I=c+5<<3,A=Hg(i,Dg)+Hg(a,Ig)+s,R=Hg(i,h)+Hg(a,m)+s+14+3*E+Hg(k,S)+(2*k[16]+3*k[17]+7*k[18]);if(I<=A&&I<=R)return Vg(t,u,e.subarray(l,l+c));if(Mg(t,u,1+(R<A)),u+=2,R<A){P=Tg(h,p),$=h,T=Tg(m,g),D=m;var F=Tg(S,C);for(Mg(t,u,y-257),Mg(t,u+5,w-1),Mg(t,u+10,E-4),u+=14,N=0;N<E;++N)Mg(t,u+3*N,S[wg[N]]);u+=3*E;for(var O=[b,_],M=0;M<2;++M){var z=O[M];for(N=0;N<z.length;++N){var L=31&z[N];Mg(t,u,F[L]),u+=S[L],L>15&&(Mg(t,u,z[N]>>>5&127),u+=z[N]>>>12)}}}else P=Ag,$=Dg,T=Rg,D=Ig;for(N=0;N<o;++N)if(r[N]>255){L=r[N]>>>18&31,zg(t,u,P[L+257]),u+=$[L+257],L>7&&(Mg(t,u,r[N]>>>23&31),u+=xg[L]);var B=31&r[N];zg(t,u,T[B]),u+=D[B],B>3&&(zg(t,u,r[N]>>>5&8191),u+=_g[B])}else zg(t,u,P[r[N]]),u+=$[r[N]];return zg(t,u,P[256]),u+$[256]},Wg=new yg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Kg=function(){for(var e=new yg(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),Gg=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function Yg(e,t){void 0===t&&(t={});var n=function(){var e=4294967295;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=Kg[255&n^t[r]]^n>>>8;e=n},d:function(){return 4294967295^e}}}(),r=e.length;n.p(e);var i,a=function(e,t,n,r){return function(e,t,n,r,i){var a=e.length,s=new vg(r+a+5*(1+Math.floor(a/7e3))+i),o=s.subarray(r,s.length-i),l=0;if(!t||a<8)for(var c=0;c<=a;c+=65535){var u=c+65535;u<a?l=Vg(o,l,e.subarray(c,u)):(o[c]=!0,l=Vg(o,l,e.subarray(c,a)))}else{for(var d=Wg[t-1],h=d>>>13,p=8191&d,f=(1<<n)-1,m=new bg(32768),g=new bg(f+1),v=Math.ceil(n/3),b=2*v,y=function(t){return(e[t]^e[t+1]<<v^e[t+2]<<b)&f},x=new yg(25e3),_=new bg(288),w=new bg(32),k=0,N=0,j=(c=0,0),S=0,C=0;c<a;++c){var E=y(c),P=32767&c,$=g[E];if(m[P]=$,g[E]=P,S<=c){var T=a-c;if((k>7e3||j>24576)&&T>423){l=qg(e,o,0,x,_,w,N,j,C,c-C,l),j=k=N=0,C=c;for(var D=0;D<286;++D)_[D]=0;for(D=0;D<30;++D)w[D]=0}var I=2,A=0,R=p,F=P-$&32767;if(T>2&&E==y(c-F))for(var O=Math.min(h,T)-1,M=Math.min(32767,c),z=Math.min(258,T);F<=M&&--R&&P!=$;){if(e[c+I]==e[c+I-F]){for(var L=0;L<z&&e[c+L]==e[c+L-F];++L);if(L>I){if(I=L,A=F,L>O)break;var B=Math.min(F,L-2),U=0;for(D=0;D<B;++D){var H=c-F+D+32768&32767,V=H-m[H]+32768&32767;V>U&&(U=V,$=H)}}}F+=(P=$)-($=m[P])+32768&32767}if(A){x[j++]=268435456|Sg[I]<<18|Cg[A];var q=31&Sg[I],W=31&Cg[A];N+=xg[q]+_g[W],++_[257+q],++w[W],S=c+I,++k}else x[j++]=e[c],++_[e[c]]}}l=qg(e,o,!0,x,_,w,N,j,C,c-C,l)}return Og(s,0,r+Fg(l)+i)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r)}(e,t,10+((i=t).filename&&i.filename.length+1||0),8),s=a.length;return function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&Gg(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}}(a,t),Gg(a,s-8,n.d()),Gg(a,s-4,r),a}var Zg=!!md||!!fd,Xg="text/plain",Qg=function(e,t,n){var r;void 0===n&&(n=!0);var[i,a]=e.split("?"),s=wd({},t),o=null!==(r=null==a?void 0:a.split("&").map(e=>{var t,[r,i]=e.split("="),a=n&&null!==(t=s[r])&&void 0!==t?t:i;return delete s[r],r+"="+a}))&&void 0!==r?r:[],l=function(e,t){var n,r;void 0===t&&(t="&");var i=[];return Tp(e,function(e,t){Md(e)||Md(t)||"undefined"===t||(n=encodeURIComponent(e instanceof File?e.name:e.toString()),r=encodeURIComponent(t),i[i.length]=r+"="+n)}),i.join(t)}(s);return l&&o.push(l),i+"?"+o.join("&")},Jg=(e,t)=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString():t,t),ev=e=>{var t,{data:n,compression:r}=e;if(n){if(r===gg.GZipJS){var i=Yg(function(e){var t=e.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var n=new vg(e.length+(e.length>>>1)),r=0,i=function(e){n[r++]=e},a=0;a<t;++a){if(r+5>n.length){var s=new vg(r+8+(t-a<<1));s.set(n),n=s}var o=e.charCodeAt(a);o<128?i(o):o<2048?(i(192|o>>>6),i(128|63&o)):o>55295&&o<57344?(i(240|(o=65536+(1047552&o)|1023&e.charCodeAt(++a))>>>18),i(128|o>>>12&63),i(128|o>>>6&63),i(128|63&o)):(i(224|o>>>12),i(128|o>>>6&63),i(128|63&o))}return Og(n,0,r)}(Jg(n)),{mtime:0}),a=new Blob([i],{type:Xg});return{contentType:Xg,body:a,estimatedSize:a.size}}if(r===gg.Base64){var s=function(e){var t,n,r,i,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=0,l=0,c="",u=[];if(!e)return e;e=function(e){var t,n,r,i,a="";for(t=n=0,r=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<r;i++){var s=e.charCodeAt(i),o=null;s<128?n++:o=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),Bd(o)||(n>t&&(a+=e.substring(t,n)),a+=o,t=n=i+1)}return n>t&&(a+=e.substring(t,e.length)),a}(e);do{t=(a=e.charCodeAt(o++)<<16|e.charCodeAt(o++)<<8|e.charCodeAt(o++))>>18&63,n=a>>12&63,r=a>>6&63,i=63&a,u[l++]=s.charAt(t)+s.charAt(n)+s.charAt(r)+s.charAt(i)}while(o<e.length);switch(c=u.join(""),e.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c}(Jg(n)),o=(t=s,"data="+encodeURIComponent("string"==typeof t?t:Jg(t)));return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var l=Jg(n);return{contentType:"application/json",body:l,estimatedSize:new Blob([l]).size}}},tv=[];fd&&tv.push({transport:"fetch",method:e=>{var t,n,{contentType:r,body:i,estimatedSize:a}=null!==(t=ev(e))&&void 0!==t?t:{},s=new Headers;Tp(e.headers,function(e,t){s.append(t,e)}),r&&s.append("Content-Type",r);var o=e.url,l=null;if(gd){var c=new gd;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),e.timeout)}}fd(o,wd({method:(null==e?void 0:e.method)||"GET",headers:s,keepalive:"POST"===e.method&&(a||0)<52428.8,body:i,signal:null==(n=l)?void 0:n.signal},e.fetchOptions)).then(t=>t.text().then(n=>{var r={statusCode:t.status,text:n};if(200===t.status)try{r.json=JSON.parse(n)}catch(i){jp.error(i)}null==e.callback||e.callback(r)})).catch(t=>{jp.error(t),null==e.callback||e.callback({statusCode:0,text:t})}).finally(()=>l?clearTimeout(l.timeout):null)}}),md&&tv.push({transport:"XHR",method:e=>{var t,n=new md;n.open(e.method||"GET",e.url,!0);var{contentType:r,body:i}=null!==(t=ev(e))&&void 0!==t?t:{};Tp(e.headers,function(e,t){n.setRequestHeader(t,e)}),r&&n.setRequestHeader("Content-Type",r),e.timeout&&(n.timeout=e.timeout),e.disableXHRCredentials||(n.withCredentials=!0),n.onreadystatechange=()=>{if(4===n.readyState){var t={statusCode:n.status,text:n.responseText};if(200===n.status)try{t.json=JSON.parse(n.responseText)}catch(r){}null==e.callback||e.callback(t)}},n.send(i)}}),null!=dd&&dd.sendBeacon&&tv.push({transport:"sendBeacon",method:e=>{var t=Qg(e.url,{beacon:"1"});try{var n,{contentType:r,body:i}=null!==(n=ev(e))&&void 0!==n?n:{},a="string"==typeof i?new Blob([i],{type:r}):i;dd.sendBeacon(t,a)}catch(s){}}});var nv=function(e,t){if(!function(e){try{new RegExp(e)}catch(t){return!1}return!0}(t))return!1;try{return new RegExp(t).test(e)}catch(n){return!1}};function rv(e,t,n){return Jg({distinct_id:e,userPropertiesToSet:t,userPropertiesToSetOnce:n})}var iv={exact:(e,t)=>t.some(t=>e.some(e=>t===e)),is_not:(e,t)=>t.every(t=>e.every(e=>t!==e)),regex:(e,t)=>t.some(t=>e.some(e=>nv(t,e))),not_regex:(e,t)=>t.every(t=>e.every(e=>!nv(t,e))),icontains:(e,t)=>t.map(av).some(t=>e.map(av).some(e=>t.includes(e))),not_icontains:(e,t)=>t.map(av).every(t=>e.map(av).every(e=>!t.includes(e))),gt:(e,t)=>t.some(t=>{var n=parseFloat(t);return!isNaN(n)&&e.some(e=>n>parseFloat(e))}),lt:(e,t)=>t.some(t=>{var n=parseFloat(t);return!isNaN(n)&&e.some(e=>n<parseFloat(e))})},av=e=>e.toLowerCase();function sv(e,t){return!e||Object.entries(e).every(e=>{var[n,r]=e,i=null==t?void 0:t[n];if(Md(i)||Bd(i))return!1;var a=[String(i)],s=iv[r.operator];return!!s&&s(r.values,a)})}var ov=Sp("[Error tracking]");class lv{constructor(e){var t,n;this.Zt=[],this.ti=new tp([new pp,new kp,new mp,new fp,new _p,new xp,new vp,new wp],function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(t,r){void 0===r&&(r=0);for(var i=[],a=t.split("\n"),s=r;s<a.length;s++){var o=a[s];if(!(o.length>1024)){var l=hp.test(o)?o.replace(hp,"$1"):o;if(!l.match(/\S*Error: /)){for(var c of n){var u=c(l,e);if(u){i.push(u);break}}if(i.length>=50)break}}}return function(e){if(!e.length)return[];var t=Array.from(e);return t.reverse(),t.slice(0,50).map(e=>{return wd({},e,{filename:e.filename||(n=t,n[n.length-1]||{}).filename,function:e.function||np});var n})}(i)}}("web:javascript",lp,dp)),this._instance=e,this.Zt=null!==(t=null==(n=this._instance.persistence)?void 0:n.get_property(Gp))&&void 0!==t?t:[]}onRemoteConfig(e){var t,n,r,i=null!==(t=null==(n=e.errorTracking)?void 0:n.suppressionRules)&&void 0!==t?t:[],a=null==(r=e.errorTracking)?void 0:r.captureExtensionExceptions;this.Zt=i,this._instance.persistence&&this._instance.persistence.register({[Gp]:this.Zt,[Yp]:a})}get ii(){var e,t=!!this._instance.get_property(Yp),n=this._instance.config.error_tracking.captureExtensionExceptions;return null!==(e=null!=n?n:t)&&void 0!==e&&e}buildProperties(e,t){return this.ti.buildFromUnknown(e,{syntheticException:null==t?void 0:t.syntheticException,mechanism:{handled:null==t?void 0:t.handled}})}sendExceptionEvent(e){var t=e.$exception_list;if(this.ei(t)){if(this.ri(t))return void ov.info("Skipping exception capture because a suppression rule matched");if(!this.ii&&this.si(t))return void ov.info("Skipping exception capture because it was thrown by an extension");if(!this._instance.config.error_tracking.__capturePostHogExceptions&&this.ni(t))return void ov.info("Skipping exception capture because it was thrown by the PostHog SDK")}return this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}ri(e){if(0===e.length)return!1;var t=e.reduce((e,t)=>{var{type:n,value:r}=t;return zd(n)&&n.length>0&&e.$exception_types.push(n),zd(r)&&r.length>0&&e.$exception_values.push(r),e},{$exception_types:[],$exception_values:[]});return this.Zt.some(e=>{var n=e.values.map(e=>{var n,r=iv[e.operator],i=Ad(e.value)?e.value:[e.value],a=null!==(n=t[e.key])&&void 0!==n?n:[];return i.length>0&&r(i,a)});return"OR"===e.type?n.some(Boolean):n.every(Boolean)})}si(e){return e.flatMap(e=>{var t,n;return null!==(t=null==(n=e.stacktrace)?void 0:n.frames)&&void 0!==t?t:[]}).some(e=>e.filename&&e.filename.startsWith("chrome-extension://"))}ni(e){if(e.length>0){var t,n,r,i,a=null!==(t=null==(n=e[0].stacktrace)?void 0:n.frames)&&void 0!==t?t:[],s=a[a.length-1];return null!==(r=null==s||null==(i=s.filename)?void 0:i.includes("posthog.com/static"))&&void 0!==r&&r}return!1}ei(e){return!Ud(e)&&Ad(e)}}var cv=Sp("[FeatureFlags]"),uv=Sp("[FeatureFlags]",{debugEnabled:!0}),dv="$active_feature_flags",hv="$override_feature_flags",pv="$feature_flag_payloads",fv="$override_feature_flag_payloads",mv="$feature_flag_request_id",gv="$feature_flag_evaluated_at",vv=e=>{var t={};for(var[n,r]of Ap(e||{}))r&&(t[n]=r);return t},bv=function(e){return e.FeatureFlags="feature_flags",e.Recordings="recordings",e}({});class yv{constructor(e){this.oi=!1,this.ai=!1,this.li=!1,this.ui=!1,this.hi=!1,this.di=!1,this.vi=!1,this._instance=e,this.featureFlagEventHandlers=[]}ci(){var e=this._instance.config.evaluation_environments;return null!=e&&e.length?e.filter(e=>{var t=e&&"string"==typeof e&&e.trim().length>0;return t||cv.error("Invalid evaluation environment found:",e,"Expected non-empty string"),t}):[]}fi(){return this.ci().length>0}flags(){if(this._instance.config.__preview_remote_config)this.di=!0;else{var e=!this.pi&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.gi({disableFlags:e})}}get hasLoadedFlags(){return this.ai}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(sf),t=this._instance.get_property(hv),n=this._instance.get_property(fv);if(!n&&!t)return e||{};var r=Dp({},e||{}),i=[...new Set([...Object.keys(n||{}),...Object.keys(t||{})])];for(var a of i){var s,o,l=r[a],c=null==t?void 0:t[a],u=Md(c)?null!==(s=null==l?void 0:l.enabled)&&void 0!==s&&s:!!c,d=Md(c)?l.variant:"string"==typeof c?c:void 0,h=null==n?void 0:n[a],p=wd({},l,{enabled:u,variant:u?null!=d?d:null==l?void 0:l.variant:void 0});u!==(null==l?void 0:l.enabled)&&(p.original_enabled=null==l?void 0:l.enabled),d!==(null==l?void 0:l.variant)&&(p.original_variant=null==l?void 0:l.variant),h&&(p.metadata=wd({},null==l?void 0:l.metadata,{payload:h,original_payload:null==l||null==(o=l.metadata)?void 0:o.payload})),r[a]=p}return this.oi||(cv.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:n,finalDetails:r}),this.oi=!0),r}getFlagVariants(){var e=this._instance.get_property(rf),t=this._instance.get_property(hv);if(!t)return e||{};for(var n=Dp({},e),r=Object.keys(t),i=0;i<r.length;i++)n[r[i]]=t[r[i]];return this.oi||(cv.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:n}),this.oi=!0),n}getFlagPayloads(){var e=this._instance.get_property(pv),t=this._instance.get_property(fv);if(!t)return e||{};for(var n=Dp({},e||{}),r=Object.keys(t),i=0;i<r.length;i++)n[r[i]]=t[r[i]];return this.oi||(cv.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:t,finalPayloads:n}),this.oi=!0),n}reloadFeatureFlags(){this.ui||this._instance.config.advanced_disable_feature_flags||this.pi||(this.pi=setTimeout(()=>{this.gi()},5))}mi(){clearTimeout(this.pi),this.pi=void 0}ensureFlagsLoaded(){this.ai||this.li||this.pi||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.ui=e}gi(e){var t;if(this.mi(),!this._instance.O())if(this.li)this.hi=!0;else{var n=this._instance.config.token,r=this._instance.get_property("$device_id"),i={token:n,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:wd({},(null==(t=this._instance.persistence)?void 0:t.get_initial_props())||{},this._instance.get_property(of)||{}),group_properties:this._instance.get_property(lf)};Bd(r)||Md(r)||(i.$device_id=r),(null!=e&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(i.disable_flags=!0),this.fi()&&(i.evaluation_environments=this.ci());var a=this._instance.config.__preview_remote_config,s=a?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",l=this._instance.requestRouter.endpointFor("flags",s+o);a&&(i.timezone=og()),this.li=!0,this._instance._send_request({method:"POST",url:l,data:i,compression:this._instance.config.disable_compression?void 0:gg.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:e=>{var t,n,r=!0;if(200===e.statusCode&&(this.hi||(this.$anon_distinct_id=void 0),r=!1),this.li=!1,this.di||(this.di=!0,this._instance.yi(null!==(n=e.json)&&void 0!==n?n:{})),!i.disable_flags||this.hi)if(this.vi=!r,e.json&&null!=(t=e.json.quotaLimited)&&t.includes(bv.FeatureFlags))cv.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var a;i.disable_flags||this.receivedFeatureFlags(null!==(a=e.json)&&void 0!==a?a:{},r),this.hi&&(this.hi=!1,this.gi())}}})}}getFeatureFlag(e,t){if(void 0===t&&(t={}),this.ai||this.getFlags()&&this.getFlags().length>0){var n=this.getFlagVariants()[e],r=""+n,i=this._instance.get_property(mv)||void 0,a=this._instance.get_property(gv)||void 0,s=this._instance.get_property(uf)||{};if((t.send_event||!("send_event"in t))&&(!(e in s)||!s[e].includes(r))){var o,l,c,u,d,h,p,f,m;Ad(s[e])?s[e].push(r):s[e]=[r],null==(o=this._instance.persistence)||o.register({[uf]:s});var g=this.getFeatureFlagDetails(e),v={$feature_flag:e,$feature_flag_response:n,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:i,$feature_flag_evaluated_at:a,$feature_flag_bootstrapped_response:(null==(l=this._instance.config.bootstrap)||null==(l=l.featureFlags)?void 0:l[e])||null,$feature_flag_bootstrapped_payload:(null==(c=this._instance.config.bootstrap)||null==(c=c.featureFlagPayloads)?void 0:c[e])||null,$used_bootstrap_value:!this.vi};Md(null==g||null==(u=g.metadata)?void 0:u.version)||(v.$feature_flag_version=g.metadata.version);var b,y=null!==(d=null==g||null==(h=g.reason)?void 0:h.description)&&void 0!==d?d:null==g||null==(p=g.reason)?void 0:p.code;y&&(v.$feature_flag_reason=y),null!=g&&null!=(f=g.metadata)&&f.id&&(v.$feature_flag_id=g.metadata.id),Md(null==g?void 0:g.original_variant)&&Md(null==g?void 0:g.original_enabled)||(v.$feature_flag_original_response=Md(g.original_variant)?g.original_enabled:g.original_variant),null!=g&&null!=(m=g.metadata)&&m.original_payload&&(v.$feature_flag_original_payload=null==g||null==(b=g.metadata)?void 0:b.original_payload),this._instance.capture("$feature_flag_called",v)}return n}cv.warn('getFeatureFlag for key "'+e+"\" failed. Feature flags didn't load in time.")}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,t){var n=this._instance.config.token,r={distinct_id:this._instance.get_distinct_id(),token:n};this.fi()&&(r.evaluation_environments=this.ci()),this._instance._send_request({method:"POST",url:this._instance.requestRouter.endpointFor("flags","/flags/?v=2&config=true"),data:r,compression:this._instance.config.disable_compression?void 0:gg.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:n=>{var r,i=null==(r=n.json)?void 0:r.featureFlagPayloads;t((null==i?void 0:i[e])||void 0)}})}isFeatureEnabled(e,t){if(void 0===t&&(t={}),this.ai||this.getFlags()&&this.getFlags().length>0){var n=this.getFeatureFlag(e,t);return Md(n)?void 0:!!n}cv.warn('isFeatureEnabled for key "'+e+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(t=>t!==e)}receivedFeatureFlags(e,t){if(this._instance.persistence){this.ai=!0;var n=this.getFlagVariants(),r=this.getFlagPayloads(),i=this.getFlagsWithDetails();!function(e,t,n,r,i){void 0===n&&(n={}),void 0===r&&(r={}),void 0===i&&(i={});var a=(e=>{var t=e.flags;return t?(e.featureFlags=Object.fromEntries(Object.keys(t).map(e=>{var n;return[e,null!==(n=t[e].variant)&&void 0!==n?n:t[e].enabled]})),e.featureFlagPayloads=Object.fromEntries(Object.keys(t).filter(e=>t[e].enabled).filter(e=>{var n;return null==(n=t[e].metadata)?void 0:n.payload}).map(e=>{var n;return[e,null==(n=t[e].metadata)?void 0:n.payload]}))):cv.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),e})(e),s=a.flags,o=a.featureFlags,l=a.featureFlagPayloads;if(o){var c=e.requestId,u=e.evaluatedAt;if(Ad(o)){cv.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var d={};if(o)for(var h=0;h<o.length;h++)d[o[h]]=!0;t&&t.register({[dv]:o,[rf]:d})}else{var p=o,f=l,m=s;e.errorsWhileComputingFlags&&(p=wd({},n,p),f=wd({},r,f),m=wd({},i,m)),t&&t.register(wd({[dv]:Object.keys(vv(p)),[rf]:p||{},[pv]:f||{},[sf]:m||{}},c?{[mv]:c}:{},u?{[gv]:u}:{}))}}}(e,this._instance.persistence,n,r,i),this.bi(t)}}override(e,t){void 0===t&&(t=!1),cv.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:t})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return cv.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(!1===e)return this._instance.persistence.unregister(hv),this._instance.persistence.unregister(fv),this.bi(),uv.info("All overrides cleared");if(e&&"object"==typeof e&&("flags"in e||"payloads"in e)){var t,n=e;if(this.oi=Boolean(null!==(t=n.suppressWarning)&&void 0!==t&&t),"flags"in n)if(!1===n.flags)this._instance.persistence.unregister(hv),uv.info("Flag overrides cleared");else if(n.flags){if(Ad(n.flags)){for(var r={},i=0;i<n.flags.length;i++)r[n.flags[i]]=!0;this._instance.persistence.register({[hv]:r})}else this._instance.persistence.register({[hv]:n.flags});uv.info("Flag overrides set",{flags:n.flags})}return"payloads"in n&&(!1===n.payloads?(this._instance.persistence.unregister(fv),uv.info("Payload overrides cleared")):n.payloads&&(this._instance.persistence.register({[fv]:n.payloads}),uv.info("Payload overrides set",{payloads:n.payloads}))),void this.bi()}this.bi()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.ai){var{flags:t,flagVariants:n}=this.wi();e(t,n)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,t,n){var r,i=(this._instance.get_property(af)||[]).find(t=>t.flagKey===e),a={["$feature_enrollment/"+e]:t},s={$feature_flag:e,$feature_enrollment:t,$set:a};i&&(s.$early_access_feature_name=i.name),n&&(s.$feature_enrollment_stage=n),this._instance.capture("$feature_enrollment_update",s),this.setPersonPropertiesForFlags(a,!1);var o=wd({},this.getFlagVariants(),{[e]:t});null==(r=this._instance.persistence)||r.register({[dv]:Object.keys(vv(o)),[rf]:o}),this.bi()}getEarlyAccessFeatures(e,t,n){void 0===t&&(t=!1);var r=this._instance.get_property(af),i=n?"&"+n.map(e=>"stage="+e).join("&"):"";if(r&&!t)return e(r);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+i),method:"GET",callback:t=>{var n,r;if(t.json){var i=t.json.earlyAccessFeatures;return null==(n=this._instance.persistence)||n.unregister(af),null==(r=this._instance.persistence)||r.register({[af]:i}),e(i)}}})}wi(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter(e=>t[e]),flagVariants:Object.keys(t).filter(e=>t[e]).reduce((e,n)=>(e[n]=t[n],e),{})}}bi(e){var{flags:t,flagVariants:n}=this.wi();this.featureFlagEventHandlers.forEach(r=>r(t,n,{errorsLoading:e}))}setPersonPropertiesForFlags(e,t){void 0===t&&(t=!0);var n=this._instance.get_property(of)||{};this._instance.register({[of]:wd({},n,e)}),t&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(of)}setGroupPropertiesForFlags(e,t){void 0===t&&(t=!0);var n=this._instance.get_property(lf)||{};0!==Object.keys(n).length&&Object.keys(n).forEach(t=>{n[t]=wd({},n[t],e[t]),delete e[t]}),this._instance.register({[lf]:wd({},n,e)}),t&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var t=this._instance.get_property(lf)||{};this._instance.register({[lf]:wd({},t,{[e]:{}})})}else this._instance.unregister(lf)}reset(){this.ai=!1,this.li=!1,this.ui=!1,this.hi=!1,this.di=!1,this.vi=!1,this.$anon_distinct_id=void 0,this.mi(),this.oi=!1}}var xv=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class _v{constructor(e,t){var n,r;this.R=e,this.props={},this.xi=!1,this.Ei=(r="",(n=e).token&&(r=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+r+"_posthog"),this.Y=this.$i(e),this.load(),e.debug&&jp.info("Persistence loaded",e.persistence,wd({},this.props)),this.update_config(e,e,t),this.save()}isDisabled(){return!!this.Si}$i(e){-1===xv.indexOf(e.persistence.toLowerCase())&&(jp.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t=function(e){void 0===e&&(e=[]);var t=[...km,...e];return wd({},wm,{W:function(e){try{var t={};try{t=xm.W(e)||{}}catch(r){}var n=Dp(t,JSON.parse(wm.q(e)||"{}"));return wm.G(e,n),n}catch(r){}return null},G:function(e,n,r,i,a,s){try{wm.G(e,n,void 0,void 0,s);var o={};t.forEach(e=>{n[e]&&(o[e]=n[e])}),Object.keys(o).length&&xm.G(e,o,r,i,a,s)}catch(l){wm.B(l)}},V:function(e,t){try{null==sd||sd.localStorage.removeItem(e),xm.V(e,t)}catch(ym){wm.B(ym)}}})}(e.cookie_persisted_properties||[]),n=e.persistence.toLowerCase();return"localstorage"===n&&wm.H()?wm:"localstorage+cookie"===n&&t.H()?t:"sessionstorage"===n&&Cm.H()?Cm:"memory"===n?jm:"cookie"===n?xm:t.H()?t:xm}properties(){var e={};return Tp(this.props,function(t,n){if(n===rf&&Fd(t))for(var r=Object.keys(t),i=0;i<r.length;i++)e["$feature/"+r[i]]=t[r[i]];else s=n,o=!1,(Bd(a=xf)?o:ud&&a.indexOf===ud?-1!=a.indexOf(s):(Tp(a,function(e){if(o||(o=e===s))return Pp}),o))||(e[n]=t);var a,s,o}),e}load(){if(!this.Si){var e=this.Y.W(this.Ei);e&&(this.props=Dp({},e))}}save(){this.Si||this.Y.G(this.Ei,this.props,this.ki,this.Pi,this.Ti,this.R.debug)}remove(){this.Y.V(this.Ei,!1),this.Y.V(this.Ei,!0)}clear(){this.remove(),this.props={}}register_once(e,t,n){if(Fd(e)){Md(t)&&(t="None"),this.ki=Md(n)?this.Ii:n;var r=!1;if(Tp(e,(e,n)=>{this.props.hasOwnProperty(n)&&this.props[n]!==t||(this.props[n]=e,r=!0)}),r)return this.save(),!0}return!1}register(e,t){if(Fd(e)){this.ki=Md(t)?this.Ii:t;var n=!1;if(Tp(e,(t,r)=>{e.hasOwnProperty(r)&&this.props[r]!==t&&(this.props[r]=t,n=!0)}),n)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.xi){var e=eg(this.R.custom_campaign_params,this.R.mask_personal_data_properties,this.R.custom_personal_data_properties);Od(Op(e))||this.register(e),this.xi=!0}}update_search_keyword(){var e;this.register((e=null==hd?void 0:hd.referrer)?ng(e):{})}update_referrer_info(){var e;this.register_once({$referrer:ig(),$referring_domain:null!=hd&&hd.referrer&&(null==(e=Jf(hd.referrer))?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[ff]||this.props[mf]||this.register_once({[gf]:ag(this.R.mask_personal_data_properties,this.R.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};Tp([mf,ff],t=>{var n=this.props[t];n&&Tp(n,function(t,n){e["$initial_"+Pd(n)]=t})});var t,n,r=this.props[gf];if(r){var i=(t=sg(r),n={},Tp(t,function(e,t){n["$initial_"+Pd(t)]=e}),n);Dp(e,i)}return e}safe_merge(e){return Tp(this.props,function(t,n){n in e||(e[n]=t)}),e}update_config(e,t,n){if(this.Ii=this.ki=e.cookie_expiration,this.set_disabled(e.disable_persistence||!!n),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence||!((e,t)=>{if(e.length!==t.length)return!1;var n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>e===r[t])})(e.cookie_persisted_properties||[],t.cookie_persisted_properties||[])){var r=this.$i(e),i=this.props;this.clear(),this.Y=r,this.props=i,this.save()}}set_disabled(e){this.Si=e,this.Si?this.remove():this.save()}set_cross_subdomain(e){e!==this.Pi&&(this.Pi=e,this.remove(),this.save())}set_secure(e){e!==this.Ti&&(this.Ti=e,this.remove(),this.save())}set_event_timer(e,t){var n=this.props[Vp]||{};n[e]=t,this.props[Vp]=n,this.save()}remove_event_timer(e){var t=(this.props[Vp]||{})[e];return Md(t)||(delete this.props[Vp][e],this.save()),t}get_property(e){return this.props[e]}set_property(e,t){this.props[e]=t,this.save()}}var wv=Sp("[Product Tours]"),kv="ph_product_tours";class Nv{constructor(e){this.Ci=null,this.Ri=null,this._instance=e}onRemoteConfig(e){this._instance.persistence&&this._instance.persistence.register({[Qp]:!(null==e||!e.productTours)}),this.loadIfEnabled()}loadIfEnabled(){var e,t;this.Ci||(e=this._instance).config.disable_product_tours||null==(t=e.persistence)||!t.get_property(Qp)||this.it(()=>this.Fi())}it(e){var t,n;null!=(t=bd.__PosthogExtensions__)&&t.generateProductTours?e():null==(n=bd.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,"product-tours",t=>{t?wv.error("Could not load product tours script",t):e()})}Fi(){var e;!this.Ci&&null!=(e=bd.__PosthogExtensions__)&&e.generateProductTours&&(this.Ci=bd.__PosthogExtensions__.generateProductTours(this._instance,!0))}getProductTours(e,t){if(void 0===t&&(t=!1),!Ad(this.Ri)||t){var n=this._instance.persistence;if(n){var r=n.props[kv];if(Ad(r)&&!t)return this.Ri=r,void e(r,{isLoaded:!0})}this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/product_tours/?token="+this._instance.config.token),method:"GET",callback:t=>{var r=t.statusCode;if(200!==r||!t.json){var i="Product Tours API could not be loaded, status: "+r;return wv.error(i),void e([],{isLoaded:!1,error:i})}var a=Ad(t.json.product_tours)?t.json.product_tours:[];this.Ri=a,n&&n.register({[kv]:a}),e(a,{isLoaded:!0})}})}else e(this.Ri,{isLoaded:!0})}getActiveProductTours(e){Ud(this.Ci)?e([],{isLoaded:!1,error:"Product tours not loaded"}):this.Ci.getActiveProductTours(e)}showProductTour(e){var t;null==(t=this.Ci)||t.showTourById(e)}previewTour(e){this.Ci?this.Ci.previewTour(e):this.it(()=>{var t;this.Fi(),null==(t=this.Ci)||t.previewTour(e)})}dismissProductTour(){var e;null==(e=this.Ci)||e.dismissTour("user_clicked_skip")}nextStep(){var e;null==(e=this.Ci)||e.nextStep()}previousStep(){var e;null==(e=this.Ci)||e.previousStep()}clearCache(){var e;this.Ri=null,null==(e=this._instance.persistence)||e.unregister(kv)}resetTour(e){var t;null==(t=this.Ci)||t.resetTour(e)}resetAllTours(){var e;null==(e=this.Ci)||e.resetAllTours()}cancelPendingTour(e){var t;null==(t=this.Ci)||t.cancelPendingTour(e)}}var jv=function(e){return e.Activation="events",e.Cancellation="cancelEvents",e}({});!function(e){e.Button="button",e.Tab="tab",e.Selector="selector"}({}),function(e){e.TopLeft="top_left",e.TopRight="top_right",e.TopCenter="top_center",e.MiddleLeft="middle_left",e.MiddleRight="middle_right",e.MiddleCenter="middle_center",e.Left="left",e.Center="center",e.Right="right",e.NextToTrigger="next_to_trigger"}({}),function(e){e.Top="top",e.Left="left",e.Right="right",e.Bottom="bottom"}({});var Sv=function(e){return e.Popover="popover",e.API="api",e.Widget="widget",e.ExternalSurvey="external_survey",e}({});!function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}({}),function(e){e.NextQuestion="next_question",e.End="end",e.ResponseBased="response_based",e.SpecificQuestion="specific_question"}({}),function(e){e.Once="once",e.Recurring="recurring",e.Always="always"}({});var Cv=function(e){return e.SHOWN="survey shown",e.DISMISSED="survey dismissed",e.SENT="survey sent",e.ABANDONED="survey abandoned",e}({}),Ev=function(e){return e.SURVEY_ID="$survey_id",e.SURVEY_NAME="$survey_name",e.SURVEY_RESPONSE="$survey_response",e.SURVEY_ITERATION="$survey_iteration",e.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",e.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",e.SURVEY_SUBMISSION_ID="$survey_submission_id",e.SURVEY_QUESTIONS="$survey_questions",e.SURVEY_COMPLETED="$survey_completed",e.PRODUCT_TOUR_ID="$product_tour_id",e.SURVEY_LAST_SEEN_DATE="$survey_last_seen_date",e}({}),Pv=function(e){return e.Popover="popover",e.Inline="inline",e}({}),$v=Sp("[Surveys]"),Tv="seenSurvey_",Dv=(e,t)=>{var n="$survey_"+t+"/"+e.id;return e.current_iteration&&e.current_iteration>0&&(n="$survey_"+t+"/"+e.id+"/"+e.current_iteration),n},Iv=e=>{return r=""+(t=Tv)+(n=e).id,n.current_iteration&&n.current_iteration>0&&(r=""+t+n.id+"_"+n.current_iteration),r;var t,n,r},Av=[Sv.Popover,Sv.Widget,Sv.API],Rv={ignoreConditions:!1,ignoreDelay:!1,displayType:Pv.Popover};class Fv{constructor(){this.Mi={},this.Mi={}}on(e,t){return this.Mi[e]||(this.Mi[e]=[]),this.Mi[e].push(t),()=>{this.Mi[e]=this.Mi[e].filter(e=>e!==t)}}emit(e,t){for(var n of this.Mi[e]||[])n(t);for(var r of this.Mi["*"]||[])r(e,t)}}function Ov(e,t,n){if(Ud(e))return!1;switch(n){case"exact":return e===t;case"contains":var r=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/_/g,".").replace(/%/g,".*");return new RegExp(r,"i").test(e);case"regex":try{return new RegExp(t).test(e)}catch(i){return!1}default:return!1}}class Mv{constructor(e){this.Oi=new Fv,this.Ai=(e,t)=>this.Di(e,t)&&this.ji(e,t)&&this.Li(e,t)&&this.Ni(e,t),this.Di=(e,t)=>null==t||!t.event||(null==e?void 0:e.event)===(null==t?void 0:t.event),this._instance=e,this.Ui=new Set,this.zi=new Set}init(){var e,t;Md(null==(e=this._instance)?void 0:e.Hi)||(null==(t=this._instance)||t.Hi((e,t)=>{this.on(e,t)}))}register(e){var t,n;if(!Md(null==(t=this._instance)?void 0:t.Hi)&&(e.forEach(e=>{var t,n;null==(t=this.zi)||t.add(e),null==(n=e.steps)||n.forEach(e=>{var t;null==(t=this.Ui)||t.add((null==e?void 0:e.event)||"")})}),null!=(n=this._instance)&&n.autocapture)){var r,i=new Set;e.forEach(e=>{var t;null==(t=e.steps)||t.forEach(e=>{null!=e&&e.selector&&i.add(null==e?void 0:e.selector)})}),null==(r=this._instance)||r.autocapture.setElementSelectors(i)}}on(e,t){var n;null!=t&&0!=e.length&&(this.Ui.has(e)||this.Ui.has(null==t?void 0:t.event))&&this.zi&&(null==(n=this.zi)?void 0:n.size)>0&&this.zi.forEach(e=>{this.Bi(t,e)&&this.Oi.emit("actionCaptured",e.name)})}qi(e){this.onAction("actionCaptured",t=>e(t))}Bi(e,t){if(null==(null==t?void 0:t.steps))return!1;for(var n of t.steps)if(this.Ai(e,n))return!0;return!1}onAction(e,t){return this.Oi.on(e,t)}ji(e,t){if(null!=t&&t.url){var n,r=null==e||null==(n=e.properties)?void 0:n.$current_url;if(!r||"string"!=typeof r)return!1;if(!Ov(r,t.url,t.url_matching||"contains"))return!1}return!0}Li(e,t){return!!this.Wi(e,t)&&!!this.Gi(e,t)&&!!this.Vi(e,t)}Wi(e,t){var n;if(null==t||!t.href)return!0;var r=this.Ji(e);if(r.length>0)return r.some(e=>Ov(e.href,t.href,t.href_matching||"exact"));var i,a=(null==e||null==(n=e.properties)?void 0:n.$elements_chain)||"";return!!a&&Ov((i=a.match(/(?::|")href="(.*?)"/))?i[1]:"",t.href,t.href_matching||"exact")}Gi(e,t){var n;if(null==t||!t.text)return!0;var r=this.Ji(e);if(r.length>0)return r.some(e=>Ov(e.text,t.text,t.text_matching||"exact")||Ov(e.$el_text,t.text,t.text_matching||"exact"));var i,a,s,o=(null==e||null==(n=e.properties)?void 0:n.$elements_chain)||"";return!!o&&(i=function(e){for(var t,n=[],r=/(?::|")text="(.*?)"/g;!Ud(t=r.exec(e));)n.includes(t[1])||n.push(t[1]);return n}(o),a=t.text,s=t.text_matching||"exact",i.some(e=>Ov(e,a,s)))}Vi(e,t){var n,r;if(null==t||!t.selector)return!0;var i=null==e||null==(n=e.properties)?void 0:n.$element_selectors;if(null!=i&&i.includes(t.selector))return!0;var a=(null==e||null==(r=e.properties)?void 0:r.$elements_chain)||"";if(t.selector_regex&&a)try{return new RegExp(t.selector_regex).test(a)}catch(s){return!1}return!1}Ji(e){var t;return null==(null==e||null==(t=e.properties)?void 0:t.$elements)?[]:null==e?void 0:e.properties.$elements}Ni(e,t){return null==t||!t.properties||0===t.properties.length||sv(t.properties.reduce((e,t)=>{var n=Ad(t.value)?t.value.map(String):null!=t.value?[String(t.value)]:[];return e[t.key]={values:n,operator:t.operator||"exact"},e},{}),null==e?void 0:e.properties)}}class zv{constructor(e){this._instance=e,this.Ki=new Map,this.Yi=new Map,this.Xi=new Map}Qi(e,t){return!!e&&sv(e.propertyFilters,null==t?void 0:t.properties)}Zi(e,t){var n=new Map;return e.forEach(e=>{var r;null==(r=e.conditions)||null==(r=r[t])||null==(r=r.values)||r.forEach(t=>{if(null!=t&&t.name){var r=n.get(t.name)||[];r.push(e.id),n.set(t.name,r)}})}),n}te(e,t,n){var r=(n===jv.Activation?this.Ki:this.Yi).get(e),i=[];return this.ie(e=>{i=e.filter(e=>null==r?void 0:r.includes(e.id))}),i.filter(r=>{var i,a=null==(i=r.conditions)||null==(i=i[n])||null==(i=i.values)?void 0:i.find(t=>t.name===e);return this.Qi(a,t)})}register(e){var t;Md(null==(t=this._instance)?void 0:t.Hi)||(this.ee(e),this.re(e))}re(e){var t=e.filter(e=>{var t,n;return(null==(t=e.conditions)?void 0:t.actions)&&(null==(n=e.conditions)||null==(n=n.actions)||null==(n=n.values)?void 0:n.length)>0});0!==t.length&&(null==this.se&&(this.se=new Mv(this._instance),this.se.init(),this.se.qi(e=>{this.onAction(e)})),t.forEach(e=>{var t,n,r,i,a;e.conditions&&null!=(t=e.conditions)&&t.actions&&null!=(n=e.conditions)&&null!=(n=n.actions)&&n.values&&(null==(r=e.conditions)||null==(r=r.actions)||null==(r=r.values)?void 0:r.length)>0&&(null==(i=this.se)||i.register(e.conditions.actions.values),null==(a=e.conditions)||null==(a=a.actions)||null==(a=a.values)||a.forEach(t=>{if(t&&t.name){var n=this.Xi.get(t.name);n&&n.push(e.id),this.Xi.set(t.name,n||[e.id])}}))}))}ee(e){var t,n=e.filter(e=>{var t,n;return(null==(t=e.conditions)?void 0:t.events)&&(null==(n=e.conditions)||null==(n=n.events)||null==(n=n.values)?void 0:n.length)>0}),r=e.filter(e=>{var t,n;return(null==(t=e.conditions)?void 0:t.cancelEvents)&&(null==(n=e.conditions)||null==(n=n.cancelEvents)||null==(n=n.values)?void 0:n.length)>0});0===n.length&&0===r.length||(null==(t=this._instance)||t.Hi((e,t)=>{this.onEvent(e,t)}),this.Ki=this.Zi(e,jv.Activation),this.Yi=this.Zi(e,jv.Cancellation))}onEvent(e,t){var n,r=this.ne(),i=this.oe(),a=this.ae(),s=(null==(n=this._instance)||null==(n=n.persistence)?void 0:n.props[i])||[];if(a===e&&t&&s.length>0){var o,l;r.info("event matched, removing item from activated items",{event:e,eventPayload:t,existingActivatedItems:s});var c=(null==t||null==(o=t.properties)?void 0:o.$survey_id)||(null==t||null==(l=t.properties)?void 0:l.$product_tour_id);if(c){var u=s.indexOf(c);u>=0&&(s.splice(u,1),this.le(s))}}else{if(this.Yi.has(e)){var d=this.te(e,t,jv.Cancellation);d.length>0&&(r.info("cancel event matched, cancelling items",{event:e,itemsToCancel:d.map(e=>e.id)}),d.forEach(e=>{var t=s.indexOf(e.id);t>=0&&s.splice(t,1),this.ue(e.id)}),this.le(s))}if(this.Ki.has(e)){r.info("event name matched",{event:e,eventPayload:t,items:this.Ki.get(e)});var h=this.te(e,t,jv.Activation);this.le(s.concat(h.map(e=>e.id)||[]))}}}onAction(e){var t,n=this.oe(),r=(null==(t=this._instance)||null==(t=t.persistence)?void 0:t.props[n])||[];this.Xi.has(e)&&this.le(r.concat(this.Xi.get(e)||[]))}le(e){var t,n=this.ne(),r=this.oe(),i=[...new Set(e)].filter(e=>!this.he(e));n.info("updating activated items",{activatedItems:i}),null==(t=this._instance)||null==(t=t.persistence)||t.register({[r]:i})}getActivatedIds(){var e,t=this.oe();return(null==(e=this._instance)||null==(e=e.persistence)?void 0:e.props[t])||[]}getEventToItemsMap(){return this.Ki}de(){return this.se}}class Lv extends zv{constructor(e){super(e)}oe(){return"$surveys_activated"}ae(){return Cv.SHOWN}ie(e){var t;null==(t=this._instance)||t.getSurveys(e)}ue(e){var t;null==(t=this._instance)||t.cancelPendingSurvey(e)}ne(){return $v}he(){return!1}getSurveys(){return this.getActivatedIds()}getEventToSurveys(){return this.getEventToItemsMap()}}class Bv{constructor(e){this.ve=void 0,this._surveyManager=null,this.ce=!1,this.fe=[],this.pe=null,this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){if(!this._instance.config.disable_surveys){var t=e.surveys;if(Ud(t))return $v.warn("Flags not loaded yet. Not loading surveys.");var n=Ad(t);this.ve=n?t.length>0:t,$v.info("flags response received, isSurveysEnabled: "+this.ve),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],t=0;t<localStorage.length;t++){var n=localStorage.key(t);(null!=n&&n.startsWith(Tv)||null!=n&&n.startsWith("inProgressSurvey_"))&&e.push(n)}e.forEach(e=>localStorage.removeItem(e))}loadIfEnabled(){if(!this._surveyManager)if(this.ce)$v.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)$v.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())$v.info("Not loading surveys in cookieless mode without consent.");else{var e=null==bd?void 0:bd.__PosthogExtensions__;if(e){if(!Md(this.ve)||this._instance.config.advanced_enable_surveys){var t=this.ve||this._instance.config.advanced_enable_surveys;this.ce=!0;try{var n=e.generateSurveys;if(n)return void this.ge(n,t);var r=e.loadExternalDependency;if(!r)return void this._e("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",n=>{n||!e.generateSurveys?this._e("Could not load surveys script",n):this.ge(e.generateSurveys,t)})}catch(i){throw this._e("Error initializing surveys",i),i}finally{this.ce=!1}}}else $v.error("PostHog Extensions not found.")}}ge(e,t){this._surveyManager=e(this._instance,t),this._surveyEventReceiver=new Lv(this._instance),$v.info("Surveys loaded successfully"),this.me({isLoaded:!0})}_e(e,t){$v.error(e,t),this.me({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.fe.push(e),this._surveyManager&&this.me({isLoaded:!0}),()=>{this.fe=this.fe.filter(t=>t!==e)}}getSurveys(e,t){if(void 0===t&&(t=!1),this._instance.config.disable_surveys)return $v.info("Disabled. Not loading surveys."),e([]);var n,r=this._instance.get_property(cf);if(r&&!t)return e(r,{isLoaded:!0});"undefined"!=typeof Promise&&this.pe?this.pe.then(t=>{var{surveys:n,context:r}=t;return e(n,r)}):("undefined"!=typeof Promise&&(this.pe=new Promise(e=>{n=e})),this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:t=>{var r;this.pe=null;var i=t.statusCode;if(200!==i||!t.json){var a="Surveys API could not be loaded, status: "+i;$v.error(a);var s={isLoaded:!1,error:a};return e([],s),void(null==n||n({surveys:[],context:s}))}var o,l=t.json.surveys||[],c=l.filter(e=>{return!(!(t=e).start_date||t.end_date)&&(function(e){var t;return!(null==(t=e.conditions)||null==(t=t.events)||null==(t=t.values)||!t.length)}(e)||function(e){var t;return!(null==(t=e.conditions)||null==(t=t.actions)||null==(t=t.values)||!t.length)}(e));var t});c.length>0&&(null==(o=this._surveyEventReceiver)||o.register(c)),null==(r=this._instance.persistence)||r.register({[cf]:l});var u={isLoaded:!0};e(l,u),null==n||n({surveys:l,context:u})}}))}me(e){for(var t of this.fe)try{if(!e.isLoaded)return t([],e);this.getSurveys(t)}catch(n){$v.error("Error in survey callback",n)}}getActiveMatchingSurveys(e,t){if(void 0===t&&(t=!1),!Ud(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(e,t);$v.warn("init was not called")}ye(e){var t=null;return this.getSurveys(n=>{var r;t=null!==(r=n.find(t=>t.id===e))&&void 0!==r?r:null}),t}be(e){if(Ud(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var t="string"==typeof e?this.ye(e):e;return t?this._surveyManager.checkSurveyEligibility(t):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(Ud(this._surveyManager))return $v.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var t=this.be(e);return{visible:t.eligible,disabledReason:t.reason}}canRenderSurveyAsync(e,t){return Ud(this._surveyManager)?($v.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(n=>{this.getSurveys(t=>{var r,i=null!==(r=t.find(t=>t.id===e))&&void 0!==r?r:null;if(i){var a=this.be(i);n({visible:a.eligible,disabledReason:a.reason})}else n({visible:!1,disabledReason:"Survey not found"})},t)})}renderSurvey(e,t){var n;if(Ud(this._surveyManager))$v.warn("init was not called");else{var r="string"==typeof e?this.ye(e):e;if(null!=r&&r.id)if(Av.includes(r.type)){var i=null==hd?void 0:hd.querySelector(t);if(i)return null!=(n=r.appearance)&&n.surveyPopupDelaySeconds?($v.info("Rendering survey "+r.id+" with delay of "+r.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout(()=>{var e,t;$v.info("Rendering survey "+r.id+" with delay of "+(null==(e=r.appearance)?void 0:e.surveyPopupDelaySeconds)+" seconds"),null==(t=this._surveyManager)||t.renderSurvey(r,i),$v.info("Survey "+r.id+" rendered")},1e3*r.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(r,i);$v.warn("Survey element not found")}else $v.warn("Surveys of type "+r.type+" cannot be rendered in the app");else $v.warn("Survey not found")}}displaySurvey(e,t){var n;if(Ud(this._surveyManager))$v.warn("init was not called");else{var r=this.ye(e);if(r){var i=r;if(null!=(n=r.appearance)&&n.surveyPopupDelaySeconds&&t.ignoreDelay&&(i=wd({},r,{appearance:wd({},r.appearance,{surveyPopupDelaySeconds:0})})),!1===t.ignoreConditions){var a=this.canRenderSurvey(r);if(!a.visible)return void $v.warn("Survey is not eligible to be displayed: ",a.disabledReason)}t.displayType!==Pv.Inline?this._surveyManager.handlePopoverSurvey(i):this.renderSurvey(i,t.selector)}else $v.warn("Survey not found")}}cancelPendingSurvey(e){Ud(this._surveyManager)?$v.warn("init was not called"):this._surveyManager.cancelSurvey(e)}handlePageUnload(){var e;null==(e=this._surveyManager)||e.handlePageUnload()}}var Uv=Sp("[Conversations]");class Hv{constructor(e){this.we=void 0,this._conversationsManager=null,this.xe=!1,this.Ee=null,this._instance=e}onRemoteConfig(e){if(!this._instance.config.disable_conversations){var t=e.conversations;Ud(t)||(qd(t)?this.we=t:(this.we=t.enabled,this.Ee=t),this.loadIfEnabled())}}reset(){var e;null==(e=this._conversationsManager)||e.reset(),this._conversationsManager=null,this.we=void 0,this.Ee=null}loadIfEnabled(){if(!this._conversationsManager&&!this.xe&&!(this._instance.config.disable_conversations||this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())){var e=null==bd?void 0:bd.__PosthogExtensions__;if(e&&!Md(this.we)&&this.we)if(this.Ee&&this.Ee.token){this.xe=!0;try{var t=e.initConversations;if(t)return this.$e(t),void(this.xe=!1);var n=e.loadExternalDependency;if(!n)return void this.Se("PostHog loadExternalDependency extension not found.");n(this._instance,"conversations",t=>{t||!e.initConversations?this.Se("Could not load conversations script",t):this.$e(e.initConversations),this.xe=!1})}catch(r){this.Se("Error initializing conversations",r),this.xe=!1}}else Uv.error("Conversations enabled but missing token in remote config.")}}$e(e){if(this.Ee)try{this._conversationsManager=e(this.Ee,this._instance),Uv.info("Conversations loaded successfully")}catch(t){this.Se("Error completing conversations initialization",t)}else Uv.error("Cannot complete initialization: remote config is null")}Se(e,t){Uv.error(e,t),this._conversationsManager=null,this.xe=!1}show(){this._conversationsManager?this._conversationsManager.show():Uv.warn("Conversations not loaded yet.")}hide(){this._conversationsManager&&this._conversationsManager.hide()}isAvailable(){return!0===this.we&&!Bd(this._conversationsManager)}isVisible(){var e,t;return null!==(e=null==(t=this._conversationsManager)?void 0:t.isVisible())&&void 0!==e&&e}sendMessage(e,t,n){var r=this;return _d(function*(){return r._conversationsManager?r._conversationsManager.sendMessage(e,t,n):(Uv.warn("Conversations not available yet."),null)})()}getMessages(e,t){var n=this;return _d(function*(){return n._conversationsManager?n._conversationsManager.getMessages(e,t):(Uv.warn("Conversations not available yet."),null)})()}markAsRead(e){var t=this;return _d(function*(){return t._conversationsManager?t._conversationsManager.markAsRead(e):(Uv.warn("Conversations not available yet."),null)})()}getTickets(e){var t=this;return _d(function*(){return t._conversationsManager?t._conversationsManager.getTickets(e):(Uv.warn("Conversations not available yet."),null)})()}getCurrentTicketId(){var e,t;return null!==(e=null==(t=this._conversationsManager)?void 0:t.getCurrentTicketId())&&void 0!==e?e:null}getWidgetSessionId(){var e,t;return null!==(e=null==(t=this._conversationsManager)?void 0:t.getWidgetSessionId())&&void 0!==e?e:null}}class Vv{constructor(e){var t;this.ke=!1,this.Pe=!1,this._instance=e,this._instance&&null!=(t=this._instance.config.logs)&&t.captureConsoleLogs&&(this.ke=!0)}onRemoteConfig(e){var t,n=null==(t=e.logs)?void 0:t.captureConsoleLogs;!Ud(n)&&n&&(this.ke=!0,this.loadIfEnabled())}reset(){}loadIfEnabled(){if(this.ke&&!this.Pe){var e=Sp("[logs]"),t=null==bd?void 0:bd.__PosthogExtensions__;if(t){var n=t.loadExternalDependency;n?n(this._instance,"logs",n=>{var r;n||null==(r=t.logs)||!r.initializeLogs?e.error("Could not load logs script",n):(t.logs.initializeLogs(this._instance),this.Pe=!0)}):e.error("PostHog loadExternalDependency extension not found.")}else e.error("PostHog Extensions not found.")}}}var qv=Sp("[RateLimiter]");class Wv{constructor(e){var t,n;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=e=>{var t=e.text;if(t&&t.length)try{(JSON.parse(t).quota_limited||[]).forEach(e=>{qv.info((e||"events")+" is quota limited."),this.serverLimits[e]=(new Date).getTime()+6e4})}catch(n){return void qv.warn('could not rate limit - continuing. Error: "'+(null==n?void 0:n.message)+'"',{text:t})}},this.instance=e,this.captureEventsPerSecond=(null==(t=e.config.rate_limiting)?void 0:t.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null==(n=e.config.rate_limiting)?void 0:n.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var t,n,r;void 0===e&&(e=!1);var i=(new Date).getTime(),a=null!==(t=null==(n=this.instance.persistence)?void 0:n.get_property(pf))&&void 0!==t?t:{tokens:this.captureEventsBurstLimit,last:i};a.tokens+=(i-a.last)/1e3*this.captureEventsPerSecond,a.last=i,a.tokens>this.captureEventsBurstLimit&&(a.tokens=this.captureEventsBurstLimit);var s=a.tokens<1;return s||e||(a.tokens=Math.max(0,a.tokens-1)),!s||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=s,null==(r=this.instance.persistence)||r.set_property(pf,a),{isRateLimited:s,remainingTokens:a.tokens}}isServerRateLimited(e){var t=this.serverLimits[e||"events"]||!1;return!1!==t&&(new Date).getTime()<t}}var Kv=Sp("[RemoteConfig]");class Gv{constructor(e){this._instance=e}get remoteConfig(){var e;return null==(e=bd._POSTHOG_REMOTE_CONFIG)||null==(e=e[this._instance.config.token])?void 0:e.config}Te(e){var t,n;null!=(t=bd.__PosthogExtensions__)&&t.loadExternalDependency?null==(n=bd.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(Kv.error("PostHog Extensions not found. Cannot load remote config."),e())}Ie(e){this._instance._send_request({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:t=>{e(t.json)}})}load(){try{if(this.remoteConfig)return Kv.info("Using preloaded remote config",this.remoteConfig),void this.yi(this.remoteConfig);if(this._instance.O())return void Kv.warn("Remote config is disabled. Falling back to local config.");this.Te(e=>{if(!e)return Kv.info("No config found after loading remote JS config. Falling back to JSON."),void this.Ie(e=>{this.yi(e)});this.yi(e)})}catch(ym){Kv.error("Error loading remote config",ym)}}yi(e){e?this._instance.config.__preview_remote_config?(this._instance.yi(e),!1!==e.hasFeatureFlags&&this._instance.featureFlags.ensureFlagsLoaded()):Kv.info("__preview_remote_config is disabled. Logging config instead",e):Kv.error("Failed to fetch remote config from PostHog.")}}var Yv=3e3;class Zv{constructor(e,t){this.Ce=!0,this.Re=[],this.Fe=Jd((null==t?void 0:t.flush_interval_ms)||Yv,250,5e3,jp.createLogger("flush interval"),Yv),this.Me=e}enqueue(e){this.Re.push(e),this.Oe||this.Ae()}unload(){this.De();var e=this.Re.length>0?this.je():{},t=Object.values(e);[...t.filter(e=>0===e.url.indexOf("/e")),...t.filter(e=>0!==e.url.indexOf("/e"))].map(e=>{this.Me(wd({},e,{transport:"sendBeacon"}))})}enable(){this.Ce=!1,this.Ae()}Ae(){var e=this;this.Ce||(this.Oe=setTimeout(()=>{if(this.De(),this.Re.length>0){var t=this.je(),n=function(){var n=t[r],i=(new Date).getTime();n.data&&Ad(n.data)&&Tp(n.data,e=>{e.offset=Math.abs(e.timestamp-i),delete e.timestamp}),e.Me(n)};for(var r in t)n()}},this.Fe))}De(){clearTimeout(this.Oe),this.Oe=void 0}je(){var e={};return Tp(this.Re,t=>{var n,r=t,i=(r?r.batchKey:null)||r.url;Md(e[i])&&(e[i]=wd({},r,{data:[]})),null==(n=e[i].data)||n.push(r.data)}),this.Re=[],e}}var Xv=["retriesPerformedSoFar"];class Qv{constructor(e){this.Le=!1,this.Ne=3e3,this.Re=[],this._instance=e,this.Re=[],this.Ue=!0,!Md(sd)&&"onLine"in sd.navigator&&(this.Ue=sd.navigator.onLine,this.ze=()=>{this.Ue=!0,this.Lt()},this.He=()=>{this.Ue=!1},Bp(sd,"online",this.ze),Bp(sd,"offline",this.He))}get length(){return this.Re.length}retriableRequest(e){var{retriesPerformedSoFar:t}=e,n=kd(e,Xv);Vd(t)&&(n.url=Qg(n.url,{retry_count:t})),this._instance._send_request(wd({},n,{callback:e=>{200!==e.statusCode&&(e.statusCode<400||e.statusCode>=500)&&(null!=t?t:0)<10?this.Be(wd({retriesPerformedSoFar:t},n)):null==n.callback||n.callback(e)}}))}Be(e){var t=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=t+1;var n,r,i,a,s,o=(n=t,r=3e3*Math.pow(2,n),i=r/2,a=Math.min(18e5,r),s=(Math.random()-.5)*(a-i),Math.ceil(a+s)),l=Date.now()+o;this.Re.push({retryAt:l,requestOptions:e});var c="Enqueued failed request for retry in "+o;navigator.onLine||(c+=" (Browser is offline)"),jp.warn(c),this.Le||(this.Le=!0,this.qe())}qe(){if(this.We&&clearTimeout(this.We),0===this.Re.length)return this.Le=!1,void(this.We=void 0);this.We=setTimeout(()=>{this.Ue&&this.Re.length>0&&this.Lt(),this.qe()},this.Ne)}Lt(){var e=Date.now(),t=[],n=this.Re.filter(n=>n.retryAt<e||(t.push(n),!1));if(this.Re=t,n.length>0)for(var{requestOptions:r}of n)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.We&&(clearTimeout(this.We),this.We=void 0),this.Le=!1,Md(sd)||(this.ze&&(sd.removeEventListener("online",this.ze),this.ze=void 0),this.He&&(sd.removeEventListener("offline",this.He),this.He=void 0)),this.Re))try{this._instance._send_request(wd({},e,{transport:"sendBeacon"}))}catch(ym){jp.error(ym)}this.Re=[]}}class Jv{constructor(e){this.Ge=()=>{var e,t,n,r;this.Ve||(this.Ve={});var i=this.scrollElement(),a=this.scrollY(),s=i?Math.max(0,i.scrollHeight-i.clientHeight):0,o=a+((null==i?void 0:i.clientHeight)||0),l=(null==i?void 0:i.scrollHeight)||0;this.Ve.lastScrollY=Math.ceil(a),this.Ve.maxScrollY=Math.max(a,null!==(e=this.Ve.maxScrollY)&&void 0!==e?e:0),this.Ve.maxScrollHeight=Math.max(s,null!==(t=this.Ve.maxScrollHeight)&&void 0!==t?t:0),this.Ve.lastContentY=o,this.Ve.maxContentY=Math.max(o,null!==(n=this.Ve.maxContentY)&&void 0!==n?n:0),this.Ve.maxContentHeight=Math.max(l,null!==(r=this.Ve.maxContentHeight)&&void 0!==r?r:0)},this._instance=e}getContext(){return this.Ve}resetContext(){var e=this.Ve;return setTimeout(this.Ge,0),e}startMeasuringScrollPosition(){Bp(sd,"scroll",this.Ge,{capture:!0}),Bp(sd,"scrollend",this.Ge,{capture:!0}),Bp(sd,"resize",this.Ge)}scrollElement(){if(!this._instance.config.scroll_root_selector)return null==sd?void 0:sd.document.documentElement;var e=Ad(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var t of e){var n=null==sd?void 0:sd.document.querySelector(t);if(n)return n}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return sd&&(sd.scrollY||sd.pageYOffset||sd.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return sd&&(sd.scrollX||sd.pageXOffset||sd.document.documentElement.scrollLeft)||0}}var eb=e=>ag(null==e?void 0:e.config.mask_personal_data_properties,null==e?void 0:e.config.custom_personal_data_properties);class tb{constructor(e,t,n,r){this.Je=e=>{var t=this.Ke();if(!t||t.sessionId!==e){var n={sessionId:e,props:this.Ye(this._instance)};this.Xe.register({[hf]:n})}},this._instance=e,this.Qe=t,this.Xe=n,this.Ye=r||eb,this.Qe.onSessionId(this.Je)}Ke(){return this.Xe.props[hf]}getSetOnceProps(){var e,t=null==(e=this.Ke())?void 0:e.props;return t?"r"in t?sg(t):{$referring_domain:t.referringDomain,$pathname:t.initialPathName,utm_source:t.utm_source,utm_campaign:t.utm_campaign,utm_medium:t.utm_medium,utm_content:t.utm_content,utm_term:t.utm_term}:{}}getSessionProps(){var e={};return Tp(Op(this.getSetOnceProps()),(t,n)=>{"$current_url"===n&&(n="url"),e["$session_entry_"+Pd(n)]=t}),e}}var nb=Sp("[SessionId]");class rb{on(e,t){return this.Ze.on(e,t)}constructor(e,t,n){var r;if(this.tr=[],this.ir=void 0,this.Ze=new Fv,this.er=(e,t)=>!(!Vd(e)||!Vd(t))&&Math.abs(e-t)>this.sessionTimeoutMs,!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if("always"===e.config.cookieless_mode)throw new Error('SessionIdManager cannot be used with cookieless_mode="always"');this.R=e.config,this.Xe=e.persistence,this.rr=void 0,this.sr=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.nr=t||mm,this.ar=n||mm;var i=this.R.persistence_name||this.R.token,a=this.R.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*Jd(a,60,36e3,nb.createLogger("session_idle_timeout_seconds"),1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.lr(),this.ur="ph_"+i+"_window_id",this.hr="ph_"+i+"_primary_window_exists",this.dr()){var s=Cm.W(this.ur),o=Cm.W(this.hr);s&&!o?this.rr=s:Cm.V(this.ur),Cm.G(this.hr,!0)}if(null!=(r=this.R.bootstrap)&&r.sessionID)try{var l=(()=>{var e=this.R.bootstrap.sessionID.replace(/-/g,"");if(32!==e.length)throw new Error("Not a valid UUID");if("7"!==e[12])throw new Error("Not a UUIDv7");return parseInt(e.substring(0,12),16)})();this.vr(this.R.bootstrap.sessionID,(new Date).getTime(),l)}catch(c){nb.error("Invalid sessionID in bootstrap",c)}this.cr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return Md(this.tr)&&(this.tr=[]),this.tr.push(e),this.sr&&e(this.sr,this.rr),()=>{this.tr=this.tr.filter(t=>t!==e)}}dr(){return"memory"!==this.R.persistence&&!this.Xe.Si&&Cm.H()}pr(e){e!==this.rr&&(this.rr=e,this.dr()&&Cm.G(this.ur,e))}gr(){return this.rr?this.rr:this.dr()?Cm.W(this.ur):null}vr(e,t,n){e===this.sr&&t===this._sessionActivityTimestamp&&n===this._sessionStartTimestamp||(this._sessionStartTimestamp=n,this._sessionActivityTimestamp=t,this.sr=e,this.Xe.register({[tf]:[t,e,n]}))}_r(){var e=this.Xe.props[tf];return Ad(e)&&2===e.length&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.vr(null,null,null)}destroy(){clearTimeout(this.mr),this.mr=void 0,this.ir&&sd&&(sd.removeEventListener("beforeunload",this.ir,{capture:!1}),this.ir=void 0),this.tr=[]}cr(){this.ir=()=>{this.dr()&&Cm.V(this.hr)},Bp(sd,"beforeunload",this.ir,{capture:!1})}checkAndGetSessionAndWindowId(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=null),"always"===this.R.cookieless_mode)throw new Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var n=t||(new Date).getTime(),[r,i,a]=this._r(),s=this.gr(),o=Vd(a)&&Math.abs(n-a)>864e5,l=!1,c=!i,u=!c&&!e&&this.er(n,r);c||u||o?(i=this.nr(),s=this.ar(),nb.info("new session ID generated",{sessionId:i,windowId:s,changeReason:{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:o}}),a=n,l=!0):s||(s=this.ar(),l=!0);var d=Vd(r)&&e&&!o?r:n,h=Vd(a)?a:(new Date).getTime();return this.pr(s),this.vr(i,d,h),e||this.lr(),l&&this.tr.forEach(e=>e(i,s,l?{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:o}:void 0)),{sessionId:i,windowId:s,sessionStartTimestamp:h,changeReason:l?{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:o}:void 0,lastActivityTimestamp:r}}lr(){clearTimeout(this.mr),this.mr=setTimeout(()=>{var[e]=this._r();if(this.er((new Date).getTime(),e)){var t=this.sr;this.resetSessionId(),this.Ze.emit("forcedIdleReset",{idleSessionId:t})}},1.1*this.sessionTimeoutMs)}}var ib=["$set_once","$set"],ab=Sp("[SiteApps]");class sb{constructor(e){this._instance=e,this.yr=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}br(e,t){if(t){var n=this.globalsForEvent(t);this.yr.push(n),this.yr.length>1e3&&(this.yr=this.yr.slice(10))}}get siteAppLoaders(){var e;return null==(e=bd._POSTHOG_REMOTE_CONFIG)||null==(e=e[this._instance.config.token])?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Hi(this.br.bind(this));this.wr=()=>{e(),this.yr=[],this.wr=void 0}}}globalsForEvent(e){var t,n,r,i,a,s,o;if(!e)throw new Error("Event payload is required");var l={},c=this._instance.get_property("$groups")||[],u=this._instance.get_property("$stored_group_properties")||{};for(var[d,h]of Object.entries(u))l[d]={id:c[d],type:d,properties:h};var{$set_once:p,$set:f}=e;return{event:wd({},kd(e,ib),{properties:wd({},e.properties,f?{$set:wd({},null!==(t=null==(n=e.properties)?void 0:n.$set)&&void 0!==t?t:{},f)}:{},p?{$set_once:wd({},null!==(r=null==(i=e.properties)?void 0:i.$set_once)&&void 0!==r?r:{},p)}:{}),elements_chain:null!==(a=null==(s=e.properties)?void 0:s.$elements_chain)&&void 0!==a?a:"",distinct_id:null==(o=e.properties)?void 0:o.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:l}}setupSiteApp(e){var t=this.apps[e.id],n=()=>{var n;!t.errored&&this.yr.length&&(ab.info("Processing "+this.yr.length+" events for site app with id "+e.id),this.yr.forEach(e=>null==t.processEvent?void 0:t.processEvent(e)),t.processedBuffer=!0),Object.values(this.apps).every(e=>e.processedBuffer||e.errored)&&(null==(n=this.wr)||n.call(this))},r=!1,i=i=>{t.errored=!i,t.loaded=!0,ab.info("Site app with id "+e.id+" "+(i?"loaded":"errored")),r&&n()};try{var{processEvent:a}=e.init({posthog:this._instance,callback:e=>{i(e)}});a&&(t.processEvent=a),r=!0}catch(s){ab.error("Error while initializing PostHog app with config id "+e.id,s),i(!1)}if(r&&t.loaded)try{n()}catch(o){ab.error("Error while processing buffered events PostHog app with config id "+e.id,o),t.errored=!0}}Er(){var e=this.siteAppLoaders||[];for(var t of e)this.apps[t.id]={id:t.id,loaded:!1,errored:!1,processedBuffer:!1};for(var n of e)this.setupSiteApp(n)}$r(e){if(0!==Object.keys(this.apps).length){var t=this.globalsForEvent(e);for(var n of Object.values(this.apps))try{null==n.processEvent||n.processEvent(t)}catch(r){ab.error("Error while processing event "+e.event+" for site app "+n.id,r)}}}onRemoteConfig(e){var t,n,r,i=this;if(null!=(t=this.siteAppLoaders)&&t.length)return this.isEnabled?(this.Er(),void this._instance.on("eventCaptured",e=>this.$r(e))):void ab.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if(null==(n=this.wr)||n.call(this),null!=(r=e.siteApps)&&r.length)if(this.isEnabled){var a=function(e){var t;bd["__$$ph_site_app_"+e]=i._instance,null==(t=bd.__PosthogExtensions__)||null==t.loadSiteApp||t.loadSiteApp(i._instance,o,t=>{if(t)return ab.error("Error while initializing PostHog app with config id "+e,t)})};for(var{id:s,url:o}of e.siteApps)a(s)}else ab.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var ob=function(e,t){if(!e)return!1;var n=e.userAgent;if(n&&jd(n,t))return!0;try{var r=null==e?void 0:e.userAgentData;if(null!=r&&r.brands&&r.brands.some(e=>jd(null==e?void 0:e.brand,t)))return!0}catch(i){}return!!e.webdriver},lb=function(e){return e.US="us",e.EU="eu",e.CUSTOM="custom",e}({}),cb="i.posthog.com";class ub{constructor(e){this.Sr={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===e?"https://us.i.posthog.com":e}get flagsApiHost(){var e=this.instance.config.flags_api_host;return e?e.trim().replace(/\/$/,""):this.apiHost}get uiHost(){var e,t=null==(e=this.instance.config.ui_host)?void 0:e.replace(/\/$/,"");return t||(t=this.apiHost.replace("."+cb,".posthog.com")),"https://app.posthog.com"===t?"https://us.posthog.com":t}get region(){return this.Sr[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Sr[this.apiHost]=lb.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Sr[this.apiHost]=lb.EU:this.Sr[this.apiHost]=lb.CUSTOM),this.Sr[this.apiHost]}endpointFor(e,t){if(void 0===t&&(t=""),t&&(t="/"===t[0]?t:"/"+t),"ui"===e)return this.uiHost+t;if("flags"===e)return this.flagsApiHost+t;if(this.region===lb.CUSTOM)return this.apiHost+t;var n=cb+t;switch(e){case"assets":return"https://"+this.region+"-assets."+n;case"api":return"https://"+this.region+"."+n}}}var db={icontains:(e,t)=>!!sd&&t.href.toLowerCase().indexOf(e.toLowerCase())>-1,not_icontains:(e,t)=>!!sd&&-1===t.href.toLowerCase().indexOf(e.toLowerCase()),regex:(e,t)=>!!sd&&nv(t.href,e),not_regex:(e,t)=>!!sd&&!nv(t.href,e),exact:(e,t)=>t.href===e,is_not:(e,t)=>t.href!==e};class hb{constructor(e){var t=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(e){void 0===e&&(e=!1),t.getWebExperiments(e=>{hb.kr("retrieved web experiments from the server"),t.Pr=new Map,e.forEach(e=>{if(e.feature_flag_key){var n;t.Pr&&(hb.kr("setting flag key ",e.feature_flag_key," to web experiment ",e),null==(n=t.Pr)||n.set(e.feature_flag_key,e));var r=t._instance.getFeatureFlag(e.feature_flag_key);zd(r)&&e.variants[r]&&t.Tr(e.name,r,e.variants[r].transforms)}else if(e.variants)for(var i in e.variants){var a=e.variants[i];hb.Ir(a)&&t.Tr(e.name,i,a.transforms)}})},e)},this._instance=e,this._instance.onFeatureFlags(e=>{this.onFeatureFlags(e)})}onFeatureFlags(e){if(this._is_bot())hb.kr("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(Ud(this.Pr))return this.Pr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();hb.kr("applying feature flags",e),e.forEach(e=>{var t;if(this.Pr&&null!=(t=this.Pr)&&t.has(e)){var n,r=this._instance.getFeatureFlag(e),i=null==(n=this.Pr)?void 0:n.get(e);r&&null!=i&&i.variants[r]&&this.Tr(i.name,r,i.variants[r].transforms)}})}}previewWebExperiment(){var e=hb.getWindowLocation();if(null!=e&&e.search){var t=em(null==e?void 0:e.search,"__experiment_id"),n=em(null==e?void 0:e.search,"__experiment_variant");t&&n&&(hb.kr("previewing web experiments "+t+" && "+n),this.getWebExperiments(e=>{this.Cr(parseInt(t),n,e)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,t,n){if(this._instance.config.disable_web_experiments&&!n)return e([]);var r=this._instance.get_property("$web_experiments");if(r&&!t)return e(r);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:t=>{if(200!==t.statusCode||!t.json)return e([]);var n=t.json.experiments||[];return e(n)}})}Cr(e,t,n){var r=n.filter(t=>t.id===e);r&&r.length>0&&(hb.kr("Previewing web experiment ["+r[0].name+"] with variant ["+t+"]"),this.Tr(r[0].name,t,r[0].variants[t].transforms))}static Ir(e){return!Ud(e.conditions)&&hb.Rr(e)&&hb.Fr(e)}static Rr(e){var t;if(Ud(e.conditions)||Ud(null==(t=e.conditions)?void 0:t.url))return!0;var n,r,i,a=hb.getWindowLocation();return!!a&&(null==(n=e.conditions)||!n.url||db[null!==(r=null==(i=e.conditions)?void 0:i.urlMatchType)&&void 0!==r?r:"icontains"](e.conditions.url,a))}static getWindowLocation(){return null==sd?void 0:sd.location}static Fr(e){var t;if(Ud(e.conditions)||Ud(null==(t=e.conditions)?void 0:t.utm))return!0;var n=eg();if(n.utm_source){var r,i,a,s,o,l,c,u,d=null==(r=e.conditions)||null==(r=r.utm)||!r.utm_campaign||(null==(i=e.conditions)||null==(i=i.utm)?void 0:i.utm_campaign)==n.utm_campaign,h=null==(a=e.conditions)||null==(a=a.utm)||!a.utm_source||(null==(s=e.conditions)||null==(s=s.utm)?void 0:s.utm_source)==n.utm_source,p=null==(o=e.conditions)||null==(o=o.utm)||!o.utm_medium||(null==(l=e.conditions)||null==(l=l.utm)?void 0:l.utm_medium)==n.utm_medium,f=null==(c=e.conditions)||null==(c=c.utm)||!c.utm_term||(null==(u=e.conditions)||null==(u=u.utm)?void 0:u.utm_term)==n.utm_term;return d&&p&&f&&h}return!1}static kr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];jp.info("[WebExperiments] "+e,n)}Tr(e,t,n){this._is_bot()?hb.kr("Refusing to render web experiment since the viewer is a likely bot"):"control"!==t?n.forEach(n=>{if(n.selector){var r;hb.kr("applying transform of variant "+t+" for experiment "+e+" ",n);var i=null==(r=document)?void 0:r.querySelectorAll(n.selector);null==i||i.forEach(e=>{var t=e;n.html&&(t.innerHTML=n.html),n.css&&t.setAttribute("style",n.css)})}}):hb.kr("Control variants leave the page unmodified.")}_is_bot(){return dd&&this._instance?ob(dd,this._instance.config.custom_blocked_useragents):void 0}}var pb=Sp("[PostHog ExternalIntegrations]"),fb={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class mb{constructor(e){this._instance=e}it(e,t){var n;null==(n=bd.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,e,e=>{if(e)return pb.error("failed to load script",e);t()})}startIfEnabledOrStop(){var e=this,t=function(t){var n,i,a;!r||null!=(n=bd.__PosthogExtensions__)&&null!=(n=n.integrations)&&n[t]||e.it(fb[t],()=>{var n;null==(n=bd.__PosthogExtensions__)||null==(n=n.integrations)||null==(n=n[t])||n.start(e._instance)}),!r&&null!=(i=bd.__PosthogExtensions__)&&null!=(i=i.integrations)&&i[t]&&(null==(a=bd.__PosthogExtensions__)||null==(a=a.integrations)||null==(a=a[t])||a.stop())};for(var[n,r]of Object.entries(null!==(i=this._instance.config.integrations)&&void 0!==i?i:{})){var i;t(n)}}}var gb="[SessionRecording]",vb=Sp(gb);class bb{get started(){var e;return!(null==(e=this.Mr)||!e.isStarted)}get status(){return this.Mr?this.Mr.status:this.Or&&!this.Ar?"disabled":"lazy_loading"}constructor(e){if(this._forceAllowLocalhostNetworkCapture=!1,this.Or=!1,this.Dr=void 0,this._instance=e,!this._instance.sessionManager)throw vb.error("started without valid sessionManager"),new Error(gb+" started without valid sessionManager. This is a bug.");if("always"===this._instance.config.cookieless_mode)throw new Error(gb+' cannot be used with cookieless_mode="always"')}get Ar(){var e,t=!(null==(e=this._instance.get_property(ef))||!e.enabled),n=!this._instance.config.disable_session_recording,r=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return sd&&t&&n&&!r}startIfEnabledOrStop(e){var t;if(!this.Ar||null==(t=this.Mr)||!t.isStarted){var n=!Md(Object.assign)&&!Md(Array.from);this.Ar&&n?(this.jr(e),vb.info("starting")):this.stopRecording()}}jr(e){var t,n,r;this.Ar&&(null!=bd&&null!=(t=bd.__PosthogExtensions__)&&null!=(t=t.rrweb)&&t.record&&null!=(n=bd.__PosthogExtensions__)&&n.initSessionRecording?this.Lr(e):null==(r=bd.__PosthogExtensions__)||null==r.loadExternalDependency||r.loadExternalDependency(this._instance,this.Nr,t=>{if(t)return vb.error("could not load recorder",t);this.Lr(e)}))}stopRecording(){var e,t;null==(e=this.Dr)||e.call(this),this.Dr=void 0,null==(t=this.Mr)||t.stop()}Ur(){var e;null==(e=this._instance.persistence)||e.unregister(nf)}zr(e){if(this._instance.persistence){var t,n,r=this._instance.persistence,i=()=>{var t=!1===e.sessionRecording?void 0:e.sessionRecording,n=null==t?void 0:t.sampleRate,i=Ud(n)?null:parseFloat(n);Ud(i)&&this.Ur();var a=null==t?void 0:t.minimumDurationMilliseconds;r.register({[ef]:wd({enabled:!!t},t,{networkPayloadCapture:wd({capturePerformance:e.capturePerformance},null==t?void 0:t.networkPayloadCapture),canvasRecording:{enabled:null==t?void 0:t.recordCanvas,fps:null==t?void 0:t.canvasFps,quality:null==t?void 0:t.canvasQuality},sampleRate:i,minimumDurationMilliseconds:Md(a)?null:a,endpoint:null==t?void 0:t.endpoint,triggerMatchType:null==t?void 0:t.triggerMatchType,masking:null==t?void 0:t.masking,urlTriggers:null==t?void 0:t.urlTriggers})})};i(),null==(t=this.Dr)||t.call(this),this.Dr=null==(n=this._instance.sessionManager)?void 0:n.onSessionId(i)}}onRemoteConfig(e){"sessionRecording"in e?!1!==e.sessionRecording?(this.zr(e),this.Or=!0,this.startIfEnabledOrStop()):this.Or=!0:vb.info("skipping remote config with no sessionRecording",e)}log(e,t){var n;void 0===t&&(t="log"),null!=(n=this.Mr)&&n.log?this.Mr.log(e,t):vb.warn("log called before recorder was ready")}get Nr(){var e,t,n=null==(e=this._instance)||null==(e=e.persistence)?void 0:e.get_property(ef);return(null==n||null==(t=n.scriptConfig)?void 0:t.script)||"lazy-recorder"}Lr(e){var t,n;if(null==(t=bd.__PosthogExtensions__)||!t.initSessionRecording)throw Error("Called on script loaded before session recording is available");this.Mr||(this.Mr=null==(n=bd.__PosthogExtensions__)?void 0:n.initSessionRecording(this._instance),this.Mr._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture),this.Mr.start(e)}onRRwebEmit(e){var t;null==(t=this.Mr)||null==t.onRRwebEmit||t.onRRwebEmit(e)}overrideLinkedFlag(){var e,t;this.Mr||null==(t=this._instance.persistence)||t.register({$replay_override_linked_flag:!0}),null==(e=this.Mr)||e.overrideLinkedFlag()}overrideSampling(){var e,t;this.Mr||null==(t=this._instance.persistence)||t.register({$replay_override_sampling:!0}),null==(e=this.Mr)||e.overrideSampling()}overrideTrigger(e){var t,n;this.Mr||null==(n=this._instance.persistence)||n.register({["url"===e?"$replay_override_url_trigger":"$replay_override_event_trigger"]:!0}),null==(t=this.Mr)||t.overrideTrigger(e)}get sdkDebugProperties(){var e;return(null==(e=this.Mr)?void 0:e.sdkDebugProperties)||{$recording_status:this.status}}tryAddCustomEvent(e,t){var n;return!(null==(n=this.Mr)||!n.tryAddCustomEvent(e,t))}}var yb={},xb=()=>{},_b="posthog",wb=!Zg&&-1===(null==vd?void 0:vd.indexOf("MSIE"))&&-1===(null==vd?void 0:vd.indexOf("Mozilla")),kb=e=>{var t;return wd({api_host:"https://us.i.posthog.com",flags_api_host:null,ui_host:null,token:"",autocapture:!0,cross_subdomain_cookie:zp(null==hd?void 0:hd.location),persistence:"localStorage+cookie",persistence_name:"",cookie_persisted_properties:[],loaded:xb,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageleave:"if_capture_pageview",defaults:null!=e?e:"unset",__preview_deferred_init_extensions:!1,debug:pd&&zd(null==pd?void 0:pd.search)&&-1!==pd.search.indexOf("__posthog_debug=true")||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_conversations:!1,disable_product_tours:!0,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==sd||null==(t=sd.location)?void 0:t.protocol),ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:e=>{var t="Bad HTTP status: "+e.statusCode+" "+e.text;jp.error(t)},get_device_id:e=>e,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:Yv},error_tracking:{},_onCapture:xb,__preview_eager_load_replay:!1},(e=>({rageclick:!(e&&e>="2025-11-30")||{content_ignorelist:!0},capture_pageview:!(e&&e>="2025-05-24")||"history_change",session_recording:e&&e>="2025-11-30"?{strictMinimumDuration:!0}:{}}))(e))},Nb=e=>{var t={};Md(e.process_person)||(t.person_profiles=e.process_person),Md(e.xhr_headers)||(t.request_headers=e.xhr_headers),Md(e.cookie_name)||(t.persistence_name=e.cookie_name),Md(e.disable_cookie)||(t.disable_persistence=e.disable_cookie),Md(e.store_google)||(t.save_campaign_params=e.store_google),Md(e.verbose)||(t.debug=e.verbose);var n=Dp({},t,e);return Ad(e.property_blacklist)&&(Md(e.property_denylist)?n.property_denylist=e.property_blacklist:Ad(e.property_denylist)?n.property_denylist=[...e.property_blacklist,...e.property_denylist]:jp.error("Invalid value for property_denylist config: "+e.property_denylist)),n};class jb{constructor(){this.__forceAllowLocalhost=!1}get Hr(){return this.__forceAllowLocalhost}set Hr(e){jp.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class Sb{get decideEndpointWasHit(){var e,t;return null!==(e=null==(t=this.featureFlags)?void 0:t.hasLoadedFlags)&&void 0!==e&&e}get flagsEndpointWasHit(){var e,t;return null!==(e=null==(t=this.featureFlags)?void 0:t.hasLoadedFlags)&&void 0!==e&&e}constructor(){this.webPerformance=new jb,this.Br=!1,this.version=yd.LIB_VERSION,this.qr=new Fv,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=kb(),this.SentryIntegration=Bm,this.sentryIntegration=e=>{return t=Lm(this,e),{name:zm,processEvent:e=>t(e)};var t},this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.Wr=!1,this.Gr=null,this.Vr=null,this.Jr=null,this.featureFlags=new yv(this),this.toolbar=new Wm(this),this.scrollManager=new Jv(this),this.pageViewManager=new mg(this),this.surveys=new Bv(this),this.conversations=new Hv(this),this.logs=new Vv(this),this.experiments=new hb(this),this.exceptions=new lv(this),this.rateLimiter=new Wv(this),this.requestRouter=new ub(this),this.consent=new Pm(this),this.externalIntegrations=new mb(this),this.people={set:(e,t,n)=>{var r=zd(e)?{[e]:t}:e;this.setPersonProperties(r),null==n||n({})},set_once:(e,t,n)=>{var r=zd(e)?{[e]:t}:e;this.setPersonProperties(void 0,r),null==n||n({})}},this.on("eventCaptured",e=>jp.info('send "'+(null==e?void 0:e.event)+'"',e))}init(e,t,n){if(n&&n!==_b){var r,i=null!==(r=yb[n])&&void 0!==r?r:new Sb;return i._init(e,t,n),yb[n]=i,yb[_b][n]=i,i}return this._init(e,t,n)}_init(e,t,n){var r;if(void 0===t&&(t={}),Md(e)||Ld(e))return jp.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return console.warn("[PostHog.js]","You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},t.debug=this.Kr(t.debug),this.Yr=t,this.Xr=[],t.person_profiles&&(this.Vr=t.person_profiles),this.set_config(Dp({},kb(t.defaults),Nb(t),{name:n,token:e})),this.config.on_xhr_error&&jp.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=t.disable_compression?void 0:gg.GZipJS;var i=this.Qr();this.persistence=new _v(this.config,i),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new _v(wd({},this.config,{persistence:"sessionStorage"}),i);var a=wd({},this.persistence.props),s=wd({},this.sessionPersistence.props);this.register({$initialization_time:(new Date).toISOString()}),this.Zr=new Zv(e=>this.ts(e),this.config.request_queue_config),this.es=new Qv(this),this.__request_queue=[];var o="always"===this.config.cookieless_mode||"on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut();if(o||(this.sessionManager=new rb(this),this.sessionPropsManager=new tb(this,this.sessionManager,this.persistence)),this.config.__preview_deferred_init_extensions?(jp.info("Deferring extension initialization to improve startup performance"),setTimeout(()=>{this.rs(o)},0)):(jp.info("Initializing extensions synchronously"),this.rs(o)),yd.DEBUG=yd.DEBUG||this.config.debug,yd.DEBUG&&jp.info("Starting in debug mode",{this:this,config:t,thisC:wd({},this.config),p:a,s:s}),void 0!==(null==(r=t.bootstrap)?void 0:r.distinctID)){var l,c,u=this.config.get_device_id(mm()),d=null!=(l=t.bootstrap)&&l.isIdentifiedID?u:t.bootstrap.distinctID;this.persistence.set_property(df,null!=(c=t.bootstrap)&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:t.bootstrap.distinctID,$device_id:d})}if(this.ss()){var h,p,f=Object.keys((null==(h=t.bootstrap)?void 0:h.featureFlags)||{}).filter(e=>{var n;return!(null==(n=t.bootstrap)||null==(n=n.featureFlags)||!n[e])}).reduce((e,n)=>{var r;return e[n]=(null==(r=t.bootstrap)||null==(r=r.featureFlags)?void 0:r[n])||!1,e},{}),m=Object.keys((null==(p=t.bootstrap)?void 0:p.featureFlagPayloads)||{}).filter(e=>f[e]).reduce((e,n)=>{var r,i;return null!=(r=t.bootstrap)&&null!=(r=r.featureFlagPayloads)&&r[n]&&(e[n]=null==(i=t.bootstrap)||null==(i=i.featureFlagPayloads)?void 0:i[n]),e},{});this.featureFlags.receivedFeatureFlags({featureFlags:f,featureFlagPayloads:m})}if(o)this.register_once({distinct_id:yf,$device_id:null},"");else if(!this.get_distinct_id()){var g=this.config.get_device_id(mm());this.register_once({distinct_id:g,$device_id:g},""),this.persistence.set_property(df,"anonymous")}return Bp(sd,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),t.segment?function(e,t){var n=e.config.segment;if(!n)return t();!function(e,t){var n=e.config.segment;if(!n)return t();var r=n=>{var r=()=>n.anonymousId()||mm();e.config.get_device_id=r,n.id()&&(e.register({distinct_id:n.id(),$device_id:r()}),e.persistence.set_property(df,"identified")),t()},i=n.user();"then"in i&&Rd(i.then)?i.then(r):r(i)}(e,()=>{n.register((e=>{Promise&&Promise.resolve||Mm.warn("This browser does not have Promise support, and can not use the segment integration");var t=(t,n)=>{if(!n)return t;t.event.userId||t.event.anonymousId===e.get_distinct_id()||(Mm.info("No userId set, resetting PostHog"),e.reset()),t.event.userId&&t.event.userId!==e.get_distinct_id()&&(Mm.info("UserId set, identifying with PostHog"),e.identify(t.event.userId));var r=e.calculateEventProperties(n,t.event.properties);return t.event.properties=Object.assign({},r,t.event.properties),t};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:e=>t(e,e.event.event),page:e=>t(e,"$pageview"),identify:e=>t(e,"$identify"),screen:e=>t(e,"$screen")}})(e)).then(()=>{t()})})}(this,()=>this.ns()):this.ns(),Rd(this.config._onCapture)&&this.config._onCapture!==xb&&(jp.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",e=>this.config._onCapture(e.event,e))),this.config.ip&&jp.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}rs(e){var t=performance.now();this.historyAutocapture=new Om(this),this.historyAutocapture.startIfEnabled();var n=[];n.push(()=>{new Gm(this).startIfEnabledOrStop()}),n.push(()=>{var e;this.siteApps=new sb(this),null==(e=this.siteApps)||e.init()}),e||n.push(()=>{this.sessionRecording=new bb(this),this.sessionRecording.startIfEnabledOrStop()}),this.config.disable_scroll_properties||n.push(()=>{this.scrollManager.startMeasuringScrollPosition()}),n.push(()=>{this.autocapture=new lm(this),this.autocapture.startIfEnabled()}),n.push(()=>{this.surveys.loadIfEnabled()}),n.push(()=>{this.logs.loadIfEnabled()}),n.push(()=>{this.conversations.loadIfEnabled()}),n.push(()=>{this.productTours=new Nv(this),this.productTours.loadIfEnabled()}),n.push(()=>{this.heatmaps=new fg(this),this.heatmaps.startIfEnabled()}),n.push(()=>{this.webVitalsAutocapture=new dg(this)}),n.push(()=>{this.exceptionObserver=new Rm(this),this.exceptionObserver.startIfEnabledOrStop()}),n.push(()=>{this.deadClicksAutocapture=new Im(this,Dm),this.deadClicksAutocapture.startIfEnabled()}),n.push(()=>{if(this.os){var e=this.os;this.os=void 0,this.yi(e)}}),this.ls(n,t)}ls(e,t){for(;e.length>0;){if(this.config.__preview_deferred_init_extensions&&performance.now()-t>=30&&e.length>0)return void setTimeout(()=>{this.ls(e,t)},0);var n=e.shift();if(n)try{n()}catch(i){jp.error("Error initializing extension:",i)}}var r=Math.round(performance.now()-t);this.register_for_session({$sdk_debug_extensions_init_method:this.config.__preview_deferred_init_extensions?"deferred":"synchronous",$sdk_debug_extensions_init_time_ms:r}),this.config.__preview_deferred_init_extensions&&jp.info("PostHog extensions initialized ("+r+"ms)")}yi(e){var t,n,r,i,a,s,o,l,c;if(!hd||!hd.body)return jp.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.yi(e)},500);this.config.__preview_deferred_init_extensions&&(this.os=e),this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=Cd(e.supportedCompression,gg.GZipJS)?gg.GZipJS:Cd(e.supportedCompression,gg.Base64)?gg.Base64:void 0),null!=(t=e.analytics)&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.Vr?this.Vr:"identified_only"}),null==(n=this.siteApps)||n.onRemoteConfig(e),null==(r=this.sessionRecording)||r.onRemoteConfig(e),null==(i=this.autocapture)||i.onRemoteConfig(e),null==(a=this.heatmaps)||a.onRemoteConfig(e),this.surveys.onRemoteConfig(e),this.logs.onRemoteConfig(e),this.conversations.onRemoteConfig(e),null==(s=this.productTours)||s.onRemoteConfig(e),null==(o=this.webVitalsAutocapture)||o.onRemoteConfig(e),null==(l=this.exceptionObserver)||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),null==(c=this.deadClicksAutocapture)||c.onRemoteConfig(e)}ns(){try{this.config.loaded(this)}catch(ym){jp.critical("`loaded` function failed",ym)}this.us(),this.config.capture_pageview&&setTimeout(()=>{(this.consent.isOptedIn()||"always"===this.config.cookieless_mode)&&this.hs()},1),new Gv(this).load(),this.featureFlags.flags()}us(){var e;this.is_capturing()&&this.config.request_batching&&(null==(e=this.Zr)||e.enable())}_dom_loaded(){this.is_capturing()&&$p(this.__request_queue,e=>this.ts(e)),this.__request_queue=[],this.us()}_handle_unload(){var e,t;this.surveys.handlePageUnload(),this.config.request_batching?(this.ds()&&this.capture("$pageleave"),null==(e=this.Zr)||e.unload(),null==(t=this.es)||t.unload()):this.ds()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(e){this.__loaded&&(wb?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=Qg(e.url,{ip:this.config.ip?1:0}),e.headers=wd({},this.config.request_headers,e.headers),e.compression="best-available"===e.compression?this.compression:e.compression,e.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(e.disableTransport=["sendBeacon"]),e.fetchOptions=e.fetchOptions||this.config.fetch_options,(e=>{var t,n,r,i=wd({},e);i.timeout=i.timeout||6e4,i.url=Qg(i.url,{_:(new Date).getTime().toString(),ver:yd.LIB_VERSION,compression:i.compression});var a=null!==(t=i.transport)&&void 0!==t?t:"fetch",s=tv.filter(e=>!i.disableTransport||!e.transport||!i.disableTransport.includes(e.transport)),o=null!==(n=null==(r=Lp(s,e=>e.transport===a))?void 0:r.method)&&void 0!==n?n:s[0].method;if(!o)throw new Error("No available transport method");o(i)})(wd({},e,{callback:t=>{var n,r;this.rateLimiter.checkForLimiting(t),t.statusCode>=400&&(null==(n=(r=this.config).on_request_error)||n.call(r,t)),null==e.callback||e.callback(t)}}))))}ts(e){this.es?this.es.retriableRequest(e):this._send_request(e)}_execute_array(e){var t,n=[],r=[],i=[];$p(e,e=>{e&&(t=e[0],Ad(t)?i.push(e):Rd(e)?e.call(this):Ad(e)&&"alias"===t?n.push(e):Ad(e)&&-1!==t.indexOf("capture")&&Rd(this[t])?i.push(e):r.push(e))});var a=function(e,t){$p(e,function(e){if(Ad(e[0])){var n=t;Tp(e,function(e){n=n[e[0]].apply(n,e.slice(1))})}else this[e[0]].apply(this,e.slice(1))},t)};a(n,this),a(r,this),a(i,this)}ss(){var e,t;return(null==(e=this.config.bootstrap)?void 0:e.featureFlags)&&Object.keys(null==(t=this.config.bootstrap)?void 0:t.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,t,n){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.Zr){if(this.is_capturing())if(!Md(e)&&zd(e)){var i=!this.config.opt_out_useragent_filter&&this._is_bot();if(!i||this.config.__preview_capture_bot_pageviews){var a=null!=n&&n.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==a||!a.isRateLimited){null!=t&&t.$current_url&&!zd(null==t?void 0:t.$current_url)&&(jp.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),null==t||delete t.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var s=new Date,o=(null==n?void 0:n.timestamp)||s,l=mm(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,t||{},o,l)};"$pageview"===e&&this.config.__preview_capture_bot_pageviews&&i&&(c.event="$bot_pageview",c.properties.$browser_type="bot"),a&&(c.properties.$lib_rate_limit_remaining_tokens=a.remainingTokens),(null==n?void 0:n.$set)&&(c.$set=null==n?void 0:n.$set);var u,d="$groupidentify"!==e,h=this.vs(null==n?void 0:n.$set_once,d);if(h&&(c.$set_once=h),(c=function(e,t){return n=e,r=e=>zd(e)&&!Bd(t)?e.slice(0,t):e,i=new Set,function e(t,n){return t!==Object(t)?r?r(t):t:i.has(t)?void 0:(i.add(t),Ad(t)?(a=[],$p(t,t=>{a.push(e(t))})):(a={},Tp(t,(t,n)=>{i.has(t)||(a[n]=e(t,n))})),a);var a}(n);var n,r,i}(c,null!=n&&n._noTruncate?null:this.config.properties_string_max_length)).timestamp=o,Md(null==n?void 0:n.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=s),e===Cv.DISMISSED||e===Cv.SENT){var p=null==t?void 0:t[Ev.SURVEY_ID],f=null==t?void 0:t[Ev.SURVEY_ITERATION];u={id:p,current_iteration:f},localStorage.getItem(Iv(u))||localStorage.setItem(Iv(u),"true"),c.$set=wd({},c.$set,{[Dv({id:p,current_iteration:f},e===Cv.SENT?"responded":"dismissed")]:!0})}else e===Cv.SHOWN&&(c.$set=wd({},c.$set,{[Ev.SURVEY_LAST_SEEN_DATE]:(new Date).toISOString()}));var m=wd({},c.properties.$set,c.$set);if(Od(m)||this.setPersonPropertiesForFlags(m),!Ud(this.config.before_send)){var g=this.cs(c);if(!g)return;c=g}this.qr.emit("eventCaptured",c);var v={method:"POST",url:null!==(r=null==n?void 0:n._url)&&void 0!==r?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:null==n?void 0:n._batchKey};return!this.config.request_batching||n&&(null==n||!n._batchKey)||null!=n&&n.send_instantly?this.ts(v):this.Zr.enqueue(v),c}jp.critical("This capture call is ignored due to client rate limiting.")}}else jp.error("No event name provided to posthog.capture")}else jp.uninitializedWarning("posthog.capture")}Hi(e){return this.on("eventCaptured",t=>e(t.event,t))}calculateEventProperties(e,t,n,r,i){if(n=n||new Date,!this.persistence||!this.sessionPersistence)return t;var a=i?void 0:this.persistence.remove_event_timer(e),s=wd({},t);if(s.token=this.config.token,s.$config_defaults=this.config.defaults,("always"==this.config.cookieless_mode||"on_reject"==this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut())&&(s.$cookieless_mode=!0),"$snapshot"===e){var o=wd({},this.persistence.properties(),this.sessionPersistence.properties());return s.distinct_id=o.distinct_id,(!zd(s.distinct_id)&&!Hd(s.distinct_id)||Ld(s.distinct_id))&&jp.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),s}var l,c=function(e,t){if(!vd)return{};var n,r,i,a=e?Ip([],Zm,t||[]):[],[s,o]=function(e){for(var t=0;t<Xh.length;t++){var[n,r]=Xh[t],i=n.exec(e),a=i&&(Rd(r)?r(i,e):r);if(a)return a}return["",""]}(vd);return Dp(Op({$os:s,$os_version:o,$browser:Gh(vd,navigator.vendor),$device:Qh(vd),$device_type:(r=vd,i=Qh(r),i===ch||i===lh||"Kobo"===i||"Kindle Fire"===i||i===zh?oh:i===Eh||i===$h||i===Ph||i===Fh?"Console":i===dh?"Wearable":i?ih:"Desktop"),$timezone:og(),$timezone_offset:lg()}),{$current_url:tm(null==pd?void 0:pd.href,a,Qm),$host:null==pd?void 0:pd.host,$pathname:null==pd?void 0:pd.pathname,$raw_user_agent:vd.length>1e3?vd.substring(0,997)+"...":vd,$browser_version:Zh(vd,navigator.vendor),$browser_language:rg(),$browser_language_prefix:(n=rg(),"string"==typeof n?n.split("-")[0]:void 0),$screen_height:null==sd?void 0:sd.screen.height,$screen_width:null==sd?void 0:sd.screen.width,$viewport_height:null==sd?void 0:sd.innerHeight,$viewport_width:null==sd?void 0:sd.innerWidth,$lib:"web",$lib_version:yd.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:u,windowId:d}=this.sessionManager.checkAndGetSessionAndWindowId(i,n.getTime());s.$session_id=u,s.$window_id=d}this.sessionPropsManager&&Dp(s,this.sessionPropsManager.getSessionProps());try{var h;this.sessionRecording&&Dp(s,this.sessionRecording.sdkDebugProperties),s.$sdk_debug_retry_queue_size=null==(h=this.es)?void 0:h.length}catch(g){s.$sdk_debug_error_capturing_properties=String(g)}if(this.requestRouter.region===lb.CUSTOM&&(s.$lib_custom_api_host=this.config.api_host),l="$pageview"!==e||i?"$pageleave"!==e||i?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(n):this.pageViewManager.doPageView(n,r),s=Dp(s,l),"$pageview"===e&&hd&&(s.title=hd.title),!Md(a)){var p=n.getTime()-a;s.$duration=parseFloat((p/1e3).toFixed(3))}vd&&this.config.opt_out_useragent_filter&&(s.$browser_type=this._is_bot()?"bot":"browser"),(s=Dp({},c,this.persistence.properties(),this.sessionPersistence.properties(),s)).$is_identified=this._isIdentified(),Ad(this.config.property_denylist)?Tp(this.config.property_denylist,function(e){delete s[e]}):jp.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var f=this.config.sanitize_properties;f&&(jp.error("sanitize_properties is deprecated. Use before_send instead"),s=f(s,e));var m=this.fs();return s.$process_person_profile=m,m&&!i&&this.ps("_calculate_event_properties"),s}vs(e,t){var n;if(void 0===t&&(t=!0),!this.persistence||!this.fs())return e;if(this.Br)return e;var r=this.persistence.get_initial_props(),i=null==(n=this.sessionPropsManager)?void 0:n.getSetOnceProps(),a=Dp({},r,i||{},e||{}),s=this.config.sanitize_properties;return s&&(jp.error("sanitize_properties is deprecated. Use before_send instead"),a=s(a,"$set_once")),t&&(this.Br=!0),Od(a)?void 0:a}register(e,t){var n;null==(n=this.persistence)||n.register(e,t)}register_once(e,t,n){var r;null==(r=this.persistence)||r.register_once(e,t,n)}register_for_session(e){var t;null==(t=this.sessionPersistence)||t.register(e)}unregister(e){var t;null==(t=this.persistence)||t.unregister(e)}unregister_for_session(e){var t;null==(t=this.sessionPersistence)||t.unregister(e)}gs(e,t){this.register({[e]:t})}getFeatureFlag(e,t){return this.featureFlags.getFeatureFlag(e,t)}getFeatureFlagPayload(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch(n){return t}}isFeatureEnabled(e,t){return this.featureFlags.isFeatureEnabled(e,t)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateFlags(e,t,n){var r=null!=n&&n.merge?this.featureFlags.getFlagVariants():{},i=null!=n&&n.merge?this.featureFlags.getFlagPayloads():{},a=wd({},r,e),s=wd({},i,t),o={};for(var[l,c]of Object.entries(a)){var u="string"==typeof c;o[l]={key:l,enabled:!!u||Boolean(c),variant:u?c:void 0,reason:void 0,metadata:Md(null==s?void 0:s[l])?void 0:{id:0,version:void 0,description:void 0,payload:s[l]}}}this.featureFlags.receivedFeatureFlags({flags:o})}updateEarlyAccessFeatureEnrollment(e,t,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t,n)}getEarlyAccessFeatures(e,t,n){return void 0===t&&(t=!1),this.featureFlags.getEarlyAccessFeatures(e,t,n)}on(e,t){return this.qr.on(e,t)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var t,n;return null!==(t=null==(n=this.sessionManager)?void 0:n.onSessionId(e))&&void 0!==t?t:()=>{}}getSurveys(e,t){void 0===t&&(t=!1),this.surveys.getSurveys(e,t)}getActiveMatchingSurveys(e,t){void 0===t&&(t=!1),this.surveys.getActiveMatchingSurveys(e,t)}renderSurvey(e,t){this.surveys.renderSurvey(e,t)}displaySurvey(e,t){void 0===t&&(t=Rv),this.surveys.displaySurvey(e,t)}cancelPendingSurvey(e){this.surveys.cancelPendingSurvey(e)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,t){return void 0===t&&(t=!1),this.surveys.canRenderSurveyAsync(e,t)}identify(e,t,n){if(!this.__loaded||!this.persistence)return jp.uninitializedWarning("posthog.identify");if(Hd(e)&&(e=e.toString(),jp.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))jp.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==yf){if(this.ps("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var i=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:i},"")}e!==r&&e!==this.get_property(Hp)&&(this.unregister(Hp),this.register({distinct_id:e}));var a="anonymous"===(this.persistence.get_property(df)||"anonymous");e!==r&&a?(this.persistence.set_property(df,"identified"),this.setPersonPropertiesForFlags(wd({},n||{},t||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:t||{},$set_once:n||{}}),this.Jr=rv(e,t,n),this.featureFlags.setAnonymousDistinctId(r)):(t||n)&&this.setPersonProperties(t,n),e!==r&&(this.reloadFeatureFlags(),this.unregister(uf))}}else jp.critical('The string "'+yf+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else jp.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,t){if((e||t)&&this.ps("posthog.setPersonProperties")){var n=rv(this.get_distinct_id(),e,t);this.Jr!==n?(this.setPersonPropertiesForFlags(wd({},t||{},e||{})),this.capture("$set",{$set:e||{},$set_once:t||{}}),this.Jr=n):jp.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,t,n){if(e&&t){var r=this.getGroups();r[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:wd({},r,{[e]:t})}),n&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:n}),this.setGroupPropertiesForFlags({[e]:n})),r[e]===t||n||this.reloadFeatureFlags()}else jp.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,t){void 0===t&&(t=!0),this.featureFlags.setPersonPropertiesForFlags(e,t)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,t){void 0===t&&(t=!0),this.ps("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var t,n,r,i;if(jp.info("reset"),!this.__loaded)return jp.uninitializedWarning("posthog.reset");var a=this.get_property("$device_id");if(this.consent.reset(),null==(t=this.persistence)||t.clear(),null==(n=this.sessionPersistence)||n.clear(),this.surveys.reset(),this.featureFlags.reset(),null==(r=this.persistence)||r.set_property(df,"anonymous"),null==(i=this.sessionManager)||i.resetSessionId(),this.Jr=null,"always"===this.config.cookieless_mode)this.register_once({distinct_id:yf,$device_id:null},"");else{var s=this.config.get_device_id(mm());this.register_once({distinct_id:s,$device_id:e?s:a},"")}this.register({$last_posthog_reset:(new Date).toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,t;return null!==(e=null==(t=this.sessionManager)?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==e?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:t,sessionStartTimestamp:n}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+t);if(null!=e&&e.withTimestamp&&n){var i,a=null!==(i=e.timestampLookBack)&&void 0!==i?i:10;if(!n)return r;r+="?t="+Math.max(Math.floor(((new Date).getTime()-n)/1e3)-a,0)}return r}alias(e,t){return e===this.get_property(Up)?(jp.critical("Attempting to create alias for existing People user - aborting."),-2):this.ps("posthog.alias")?(Md(t)&&(t=this.get_distinct_id()),e!==t?(this.gs(Hp,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(jp.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var t=wd({},this.config);if(Fd(e)){var n,r,i,a,s,o,l;Dp(this.config,Nb(e));var c=this.Qr();null==(n=this.persistence)||n.update_config(this.config,t,c),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new _v(wd({},this.config,{persistence:"sessionStorage"}),c);var u=this.Kr(this.config.debug);qd(u)&&(this.config.debug=u),qd(this.config.debug)&&(this.config.debug?(yd.DEBUG=!0,wm.H()&&wm.G("ph_debug","true"),jp.info("set_config",{config:e,oldConfig:t,newConfig:wd({},this.config)})):(yd.DEBUG=!1,wm.H()&&wm.V("ph_debug"))),null==(r=this.exceptionObserver)||r.onConfigChange(),null==(i=this.sessionRecording)||i.startIfEnabledOrStop(),null==(a=this.autocapture)||a.startIfEnabled(),null==(s=this.heatmaps)||s.startIfEnabled(),null==(o=this.exceptionObserver)||o.startIfEnabledOrStop(),this.surveys.loadIfEnabled(),this._s(),null==(l=this.externalIntegrations)||l.startIfEnabledOrStop()}}startSessionRecording(e){var t,n,r,i,a,s=!0===e,o={sampling:s||!(null==e||!e.sampling),linked_flag:s||!(null==e||!e.linked_flag),url_trigger:s||!(null==e||!e.url_trigger),event_trigger:s||!(null==e||!e.event_trigger)};Object.values(o).some(Boolean)&&(null==(t=this.sessionManager)||t.checkAndGetSessionAndWindowId(),o.sampling&&(null==(n=this.sessionRecording)||n.overrideSampling()),o.linked_flag&&(null==(r=this.sessionRecording)||r.overrideLinkedFlag()),o.url_trigger&&(null==(i=this.sessionRecording)||i.overrideTrigger("url")),o.event_trigger&&(null==(a=this.sessionRecording)||a.overrideTrigger("event")));this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!(null==(e=this.sessionRecording)||!e.started)}captureException(e,t){var n=new Error("PostHog syntheticException"),r=this.exceptions.buildProperties(e,{handled:!0,syntheticException:n});return this.exceptions.sendExceptionEvent(wd({},r,t))}startExceptionAutocapture(e){this.set_config({capture_exceptions:null==e||e})}stopExceptionAutocapture(){this.set_config({capture_exceptions:!1})}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var t;return null==(t=this.persistence)?void 0:t.props[e]}getSessionProperty(e){var t;return null==(t=this.sessionPersistence)?void 0:t.props[e]}toString(){var e,t=null!==(e=this.config.name)&&void 0!==e?e:_b;return t!==_b&&(t=_b+"."+t),t}_isIdentified(){var e,t;return"identified"===(null==(e=this.persistence)?void 0:e.get_property(df))||"identified"===(null==(t=this.sessionPersistence)?void 0:t.get_property(df))}fs(){var e,t;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&Od(this.getGroups())&&(null==(e=this.persistence)||null==(e=e.props)||!e[Hp])&&(null==(t=this.persistence)||null==(t=t.props)||!t[vf]))}ds(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&(!0===this.config.capture_pageview||"history_change"===this.config.capture_pageview)}createPersonProfile(){this.fs()||this.ps("posthog.createPersonProfile")&&this.setPersonProperties({},{})}ps(e){return"never"===this.config.person_profiles?(jp.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.gs(vf,!0),!0)}Qr(){if("always"===this.config.cookieless_mode)return!0;var e=this.consent.isOptedOut(),t=this.config.opt_out_persistence_by_default||"on_reject"===this.config.cookieless_mode;return this.config.disable_persistence||e&&!!t}_s(){var e,t,n,r,i=this.Qr();return(null==(e=this.persistence)?void 0:e.Si)!==i&&(null==(n=this.persistence)||n.set_disabled(i)),(null==(t=this.sessionPersistence)?void 0:t.Si)!==i&&(null==(r=this.sessionPersistence)||r.set_disabled(i)),i}opt_in_capturing(e){var t,n,r,i;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),null==(n=this.sessionManager)||n.destroy(),null==(r=this.pageViewManager)||r.destroy(),this.sessionManager=new rb(this),this.pageViewManager=new mg(this),this.persistence&&(this.sessionPropsManager=new tb(this,this.sessionManager,this.persistence)),this.sessionRecording=new bb(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this._s(),this.us(),null==(t=this.sessionRecording)||t.startIfEnabledOrStop(),"on_reject"==this.config.cookieless_mode&&this.surveys.loadIfEnabled(),(Md(null==e?void 0:e.captureEventName)||null!=e&&e.captureEventName)&&this.capture(null!==(i=null==e?void 0:e.captureEventName)&&void 0!==i?i:"$opt_in",null==e?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.hs()):jp.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var e,t,n;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this._s(),"on_reject"===this.config.cookieless_mode&&(this.register({distinct_id:yf,$device_id:null}),null==(e=this.sessionManager)||e.destroy(),null==(t=this.pageViewManager)||t.destroy(),this.sessionManager=void 0,this.sessionPropsManager=void 0,null==(n=this.sessionRecording)||n.stopRecording(),this.sessionRecording=void 0,this.hs())):jp.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var e=this.consent.consent;return e===Em.GRANTED?"granted":e===Em.DENIED?"denied":"pending"}is_capturing(){return"always"===this.config.cookieless_mode||("on_reject"===this.config.cookieless_mode?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this._s()}_is_bot(){return dd?ob(dd,this.config.custom_blocked_useragents):void 0}hs(){hd&&("visible"===hd.visibilityState?this.Wr||(this.Wr=!0,this.capture("$pageview",{title:hd.title},{send_instantly:!0}),this.Gr&&(hd.removeEventListener("visibilitychange",this.Gr),this.Gr=null)):this.Gr||(this.Gr=this.hs.bind(this),Bp(hd,"visibilitychange",this.Gr)))}debug(e){!1===e?(null==sd||sd.console.log("You've disabled debug mode."),this.set_config({debug:!1})):(null==sd||sd.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),this.set_config({debug:!0}))}O(){var e,t,n,r,i,a,s=this.Yr||{};return"advanced_disable_flags"in s?!!s.advanced_disable_flags:!1!==this.config.advanced_disable_flags?!!this.config.advanced_disable_flags:!0===this.config.advanced_disable_decide?(jp.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(n="advanced_disable_decide",r=jp,i=(t="advanced_disable_flags")in(e=s)&&!Md(e[t]),a=n in e&&!Md(e[n]),i?e[t]:!!a&&(r&&r.warn("Config field '"+n+"' is deprecated. Please use '"+t+"' instead. The old field will be removed in a future major version."),e[n]))}cs(e){if(Ud(this.config.before_send))return e;var t=Ad(this.config.before_send)?this.config.before_send:[this.config.before_send],n=e;for(var r of t){if(n=r(n),Ud(n)){var i="Event '"+e.event+"' was rejected in beforeSend function";return Wd(e.event)?jp.warn(i+". This can cause unexpected behavior."):jp.info(i),null}n.properties&&!Od(n.properties)||jp.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return n}getPageViewId(){var e;return null==(e=this.pageViewManager.Kt)?void 0:e.pageViewId}captureTraceFeedback(e,t){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:t})}captureTraceMetric(e,t,n){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:t,$ai_metric_value:String(n)})}Kr(e){var t=qd(e)&&!e,n=wm.H()&&"true"===wm.q("ph_debug");return!t&&(!!n||e)}}!function(e,t){for(var n=0;n<t.length;n++)e.prototype[t[n]]=Fp(e.prototype[t[n]])}(Sb,["identify"]);var Cb,Eb=(Cb=yb[_b]=new Sb,function(){function e(){e.done||(e.done=!0,wb=!1,Tp(yb,function(e){e._dom_loaded()}))}null!=hd&&hd.addEventListener?"complete"===hd.readyState?e():Bp(hd,"DOMContentLoaded",e,{capture:!1}):sd&&jp.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),Cb),Pb=U.createContext({client:Eb,bootstrap:void 0});function $b(e,t,n){if(void 0===n&&(n=new WeakMap),e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(n.has(e)&&n.get(e)===t)return!0;n.set(e,t);var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var a=0,s=r;a<s.length;a++){var o=s[a];if(!i.includes(o))return!1;if(!$b(e[o],t[o],n))return!1}return!0}function Tb(e){var t,n,r=e.children,i=e.client,a=e.apiKey,s=e.options,o=U.useRef(null),l=U.useMemo(function(){return i?(a&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),s&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),i):(a||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),Eb)},[i,a,JSON.stringify(s)]);return U.useEffect(function(){if(!i){var e=o.current;e?(a!==e.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),s&&!$b(s,e.options)&&Eb.set_config(s),o.current={apiKey:a,options:null!=s?s:{}}):(Eb.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),Eb.init(a,s),o.current={apiKey:a,options:null!=s?s:{}})}},[i,a,JSON.stringify(s)]),H.createElement(Pb.Provider,{value:{client:l,bootstrap:null!==(t=null==s?void 0:s.bootstrap)&&void 0!==t?t:null===(n=null==i?void 0:i.config)||void 0===n?void 0:n.bootstrap}},r)}var Db=function(e){return"function"==typeof e},Ib=function(e,t){return(Ib=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};"function"==typeof SuppressedError&&SuppressedError;var Ab={componentStack:null,exceptionEvent:null,error:null},Rb="[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element.";!function(e){function t(t){var n=e.call(this,t)||this;return n.state=Ab,n}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ib(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(t,e),t.prototype.componentDidCatch=function(e,t){var n,r=this.props.additionalProperties;Db(r)?n=r(e):"object"==typeof r&&(n=r);var i=this.context.client.captureException(e,n),a=t.componentStack;this.setState({error:e,componentStack:null!=a?a:null,exceptionEvent:i})},t.prototype.render=function(){var e=this.props,t=e.children,n=e.fallback,r=this.state;if(null==r.componentStack)return Db(t)?t():t;var i=Db(n)?H.createElement(n,{error:r.error,componentStack:r.componentStack,exceptionEvent:r.exceptionEvent}):n;return H.isValidElement(i)?i:(console.warn(Rb),H.createElement(H.Fragment,null))},t.contextType=Pb}(H.Component);
/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
var Fb="popstate";function Ob(e={}){return function(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",l=null,c=u();null==c&&(c=0,s.replaceState({...s.state,idx:c},""));function u(){return(s.state||{idx:null}).idx}function d(){o="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:m.location,delta:t})}function h(e,t){o="PUSH";let n=Bb(m.location,e,t);c=u()+1;let r=Lb(n,c),d=m.createHref(n);try{s.pushState(r,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;i.location.assign(d)}a&&l&&l({action:o,location:m.location,delta:1})}function p(e,t){o="REPLACE";let n=Bb(m.location,e,t);c=u();let r=Lb(n,c),i=m.createHref(n);s.replaceState(r,"",i),a&&l&&l({action:o,location:m.location,delta:0})}function f(e){return function(e,t=!1){let n="http://localhost";"undefined"!=typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href);Mb(n,"No window.location.(origin|href) available to create URL");let r="string"==typeof e?e:Ub(e);r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r);return new URL(r,n)}(e)}let m={get action(){return o},get location(){return e(i,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Fb,d),l=e,()=>{i.removeEventListener(Fb,d),l=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:p,go:e=>s.go(e)};return m}(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return Bb("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:Ub(t)},0,e)}function Mb(e,t){if(!1===e||null==e)throw new Error(t)}function zb(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Lb(e,t){return{usr:e.state,key:e.key,idx:t}}function Bb(e,t,n=null,r){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?Hb(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function Ub({pathname:e="/",search:t="",hash:n=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(e+="#"===n.charAt(0)?n:"#"+n),e}function Hb(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Vb(e,t,n="/"){return function(e,t,n,r){let i="string"==typeof t?Hb(t):t,a=iy(i.pathname||"/",n);if(null==a)return null;let s=qb(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let l=0;null==o&&l<s.length;++l){let e=ry(a);o=ty(s[l],e,r)}return o}(e,t,n,!1)}function qb(e,t=[],n=[],r="",i=!1){let a=(e,a,s=i,o)=>{let l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&s)return;Mb(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length)}let c=dy([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(Mb(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),qb(e.children,t,u,c,s)),(null!=e.path||e.index)&&t.push({path:c,score:ey(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&(null==(n=e.path)?void 0:n.includes("?")))for(let r of Wb(e.path))a(e,t,!0,r);else a(e,t)}),t}function Wb(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return i?[a,""]:[a];let s=Wb(r.join("/")),o=[];return o.push(...s.map(e=>""===e?a:[a,e].join("/"))),i&&o.push(...s),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var Kb=/^:[\w-]+$/,Gb=3,Yb=2,Zb=1,Xb=10,Qb=-2,Jb=e=>"*"===e;function ey(e,t){let n=e.split("/"),r=n.length;return n.some(Jb)&&(r+=Qb),t&&(r+=Yb),n.filter(e=>!Jb(e)).reduce((e,t)=>e+(Kb.test(t)?Gb:""===t?Zb:Xb),r)}function ty(e,t,n=!1){let{routesMeta:r}=e,i={},a="/",s=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",u=ny({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=ny({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:dy([a,u.pathname]),pathnameBase:hy(dy([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=dy([a,u.pathnameBase]))}return s}function ny(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t=!1,n=!0){zb("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:n},r)=>{if("*"===t){let e=o[r]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const i=o[r];return e[t]=n&&!i?void 0:(i||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:s,pattern:e}}function ry(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return zb(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function iy(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var ay=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function sy(e,t="/"){let n,{pathname:r,search:i="",hash:a=""}="string"==typeof e?Hb(e):e;if(r)if(s=r,ay.test(s))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),zb(!1,`Pathnames cannot have embedded double slashes - normalizing ${e} -> ${r}`)}n=r.startsWith("/")?oy(r.substring(1),"/"):oy(r,t)}else n=t;var s;return{pathname:n,search:py(i),hash:fy(a)}}function oy(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function ly(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cy(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function uy(e,t,n,r=!1){let i;"string"==typeof e?i=Hb(e):(i={...e},Mb(!i.pathname||!i.pathname.includes("?"),ly("?","pathname","search",i)),Mb(!i.pathname||!i.pathname.includes("#"),ly("#","pathname","hash",i)),Mb(!i.search||!i.search.includes("#"),ly("#","search","hash",i)));let a,s=""===e||""===i.pathname,o=s?"/":i.pathname;if(null==o)a=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=sy(i,a),c=o&&"/"!==o&&o.endsWith("/"),u=(s||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var dy=e=>e.join("/").replace(/\/\/+/g,"/"),hy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),py=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",fy=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"",my=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function gy(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var vy="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function by(e,t){let n=e;if("string"!=typeof n||!ay.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(vy)try{let e=new URL(window.location.href),r=n.startsWith("//")?new URL(e.protocol+n):new URL(n),a=iy(r.pathname,t);r.origin===e.origin&&null!=a?n=a+r.search+r.hash:i=!0}catch(a){zb(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yy=["POST","PUT","PATCH","DELETE"];new Set(yy);var xy=["GET",...yy];new Set(xy);var _y=U.createContext(null);_y.displayName="DataRouter";var wy=U.createContext(null);wy.displayName="DataRouterState";var ky=U.createContext(!1),Ny=U.createContext({isTransitioning:!1});Ny.displayName="ViewTransition",U.createContext(new Map).displayName="Fetchers",U.createContext(null).displayName="Await";var jy=U.createContext(null);jy.displayName="Navigation";var Sy=U.createContext(null);Sy.displayName="Location";var Cy=U.createContext({outlet:null,matches:[],isDataRoute:!1});Cy.displayName="Route";var Ey=U.createContext(null);Ey.displayName="RouteError";var Py="REACT_ROUTER_ERROR";function $y(){return null!=U.useContext(Sy)}function Ty(){return Mb($y(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(Sy).location}var Dy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Iy(e){U.useContext(jy).static||U.useLayoutEffect(e)}function Ay(){let{isDataRoute:e}=U.useContext(Cy);return e?function(){let{router:e}=function(e){let t=U.useContext(_y);return Mb(t,Hy(e)),t}("useNavigate"),t=Vy("useNavigate"),n=U.useRef(!1);return Iy(()=>{n.current=!0}),U.useCallback(async(r,i={})=>{zb(n.current,Dy),n.current&&("number"==typeof r?await e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}():function(){Mb($y(),"useNavigate() may be used only in the context of a <Router> component.");let e=U.useContext(_y),{basename:t,navigator:n}=U.useContext(jy),{matches:r}=U.useContext(Cy),{pathname:i}=Ty(),a=JSON.stringify(cy(r)),s=U.useRef(!1);return Iy(()=>{s.current=!0}),U.useCallback((r,o={})=>{if(zb(s.current,Dy),!s.current)return;if("number"==typeof r)return void n.go(r);let l=uy(r,JSON.parse(a),i,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:dy([t,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)},[t,n,a,i,e])}()}function Ry(e,{relative:t}={}){let{matches:n}=U.useContext(Cy),{pathname:r}=Ty(),i=JSON.stringify(cy(n));return U.useMemo(()=>uy(e,JSON.parse(i),r,"path"===t),[e,i,r,t])}function Fy(e,t,n,r,i){var a;Mb($y(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=U.useContext(jy),{matches:o}=U.useContext(Cy),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let e=h&&h.path||"";Wy(u,!h||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let p,f=Ty();if(t){let e="string"==typeof t?Hb(t):t;Mb("/"===d||(null==(a=e.pathname)?void 0:a.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=f;let m=p.pathname||"/",g=m;if("/"!==d){let e=d.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=Vb(e,{pathname:g});zb(h||null!=v,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),zb(null==v||void 0!==v[v.length-1].route.element||void 0!==v[v.length-1].route.Component||void 0!==v[v.length-1].route.lazy,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=function(e,t=[],n=null,r=null){if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let i=e,a=null==n?void 0:n.errors;if(null!=a){let e=i.findIndex(e=>e.route.id&&void 0!==(null==a?void 0:a[e.route.id]));Mb(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,e+1))}let s=!1,o=-1;if(n)for(let c=0;c<i.length;c++){let e=i[c];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=c),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){s=!0,i=o>=0?i.slice(0,o+1):[i[0]];break}}}let l=n&&r?(e,t)=>{var i,a;r(e,{location:n.location,params:(null==(a=null==(i=n.matches)?void 0:i[0])?void 0:a.params)??{},unstable_pattern:gy(n.matches),errorInfo:t})}:void 0;return i.reduceRight((e,r,c)=>{let u,d=!1,h=null,p=null;n&&(u=a&&r.route.id?a[r.route.id]:void 0,h=r.route.errorElement||My,s&&(o<0&&0===c?(Wy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):o===c&&(d=!0,p=r.route.hydrateFallbackElement||null)));let f=t.concat(i.slice(0,c+1)),m=()=>{let t;return t=u?h:d?p:r.route.Component?U.createElement(r.route.Component,null):r.route.element?r.route.element:e,U.createElement(Uy,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===c)?U.createElement(zy,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0},onError:l}):m()},null)}(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:dy([d,s.encodeLocation?s.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:dy([d,s.encodeLocation?s.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,n,r,i);return t&&b?U.createElement(Sy.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},b):b}function Oy(){let e=function(){var e;let t=U.useContext(Ey),n=function(e){let t=U.useContext(wy);return Mb(t,Hy(e)),t}("useRouteError"),r=Vy("useRouteError");if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:a},"ErrorBoundary")," or"," ",U.createElement("code",{style:a},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},t),n?U.createElement("pre",{style:i},n):null,s)}U.createContext(null);var My=U.createElement(Oy,null),zy=class extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&"object"==typeof e&&e&&"digest"in e&&"string"==typeof e.digest){const t=function(e){if(e.startsWith(`${Py}:ROUTE_ERROR_RESPONSE:{`))try{let t=JSON.parse(e.slice(40));if("object"==typeof t&&t&&"number"==typeof t.status&&"string"==typeof t.statusText)return new my(t.status,t.statusText,t.data)}catch{}}(e.digest);t&&(e=t)}let t=void 0!==e?U.createElement(Cy.Provider,{value:this.props.routeContext},U.createElement(Ey.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?U.createElement(By,{error:e},t):t}};zy.contextType=ky;var Ly=new WeakMap;function By({children:e,error:t}){let{basename:n}=U.useContext(jy);if("object"==typeof t&&t&&"digest"in t&&"string"==typeof t.digest){let e=function(e){if(e.startsWith(`${Py}:REDIRECT:{`))try{let t=JSON.parse(e.slice(28));if("object"==typeof t&&t&&"number"==typeof t.status&&"string"==typeof t.statusText&&"string"==typeof t.location&&"boolean"==typeof t.reloadDocument&&"boolean"==typeof t.replace)return t}catch{}}(t.digest);if(e){let r=Ly.get(t);if(r)throw r;let i=by(e.location,n);if(vy&&!Ly.get(t)){if(!i.isExternal&&!e.reloadDocument){const n=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:e.replace}));throw Ly.set(t,n),n}window.location.href=i.absoluteURL||i.to}return U.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function Uy({routeContext:e,match:t,children:n}){let r=U.useContext(_y);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),U.createElement(Cy.Provider,{value:e},n)}function Hy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Vy(e){let t=function(e){let t=U.useContext(Cy);return Mb(t,Hy(e)),t}(e),n=t.matches[t.matches.length-1];return Mb(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}var qy={};function Wy(e,t,n){t||qy[e]||(qy[e]=!0,zb(!1,n))}function Ky(e){Mb(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Gy({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){Mb(!$y(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=U.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);"string"==typeof n&&(n=Hb(n));let{pathname:c="/",search:u="",hash:d="",state:h=null,key:p="default"}=n,f=U.useMemo(()=>{let e=iy(c,o);return null==e?null:{location:{pathname:e,search:u,hash:d,state:h,key:p},navigationType:r}},[o,c,u,d,h,p,r]);return zb(null!=f,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),null==f?null:U.createElement(jy.Provider,{value:l},U.createElement(Sy.Provider,{children:t,value:f}))}function Yy({children:e,location:t}){return Fy(Zy(e),t)}function Zy(e,t=[]){let n=[];return U.Children.forEach(e,(e,r)=>{if(!U.isValidElement(e))return;let i=[...t,r];if(e.type===U.Fragment)return void n.push.apply(n,Zy(e.props.children,i));Mb(e.type===Ky,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Mb(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Zy(e.props.children,i)),n.push(a)}),n}U.memo(function({routes:e,future:t,state:n,onError:r}){return Fy(e,void 0,n,r,t)});var Xy="get",Qy="application/x-www-form-urlencoded";function Jy(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}var ex=null;var tx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nx(e){return null==e||tx.has(e)?e:(zb(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qy}"`),null)}function rx(e,t){let n,r,i,a,s;if(Jy(o=e)&&"form"===o.tagName.toLowerCase()){let s=e.getAttribute("action");r=s?iy(s,t):null,n=e.getAttribute("method")||Xy,i=nx(e.getAttribute("enctype"))||Qy,a=new FormData(e)}else if(function(e){return Jy(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Jy(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||s.getAttribute("action");if(r=o?iy(o,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||Xy,i=nx(e.getAttribute("formenctype"))||nx(s.getAttribute("enctype"))||Qy,a=new FormData(s,e),!function(){if(null===ex)try{new FormData(document.createElement("form"),0),ex=!1}catch(e){ex=!0}return ex}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,r)}}else{if(Jy(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Xy,r=null,i=Qy,s=e}var o;return a&&"text/plain"===i&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}function ix(e,t){if(!1===e||null==e)throw new Error(t)}function ax(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function sx(e,t,n){return function(e,t){let n=new Set;return new Set(t),e.reduce((e,t)=>{let r=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(t));return n.has(r)||(n.add(r),e.push({key:r,link:t})),e},[])}((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(ax).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}function ox(e,t,n,r,i,a){let s=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null==(r=n[t].route.path)?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===a?t.filter((e,t)=>s(e,t)||o(e,t)):"data"===a?t.filter((t,a)=>{var l;let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(s(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null==(l=n[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof r)return r}return!0}):[]}function lx(e,t,{includeHydrateFallback:n}={}){return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function cx(){let e=U.useContext(_y);return ix(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ux=U.createContext(void 0);function dx(){let e=U.useContext(ux);return ix(e,"You must render this element inside a <HydratedRouter> element"),e}function hx(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function px({page:e,...t}){let{router:n}=cx(),r=U.useMemo(()=>Vb(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?U.createElement(fx,{page:e,matches:r,...t}):null}function fx({page:e,matches:t,...n}){let r=Ty(),{manifest:i,routeModules:a}=dx(),{basename:s}=cx(),{loaderData:o,matches:l}=function(){let e=U.useContext(wy);return ix(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),c=U.useMemo(()=>ox(e,t,l,i,r,"data"),[e,t,l,i,r]),u=U.useMemo(()=>ox(e,t,l,i,r,"assets"),[e,t,l,i,r]),d=U.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,l=!1;if(t.forEach(e=>{var t;let r=i.routes[e.route.id];r&&r.hasLoader&&(!c.some(t=>t.route.id===e.route.id)&&e.route.id in o&&(null==(t=a[e.route.id])?void 0:t.shouldRevalidate)||r.hasClientLoader?l=!0:n.add(e.route.id))}),0===n.size)return[];let u=function(e,t,n){let r="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname=`_root.${n}`:t&&"/"===iy(r.pathname,t)?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}(e,s,"data");return l&&n.size>0&&u.searchParams.set("_routes",t.filter(e=>n.has(e.route.id)).map(e=>e.route.id).join(",")),[u.pathname+u.search]},[s,o,r,i,c,t,e,a]),h=U.useMemo(()=>lx(u,i),[u,i]),p=function(e){let{manifest:t,routeModules:n}=dx(),[r,i]=U.useState([]);return U.useEffect(()=>{let r=!1;return sx(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),r}(u);return U.createElement(U.Fragment,null,d.map(e=>U.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...n})),h.map(e=>U.createElement("link",{key:e,rel:"modulepreload",href:e,...n})),p.map(({key:e,link:t})=>U.createElement("link",{key:e,nonce:n.nonce,...t})))}function mx(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}ux.displayName="FrameworkContext";var gx="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{gx&&(window.__reactRouterVersion="7.11.0")}catch(Nk){}function vx({basename:e,children:t,unstable_useTransitions:n,window:r}){let i=U.useRef();null==i.current&&(i.current=Ob({window:r,v5Compat:!0}));let a=i.current,[s,o]=U.useState({action:a.action,location:a.location}),l=U.useCallback(e=>{!1===n?o(e):U.startTransition(()=>o(e))},[n]);return U.useLayoutEffect(()=>a.listen(l),[a,l]),U.createElement(Gy,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:n})}var bx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yx=U.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:i,replace:a,state:s,target:o,to:l,preventScrollReset:c,viewTransition:u,unstable_defaultShouldRevalidate:d,...h},p){let{basename:f,unstable_useTransitions:m}=U.useContext(jy),g="string"==typeof l&&bx.test(l),v=by(l,f),b=function(e,{relative:t}={}){Mb($y(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=U.useContext(jy),{hash:i,pathname:a,search:s}=Ry(e,{relative:t}),o=a;return"/"!==n&&(o="/"===a?n:dy([n,a])),r.createHref({pathname:o,search:s,hash:i})}(l=v.to,{relative:r}),[y,x,_]=function(e,t){let n=U.useContext(ux),[r,i]=U.useState(!1),[a,s]=U.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=t,h=U.useRef(null);U.useEffect(()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{s(e.isIntersecting)})},{threshold:.5});return h.current&&e.observe(h.current),()=>{e.disconnect()}}},[e]),U.useEffect(()=>{if(r){let e=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{i(!0)},f=()=>{i(!1),s(!1)};return n?"intent"!==e?[a,h,{}]:[a,h,{onFocus:hx(o,p),onBlur:hx(l,f),onMouseEnter:hx(c,p),onMouseLeave:hx(u,f),onTouchStart:hx(d,p)}]:[!1,h,{}]}(n,h),w=function(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:l}={}){let c=Ay(),u=Ty(),d=Ry(e,{relative:a});return U.useCallback(h=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(h,t)){h.preventDefault();let t=void 0!==n?n:Ub(u)===Ub(d),p=()=>c(e,{replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o});l?U.startTransition(()=>p()):p()}},[u,c,d,n,r,t,e,i,a,s,o,l])}(l,{replace:a,state:s,target:o,preventScrollReset:c,relative:r,viewTransition:u,unstable_defaultShouldRevalidate:d,unstable_useTransitions:m});let k=U.createElement("a",{...h,..._,href:v.absoluteURL||b,onClick:v.isExternal||i?e:function(t){e&&e(t),t.defaultPrevented||w(t)},ref:mx(p,x),target:o,"data-discover":g||"render"!==t?void 0:"true"});return y&&!g?U.createElement(U.Fragment,null,k,U.createElement(px,{page:b})):k});function xx(e){let t=U.useContext(_y);return Mb(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}yx.displayName="Link",U.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:i,to:a,viewTransition:s,children:o,...l},c){let u=Ry(a,{relative:l.relative}),d=Ty(),h=U.useContext(wy),{navigator:p,basename:f}=U.useContext(jy),m=null!=h&&function(e,{relative:t}={}){let n=U.useContext(Ny);Mb(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=xx("useViewTransitionState"),i=Ry(e,{relative:t});if(!n.isTransitioning)return!1;let a=iy(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=iy(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=ny(i.pathname,s)||null!=ny(i.pathname,a)}
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */(u)&&!0===s,g=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,v=d.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;t||(v=v.toLowerCase(),b=b?b.toLowerCase():null,g=g.toLowerCase()),b&&f&&(b=iy(b,f)||b);const y="/"!==g&&g.endsWith("/")?g.length-1:g.length;let x,_=v===g||!r&&v.startsWith(g)&&"/"===v.charAt(y),w=null!=b&&(b===g||!r&&b.startsWith(g)&&"/"===b.charAt(g.length)),k={isActive:_,isPending:w,isTransitioning:m},N=_?e:void 0;x="function"==typeof n?n(k):[n,_?"active":null,w?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let j="function"==typeof i?i(k):i;return U.createElement(yx,{...l,"aria-current":N,className:x,ref:c,style:j,to:a,viewTransition:s},"function"==typeof o?o(k):o)}).displayName="NavLink",U.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:s=Xy,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:h,...p},f)=>{let{unstable_useTransitions:m}=U.useContext(jy),g=function(){let{router:e}=xx("useSubmit"),{basename:t}=U.useContext(jy),n=Vy("useRouteId"),r=e.fetch,i=e.navigate;return U.useCallback(async(e,a={})=>{let{action:s,method:o,encType:l,formData:c,body:u}=rx(e,t);if(!1===a.navigate){let e=a.fetcherKey||wx();await r(e,n,a.action||s,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await i(a.action||s,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,i,t,n])}(),v=function(e,{relative:t}={}){let{basename:n}=U.useContext(jy),r=U.useContext(Cy);Mb(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Ry(e||".",{relative:t})},s=Ty();if(null==e){a.search=s.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();a.search=n?`?${n}`:""}}e&&"."!==e||!i.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(a.pathname="/"===a.pathname?n:dy([n,a.pathname]));return Ub(a)}(o,{relative:c}),b="get"===s.toLowerCase()?"get":"post",y="string"==typeof o&&bx.test(o);return U.createElement("form",{ref:f,method:b,action:v,onSubmit:r?l:e=>{if(l&&l(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,o=(null==r?void 0:r.getAttribute("formmethod"))||s,p=()=>g(r||e.currentTarget,{fetcherKey:t,method:o,navigate:n,replace:i,state:a,relative:c,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:h});m&&!1!==n?U.startTransition(()=>p()):p()},...p,"data-discover":y||"render"!==e?void 0:"true"})}).displayName="Form";var _x=0,wx=()=>`__${String(++_x)}__`;var kx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=(e,t)=>{const n=U.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:s="",children:o,...l},c)=>{return U.createElement("svg",{ref:c,...kx,width:r,height:r,stroke:n,strokeWidth:a?24*Number(i)/Number(r):i,className:["lucide",`lucide-${u=e,u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,s].join(" "),...l},[...t.map(([e,t])=>U.createElement(e,t)),...Array.isArray(o)?o:[o]]);var u});return n.displayName=`${e}`,n},jx=Nx("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Sx=Nx("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Cx=Nx("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),Ex=Nx("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),Px=Nx("BookCopy",[["path",{d:"M2 16V4a2 2 0 0 1 2-2h11",key:"spzkk5"}],["path",{d:"M5 14H4a2 2 0 1 0 0 4h1",key:"16gqf9"}],["path",{d:"M22 18H11a2 2 0 1 0 0 4h11V6H11a2 2 0 0 0-2 2v12",key:"1owzki"}]]),$x=Nx("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Tx=Nx("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),Dx=Nx("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Ix=Nx("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Ax=Nx("Captions",[["rect",{width:"18",height:"14",x:"3",y:"5",rx:"2",ry:"2",key:"12ruh7"}],["path",{d:"M7 15h4M15 15h2M7 11h2M13 11h4",key:"1ueiar"}]]),Rx=Nx("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Fx=Nx("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Ox=Nx("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Mx=Nx("Clapperboard",[["path",{d:"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",key:"1tn4o7"}],["path",{d:"m6.2 5.3 3.1 3.9",key:"iuk76l"}],["path",{d:"m12.4 3.4 3.1 4",key:"6hsd6n"}],["path",{d:"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",key:"ltgou9"}]]),zx=Nx("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),Lx=Nx("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Bx=Nx("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Ux=Nx("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Hx=Nx("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Vx=Nx("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),qx=Nx("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Wx=Nx("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Kx=Nx("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Gx=Nx("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]),Yx=Nx("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),Zx=Nx("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),Xx=Nx("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Qx=Nx("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),Jx=Nx("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),e_=Nx("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),t_=Nx("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),n_=Nx("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),r_=Nx("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),i_=Nx("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),a_=Nx("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),s_=Nx("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),o_=Nx("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),l_=Nx("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),c_=Nx("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),u_=Nx("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]),d_=Nx("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),h_=Nx("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),p_=Nx("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),f_=Nx("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),m_=Nx("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),g_=Nx("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]),v_=Nx("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),b_=Nx("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),y_=Nx("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),x_=Nx("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),__=Nx("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),w_="72b4987f77607964f64d1fd5a4935f81",k_="https://image.tmdb.org/t/p/";const N_=new class{constructor(e=w_){t(this,"apiKey"),this.apiKey=e}setApiKey(e){this.apiKey=e}async makeRequest(e,t={},n="fr"){const r=this.apiKey||w_;if(r.length<32)throw new Error("Cl API TMDB invalide - vrifiez que vous avez saisi la bonne cl");const i=new URL(`https://api.themoviedb.org/3${e}`);i.searchParams.append("api_key",r),i.searchParams.append("language","fr"===n?"fr-FR":"en-US"),Object.entries(t).forEach(([e,t])=>{i.searchParams.append(e,t)});const a=await fetch(i.toString());if(!a.ok){if(401===a.status)throw new Error("Cl API TMDB invalide ou expire - vrifiez votre cl dans les paramtres");if(400===a.status)throw new Error("Requte invalide - vrifiez votre cl API TMDB dans les paramtres");throw new Error(`Erreur TMDB: ${a.status} ${a.statusText}`)}return a.json()}async searchMulti(e,t=1,n="fr",r){if(e.match(/^\d+$/)){const t=parseInt(e);try{const e=await this.getMovie(t,n);return{results:[{id:e.id,title:e.title,name:void 0,media_type:"movie",poster_path:e.poster_path,release_date:e.release_date,first_air_date:void 0,vote_average:e.vote_average,overview:e.overview}],total_pages:1}}catch(i){}try{const e=await this.getTVShow(t,n);return{results:[{id:e.id,title:void 0,name:e.name,media_type:"tv",poster_path:e.poster_path,release_date:void 0,first_air_date:e.first_air_date,vote_average:e.vote_average,overview:e.overview}],total_pages:1}}catch(i){return{results:[],total_pages:0}}}if(r){const[i,a]=await Promise.all([this.searchMovies(e,t,n,r).catch(()=>({results:[],total_pages:0})),this.searchTV(e,t,n,r).catch(()=>({results:[],total_pages:0}))]);return{results:[...i.results.map(e=>({...e,media_type:"movie"})),...a.results.map(e=>({...e,media_type:"tv"}))],total_pages:Math.max(i.total_pages,a.total_pages)}}return this.makeRequest("/search/multi",{query:encodeURIComponent(e),page:t.toString()},n)}async searchMovies(e,t=1,n="fr",r){const i={query:encodeURIComponent(e),page:t.toString()};return r&&(i.year=r.toString()),this.makeRequest("/search/movie",i,n)}async searchTV(e,t=1,n="fr",r){const i={query:encodeURIComponent(e),page:t.toString()};return r&&(i.first_air_date_year=r.toString()),this.makeRequest("/search/tv",i,n)}async getMovie(e,t="fr"){return this.makeRequest(`/movie/${e}`,{append_to_response:"videos"},t)}async getTVShow(e,t="fr"){return this.makeRequest(`/tv/${e}`,{append_to_response:"videos"},t)}async getMovieCredits(e,t="fr"){return this.makeRequest(`/movie/${e}/credits`,{},t)}async getTVCredits(e,t="fr"){return this.makeRequest(`/tv/${e}/credits`,{},t)}getImageUrl(e,t="w500"){return e?`${k_}${t}${e}`:"/placeholder-poster.jpg"}getActorImageUrl(e){return e?`${k_}w138_and_h175_face${e}`:"/placeholder-actor.jpg"}getBackdropUrl(e,t="w1280"){return e?`${k_}${t}${e}`:"/placeholder-backdrop.jpg"}async getMovieVideos(e){return this.makeRequest(`/movie/${e}/videos`)}async getTVVideos(e){return this.makeRequest(`/tv/${e}/videos`)}async getMovieImages(e){return this.makeRequest(`/movie/${e}/images`,{include_image_language:"en,fr,null"})}async getTVImages(e){return this.makeRequest(`/tv/${e}/images`,{include_image_language:"en,fr,null"})}async getTrailerUrl(e,t){var n,r,i;try{const a="movie"===t?await this.getMovieVideos(e):await this.getTVVideos(e);let s=null==(n=a.results)?void 0:n.find(e=>"Trailer"===e.type&&"YouTube"===e.site&&"fr"===e.iso_639_1);return s||(s=null==(r=a.results)?void 0:r.find(e=>"Trailer"===e.type&&"YouTube"===e.site&&"en"===e.iso_639_1)),s||(s=null==(i=a.results)?void 0:i.find(e=>"YouTube"===e.site)),s?`https://www.youtube.com/watch?v=${s.key}`:null}catch(a){return console.error("Erreur lors de la rcupration de la bande-annonce:",a),null}}};function j_(e){return function(e){return null!==e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"message")}(e)?e:new Error("string"==typeof e?e:"Unknown error")}const S_=["Active_Height","Active_Width","AudioCount","Audio_Channels_Total","BitDepth_Detected","BitDepth","BitDepth_Stored","Channels","Channels_Original","Chapters_Pos_Begin","Chapters_Pos_End","Comic_Position_Total","Count","DataSize","ElementCount","EPG_Positions_Begin","EPG_Positions_End","FirstPacketOrder","FooterSize","Format_Settings_GMC","Format_Settings_RefFrames","Format_Settings_SliceCount","FrameCount","FrameRate_Den","FrameRate_Num","GeneralCount","HeaderSize","Height_CleanAperture","Height","Height_Offset","Height_Original","ImageCount","Lines_MaxCharacterCount","Lines_MaxCountPerEvent","Matrix_Channels","MenuCount","OtherCount","Part_Position","Part_Position_Total","Played_Count","Reel_Position","Reel_Position_Total","Resolution","Sampled_Height","Sampled_Width","SamplingCount","Season_Position","Season_Position_Total","Source_FrameCount","Source_SamplingCount","Source_StreamSize_Encoded","Source_StreamSize","Status","Stored_Height","Stored_Width","StreamCount","StreamKindID","StreamKindPos","StreamSize_Demuxed","StreamSize_Encoded","StreamSize","TextCount","Track_Position","Track_Position_Total","Video0_Delay","VideoCount","Width_CleanAperture","Width","Width_Offset","Width_Original"],C_=["Active_DisplayAspectRatio","BitRate_Encoded","BitRate_Maximum","BitRate_Minimum","BitRate","BitRate_Nominal","Bits-Pixel_Frame","BitsPixel_Frame","Compression_Ratio","Delay","Delay_Original","DisplayAspectRatio_CleanAperture","DisplayAspectRatio","DisplayAspectRatio_Original","Duration_End_Command","Duration_End","Duration_FirstFrame","Duration_LastFrame","Duration","Duration_Start2End","Duration_Start_Command","Duration_Start","Events_MinDuration","FrameRate_Maximum","FrameRate_Minimum","FrameRate","FrameRate_Nominal","FrameRate_Original_Den","FrameRate_Original","FrameRate_Original_Num","FrameRate_Real","Interleave_Duration","Interleave_Preload","Interleave_VideoFrames","OverallBitRate_Maximum","OverallBitRate_Minimum","OverallBitRate","OverallBitRate_Nominal","PixelAspectRatio_CleanAperture","PixelAspectRatio","PixelAspectRatio_Original","SamplesPerFrame","SamplingRate","Source_Duration_FirstFrame","Source_Duration_LastFrame","Source_Duration","TimeStamp_FirstFrame","Video_Delay"],E_=2**32,P_={coverData:!1,chunkSize:262144,format:"object",full:!1};class $_{constructor(e,n){t(this,"isAnalyzing",!1),this.mediainfoModule=e,this.options=n,this.mediainfoModuleInstance=this.instantiateModuleInstance()}analyzeData(e,t,n){if(void 0===n)return new Promise((n,r)=>{this.analyzeData(e,t,(e,t)=>{this.isAnalyzing=!1,t||!e?r(j_(t)):n(e)})});if(this.isAnalyzing)return void n("",new Error("cannot start a new analysis while another is in progress"));this.reset(),this.isAnalyzing=!0;const r=()=>{try{this.openBufferFinalize();const e=this.inform();"object"===this.options.format?n(this.parseResultJson(e)):n(e)}finally{this.isAnalyzing=!1}};let i=0;const a=e=>{const a=e=>{o(e)?s():r()},s=()=>{let r;try{const n=Math.min(this.options.chunkSize,e-i);r=t(n,i)}catch(s){return this.isAnalyzing=!1,void n("",j_(s))}r instanceof Promise?r.then(a).catch(e=>{this.isAnalyzing=!1,n("",j_(e))}):a(r)},o=t=>{if(0===t.length||this.openBufferContinue(t,t.length))return!1;const n=this.openBufferContinueGotoGet();return-1===n?i+=t.length:(i=n,this.openBufferInit(e,n)),!0};this.openBufferInit(e,i),s()},s="function"==typeof e?e():e;s instanceof Promise?s.then(a).catch(e=>{n(null,j_(e))}):a(s)}close(){"function"==typeof this.mediainfoModuleInstance.close&&this.mediainfoModuleInstance.close()}reset(){this.mediainfoModuleInstance.delete(),this.mediainfoModuleInstance=this.instantiateModuleInstance()}inform(){return this.mediainfoModuleInstance.inform()}openBufferContinue(e,t){return!!(8&this.mediainfoModuleInstance.open_buffer_continue(e,t))}openBufferContinueGotoGet(){let e=-1;const t=this.mediainfoModuleInstance.open_buffer_continue_goto_get_lower(),n=this.mediainfoModuleInstance.open_buffer_continue_goto_get_upper();return e=-1==t&&-1==n?-1:t<0?t+E_+n*E_:t+n*E_,e}openBufferFinalize(){this.mediainfoModuleInstance.open_buffer_finalize()}openBufferInit(e,t){this.mediainfoModuleInstance.open_buffer_init(e,t)}parseResultJson(e){const t=S_,n=C_,r=JSON.parse(e);if(r.media){const e={...r.media,track:[]};if(Array.isArray(r.media.track))for(const i of r.media.track){let r={"@type":i["@type"]};for(const[e,a]of Object.entries(i))"@type"!==e&&(r="string"==typeof a&&t.includes(e)?{...r,[e]:Number.parseInt(a,10)}:"string"==typeof a&&n.includes(e)?{...r,[e]:Number.parseFloat(a)}:{...r,[e]:a});e.track.push(r)}return{...r,media:e}}return r}instantiateModuleInstance(){return new this.mediainfoModule.MediaInfo("object"===this.options.format?"JSON":this.options.format,this.options.coverData,this.options.full)}}async function T_(e={}){var t,n=e,r=import.meta.url,i="";try{i=new URL(".",r).href}catch{}t=async e=>{var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw new Error(t.status+" : "+t.url)};var a,s,o,l,c,u,d,h,p,f,m,g,v,b=console.log.bind(console),y=console.error.bind(console),x=!1,_=!1;function w(){var e=o.buffer;l=new Int8Array(e),u=new Int16Array(e),c=new Uint8Array(e),d=new Uint16Array(e),h=new Int32Array(e),p=new Uint32Array(e),f=new Float32Array(e),m=new Float64Array(e),g=new BigInt64Array(e),v=new BigUint64Array(e)}var k,N=0,j=null;function S(e){y(e="Aborted("+e+")"),x=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw null==s||s(t),t}function C(){return n.locateFile?(e="MediaInfoModule.wasm",n.locateFile?n.locateFile(e,i):i+e):new URL("MediaInfoModule.wasm",import.meta.url).href;var e}async function E(e,n){try{var r=await async function(e){try{var n=await t(e);return new Uint8Array(n)}catch{}return function(){throw"both async and sync fetching of the wasm failed"}()}(e);return await WebAssembly.instantiate(r,n)}catch(i){y(`failed to asynchronously prepare wasm: ${i}`),S(i)}}var P=e=>{for(var t="";;){var n=c[e++];if(!n)return t;t+=String.fromCharCode(n)}},$={},T={},D={},I=class extends Error{constructor(e){super(e),this.name="BindingError"}},A=e=>{throw new I(e)};function R(e,t,n={}){return function(e,t,n={}){var r=t.name;if(e||A(`type "${r}" must have a positive integer typeid pointer`),T.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;A(`Cannot register type '${r}' twice`)}if(T[e]=t,delete D[e],$.hasOwnProperty(e)){var i=$[e];delete $[e],i.forEach(e=>e())}}(e,t,n)}var F=(e,t,n)=>{switch(t){case 1:return n?e=>l[e]:e=>c[e];case 2:return n?e=>u[e>>1]:e=>d[e>>1];case 4:return n?e=>h[e>>2]:e=>p[e>>2];case 8:return n?e=>g[e>>3]:e=>v[e>>3];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},O=e=>{A(e.$$.ptrType.registeredClass.name+" instance already deleted")},M=!1,z=e=>{},L=e=>{e.count.value-=1,0===e.count.value&&(e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)})(e)},B=e=>"undefined"==typeof FinalizationRegistry?(B=e=>e,e):(M=new FinalizationRegistry(e=>{L(e.$$)}),z=e=>M.unregister(e),(B=e=>{var t=e.$$;if(!!t.smartPtr){var n={$$:t};M.register(e,n,e)}return e})(e));function U(){}var H=(e,t)=>Object.defineProperty(t,"name",{value:e}),V={},q=(e,t,n)=>{if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(...r){return e[t].overloadTable.hasOwnProperty(r.length)||A(`Function '${n}' called with an invalid number of arguments (${r.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[r.length].apply(this,r)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}};function W(e,t,n,r,i,a,s,o){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=r,this.baseClass=i,this.getActualType=a,this.upcast=s,this.downcast=o,this.pureVirtualFunctions=[]}var K=(e,t,n)=>{for(;t!==n;)t.upcast||A(`Expected null or instance of ${n.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e},G=e=>{if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e};function Y(e,t){if(null===t)return this.isReference&&A(`null is not a valid ${this.name}`),0;t.$$||A(`Cannot pass "${G(t)}" as a ${this.name}`),t.$$.ptr||A(`Cannot pass deleted object as a pointer of type ${this.name}`);var n=t.$$.ptrType.registeredClass;return K(t.$$.ptr,n,this.registeredClass)}function Z(e,t){var n;if(null===t)return this.isReference&&A(`null is not a valid ${this.name}`),this.isSmartPointer?(n=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,n),n):0;t&&t.$$||A(`Cannot pass "${G(t)}" as a ${this.name}`),t.$$.ptr||A(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&A(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass;if(n=K(t.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&A("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:A(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var i=t.clone();n=this.rawShare(n,_e.toHandle(()=>i.delete())),null!==e&&e.push(this.rawDestructor,n)}break;default:A("Unsupporting sharing policy")}return n}function X(e,t){if(null===t)return this.isReference&&A(`null is not a valid ${this.name}`),0;t.$$||A(`Cannot pass "${G(t)}" as a ${this.name}`),t.$$.ptr||A(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&A(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass;return K(t.$$.ptr,n,this.registeredClass)}function Q(e){return this.fromWireType(p[e>>2])}var J=(e,t,n)=>{if(t===n)return e;if(void 0===n.baseClass)return null;var r=J(e,t,n.baseClass);return null===r?null:n.downcast(r)},ee={},te=(e,t)=>(t=((e,t)=>{for(void 0===t&&A("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t})(e,t),ee[t]),ne=class extends Error{constructor(e){super(e),this.name="InternalError"}},re=e=>{throw new ne(e)},ie=(e,t)=>(t.ptrType&&t.ptr||re("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!==!!t.smartPtr&&re("Both smartPtrType and smartPtr must be specified"),t.count={value:1},B(Object.create(e,{$$:{value:t,writable:!0}})));function ae(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=te(this.registeredClass,t);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var r=n.clone();return this.destructor(e),r}function i(){return this.isSmartPointer?ie(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):ie(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var a,s=this.registeredClass.getActualType(t),o=V[s];if(!o)return i.call(this);a=this.isConst?o.constPointerType:o.pointerType;var l=J(t,this.registeredClass,a.registeredClass);return null===l?i.call(this):this.isSmartPointer?ie(a.registeredClass.instancePrototype,{ptrType:a,ptr:l,smartPtrType:this,smartPtr:e}):ie(a.registeredClass.instancePrototype,{ptrType:a,ptr:l})}function se(e,t,n,r,i,a,s,o,l,c,u){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=r,this.isSmartPointer=i,this.pointeeType=a,this.sharingPolicy=s,this.rawGetPointee=o,this.rawConstructor=l,this.rawShare=c,this.rawDestructor=u,i||void 0!==t.baseClass?this.toWireType=Z:r?(this.toWireType=Y,this.destructorFunction=null):(this.toWireType=X,this.destructorFunction=null)}var oe,le=[],ce=(e,t,n=!1)=>{e=P(e);var r,i,a=((i=le[r=t])||(le[r]=i=oe.get(r)),i);return"function"!=typeof a&&A(`unknown function pointer with signature ${e}: ${t}`),a};class ue extends Error{}var de=e=>{var t=qe(e),n=P(t);return Ke(t),n},he=(e,t)=>{var n=[],r={};throw t.forEach(function e(t){r[t]||T[t]||(D[t]?D[t].forEach(e):(n.push(t),r[t]=!0))}),new ue(`${e}: `+n.map(de).join([", "]))},pe=(e,t,n)=>{function r(t){var r=n(t);r.length!==e.length&&re("Mismatched type converter count");for(var i=0;i<e.length;++i)R(e[i],r[i])}e.forEach(e=>D[e]=t);var i=new Array(t.length),a=[],s=0;t.forEach((e,t)=>{T.hasOwnProperty(e)?i[t]=T[e]:(a.push(e),$.hasOwnProperty(e)||($[e]=[]),$[e].push(()=>{i[t]=T[e],++s===a.length&&r(i)}))}),0===a.length&&r(i)},fe=(e,t)=>{for(var n=[],r=0;r<e;r++)n.push(p[t+4*r>>2]);return n},me=e=>{for(;e.length;){var t=e.pop();e.pop()(t)}};function ge(e){for(var t=1;t<e.length;++t)if(null!==e[t]&&void 0===e[t].destructorFunction)return!0;return!1}function ve(e,t,n,r,i,a){var s=t.length;s<2&&A("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==t[1]&&null!==n,l=ge(t),c=!t[0].isVoid,u=t[0],d=t[1],h=[e,A,r,i,me,u.fromWireType.bind(u),null==d?void 0:d.toWireType.bind(d)],p=2;p<s;++p){var f=t[p];h.push(f.toWireType.bind(f))}if(!l)for(p=o?1:2;p<t.length;++p)null!==t[p].destructorFunction&&h.push(t[p].destructorFunction);let m=function(e,t,n,r){var i=ge(e),a=e.length-2,s=[],o=["fn"];t&&o.push("thisWired");for(var l=0;l<a;++l)s.push(`arg${l}`),o.push(`arg${l}Wired`);s=s.join(","),o=o.join(",");var c=`return function (${s}) {\n`;i&&(c+="var destructors = [];\n");var u=i?"destructors":"null",d=["humanName","throwBindingError","invoker","fn","runDestructors","fromRetWire","toClassParamWire"];for(t&&(c+=`var thisWired = toClassParamWire(${u}, this);\n`),l=0;l<a;++l){var h=`toArg${l}Wire`;c+=`var arg${l}Wired = ${h}(${u}, arg${l});\n`,d.push(h)}if(c+=(n||r?"var rv = ":"")+`invoker(${o});\n`,i)c+="runDestructors(destructors);\n";else for(l=t?1:2;l<e.length;++l){var p=1===l?"thisWired":"arg"+(l-2)+"Wired";null!==e[l].destructorFunction&&(c+=`${p}_dtor(${p});\n`,d.push(`${p}_dtor`))}return n&&(c+="var ret = fromRetWire(rv);\nreturn ret;\n"),c+="}\n",new Function(d,c)}(t,o,c,a);var g=m(...h);return H(e,g)}var be=[],ye=[0,1,,1,null,1,!0,1,!1,1],xe=e=>{e>9&&0===--ye[e+1]&&(ye[e]=void 0,be.push(e))},_e={toValue:e=>(e||A(`Cannot use deleted val. handle = ${e}`),ye[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=be.pop()||ye.length;return ye[t]=e,ye[t+1]=1,t}}}},we={name:"emscripten::val",fromWireType:e=>{var t=_e.toValue(e);return xe(e),t},toWireType:(e,t)=>_e.toHandle(t),readValueFromPointer:Q,destructorFunction:null},ke=(e,t)=>{switch(t){case 4:return function(e){return this.fromWireType(f[e>>2])};case 8:return function(e){return this.fromWireType(m[e>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},Ne=(e,t,n)=>((e,t,n,r)=>{if(!(r>0))return 0;for(var i=n,a=n+r-1,s=0;s<e.length;++s){var o=e.codePointAt(s);if(o<=127){if(n>=a)break;t[n++]=o}else if(o<=2047){if(n+1>=a)break;t[n++]=192|o>>6,t[n++]=128|63&o}else if(o<=65535){if(n+2>=a)break;t[n++]=224|o>>12,t[n++]=128|o>>6&63,t[n++]=128|63&o}else{if(n+3>=a)break;t[n++]=240|o>>18,t[n++]=128|o>>12&63,t[n++]=128|o>>6&63,t[n++]=128|63&o,s++}}return t[n]=0,n-i})(e,c,t,n),je=e=>{for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t},Se="undefined"!=typeof TextDecoder?new TextDecoder:void 0,Ce=(e,t,n,r)=>{var i=t+n;if(r)return i;for(;e[t]&&!(t>=i);)++t;return t},Ee=(e,t=0,n,r)=>{var i=Ce(e,t,n,r);if(i-t>16&&e.buffer&&Se)return Se.decode(e.subarray(t,i));for(var a="";t<i;){var s=e[t++];if(128&s){var o=63&e[t++];if(192!=(224&s)){var l=63&e[t++];if((s=224==(240&s)?(15&s)<<12|o<<6|l:(7&s)<<18|o<<12|l<<6|63&e[t++])<65536)a+=String.fromCharCode(s);else{var c=s-65536;a+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else a+=String.fromCharCode((31&s)<<6|o)}else a+=String.fromCharCode(s)}return a},Pe="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,$e=(e,t,n)=>{var r=e>>1,i=Ce(d,r,t/2,n);if(i-r>16&&Pe)return Pe.decode(d.subarray(r,i));for(var a="",s=r;s<i;++s){var o=d[s];a+=String.fromCharCode(o)}return a},Te=(e,t,n)=>{if(n??(n=2147483647),n<2)return 0;for(var r=t,i=(n-=2)<2*e.length?n/2:e.length,a=0;a<i;++a){var s=e.charCodeAt(a);u[t>>1]=s,t+=2}return u[t>>1]=0,t-r},De=e=>2*e.length,Ie=(e,t,n)=>{for(var r="",i=e>>2,a=0;!(a>=t/4);a++){var s=p[i+a];if(!s&&!n)break;r+=String.fromCodePoint(s)}return r},Ae=(e,t,n)=>{if(n??(n=2147483647),n<4)return 0;for(var r=t,i=r+n-4,a=0;a<e.length;++a){var s=e.codePointAt(a);if(s>65535&&a++,h[t>>2]=s,(t+=4)+4>i)break}return h[t>>2]=0,t-r},Re=e=>{for(var t=0,n=0;n<e.length;++n){e.codePointAt(n)>65535&&n++,t+=4}return t},Fe=[],Oe=(e,t)=>{var n=T[e];return void 0===n&&A(`${t} has unknown type ${de(e)}`),n},Me=(e,t,n)=>{var r=[],i=e(r,n);return r.length&&(p[t>>2]=_e.toHandle(r)),i},ze={},Le=e=>{var t=ze[e];return void 0===t?P(e):t};var Be=(e,t)=>Math.ceil(e/t)*t,Ue=e=>{var t=(e-o.buffer.byteLength+65535)/65536|0;try{return o.grow(t),w(),1}catch(Nk){}},He={},Ve=()=>{if(!Ve.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.language||"C").replace("-","_")+".UTF-8",_:"./this.program"};for(var t in He)void 0===He[t]?delete e[t]:e[t]=He[t];var n=[];for(var t in e)n.push(`${t}=${e[t]}`);Ve.strings=n}return Ve.strings};var qe,We,Ke,Ge=[null,[],[]],Ye=(e,t)=>{var n=Ge[e];0===t||10===t?((1===e?b:y)(Ee(n)),n.length=0):n.push(t)};(()=>{let e=U.prototype;Object.assign(e,{isAliasOf(e){if(!(this instanceof U))return!1;if(!(e instanceof U))return!1;var t=this.$$.ptrType.registeredClass,n=this.$$.ptr;e.$$=e.$$;for(var r=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;r.baseClass;)i=r.upcast(i),r=r.baseClass;return t===r&&n===i},clone(){if(this.$$.ptr||O(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e,t=B(Object.create(Object.getPrototypeOf(this),{$$:{value:(e=this.$$,{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType})}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t},delete(){this.$$.ptr||O(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&A("Object already scheduled for deletion"),z(this),L(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||O(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&A("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const t=Symbol.dispose;t&&(e[t]=e.delete)})(),Object.assign(se.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;null==(t=this.rawDestructor)||t.call(this,e)},readValueFromPointer:Q,fromWireType:ae});var Ze={_abort_js:()=>S(""),_embind_register_bigint:(e,t,n,r,i)=>{t=P(t);const a=0n===r;let s=e=>e;if(a){const e=8*n;s=t=>BigInt.asUintN(e,t),i=s(i)}R(e,{name:t,fromWireType:s,toWireType:(e,t)=>("number"==typeof t&&(t=BigInt(t)),t),readValueFromPointer:F(t,n,!a),destructorFunction:null})},_embind_register_bool:(e,t,n,r)=>{R(e,{name:t=P(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:r},readValueFromPointer:function(e){return this.fromWireType(c[e])},destructorFunction:null})},_embind_register_class:(e,t,r,i,a,s,o,l,c,u,d,h,p)=>{d=P(d),s=ce(a,s),l&&(l=ce(o,l)),u&&(u=ce(c,u)),p=ce(h,p);var f=(e=>{var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?`_${e}`:e})(d);((e,t,r)=>{n.hasOwnProperty(e)?(A(`Cannot register public name '${e}' twice`),q(n,e,e),n[e].overloadTable.hasOwnProperty(r)&&A(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),n[e].overloadTable[r]=t):(n[e]=t,n[e].argCount=r)})(f,function(){he(`Cannot construct ${d} due to unbound types`,[i])}),pe([e,t,r],i?[i]:[],t=>{var r,a,o;t=t[0],o=i?(a=t.registeredClass).instancePrototype:U.prototype;var c=H(d,function(...e){if(Object.getPrototypeOf(this)!==h)throw new I(`Use 'new' to construct ${d}`);if(void 0===m.constructor_body)throw new I(`${d} has no accessible constructor`);var t=m.constructor_body[e.length];if(void 0===t)throw new I(`Tried to invoke ctor of ${d} with invalid number of parameters (${e.length}) - expected (${Object.keys(m.constructor_body).toString()}) parameters instead!`);return t.apply(this,e)}),h=Object.create(o,{constructor:{value:c}});c.prototype=h;var m=new W(d,c,h,p,a,s,l,u);m.baseClass&&((r=m.baseClass).__derivedClasses??(r.__derivedClasses=[]),m.baseClass.__derivedClasses.push(m));var g=new se(d,m,!0,!1,!1),v=new se(d+"*",m,!1,!1,!1),b=new se(d+" const*",m,!1,!0,!1);return V[e]={pointerType:v,constPointerType:b},((e,t,r)=>{n.hasOwnProperty(e)||re("Replacing nonexistent public symbol"),void 0!==n[e].overloadTable&&void 0!==r||(n[e]=t,n[e].argCount=r)})(f,c),[g,v,b]})},_embind_register_class_constructor:(e,t,n,r,i,a)=>{var s=fe(t,n);i=ce(r,i),pe([],[e],e=>{var n=`constructor ${(e=e[0]).name}`;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new I(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.registeredClass.constructor_body[t-1]=()=>{he(`Cannot construct ${e.name} due to unbound types`,s)},pe([],s,r=>(r.splice(1,0,null),e.registeredClass.constructor_body[t-1]=ve(n,r,null,i,a),[])),[]})},_embind_register_class_function:(e,t,n,r,i,a,s,o,l,c)=>{var u=fe(n,r);t=(e=>{const t=(e=e.trim()).indexOf("(");return-1===t?e:e.slice(0,t)})(t=P(t)),a=ce(i,a,l),pe([],[e],e=>{var r=`${(e=e[0]).name}.${t}`;function i(){he(`Cannot call ${r} due to unbound types`,u)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),o&&e.registeredClass.pureVirtualFunctions.push(t);var c=e.registeredClass.instancePrototype,d=c[t];return void 0===d||void 0===d.overloadTable&&d.className!==e.name&&d.argCount===n-2?(i.argCount=n-2,i.className=e.name,c[t]=i):(q(c,t,r),c[t].overloadTable[n-2]=i),pe([],u,i=>{var o=ve(r,i,e,a,s,l);return void 0===c[t].overloadTable?(o.argCount=n-2,c[t]=o):c[t].overloadTable[n-2]=o,[]}),[]})},_embind_register_emval:e=>R(e,we),_embind_register_float:(e,t,n)=>{R(e,{name:t=P(t),fromWireType:e=>e,toWireType:(e,t)=>t,readValueFromPointer:ke(t,n),destructorFunction:null})},_embind_register_integer:(e,t,n,r,i)=>{t=P(t);let a=e=>e;if(0===r){var s=32-8*n;a=e=>e<<s>>>s,i=a(i)}R(e,{name:t,fromWireType:a,toWireType:(e,t)=>t,readValueFromPointer:F(t,n,0!==r),destructorFunction:null})},_embind_register_memory_view:(e,t,n)=>{var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][t];function i(e){var t=p[e>>2],n=p[e+4>>2];return new r(l.buffer,n,t)}R(e,{name:n=P(n),fromWireType:i,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},_embind_register_smart_ptr:(e,t,n,r,i,a,s,o,l,c,u,d)=>{n=P(n),a=ce(i,a),o=ce(s,o),c=ce(l,c),d=ce(u,d),pe([e],[t],e=>(e=e[0],[new se(n,e.registeredClass,!1,!1,!0,e,r,a,o,c,d)]))},_embind_register_std_string:(e,t)=>{R(e,{name:t=P(t),fromWireType(e){var t,n,r,i,a=p[e>>2];return r=a,i=!0,t=(n=e+4)?Ee(c,n,r,i):"",Ke(e),t},toWireType(e,t){var n;t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r="string"==typeof t;r||ArrayBuffer.isView(t)&&1==t.BYTES_PER_ELEMENT||A("Cannot pass non-string to std::string"),n=r?je(t):t.length;var i=We(4+n+1),a=i+4;return p[i>>2]=n,r?Ne(t,a,n+1):c.set(t,a),null!==e&&e.push(Ke,i),i},readValueFromPointer:Q,destructorFunction(e){Ke(e)}})},_embind_register_std_wstring:(e,t,n)=>{var r,i,a;n=P(n),2===t?(r=$e,i=Te,a=De):(r=Ie,i=Ae,a=Re),R(e,{name:n,fromWireType:e=>{var n=p[e>>2],i=r(e+4,n*t,!0);return Ke(e),i},toWireType:(e,r)=>{"string"!=typeof r&&A(`Cannot pass non-string to C++ string type ${n}`);var s=a(r),o=We(4+s+t);return p[o>>2]=s/t,i(r,o+4,s+t),null!==e&&e.push(Ke,o),o},readValueFromPointer:Q,destructorFunction(e){Ke(e)}})},_embind_register_void:(e,t)=>{R(e,{isVoid:!0,name:t=P(t),fromWireType:()=>{},toWireType:(e,t)=>{}})},_emval_create_invoker:(e,t,n)=>{var[r,...i]=((e,t)=>{for(var n=new Array(e),r=0;r<e;++r)n[r]=Oe(p[t+4*r>>2],`parameter ${r}`);return n})(e,t),a=r.toWireType.bind(r),s=i.map(e=>e.readValueFromPointer.bind(e));e--;var o,l={toValue:_e.toValue},c=s.map((e,t)=>{var n=`argFromPtr${t}`;return l[n]=e,`${n}(args${t?"+"+8*t:""})`});switch(n){case 0:o="toValue(handle)";break;case 2:o="new (toValue(handle))";break;case 3:o="";break;case 1:l.getStringOrSymbol=Le,o="toValue(handle)[getStringOrSymbol(methodName)]"}o+=`(${c})`,r.isVoid||(l.toReturnWire=a,l.emval_returnValue=Me,o=`return emval_returnValue(toReturnWire, destructorsRef, ${o})`),o=`return function (handle, methodName, destructorsRef, args) {\n  ${o}\n  }`;var u,d,h=new Function(Object.keys(l),o)(...Object.values(l)),f=`methodCaller<(${i.map(e=>e.name)}) => ${r.name}>`;return u=H(f,h),d=Fe.length,Fe.push(u),d},_emval_decref:xe,_emval_incref:e=>{e>9&&(ye[e+1]+=1)},_emval_invoke:(e,t,n,r,i)=>Fe[e](t,n,r,i),_emval_run_destructors:e=>{var t=_e.toValue(e);me(t),xe(e)},_gmtime_js:function(e,t){var n;e=(n=e)<-9007199254740992||n>9007199254740992?NaN:Number(n);var r=new Date(1e3*e);h[t>>2]=r.getUTCSeconds(),h[t+4>>2]=r.getUTCMinutes(),h[t+8>>2]=r.getUTCHours(),h[t+12>>2]=r.getUTCDate(),h[t+16>>2]=r.getUTCMonth(),h[t+20>>2]=r.getUTCFullYear()-1900,h[t+24>>2]=r.getUTCDay();var i=Date.UTC(r.getUTCFullYear(),0,1,0,0,0,0),a=(r.getTime()-i)/864e5|0;h[t+28>>2]=a},_tzset_js:(e,t,n,r)=>{var i=(new Date).getFullYear(),a=new Date(i,0,1),s=new Date(i,6,1),o=a.getTimezoneOffset(),l=s.getTimezoneOffset(),c=Math.max(o,l);p[e>>2]=60*c,h[t>>2]=Number(o!=l);var u=e=>{var t=e>=0?"-":"+",n=Math.abs(e);return`UTC${t}${String(Math.floor(n/60)).padStart(2,"0")}${String(n%60).padStart(2,"0")}`},d=u(o),f=u(l);l<o?(Ne(d,n,17),Ne(f,r,17)):(Ne(d,r,17),Ne(f,n,17))},emscripten_date_now:()=>Date.now(),emscripten_resize_heap:e=>{var t=c.length,n=2147483648;if((e>>>=0)>n)return!1;for(var r=1;r<=4;r*=2){var i=t*(1+.2/r);i=Math.min(i,e+100663296);var a=Math.min(n,Be(Math.max(e,i),65536));if(Ue(a))return!0}return!1},environ_get:(e,t)=>{var n=0,r=0;for(var i of Ve()){var a=t+n;p[e+r>>2]=a,n+=Ne(i,a,1/0)+1,r+=4}return 0},environ_sizes_get:(e,t)=>{var n=Ve();p[e>>2]=n.length;var r=0;for(var i of n)r+=je(i)+1;return p[t>>2]=r,0},fd_close:e=>52,fd_seek:function(e,t,n,r){return 70},fd_write:(e,t,n,r)=>{for(var i=0,a=0;a<n;a++){var s=p[t>>2],o=p[t+4>>2];t+=8;for(var l=0;l<o;l++)Ye(e,c[s+l]);i+=o}return p[r>>2]=i,0}},Xe=await async function(){function e(e,t){var n;return Xe=e.exports,o=Xe.memory,w(),oe=Xe.__indirect_function_table,qe=(n=Xe).__getTypeName,We=n.malloc,Ke=n.free,n._emscripten_stack_restore,n._emscripten_stack_alloc,n.emscripten_stack_get_current,function(){if(0==--N&&j){var e=j;j=null,e()}}(),Xe}N++;var t={env:Ze,wasi_snapshot_preview1:Ze};return k??(k=C()),e((await async function(e,t,n){try{var r=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(r,n)}catch(i){y(`wasm streaming compile failed: ${i}`),y("falling back to ArrayBuffer instantiation")}return E(t,n)}(0,k,t)).instance)}();return function e(){N>0||N>0?j=e:(n.calledRun=!0,x||(_=!0,Xe.__wasm_call_ctors(),null==a||a(n)))}(),_?n:new Promise((e,t)=>{a=e,s=t})}const D_=()=>{};function I_(e,t){try{if("/"===new URL(t).pathname)return`${t}mediainfo.js/dist/${e}`}catch{}return`${t}../${e}`}function A_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(void 0===t)return new Promise((t,n)=>{A_(e,t,n)});const{locateFile:r,...i}={...P_,...e,format:e.format??P_.format};T_({print:D_,printErr:D_,locateFile:r??I_,onAbort:e=>{n&&n(e)}}).then(e=>{t(new $_(e,i))}).catch(e=>{n&&n(e)})}const R_=new class{constructor(){t(this,"mediaInfo",null)}async initialize(){if(this.mediaInfo)return this.mediaInfo;try{return this.mediaInfo=await A_({format:"text",locateFile:()=>"/fichegen/MediaInfoModule.wasm"}),this.mediaInfo}catch(e){throw console.error("Erreur lors de l'initialisation de MediaInfo:",e),e}}async analyzeFile(e){const t=await this.initialize(),n=await t.analyzeData(()=>e.size,(t,n)=>new Promise((r,i)=>{const a=new FileReader;a.onload=e=>{var t,n;(null==(t=e.target)?void 0:t.error)?i(e.target.error):r(new Uint8Array(null==(n=e.target)?void 0:n.result))},a.readAsArrayBuffer(e.slice(n,n+t))})),r=n.match(/(General[\s\S]*?)(?=\n(?:Video|Audio|Text|Menu|$))/);if(r){const t=r[1],i=`Complete name                            : ${e.name}\n`,a=t.replace(/^(General\s*\n)/,`$1${i}`);return n.replace(t,a)}return n}};function F_(e){if(!e)return!1;const t=e.toLowerCase(),n=["<movie>","<tvshow>","<episodedetails>","<title>","<originaltitle>","<plot>","<director>","<?xml","<root>"].some(e=>t.includes(e)),r=["general","video","audio","text","complete name","movie name","format ","codec","bit rate","width","height","frame rate","duration"].some(e=>t.includes(e));return n||r}function O_(e){if(!e)return!1;const t=e.toLowerCase();return["general","video","audio","text","complete name","format ","codec","bit rate","width","height","frame rate","duration","mediainfo","media info"].some(e=>t.includes(e))}function M_(e){const t={};try{const n=e.match(/<originaltitle[^>]*>(.*?)<\/originaltitle>/is);n&&(t.originaltitle=n[1].trim());const r=e.match(/<votes[^>]*>(.*?)<\/votes>/is);r&&(t.votes=r[1].trim());const i=e.match(/<premiered[^>]*>(.*?)<\/premiered>/is);i&&(t.premiered=i[1].trim());const a=e.match(/<aired[^>]*>(.*?)<\/aired>/is);a&&(t.aired=a[1].trim());const s=e.match(/<season[^>]*>(.*?)<\/season>/is);s&&(t.season=s[1].trim());const o=e.match(/<episode[^>]*>(.*?)<\/episode>/is);o&&(t.episode=o[1].trim());const l=e.match(/<tvdbid[^>]*>(.*?)<\/tvdbid>/is)||e.match(/thetvdb\.com\/(?:series|episode)\/(\d+)/i);l&&(t.tvdbId=l[1].trim());const c=e.match(/<title[^>]*>(.*?)<\/title>/is);c&&(t.title=c[1].trim());const u=e.match(/<year[^>]*>(.*?)<\/year>/is);u&&(t.year=u[1].trim());const d=e.match(/<plot[^>]*>(.*?)<\/plot>/is);d&&(t.plot=d[1].trim());const h=e.match(/<director[^>]*>(.*?)<\/director>/is);h&&(t.director=h[1].trim());const p=e.match(/<actor[^>]*>.*?<name[^>]*>(.*?)<\/name>.*?<\/actor>/gis);p&&(t.actors=p.map(e=>{const t=e.match(/<name[^>]*>(.*?)<\/name>/is);return t?t[1].trim():""}).filter(e=>e));const f=e.match(/<genre[^>]*>(.*?)<\/genre>/gis);f&&(t.genres=f.map(e=>e.replace(/<\/?genre[^>]*>/gi,"").trim()));const m=e.match(/<writer[^>]*>(.*?)<\/writer>/gis);m&&(t.writer=m.map(e=>e.replace(/<\/?writer[^>]*>/gi,"").trim()).filter(Boolean));const g=e.match(/<studio[^>]*>(.*?)<\/studio>/gis);g&&(t.studio=g.map(e=>e.replace(/<\/?studio[^>]*>/gi,"").trim()).filter(Boolean));const v=e.match(/<country[^>]*>(.*?)<\/country>/gis);v&&(t.country=v.map(e=>e.replace(/<\/?country[^>]*>/gi,"").trim()).filter(Boolean));const b=e.match(/<language[^>]*>(.*?)<\/language>/gis);b&&(t.language=b.map(e=>e.replace(/<\/?language[^>]*>/gi,"").trim()).filter(Boolean));const y=e.match(/<runtime[^>]*>(.*?)<\/runtime>/is);y&&(t.runtime=y[1].trim());const x=e.match(/<rating[^>]*>(.*?)<\/rating>/is);x&&(t.rating=x[1].trim());const _=e.match(/<imdb[^>]*>(.*?)<\/imdb>/is)||e.match(/imdb\.com\/title\/(tt\d+)/i);_&&(t.imdbId=_[1].trim());const w=e.match(/<tmdbid[^>]*>(.*?)<\/tmdbid>/is)||e.match(/themoviedb\.org\/(?:movie|tv)\/(\d+)/i);w&&(t.tmdbId=w[1].trim())}catch(n){console.error("Erreur lors du parsing NFO XML:",n)}return t}function z_(e){return e?e.replace(/\.[^.]+$/,"").replace(/[[\]()]/g," ").replace(/[._-]/g," ").replace(/\b(19|20)\d{2}\b.*$/,"").replace(/\b(S\d+E\d+|Season\s+\d+|Episode\s+\d+)\b.*$/i,"").replace(/\b(FRENCH|ENGLISH|MULTI|TRUEFRENCH|VFF|VFQ|VOSTFR|MULTI\.TRUEFRENCH)\b.*$/i,"").replace(/\b(720p|1080p|2160p|4K|UHD|HDR|BluRay|WEB|WEB-DL|WEBRIP|HDTV|REMUX)\b.*$/i,"").replace(/\s+/g," ").trim():""}function L_(e){if(!e)return"";const t=e.match(/(Movie\s*name|Nom\s*du\s*film)\s*:\s*(.+)/i);if(t){const e=z_(t[2].trim());if(e&&e.length>1)return e}const n=e.match(/^Title\s*:\s*(.+)$/im);if(n){const e=z_(n[1].trim());if(e&&e.length>1)return e}const r=e.match(/(Complete\s*name|Nom\s*complet)\s*:\s*(.+)/i);if(r){const e=z_(r[2].trim().split(/[\\/]/).pop()||"");if(e)return e}const i=e.match(/^\s*([^\n]+?)\s*\((19|20)\d{2}\).*$/m);if(i){const e=i[1].replace(/[._]/g," ").replace(/\s+/g," ").trim();if(e&&e.length>1)return e}const a=e.match(/^\s*Source\s*:\s*(.+)$/im)||e.match(/^\s*Source\s*VF\s*:\s*(.+)$/im);if(a){let e=a[1].trim().replace(/[._]/g," ");const t=e.search(/\b(19|20)\d{2}\b/);if(t>0&&(e=e.slice(0,t)),e=e.replace(/\s+$/g,"").trim(),e&&e.length>1)return e}const s=M_(e);return s.title?s.title:""}const B_={quality:"1080p",format:"MKV",codec:"H.264",bitrate:5,bitrateUnit:"Mbps",size:8};const U_={"V_MPEG4/ISO/AVC":"H.264","V_MPEGH/ISO/HEVC":"H.265",V_MPEG2:"MPEG-2","MPEG VIDEO":"MPEG-2","MPEG-2":"MPEG-2","V_MPEG4/ISO/ASP":"MPEG-4","V_MS/VFW/FOURCC":"FOURCC","V_MS/VFW/FOURCC / DIV3":"DivX 3","V_MS/VFW/FOURCC / DIVX":"DivX","V_MS/VFW/FOURCC / DX50":"DivX 5","V_MS/VFW/FOURCC / XVID":"Xvid",XVID:"XVID",xvid:"XVID","V_MPEG4/ISO/AP":"MPEG-4 Part 2",V_MJPEG:"MJPEG","V_MS/VFW/FOURCC / H264":"H.264","V_MS/VFW/FOURCC / X264":"H.264","V_MS/VFW/FOURCC / AVC1":"H.264","V_MS/VFW/FOURCC / H265":"H.265","V_MS/VFW/FOURCC / HEVC":"H.265","V_MS/VFW/FOURCC / x265":"H.265","V_MS/VFW/FOURCC / hev1":"H.265",V_VP8:"VP8",V_VP9:"VP9",V_THEORA:"Theora",V_MPEG1:"MPEG-1","V_MPEG4/ISO/SP":"MPEG-4 Part 2","V_MPEG4/ISO/MP4V-ES":"MPEG-4 Part 2",V_AV01:"AV1",avc1:"H.264",hev1:"H.265",hvc1:"H.265",av01:"AV1",vp09:"VP9",vp08:"VP8"},H_={"A_AAC-2":"AAC",A_AAC:"AAC",A_AC3:"AC-3",A_DTS:"DTS","A_DTS/ES":"DTS-ES","A_DTS/HDRA":"DTS-HD-HRA","A_DTS/HDMA":"DTS-HD-MA","Dolby Digital Plus with Atmos":"Dolby Digital Plus / E-AC3 Atmos","Dolby Digital Plus with Dolby Atmos":"Dolby Digital Plus / E-AC3 Atmos","E-AC-3 JOC":"Dolby Digital Plus / E-AC3 Atmos","DD+ Atmos":"Dolby Digital Plus / E-AC3 Atmos","DDP Atmos":"Dolby Digital Plus / E-AC3 Atmos","Dolby Digital Plus (E-AC-3)":"Dolby Digital Plus / E-AC3","Dolby Digital Plus":"Dolby Digital Plus / E-AC3","E-AC-3":"Dolby Digital Plus / E-AC3","EC-3":"Dolby Digital Plus / E-AC3","DD+":"Dolby Digital Plus / E-AC3",A_EAC3:"E-AC-3",A_FLAC:"FLAC","A_MPEG/L3":"MP3","A_MPEG/L2":"MP2",A_TRUEHD:"TrueHD",A_VORBIS:"Vorbis",A_WAVPACK4:"WavPack",A_PCM:"PCM","A_PCM/INT/LIT":"PCM","A_PCM/INT/BIG":"PCM","A_PCM/FLOAT/IEEE":"PCM",mp4a:"AAC","ac-3":"AC-3","ec-3":"E-AC-3",dts:"DTS",dtsh:"DTS-HDRA",dtsl:"DTS-HD MA","dts-es":"DTS-ES",dtses:"DTS-ES",flac:"FLAC"},V_={1:"Mono",2:"Stro",3:"2.1",4:"4.0",5:"5.0",6:"5.1",7:"6.1",8:"7.1",10:"7.1.2 (Atmos)",12:"7.1.4 (Atmos)",16:"15.1"},q_={fr:{code:"fr",name:"Franais",flag:"https://flagcdn.com/20x15/fr.png"},"fr-ad":{code:"fr-ad",name:"Franais AD",flag:"https://flagcdn.com/20x15/fr.png"},"fr-ca":{code:"fr-ca",name:"Qubcois",flag:"https://flagcdn.com/20x15/ca.png"},en:{code:"en",name:"Anglais",flag:"https://flagcdn.com/20x15/us.png"},es:{code:"es",name:"Espagnol",flag:"https://flagcdn.com/20x15/es.png"},de:{code:"de",name:"Allemand",flag:"https://flagcdn.com/20x15/de.png"},it:{code:"it",name:"Italien",flag:"https://flagcdn.com/20x15/it.png"},pt:{code:"pt",name:"Portugais",flag:"https://flagcdn.com/20x15/pt.png"},ru:{code:"ru",name:"Russe",flag:"https://flagcdn.com/20x15/ru.png"},ja:{code:"ja",name:"Japonais",flag:"https://flagcdn.com/20x15/jp.png"},ko:{code:"ko",name:"Coren",flag:"https://flagcdn.com/20x15/kr.png"},zh:{code:"zh",name:"Chinois",flag:"https://flagcdn.com/20x15/cn.png"},ar:{code:"ar",name:"Arabe",flag:"https://flagcdn.com/20x15/sa.png"},he:{code:"he",name:"Hbreu",flag:"https://flagcdn.com/20x15/il.png"},th:{code:"th",name:"Tha",flag:"https://flagcdn.com/20x15/th.png"},vi:{code:"vi",name:"Vietnamien",flag:"https://flagcdn.com/20x15/vn.png"},hi:{code:"hi",name:"Hindi",flag:"https://flagcdn.com/20x15/in.png"},nl:{code:"nl",name:"Nerlandais",flag:"https://flagcdn.com/20x15/nl.png"},sv:{code:"sv",name:"Sudois",flag:"https://flagcdn.com/20x15/se.png"},no:{code:"no",name:"Norvgien",flag:"https://flagcdn.com/20x15/no.png"},da:{code:"da",name:"Danois",flag:"https://flagcdn.com/20x15/dk.png"},fi:{code:"fi",name:"Finnois",flag:"https://flagcdn.com/20x15/fi.png"},pl:{code:"pl",name:"Polonais",flag:"https://flagcdn.com/20x15/pl.png"},cs:{code:"cs",name:"Tchque",flag:"https://flagcdn.com/20x15/cz.png"},hu:{code:"hu",name:"Hongrois",flag:"https://flagcdn.com/20x15/hu.png"},tr:{code:"tr",name:"Turc",flag:"https://flagcdn.com/20x15/tr.png"},ro:{code:"ro",name:"Roumain",flag:"https://flagcdn.com/20x15/ro.png"},bg:{code:"bg",name:"Bulgare",flag:"https://flagcdn.com/20x15/bg.png"},el:{code:"el",name:"Grec",flag:"https://flagcdn.com/20x15/gr.png"},id:{code:"id",name:"Indonsien",flag:"https://flagcdn.com/20x15/id.png"},ms:{code:"ms",name:"Malais",flag:"https://flagcdn.com/20x15/my.png"},tl:{code:"tl",name:"Filipino",flag:"https://flagcdn.com/20x15/ph.png"},uk:{code:"uk",name:"Ukrainien",flag:"https://flagcdn.com/20x15/ua.png"},hr:{code:"hr",name:"Croate",flag:"https://flagcdn.com/20x15/hr.png"},sr:{code:"sr",name:"Serbe",flag:"https://flagcdn.com/20x15/rs.png"},sl:{code:"sl",name:"Slovne",flag:"https://flagcdn.com/20x15/si.png"},sk:{code:"sk",name:"Slovaque",flag:"https://flagcdn.com/20x15/sk.png"},lt:{code:"lt",name:"Lituanien",flag:"https://flagcdn.com/20x15/lt.png"},lv:{code:"lv",name:"Letton",flag:"https://flagcdn.com/20x15/lv.png"},et:{code:"et",name:"Estonien",flag:"https://flagcdn.com/20x15/ee.png"},"chinese (simplified)":{code:"zh",name:"Chinois (Simplifi)",flag:"https://flagcdn.com/20x15/cn.png"},"chinese (traditional)":{code:"zh-tw",name:"Chinois (Traditionnel)",flag:"https://flagcdn.com/20x15/tw.png"},"spanish (latin america)":{code:"es-mx",name:"Espagnol (Amrique Latine)",flag:"https://flagcdn.com/20x15/mx.png"},"spanish (es)":{code:"es",name:"Espagnol",flag:"https://flagcdn.com/20x15/es.png"},spanish:{code:"es",name:"Espagnol",flag:"https://flagcdn.com/20x15/es.png"},"portuguese (br)":{code:"pt-br",name:"Portugais (Brsil)",flag:"https://flagcdn.com/20x15/br.png"},portuguese:{code:"pt",name:"Portugais",flag:"https://flagcdn.com/20x15/pt.png"},"portuguese (pt)":{code:"pt",name:"Portugais",flag:"https://flagcdn.com/20x15/pt.png"},"norwegian bokmal":{code:"no",name:"Norvgien",flag:"https://flagcdn.com/20x15/no.png"},chinese:{code:"zh",name:"Chinois",flag:"https://flagcdn.com/20x15/cn.png"},arabic:{code:"ar",name:"Arabe",flag:"https://flagcdn.com/20x15/sa.png"},czech:{code:"cs",name:"Tchque",flag:"https://flagcdn.com/20x15/cz.png"},danish:{code:"da",name:"Danois",flag:"https://flagcdn.com/20x15/dk.png"},german:{code:"de",name:"Allemand",flag:"https://flagcdn.com/20x15/de.png"},greek:{code:"el",name:"Grec",flag:"https://flagcdn.com/20x15/gr.png"},finnish:{code:"fi",name:"Finnois",flag:"https://flagcdn.com/20x15/fi.png"},hebrew:{code:"he",name:"Hbreu",flag:"https://flagcdn.com/20x15/il.png"},croatian:{code:"hr",name:"Croate",flag:"https://flagcdn.com/20x15/hr.png"},hungarian:{code:"hu",name:"Hongrois",flag:"https://flagcdn.com/20x15/hu.png"},indonesian:{code:"id",name:"Indonsien",flag:"https://flagcdn.com/20x15/id.png"},italian:{code:"it",name:"Italien",flag:"https://flagcdn.com/20x15/it.png"},korean:{code:"ko",name:"Coren",flag:"https://flagcdn.com/20x15/kr.png"},malay:{code:"ms",name:"Malais",flag:"https://flagcdn.com/20x15/my.png"},dutch:{code:"nl",name:"Nerlandais",flag:"https://flagcdn.com/20x15/nl.png"},polish:{code:"pl",name:"Polonais",flag:"https://flagcdn.com/20x15/pl.png"},romanian:{code:"ro",name:"Roumain",flag:"https://flagcdn.com/20x15/ro.png"},russian:{code:"ru",name:"Russe",flag:"https://flagcdn.com/20x15/ru.png"},swedish:{code:"sv",name:"Sudois",flag:"https://flagcdn.com/20x15/se.png"},thai:{code:"th",name:"Tha",flag:"https://flagcdn.com/20x15/th.png"},turkish:{code:"tr",name:"Turc",flag:"https://flagcdn.com/20x15/tr.png"},ukrainian:{code:"uk",name:"Ukrainien",flag:"https://flagcdn.com/20x15/ua.png"},vietnamese:{code:"vi",name:"Vietnamien",flag:"https://flagcdn.com/20x15/vn.png"}};function W_(e){const t=e.toLowerCase();return"autre"===t||"other"===t?{code:t,name:e,flag:null}:q_[t]?q_[t]:{code:t,name:e,flag:null}}function K_(e,t,n){"general"===t?e.general=n:"video"===t?(e.video||(e.video=[]),e.video.push(n)):"audio"===t?(e.audio||(e.audio=[]),e.audio.push(n)):"text"===t&&(e.text||(e.text=[]),e.text.push(n))}function G_(e,t){const n=t.replace(/[()\[\]{}.*+?^$|\\]/g,"\\$&"),r=new RegExp(`^\\s*${n}\\s*:\\s*(.+)`,"im"),i=e.match(r);if(i)return i[1].trim();const a=new RegExp(`^${n}\\t(.+)$`,"im"),s=e.match(a);return s?s[1].trim():null}function Y_(e){const t={},n=e.match(/(Duration|Dure)\s*:\s*(.+)/i);n&&(t.duration=n[2].trim());const r=e.match(/(Width|Largeur)\s*:\s*([\d\s.,]+)/i),i=e.match(/(Height|Hauteur)\s*:\s*([\d\s.,]+)/i);if(r&&i){const e=parseInt(r[2].replace(/\D/g,"")),n=parseInt(i[2].replace(/\D/g,""));if(!Number.isNaN(e)&&!Number.isNaN(n)){t.width=e,t.height=n;const r=e>=3800||n>=2160||e>=3e3&&n>=1600,i=!r&&(e>=1900||n>=1e3||e>=1900&&n>=800),a=!r&&!i&&(e>=1280||n>=700);t.quality=r?"2160p":i?"1080p":a?"720p":"SD"}}const a=e.match(/(Writing\s*library|Bibliothque\s*utilise)\s*:\s*(.+)/i);if(a){t.writingLibrary=a[2].trim();const e=t.writingLibrary.toLowerCase();e.includes("x264")?t.codec="x264":e.includes("x265")&&(t.codec="x265")}if(!t.codec){const n=e.match(/(Codec ID|Identifiant du codec)\s*:\s*(.+)/i)||e.match(/Format\s*:\s*(.+)/i);if(n){let e=(n[2]||n[1]).trim();"MPEG VIDEO"===e.toUpperCase()?e="MPEG-2":"AVC"===e.toUpperCase()||e.toUpperCase().includes("H264")?e="H.264":("HEVC"===e.toUpperCase()||e.toUpperCase().includes("H265"))&&(e="H.265"),t.codec=U_[s=e]||s}}var s;const o=e.match(/(Frame\s*rate|Dbit\s*im\/s)\s*:\s*([\d.,]+)\s*(FPS|Im\/s)/i);o&&(t.frameRate=o[2].replace(",","."));const l=e.match(/(Bit[ _-]?rate|Dbit)\s*:\s*([\d\s.,]+)\s*(Mb\/?s|Mbps|Kb\/?s|Kbps|kb\/?s)/i)||e.match(/Bitrate\s*:\s*([\d\s.,]+)\s*(Mb\/?s|Mbps|Kb\/?s|Kbps|kb\/?s)/i);if(l){const e=l[2].replace(/\s/g,"").replace(",","."),n=l[3].toLowerCase();let r=parseFloat(e);Number.isNaN(r)||(n.startsWith("kb")&&(r/=1e3),t.bitrate=parseFloat(r.toFixed(3)),t.bitrateUnit="Mbps")}const c=e.match(/(Encoding\s*settings|Paramtres\s*d'encodage)\s*:\s*(.+)/i);return c&&(t.encodingSettings=c[2].trim()),t}function Z_(e,t){var n,r;try{const i={id:(t+1).toString(),language:"Franais",languageCode:"fr",codec:"AAC",channels:"Stro",bitrate:128,bitrateUnit:"Kbps",isDefault:0===t};let a=!1;const s=G_(e,"Language")||G_(e,"Langue");if(s){const e=s.toLowerCase();e.includes("french (ca)")||e.includes("french ca")||e.includes("vfq")?(i.language="Qubcois",i.languageCode="fr-ca"):e.includes("french")||e.includes("franais")||"fr"===e?(i.language="Franais",i.languageCode="fr"):e.includes("english")||e.includes("anglais")||"en"===e?(i.language="Anglais",i.languageCode="en"):e.includes("japanese")||e.includes("japonais")||"ja"===e?(i.language="Japonais",i.languageCode="ja"):(i.language=s,i.languageCode="other")}const o=G_(e,"Commercial name")||G_(e,"Format, Nom commercial IfAny")||G_(e,"Format_Commercial_IfAny");if(o){const e=o.toLowerCase();e.includes("dts-hd high resolution audio")||e.includes("dts-hd hra")?(i.codec="DTS-HD",a=!0):e.includes("dts-hd master audio")||e.includes("dts-hd ma")?(i.codec="DTS-HD MA",a=!0):e.includes("dts:x")?(i.codec="DTS:X",a=!0):e.includes("dolby truehd")&&e.includes("atmos")?(i.codec="Dolby TrueHD with Dolby Atmos",a=!0):e.includes("dolby truehd")?(i.codec="Dolby TrueHD",a=!0):e.includes("dolby digital plus")&&e.includes("atmos")?(i.codec="Dolby Digital Plus / E-AC3 Atmos",a=!0):e.includes("dolby digital plus")?(i.codec="Dolby Digital Plus / E-AC3",a=!0):e.includes("dolby digital")&&(i.codec="AC-3",a=!0)}/\bAtmos\b|\bJOC\b/i.test(e);const l=G_(e,"Format")||G_(e,"Codec ID")||G_(e,"Identifiant du codec");if(l&&!a){const e=l.toLowerCase();"ac-3"===e||e.includes("ac-3")||"ac3"===e?i.codec="AC-3":"dts xll"===e||"dts-xll"===e?i.codec="DTS-HD MA":"dts xbr"===e||"dts-xbr"===e?i.codec="DTS-HD":e.includes("dts")?i.codec="DTS":"mlp fba"===e||e.includes("mlp fba 16-ch")?i.codec="Dolby TrueHD with Dolby Atmos":"mlp fba"===e||e.includes("mlp")?i.codec="Dolby TrueHD":"e-ac-3"===e||"eac3"===e||e.includes("e-ac-3")?i.codec="Dolby Digital Plus / E-AC3":i.codec=function(e){if(!e)return"Autre";const t=e.trim(),n=t.toLowerCase();return/e[\- _]?ac[\- _]?3\s*joc/.test(n)||/(^|[\s\-_/])(e[\- _]?ac[\- _]?3|ec[\- _]?3|dd\+|dolby\s*digital\s*plus)([^a-z]|$)/.test(n)&&/(atmos|joc)/.test(n)||"dolby digital plus with atmos"===n||"dd+ atmos"===n||"ddp atmos"===n?"Dolby Digital Plus / E-AC3 Atmos":/dolby\s*truehd/.test(n)&&/atmos/.test(n)||/\bmlp\s*fba\s*16-ch\b/.test(n)?"Dolby TrueHD Atmos":/(^|[\s\-_/])(e[\- _]?ac[\- _]?3|ec[\- _]?3|dd\+|dolby\s*digital\s*plus)([^a-z]|$)/.test(n)?"Dolby Digital Plus / E-AC3":/(^|[\s\-_/])ac[\- _]?3([^a-z]|$)/.test(n)||/dolby\s*digital(?!\s*plus)/.test(n)?"AC-3":H_[e]||t}(l)}console.log(`Audio track ${t+1}: Checking channels in content (first 500 chars):`,e.substring(0,500));const c=G_(e,"Channel(s)_Original")||G_(e,"ChannelLayout_Original"),u=G_(e,"Channel(s)")||G_(e,"Channels")||G_(e,"Canal(aux)");console.log(`Audio track ${t+1}: channelsOriginal='${c}', channelsValue='${u}'`);const d=c||u;if(d){const e=parseInt(d);console.log(`Audio track ${t+1}: Parsing '${d}'  channelCount=${e}`),isNaN(e)||(i.channels=V_[r=e]||`${r} canaux`,console.log(`Audio track ${t+1}: Detected ${e} channels  ${i.channels}`))}else console.log(`Audio track ${t+1}: No channel information found`);const h=G_(e,"Bit rate")||G_(e,"Maximum bit rate")||G_(e,"Dbit maximum")||G_(e,"BitRate")||G_(e,"Dbit")||G_(e,"Bitrate");if(h){const e=h.match(/([\d\s.,]+)\s*(kb\/s|kbps|Mb\/s|Mbps)?/i);if(e){const r=parseFloat(e[1].replace(/\s/g,"").replace(",",".")),a=(null==(n=e[2])?void 0:n.toLowerCase())||"kb/s";isNaN(r)||(a.includes("mb")?i.bitrate=Math.round(1e3*r):i.bitrate=Math.round(r),i.bitrateUnit="Kbps",console.log(`Audio track ${t+1}: Detected bitrate ${r} ${a}  ${i.bitrate} Kbps`))}}else{const n=G_(e,"Title")||G_(e,"Titre");if(n){const e=n.match(/@\s*([\d\s.,]+)\s*[Kk]bps/i);if(e){const n=parseFloat(e[1].replace(/\s/g,"").replace(",","."));isNaN(n)||(i.bitrate=Math.round(n),i.bitrateUnit="Kbps",console.log(`Audio track ${t+1}: Extracted bitrate from Title: ${i.bitrate} Kbps`))}}}return i}catch(i){return console.error("Erreur lors du parsing de la piste audio:",i),null}}function X_(e){const t=e.toLowerCase();return/(^|[._\-\s])webrip([._\-\s]|$)/i.test(t)?"WEBRip":/(^|[._\-\s])web\-?dl([._\-\s]|$)/i.test(t)||/(^|[._\-\s])web([._\-\s]|$)/i.test(t)||/(^|[._\-\s])(amzn|amazon|nf|netflix|dsnp|disney\+?|dplus|itunes|atvp|appletv\+?|hulu|max|hbomax|paramount|pmtp|peacock)([._\-\s]|$)/i.test(t)?"WEB-DL":/(^|[._\-\s])(bdremux|remux)([._\-\s]|$)/i.test(t)?"REMUX":/(^|[._\-\s])(uhd|4k)([._\-\s]|$)/i.test(t)?"UHD BluRay":/(^|[._\-\s])(bluray|blu\-ray|bdrip)([._\-\s]|$)/i.test(t)?"BluRay":/(^|[._\-\s])hdtv([._\-\s]|$)/i.test(t)?"HDTV":/(^|[._\-\s])dvdrip([._\-\s]|$)/i.test(t)?"DVDRip":/(^|[._\-\s])cam([._\-\s]|$)/i.test(t)?"CAM":/(^|[._\-\s])ts([._\-\s]|$)/i.test(t)?"TS":void 0}function Q_(e){if(!e||!F_(e))return null;const t=/\bRESOLUTiON\b|\bViDEO\b|\bAUDiO\b|\bSUBTiTLES\b/i.test(e),n={video:{},audio:[],subtitles:[]};try{if(!O_(e)&&t){const t=function(e){const t={video:{...B_},audio:[],subtitles:[]},n=e.match(/RESOLUTiON[.\s]*:\s*(\d+)\s*x\s*(\d+)/i);if(n){const e=parseInt(n[2]);e>=2160?t.video.quality="2160p":e>=1080?t.video.quality="1080p":e>=720?t.video.quality="720p":e>=480&&(t.video.quality="480p"),t.video.height=e,t.video.width=parseInt(n[1])}const r=e.match(/CODEC[.\s]*:\s*([^\n]+)/i);if(r){let e=r[1].trim().split("-")[0].trim();/265|hevc/i.test(e)?t.video.codec="H.265":/264/i.test(e)?t.video.codec="H.264":t.video.codec=e}const i=e.match(/BiTRATE[.\s]*:\s*([\d\s,]+)\s*kb\/s/i);if(i){const e=parseInt(i[1].replace(/[\s,]/g,""));t.video.bitrate=Math.round(e/1e3*100)/100,t.video.bitrateUnit="Mbps"}const a=e.match(/RELEASE\s*SiZE[.\s]*:\s*([\d.]+)\s*(GiB|GB)/i);a&&(t.video.size=parseFloat(a[1]));const s=e.match(/Format\s*:\s*(\w+)/i);if(s){let e=s[1].toUpperCase();"MATROSKA"===e&&(e="MKV"),t.video.format=e}[...e.matchAll(/AUDiO\s*#(\d+)[^]*?[^]*?([\s\S]*?)(?=[^]*?[^]*?(?:AUDiO\s*#|SUBTiTLES\s*#|LiNKS|NOTE|GREETZ)|$)/gi)].forEach((e,n)=>{const r=e[1]||(n+1).toString(),i=e[2],a={id:r,language:"Franais",languageCode:"fr",codec:"AC-3",channels:"2.0",bitrate:256,bitrateUnit:"Kbps",isDefault:0===n},s=i.match(/LANGUAGE[.\s]*:\s*([^\n]+)/i);if(s){const e=s[1].trim().toLowerCase();e.includes("french ca")||e.includes("vfq")?(a.language="Qubcois",a.languageCode="fr-ca"):e.includes("french")||e.includes("franais")?(a.language="Franais",a.languageCode="fr"):e.includes("english")||e.includes("anglais")?(a.language="Anglais",a.languageCode="en"):(a.language=s[1].trim(),a.languageCode="other")}const o=i.match(/CODEC[.\s]*:\s*([^\n]+)/i);if(o){const e=o[1].trim();/(E-AC-3|EAC-3)/i.test(e)?a.codec="Dolby Digital Plus (E-AC-3)":/(AC-3|AC3)/i.test(e)?a.codec="AC-3":/DTS(-HD)?/i.test(e)?a.codec="DTS":a.codec=e}const l=i.match(/CHANNELS[.\s]*:\s*([^\n]+)/i);if(l){const e=l[1].trim();/2\.0|stereo/i.test(e)?a.channels="Stro":/5\.1/i.test(e)?a.channels="5.1":/7\.1/i.test(e)?a.channels="7.1":a.channels=e}const c=i.match(/BiTRATE[.\s]*:\s*([\d\s,]+)\s*kb\/s/i);c&&(a.bitrate=parseInt(c[1])),t.audio.push(a)}),[...e.matchAll(/SUBTiTLES\s*#(\d+)[^]*?[^]*?([\s\S]*?)(?=[^]*?[^]*?(?:SUBTiTLES\s*#|LiNKS|NOTE|GREETZ)|$)/gi)].forEach((e,n)=>{const r=e[1]||(n+1).toString(),i=e[2],a={id:r,language:"Franais",languageCode:"fr",type:"embedded",format:"SRT",isForced:!1,isDefault:0===n},s=i.match(/LANGUAGE[.\s]*:\s*([^\n]+)/i);if(s){const e=s[1].trim(),t=e.toLowerCase();t.includes("french ca")||t.includes("vfq")?(a.language="Qubcois",a.languageCode="fr-ca"):t.includes("french")||t.includes("franais")?(a.language="Franais",a.languageCode="fr"):t.includes("english")||t.includes("anglais")?(a.language="Anglais",a.languageCode="en"):(a.language=e,a.languageCode="other")}const o=i.match(/TYPE[.\s]*:\s*([^\n]+)/i);if(o){const e=o[1].trim().toLowerCase();e.includes("forced")&&(a.isForced=!0),e.includes("full")&&(a.isComplete=!0),e.includes("sdh")&&(a.isSDH=!0)}const l=i.match(/FORMAT[.\s]*:\s*([^\n]+)/i);if(l){const e=l[1].trim();/hardcoded/i.test(e)?(a.format="Hardcoded",a.type="embedded"):a.format="UTF-8"===e.toUpperCase()?"SRT":e}t.subtitles.push(a)});const o=e.match(/SOURCE[.\s]*:\s*([^\n]+)/i);o&&(t.source=function(e){const t=e.toLowerCase();return/(^|[._\-\s])webrip([._\-\s]|$)/i.test(t)?"WEBRip":/(^|[._\-\s])web\-?dl([._\-\s]|$)/i.test(t)||/(^|[._\-\s])web([._\-\s]|$)/i.test(t)||/(^|[._\-\s])(amzn|amazon|nf|netflix|dsnp|disney\+?|dplus|itunes|atvp|appletv\+?|hulu|max|hbomax|paramount|pmtp|peacock)([._\-\s]|$)/i.test(t)?"WEB-DL":/(^|[._\-\s])(bdremux|remux)([._\-\s]|$)/i.test(t)?"REMUX":/(^|[._\-\s])(uhd|4k)([._\-\s]|$)/i.test(t)?"UHD BluRay":/(^|[._\-\s])(bluray|blu\-ray)([._\-\s]|$)/i.test(t)?"BluRay":/(^|[._\-\s])hdtv([._\-\s]|$)/i.test(t)?"HDTV":/(^|[._\-\s])dvdrip([._\-\s]|$)/i.test(t)?"DVDRip":e.trim()}(o[1]));const l=e.match(/^\s*([^\n]+?\.(?:MULTi|FRENCH|ENGLISH|TRUEFRENCH)\..*?-[A-Z0-9]+)\s*$/m);return l&&(t.releaseGroup=l[1].trim()),t}(e);if(t)return t}const r=function(e){const t={},n=e.split("\n");let r="",i=[];for(const a of n){const e=a.trim(),n=/^(general|gnral)(\s*#\d+)?\s*$/i.test(e),s=/^(video|vido)(\s*#\d+)?\s*$/i.test(e),o=/^(audio|audio)(\s*#\d+)?\s*$/i.test(e),l=/^(text|texte)(\s*#\d+)?\s*$/i.test(e),c=/^(subtitle|sous-titre)\s*#\d+\s*$/i.test(e);n?(r&&i.length>0&&K_(t,r,i.join("\n")),r="general",i=[]):s?(r&&i.length>0&&K_(t,r,i.join("\n")),r="video",i=[]):o?(r&&i.length>0&&K_(t,r,i.join("\n")),r="audio",i=[]):l||c?(r&&i.length>0&&K_(t,r,i.join("\n")),r="text",i=[]):e&&r&&(/^#\d+$/.test(e)||i.push(a))}return r&&i.length>0&&K_(t,r,i.join("\n")),t}(e);!function(e,t){if(!e)return;console.log("processGeneralSection - generalSection:",e.substring(0,500));const n=function(e){const t={},n=e.match(/(Duration|Dure)\s*:\s*(.+)/i);n&&(t.duration=n[2].trim());const r=e.match(/(File\s*size|Taille\s*du\s*fichier)\s*:\s*([\d\s,.]+)\s*(GiB|GB|MiB|MB|Gio|Mio)/i);if(r){const e=r[2].replace(/\s/g,"").replace(",","."),n=r[3].toUpperCase(),i=parseFloat(e);Number.isNaN(i)||("GIB"===n||"GB"===n||"GIO"===n?t.fileSizeGiB=i:"MIB"!==n&&"MB"!==n&&"MIO"!==n||(t.fileSizeGiB=i/1e3))}return t}(e),r=t.video,i=e.match(/Format\s*:\s*(.+)/i);if(i){let e=i[1].trim().toUpperCase();"MATROSKA"===e?e="MKV":"AVI"===e?e="AVI":"MP4"===e?e="MP4":"M2TS"===e?e="M2TS":"ISO"!==e&&"BDAV"!==e||(e="ISO"),["MKV","MP4","AVI","M2TS","ISO"].includes(e)&&(r.format=e),console.log("Format detected from General section:",e)}n.duration&&(r.duration=n.duration);n.fileSizeGiB&&!Number.isNaN(n.fileSizeGiB)&&(r.size=n.fileSizeGiB);const a=e.match(/(Complete\s*name|Nom\s*complet)\s*:\s*(.+)/i);if(console.log("completeNameMatch:",a),a){const n=a[2];!function(e,t){const n=e.toLowerCase();/\b(2160p|uhd|4k)\b/i.test(n)?t.quality="2160p":/\b1080p\b/i.test(n)?t.quality="1080p":/\b720p\b/i.test(n)&&(t.quality="720p")}(n,r),function(e,t){const n=X_(e);n&&(t.source=n)}(n,t),function(e,t){const n=function(e){const t=e.match(/(Complete\s*name|Nom\s*complet)\s*:\s*(.+)/i);if(!t)return"";const n=t[2].trim();return(n.split(/[\\/]/).pop()||n).trim().replace(/\.[^.]+$/,"")}(e);console.log("extractReleaseInfoFromCompleteName - releaseName:",n),n&&(t.releaseName=n)}(e,t)}!function(e,t){const n=function(e){var t;const n={},r=e.match(/(Complete\s*name|Nom\s*complet)\s*:\s*(.+)/i),i=e.match(/(Movie\s*name|Nom\s*du\s*film)\s*:\s*(.+)/i),a=e.match(/(Encoded\s*by|Encod\s*par)\s*:\s*(.+)/i),s=e.match(/(Original\s*source\s*medium|Support\s*source\s*original)\s*:\s*(.+)/i),o=(null==(t=r?r[2]:i?i[2]:"")?void 0:t.trim())||"";if(o){const e=(o.split(/[\\/]/).pop()||o).trim().replace(/\.[^.]+$/,"").trim(),t=e.toLowerCase();n.source=X_(t)||n.source,n.releaseGroup=e.replace(/\./g," ")}if(!n.source&&s){const e=s[2].toLowerCase();e.includes("uhd")||e.includes("4k")?n.source="UHD BluRay":e.includes("blu-ray")?n.source="BluRay":e.includes("web")&&(n.source="WEB-DL")}return!n.releaseGroup&&a&&(n.releaseGroup=a[2].trim()),n}(e);n.source&&!t.source&&(t.source=n.source);n.releaseGroup&&!t.releaseGroup&&(t.releaseGroup=n.releaseGroup)}(e,t)}(r.general,n),function(e,t){if(!e||0===e.length)return;const n=Y_(e[0]),r=t.video,i="Mbps",a=r.format;t.video={quality:n.quality||r.quality||"1080p",format:a||"MKV",codec:n.codec||r.codec||"H.264",bitrate:n.bitrate??r.bitrate??5,bitrateUnit:n.bitrateUnit||r.bitrateUnit||i,size:r.size??n.size,duration:r.duration||n.duration},console.log("Final video format after processing:",t.video.format);const s=t.video,o=n;o.width&&(s.width=o.width);o.height&&(s.height=o.height);o.frameRate&&(s.frameRate=o.frameRate);o.writingLibrary&&(s.writingLibrary=o.writingLibrary);o.encodingSettings&&(s.encodingSettings=o.encodingSettings)}(r.video,n),function(e,t){if(!e||0===e.length)return;t.audio=e.map((e,t)=>Z_(e,t)).filter(e=>null!==e)}(r.audio,n),function(e,t){if(!e||0===e.length)return;t.subtitles=e.map((e,t)=>function(e,t){try{const n={id:(t+1).toString(),language:"Franais",languageCode:"fr",type:"embedded",format:"SRT",isForced:!1,isDefault:0===t},r=G_(e,"Language")||G_(e,"Langue");if(r){const e=r.toLowerCase();e.includes("french (ca)")||e.includes("french ca")||e.includes("vfq")?(n.language="Qubcois",n.languageCode="fr-ca"):e.includes("french")||e.includes("franais")||"fr"===e?(n.language="Franais",n.languageCode="fr"):e.includes("english")||e.includes("anglais")||"en"===e?(n.language="Anglais",n.languageCode="en"):e.includes("japanese")||e.includes("japonais")||"ja"===e?(n.language="Japonais",n.languageCode="ja"):(n.language=r,n.languageCode="other")}const i=G_(e,"Format");if(i){const e=i.trim().toUpperCase();["SRT","ASS","SSA","PGS","VOBSUB","SUP","UTF-8"].includes(e)&&(n.format="UTF-8"===e?"SRT":e)}const a=G_(e,"Title")||G_(e,"Titre");if(a){const e=a.toLowerCase();(e.includes("forced")||e.includes("forc"))&&(n.isForced=!0),e.includes("sdh")&&(n.isSDH=!0),(e.includes("full")||e.includes("complete"))&&(n.isComplete=!0)}const s=G_(e,"Forced")||G_(e,"Mode forc");s&&(n.isForced=/^(yes|oui)$/i.test(s));const o=G_(e,"Default")||G_(e,"Par dfaut");return o&&(n.isDefault=/^(yes|oui)$/i.test(o)),n}catch(n){return console.error("Erreur lors du parsing des sous-titres:",n),null}}(e,t)).filter(e=>null!==e)}(r.text,n);return r.video&&r.video.length>1&&function(e){if(e.audio){const t=e=>`${e.language}-${e.codec}-${e.channels}-${e.bitrate}`;e.audio=J_(e.audio,t)}if(e.subtitles){const t=e=>{const t=e;return`${e.language}-${e.format}-${e.isForced}-${t.isSDH}-${t.isComplete}`};e.subtitles=J_(e.subtitles,t)}}(n),n}catch(r){return console.error("Erreur lors du parsing des spcifications techniques:",r),null}}function J_(e,t){const n=new Set;return e.filter(e=>{const r=t(e);return!n.has(r)&&(n.add(r),!0)})}var ew={exports:{}};ew.exports=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)},t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function r(e,t,n){for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n,a=Object.keys,s=Array.isArray;function o(e,t){return"object"!=typeof t||a(t).forEach(function(n){e[n]=t[n]}),e}"undefined"==typeof Promise||i.Promise||(i.Promise=Promise);var l=Object.getPrototypeOf,c={}.hasOwnProperty;function u(e,t){return c.call(e,t)}function d(e,t){"function"==typeof t&&(t=t(l(e))),("undefined"==typeof Reflect?a:Reflect.ownKeys)(t).forEach(function(n){p(e,n,t[n])})}var h=Object.defineProperty;function p(e,t,n,r){h(e,t,o(n&&u(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function f(e){return{from:function(t){return e.prototype=Object.create(t.prototype),p(e.prototype,"constructor",e),{extend:d.bind(null,e.prototype)}}}}var m=Object.getOwnPropertyDescriptor,g=[].slice;function v(e,t,n){return g.call(e,t,n)}function b(e,t){return t(e)}function y(e){if(!e)throw new Error("Assertion Failed")}function x(e){i.setImmediate?setImmediate(e):setTimeout(e,0)}function _(e,t){if("string"==typeof t&&u(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var a=_(e,t[r]);n.push(a)}return n}var s=t.indexOf(".");if(-1!==s){var o=e[t.substr(0,s)];return null==o?void 0:_(o,t.substr(s+1))}}function w(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){y("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)w(e,t[r],n[r])}else{var a,o,l=t.indexOf(".");-1!==l?(a=t.substr(0,l),""===(o=t.substr(l+1))?void 0===n?s(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n:w(l=(l=e[a])&&u(e,a)?l:e[a]={},o,n)):void 0===n?s(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function k(e){var t,n={};for(t in e)u(e,t)&&(n[t]=e[t]);return n}var N=[].concat;function j(e){return N.apply([],e)}var S="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(j([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return i[e]}),C=new Set(S.map(function(e){return i[e]})),E=null;function P(e){return E=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var n=E.get(t);if(n)return n;if(s(t)){n=[],E.set(t,n);for(var r=0,i=t.length;r<i;++r)n.push(e(t[r]))}else if(C.has(t.constructor))n=t;else{var a,o=l(t);for(a in n=o===Object.prototype?{}:Object.create(o),E.set(t,n),t)u(t,a)&&(n[a]=e(t[a]))}return n}(e),E=null,e}var $={}.toString;function T(e){return $.call(e).slice(8,-1)}var D="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",I="symbol"==typeof D?function(e){var t;return null!=e&&(t=e[D])&&t.apply(e)}:function(){return null};function A(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var R={};function F(e){var t,n,r,i;if(1===arguments.length){if(s(e))return e.slice();if(this===R&&"string"==typeof e)return[e];if(i=I(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var O="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},M=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(le=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),z={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function L(e,t){this.name=e,this.message=t}function B(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function U(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=B(e,t)}function H(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=B(e,this.failures)}f(L).from(Error).extend({toString:function(){return this.name+": "+this.message}}),f(U).from(L),f(H).from(L);var V=M.reduce(function(e,t){return e[t]=t+"Error",e},{}),q=L,W=M.reduce(function(e,t){var n=t+"Error";function r(e,r){this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=z[t]||n,this.inner=null)}return f(r).from(q),e[t]=r,e},{});W.Syntax=SyntaxError,W.Type=TypeError,W.Range=RangeError;var K=le.reduce(function(e,t){return e[t+"Error"]=W[t],e},{}),G=M.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=W[t]),e},{});function Y(){}function Z(e){return e}function X(e,t){return null==e||e===Z?t:function(n){return t(e(n))}}function Q(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function J(e,t){return e===Y?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Q(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Q(i,this.onerror):i),void 0!==a?a:n}}function ee(e,t){return e===Y?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Q(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Q(r,this.onerror):r)}}function te(e,t){return e===Y?t:function(n){var r=e.apply(this,arguments);o(n,r);var i=this.onsuccess,a=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?Q(i,this.onsuccess):i),a&&(this.onerror=this.onerror?Q(a,this.onerror):a),void 0===r?void 0===n?void 0:n:o(r,n)}}function ne(e,t){return e===Y?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function re(e,t){return e===Y?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}G.ModifyError=U,G.DexieError=L,G.BulkError=H;var ie="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ae(e){ie=e}var se={},oe=100,le=(S="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,l(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,l(t),e]}())[0],ce=(M=S[1],S=S[2],M=M&&M.then,le&&le.constructor),ue=!!S,de=function(e,t){ye.push([e,t]),pe&&(queueMicrotask(Pe),pe=!1)},he=!0,pe=!0,fe=[],me=[],ge=Z,ve={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Y,pgp:!1,env:{},finalize:Y},be=ve,ye=[],xe=0,_e=[];function we(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=be;if("function"!=typeof e){if(e!==se)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&je(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,n){try{n(function(n){if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&$e();n&&"function"==typeof n.then?e(t,function(e,t){n instanceof we?n._then(e,t):n.then(e,t)}):(t._state=!0,t._value=n,Se(t)),r&&Te()}},je.bind(null,t))}catch(r){je(t,r)}}(this,e)}var ke={get:function(){var e=be,t=ze;function n(n,r){var i=this,a=!e.global&&(e!==be||t!==ze),s=a&&!He(),o=new we(function(t,o){Ce(i,new Ne(Ye(n,e,a,s),Ye(r,e,a,s),t,o,e))});return this._consoleTask&&(o._consoleTask=this._consoleTask),o}return n.prototype=se,n},set:function(e){p(this,"then",e&&e.prototype===se?ke:{get:function(){return e},set:ke.set})}};function Ne(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function je(e,t){var n,r;me.push(t),null===e._state&&(n=e._lib&&$e(),t=ge(t),e._state=!1,e._value=t,r=e,fe.some(function(e){return e._value===r._value})||fe.push(r),Se(e),n&&Te())}function Se(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ce(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===xe&&(++xe,de(function(){0==--xe&&De()},[]))}function Ce(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++xe,de(Ee,[n,e,t])}else e._listeners.push(t)}function Ee(e,t,n){try{var r,i=t._value;!t._state&&me.length&&(me=[]),r=ie&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),t._state||-1!==me.indexOf(i)||function(e){for(var t=fe.length;t;)if(fe[--t]._value===e._value)return fe.splice(t,1)}(t),n.resolve(r)}catch(a){n.reject(a)}finally{0==--xe&&De(),--n.psd.ref||n.psd.finalize()}}function Pe(){Ge(ve,function(){$e()&&Te()})}function $e(){var e=he;return pe=he=!1,e}function Te(){var e,t,n;do{for(;0<ye.length;)for(e=ye,ye=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(0<ye.length);pe=he=!0}function De(){var e=fe;fe=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=_e.slice(0),n=t.length;n;)t[--n]()}function Ie(e){return new we(se,!1,e)}function Ae(e,t){var n=be;return function(){var r=$e(),i=be;try{return We(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{We(i,!1),r&&Te()}}}d(we.prototype,{then:ke,_then:function(e,t){Ce(this,new Ne(null,null,e,t,be))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,n=arguments[1];return"function"==typeof t?this.then(null,function(e){return(e instanceof t?n:Ie)(e)}):this.then(null,function(e){return(e&&e.name===t?n:Ie)(e)})},finally:function(e){return this.then(function(t){return we.resolve(e()).then(function(){return t})},function(t){return we.resolve(e()).then(function(){return Ie(t)})})},timeout:function(e,t){var n=this;return e<1/0?new we(function(r,i){var a=setTimeout(function(){return i(new W.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&p(we.prototype,Symbol.toStringTag,"Dexie.Promise"),ve.env=Ke(),d(we,{all:function(){var e=F.apply(null,arguments).map(Ve);return new we(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(i,a){return we.resolve(i).then(function(n){e[a]=n,--r||t(e)},n)})})},resolve:function(e){return e instanceof we?e:e&&"function"==typeof e.then?new we(function(t,n){e.then(t,n)}):new we(se,!0,e)},reject:Ie,race:function(){var e=F.apply(null,arguments).map(Ve);return new we(function(t,n){e.map(function(e){return we.resolve(e).then(t,n)})})},PSD:{get:function(){return be},set:function(e){return be=e}},totalEchoes:{get:function(){return ze}},newPSD:Be,usePSD:Ge,scheduler:{get:function(){return de},set:function(e){de=e}},rejectionMapper:{get:function(){return ge},set:function(e){ge=e}},follow:function(e,t){return new we(function(n,r){return Be(function(t,n){var r=be;r.unhandleds=[],r.onunhandled=n,r.finalize=Q(function(){var e,r=this;e=function(){0===r.unhandleds.length?t():n(r.unhandleds[0])},_e.push(function t(){e(),_e.splice(_e.indexOf(t),1)}),++xe,de(function(){0==--xe&&De()},[])},r.finalize),e()},t,n,r)})}}),ce&&(ce.allSettled&&p(we,"allSettled",function(){var e=F.apply(null,arguments).map(Ve);return new we(function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach(function(e,i){return we.resolve(e).then(function(e){return r[i]={status:"fulfilled",value:e}},function(e){return r[i]={status:"rejected",reason:e}}).then(function(){return--n||t(r)})})})}),ce.any&&"undefined"!=typeof AggregateError&&p(we,"any",function(){var e=F.apply(null,arguments).map(Ve);return new we(function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(e,a){return we.resolve(e).then(function(e){return t(e)},function(e){i[a]=e,--r||n(new AggregateError(i))})})})}),ce.withResolvers&&(we.withResolvers=ce.withResolvers));var Re={awaits:0,echoes:0,id:0},Fe=0,Oe=[],Me=0,ze=0,Le=0;function Be(e,t,n,r){var i=be,a=Object.create(i);return a.parent=i,a.ref=0,a.global=!1,a.id=++Le,ve.env,a.env=ue?{Promise:we,PromiseProp:{value:we,configurable:!0,writable:!0},all:we.all,race:we.race,allSettled:we.allSettled,any:we.any,resolve:we.resolve,reject:we.reject}:{},t&&o(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Ge(a,e,n,r),0===a.ref&&a.finalize(),r}function Ue(){return Re.id||(Re.id=++Fe),++Re.awaits,Re.echoes+=oe,Re.id}function He(){return!!Re.awaits&&(0==--Re.awaits&&(Re.id=0),Re.echoes=Re.awaits*oe,!0)}function Ve(e){return Re.echoes&&e&&e.constructor===ce?(Ue(),e.then(function(e){return He(),e},function(e){return He(),Xe(e)})):e}function qe(){var e=Oe[Oe.length-1];Oe.pop(),We(e,!1)}function We(e,t){var n,r=be;(t?!Re.echoes||Me++&&e===be:!Me||--Me&&e===be)||queueMicrotask(t?function(e){++ze,Re.echoes&&0!=--Re.echoes||(Re.echoes=Re.awaits=Re.id=0),Oe.push(be),We(e,!0)}.bind(null,e):qe),e!==be&&(be=e,r===ve&&(ve.env=Ke()),ue&&(n=ve.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(i,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function Ke(){var e=i.Promise;return ue?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ge(e,t,n,r,i){var a=be;try{return We(e,!0),t(n,r,i)}finally{We(a,!1)}}function Ye(e,t,n,r){return"function"!=typeof e?e:function(){var i=be;n&&Ue(),We(t,!0);try{return e.apply(this,arguments)}finally{We(i,!1),r&&queueMicrotask(He)}}}function Ze(e){Promise===ce&&0===Re.echoes?0===Me?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+M).indexOf("[native code]")&&(Ue=He=Y);var Xe=we.reject,Qe=String.fromCharCode(65535),Je="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",et="String expected.",tt=[],nt="__dbnames",rt="readonly",it="readwrite";function at(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var st={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ot(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=P(t))[e],t}}function lt(){throw W.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ct(e,t){try{var n=ut(e),r=ut(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}(dt(e),dt(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a){var s=ct(e[a],t[a]);if(0!==s)return s}return n===r?0:n<r?-1:1}(e,t)}}catch(i){}return NaN}function ut(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=T(e))?"binary":e}function dt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function ht(e,t,n){var r=e.schema.yProps;return r?(t&&0<n.numFailures&&(t=t.filter(function(e,t){return!n.failures[t]})),Promise.all(r.map(function(n){return n=n.updatesTable,t?e.db.table(n).where("k").anyOf(t).delete():e.db.table(n).clear()})).then(function(){return n})):n}var pt=(ft.prototype.execute=function(e){var t=this["@@propmod"];if(void 0!==t.add){var n=t.add;if(s(n))return r(r([],s(e)?e:[],!0),n).sort();if("number"==typeof n)return(Number(e)||0)+n;if("bigint"==typeof n)try{return BigInt(e)+n}catch(a){return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(void 0!==t.remove){var i=t.remove;if(s(i))return s(e)?e.filter(function(e){return!i.includes(e)}).sort():[];if("number"==typeof i)return Number(e)-i;if("bigint"==typeof i)try{return BigInt(e)-i}catch(a){return BigInt(0)-i}throw new TypeError("Invalid subtrahend ".concat(i))}return(n=null===(n=t.replacePrefix)||void 0===n?void 0:n[0])&&"string"==typeof e&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},ft);function ft(e){this["@@propmod"]=e}function mt(e,t){for(var n=a(t),r=n.length,i=!1,s=0;s<r;++s){var o=n[s],l=t[o],c=_(e,o);l instanceof pt?(w(e,o,l.execute(c)),i=!0):c!==l&&(w(e,o,l),i=!0)}return i}var gt=(vt.prototype._trans=function(e,t,n){var r=this._tx||be.trans,i=this.name,a=ie&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function s(e,n,r){if(!r.schema[i])throw new W.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var o=$e();try{var l=r&&r.db._novip===this.db._novip?r===be.trans?r._promise(e,s,n):Be(function(){return r._promise(e,s,n)},{trans:r,transless:be.transless||be}):function e(t,n,r,i){if(t.idbdb&&(t._state.openComplete||be.letThrough||t._vip)){var a=t._createTransaction(n,r,t._dbSchema);try{a.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===V.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,n,r,i)})):Xe(s)}return a._promise(n,function(e,t){return Be(function(){return be.trans=a,i(e,t,a)})}).then(function(e){if("readwrite"===n)try{a.idbtrans.commit()}catch(t){}return"readonly"===n?e:a._completion.then(function(){return e})})}if(t._state.openComplete)return Xe(new W.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return Xe(new W.DatabaseClosed);t.open().catch(Y)}return t._state.dbReadyPromise.then(function(){return e(t,n,r,i)})}(this.db,e,[this.name],s);return a&&(l._consoleTask=a,l=l.catch(function(e){return console.trace(e),Xe(e)})),l}finally{o&&Te()}},vt.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?Xe(new W.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return n.core.get({trans:t,key:e}).then(function(e){return n.hook.reading.fire(e)})}).then(t)},vt.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(s(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=a(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return 0<=e.keyPath.indexOf(t)})){for(var n=0;n<t.length;++n)if(-1===t.indexOf(e.keyPath[n]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(n&&this.db._maxKey!==Qe){var r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map(function(t){return e[t]}))}!n&&ie&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var i=this.schema.idxByName;function o(e,t){return 0===ct(e,t)}r=(l=t.reduce(function(t,n){var r=t[0],a=t[1],l=(t=i[n],e[n]);return[r||t,r||!t?at(a,t&&t.multi?function(e){return e=_(e,n),s(e)&&e.some(function(e){return o(l,e)})}:function(e){return o(l,_(e,n))}):a]},[null,null]))[0];var l=l[1];return r?this.where(r.name).equals(e[r.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")},vt.prototype.filter=function(e){return this.toCollection().and(e)},vt.prototype.count=function(e){return this.toCollection().count(e)},vt.prototype.offset=function(e){return this.toCollection().offset(e)},vt.prototype.limit=function(e){return this.toCollection().limit(e)},vt.prototype.each=function(e){return this.toCollection().each(e)},vt.prototype.toArray=function(e){return this.toCollection().toArray(e)},vt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},vt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,s(e)?"[".concat(e.join("+"),"]"):e))},vt.prototype.reverse=function(){return this.toCollection().reverse()},vt.prototype.mapToClass=function(t){var n,r=this.db,i=this.name;function a(){return null!==n&&n.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof lt&&(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(a,n=t),Object.defineProperty(a.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),a.prototype.table=function(){return i},t=a);for(var s=new Set,o=t.prototype;o;o=l(o))Object.getOwnPropertyNames(o).forEach(function(e){return s.add(e)});function c(e){if(!e)return e;var n,r=Object.create(t.prototype);for(n in e)if(!s.has(n))try{r[n]=e[n]}catch(i){}return r}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=c,this.hook("reading",c),t},vt.prototype.defineClass=function(){return this.mapToClass(function(e){o(this,e)})},vt.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,a=r.keyPath,s=e;return a&&i&&(s=ot(a)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[s]})}).then(function(e){return e.numFailures?we.reject(e.failures[0]):e.lastResult}).then(function(t){if(a)try{w(e,a,t)}catch(n){}return t})},vt.prototype.upsert=function(e,t){var n=this,r=this.schema.primKey.keyPath;return this._trans("readwrite",function(i){return n.core.get({trans:i,key:e}).then(function(a){var s=null!=a?a:{};return mt(s,t),r&&w(s,r,e),n.core.mutate({trans:i,type:"put",values:[s],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[t]}}).then(function(e){return e.numFailures?we.reject(e.failures[0]):!!a})})})},vt.prototype.update=function(e,t){return"object"!=typeof e||s(e)?this.where(":id").equals(e).modify(t):void 0===(e=_(e,this.schema.primKey.keyPath))?Xe(new W.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},vt.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,a=r.keyPath,s=e;return a&&i&&(s=ot(a)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"put",values:[s],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?we.reject(e.failures[0]):e.lastResult}).then(function(t){if(a)try{w(e,a,t)}catch(n){}return t})},vt.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]}).then(function(n){return ht(t,[e],n)}).then(function(e){return e.numFailures?we.reject(e.failures[0]):void 0})})},vt.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:st}).then(function(t){return ht(e,null,t)})}).then(function(e){return e.numFailures?we.reject(e.failures[0]):void 0})},vt.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},vt.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=(o=r.schema.primKey).auto;if((o=o.keyPath)&&i)throw new W.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,o=o&&n?e.map(ot(o)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:o,wantResults:a}).then(function(e){var t=e.numFailures,n=e.results,i=e.lastResult;if(e=e.failures,0===t)return a?n:i;throw new H("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(s," operations failed"),e)})})},vt.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=(o=r.schema.primKey).auto;if((o=o.keyPath)&&i)throw new W.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,o=o&&n?e.map(ot(o)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:o,wantResults:a}).then(function(e){var t=e.numFailures,n=e.results,i=e.lastResult;if(e=e.failures,0===t)return a?n:i;throw new H("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(s," operations failed"),e)})})},vt.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(e){return e.key}),i=e.map(function(e){return e.changes}),a=[];return this._trans("readwrite",function(s){return n.getMany({trans:s,keys:r,cache:"clone"}).then(function(o){var l=[],c=[];e.forEach(function(e,n){var r=e.key,i=e.changes,s=o[n];if(s){for(var u=0,d=Object.keys(i);u<d.length;u++){var h=d[u],p=i[h];if(h===t.schema.primKey.keyPath){if(0!==ct(p,r))throw new W.Constraint("Cannot update primary key in bulkUpdate()")}else w(s,h,p)}a.push(n),l.push(r),c.push(s)}});var u=l.length;return n.mutate({trans:s,type:"put",keys:l,values:c,updates:{keys:r,changeSpecs:i}}).then(function(e){var n=e.numFailures,r=e.failures;if(0===n)return u;for(var i=0,s=Object.keys(r);i<s.length;i++){var o,l=s[i],c=a[Number(l)];null!=c&&(o=r[l],delete r[l],r[c]=o)}throw new H("".concat(t.name,".bulkUpdate(): ").concat(n," of ").concat(u," operations failed"),r)})})})},vt.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:e}).then(function(n){return ht(t,e,n)})}).then(function(e){var r=e.numFailures,i=e.lastResult;if(e=e.failures,0===r)return i;throw new H("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),e)})},vt);function vt(){}function bt(e){function t(t,r){if(r){for(var i=arguments.length,a=new Array(i-1);--i;)a[i-1]=arguments[i];return n[t].subscribe.apply(null,a),e}if("string"==typeof t)return n[t]}var n={};t.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return t;function o(e,r,i){if("object"!=typeof e){var l;r=r||ne;var c={subscribers:[],fire:i=i||Y,subscribe:function(e){-1===c.subscribers.indexOf(e)&&(c.subscribers.push(e),c.fire=r(c.fire,e))},unsubscribe:function(e){c.subscribers=c.subscribers.filter(function(t){return t!==e}),c.fire=c.subscribers.reduce(r,i)}};return n[e]=t[e]=c}a(l=e).forEach(function(e){var t=l[e];if(s(t))o(e,l[e][0],l[e][1]);else{if("asap"!==t)throw new W.InvalidArgument("Invalid event config");var n=o(e,Z,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach(function(e){x(function(){e.apply(null,t)})})})}})}}function yt(e,t){return f(t).from({prototype:e}),t}function xt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function _t(e,t){e.filter=at(e.filter,t)}function wt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return at(r(),t())}:t,e.justLimit=n&&!r}function kt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new W.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Nt(e,t,n){var r=kt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function jt(e,t,n,r){var i=e.replayFilter?at(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},s=function(e,n,r){var s,o;i&&!i(n,r,function(e){return n.stop(e)},function(e){return n.fail(e)})||("[object ArrayBuffer]"==(o=""+(s=n.primaryKey))&&(o=""+new Uint8Array(s)),u(a,o)||(a[o]=!0,t(e,n,r)))};return Promise.all([e.or._iterate(s,n),St(Nt(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return St(Nt(e,r,n),at(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function St(e,t,n,r){var i=Ae(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then(function(e){if(e)return e.start(function(){var n=function(){return e.continue()};t&&!t(e,function(e){return n=e},function(t){e.stop(t),n=Y},function(t){e.fail(t),n=Y})||i(e.value,e,function(e){return n=e}),n()})})}var Ct=(Et.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Xe.bind(null,n.error)):n.table._trans("readonly",e).then(t)},Et.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Xe.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Et.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=at(t.algorithm,e)},Et.prototype._iterate=function(e,t){return jt(this._ctx,e,t,this._ctx.table.core)},Et.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&o(n,e),t._ctx=n,t},Et.prototype.raw=function(){return this._ctx.valueMapper=null,this},Et.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return jt(t,e,n,t.table.core)})},Et.prototype.count=function(e){var t=this;return this._read(function(e){var n=t._ctx,r=n.table.core;if(xt(n,!0))return r.count({trans:e,query:{index:kt(n,r.schema),range:n.range}}).then(function(e){return Math.min(e,n.limit)});var i=0;return jt(n,function(){return++i,!1},e,r).then(function(){return i})}).then(e)},Et.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function a(e,t){return t?a(e[n[t]],t-1):e[r]}var s="next"===this._ctx.dir?1:-1;function o(e,t){return ct(a(e,i),a(t,i))*s}return this.toArray(function(e){return e.sort(o)}).then(t)},Et.prototype.toArray=function(e){var t=this;return this._read(function(e){var n=t._ctx;if("next"===n.dir&&xt(n,!0)&&0<n.limit){var r=n.valueMapper,i=kt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then(function(e){return e=e.result,r?e.map(r):e})}var a=[];return jt(n,function(e){return a.push(e)},e,n.table.core).then(function(){return a})},e)},Et.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,xt(t)?wt(t,function(){var t=e;return function(e,n){return 0===t||(1===t?--t:n(function(){e.advance(t),t=0}),!1)}}):wt(t,function(){var t=e;return function(){return--t<0}})),this},Et.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),wt(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),0<=t}},!0),this},Et.prototype.until=function(e,t){return _t(this._ctx,function(n,r,i){return!e(n.value)||(r(i),t)}),this},Et.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},Et.prototype.last=function(e){return this.reverse().first(e)},Et.prototype.filter=function(e){var t;return _t(this._ctx,function(t){return e(t.value)}),(t=this._ctx).isMatch=at(t.isMatch,e),this},Et.prototype.and=function(e){return this.filter(e)},Et.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Et.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Et.prototype.desc=function(){return this.reverse()},Et.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},Et.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Et.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},Et.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},Et.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&xt(t,!0)&&0<t.limit)return this._read(function(e){var n=kt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},Et.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Et.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},Et.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Et.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return _t(this._ctx,function(e){var n=e.primaryKey.toString();return e=u(t,n),t[n]=!0,!e}),this},Et.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var i,s="function"==typeof e?e:function(t){return mt(t,e)},o=n.table.core,l=(i=o.schema.primaryKey).outbound,c=i.extractKey,u=200;function d(e,t){var n=t.failures;t=t.numFailures,p+=e-t;for(var r=0,i=a(n);r<i.length;r++){var s=i[r];h.push(n[s])}}(i=t.db._options.modifyChunkSize)&&(u="object"==typeof i?i[o.name]||i["*"]||200:i);var h=[],p=0,f=[],m=e===Pt;return t.clone().primaryKeys().then(function(t){function i(h){var p=Math.min(u,t.length-h),f=t.slice(h,h+p);return(m?Promise.resolve([]):o.getMany({trans:r,keys:f,cache:"immutable"})).then(function(g){var v=[],b=[],y=l?[]:null,x=m?f:[];if(!m)for(var _=0;_<p;++_){var w=g[_],k={value:P(w),primKey:t[h+_]};!1!==s.call(k,k.value,k)&&(null==k.value?x.push(t[h+_]):l||0===ct(c(w),c(k.value))?(b.push(k.value),l&&y.push(t[h+_])):(x.push(t[h+_]),v.push(k.value)))}return Promise.resolve(0<v.length&&o.mutate({trans:r,type:"add",values:v}).then(function(e){for(var t in e.failures)x.splice(parseInt(t),1);d(v.length,e)})).then(function(){return(0<b.length||a&&"object"==typeof e)&&o.mutate({trans:r,type:"put",keys:y,values:b,criteria:a,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<h}).then(function(e){return d(b.length,e)})}).then(function(){return(0<x.length||a&&m)&&o.mutate({trans:r,type:"delete",keys:x,criteria:a,isAdditionalChunk:0<h}).then(function(e){return ht(n.table,x,e)}).then(function(e){return d(x.length,e)})}).then(function(){return t.length>h+p&&i(h+u)})})}var a=xt(n)&&n.limit===1/0&&("function"!=typeof e||m)&&{index:n.index,range:n.range};return i(0).then(function(){if(0<h.length)throw new U("Error modifying one or more objects",h,p,f);return t.length})})})},Et.prototype.delete=function(){var e=this._ctx,t=e.range;return!xt(e)||e.table.schema.yProps||!e.isPrimKey&&3!==t.type?this.modify(Pt):this._write(function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then(function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(e){var n=e.failures;if(e=e.numFailures)throw new U("Could not delete some values",Object.keys(n).map(function(e){return n[e]}),t-e);return t-e})})})},Et);function Et(){}var Pt=function(e,t){return t.value=null};function $t(e,t){return e<t?-1:e===t?0:1}function Tt(e,t){return t<e?-1:e===t?0:1}function Dt(e,t,n){return(e=e instanceof Ot?new e.Collection(e):e)._ctx.error=new(n||TypeError)(t),e}function It(e){return new e.Collection(e,function(){return Ft("")}).limit(0)}function At(e,t,n,r){var i,a,s,o,l,c,u,d=n.length;if(!n.every(function(e){return"string"==typeof e}))return Dt(e,et);function h(e){i="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},a="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},s="next"===e?$t:Tt;var t=n.map(function(e){return{lower:a(e),upper:i(e)}}).sort(function(e,t){return s(e.lower,t.lower)});o=t.map(function(e){return e.upper}),l=t.map(function(e){return e.lower}),u="next"===(c=e)?"":r}h("next"),(e=new e.Collection(e,function(){return Rt(o[0],l[d-1]+r)}))._ondirectionchange=function(e){h(e)};var p=0;return e._addAlgorithm(function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var h=a(i);if(t(h,l,p))return!0;for(var f=null,m=p;m<d;++m){var g=function(e,t,n,r,i,a){for(var s=Math.min(e.length,r.length),o=-1,l=0;l<s;++l){var c=t[l];if(c!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):0<=o?e.substr(0,o)+t[o]+n.substr(o+1):null;i(e[l],c)<0&&(o=l)}return s<r.length&&"next"===a?e+n.substr(e.length):s<e.length&&"prev"===a?e.substr(0,n.length):o<0?null:e.substr(0,o)+r[o]+n.substr(o+1)}(i,h,o[m],l[m],s,c);null===g&&null===f?p=m+1:(null===f||0<s(f,g))&&(f=g)}return n(null!==f?function(){e.continue(f+u)}:r),!1}),e}function Rt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Ft(e){return{type:1,lower:e,upper:e}}var Ot=(Object.defineProperty(Mt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Mt.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?It(this):new this.Collection(this,function(){return Rt(e,t,!n,!r)})}catch(i){return Dt(this,Je)}},Mt.prototype.equals=function(e){return null==e?Dt(this,Je):new this.Collection(this,function(){return Ft(e)})},Mt.prototype.above=function(e){return null==e?Dt(this,Je):new this.Collection(this,function(){return Rt(e,void 0,!0)})},Mt.prototype.aboveOrEqual=function(e){return null==e?Dt(this,Je):new this.Collection(this,function(){return Rt(e,void 0,!1)})},Mt.prototype.below=function(e){return null==e?Dt(this,Je):new this.Collection(this,function(){return Rt(void 0,e,!1,!0)})},Mt.prototype.belowOrEqual=function(e){return null==e?Dt(this,Je):new this.Collection(this,function(){return Rt(void 0,e)})},Mt.prototype.startsWith=function(e){return"string"!=typeof e?Dt(this,et):this.between(e,e+Qe,!0,!0)},Mt.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):At(this,function(e,t){return 0===e.indexOf(t[0])},[e],Qe)},Mt.prototype.equalsIgnoreCase=function(e){return At(this,function(e,t){return e===t[0]},[e],"")},Mt.prototype.anyOfIgnoreCase=function(){var e=F.apply(R,arguments);return 0===e.length?It(this):At(this,function(e,t){return-1!==t.indexOf(e)},e,"")},Mt.prototype.startsWithAnyOfIgnoreCase=function(){var e=F.apply(R,arguments);return 0===e.length?It(this):At(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,Qe)},Mt.prototype.anyOf=function(){var e=this,t=F.apply(R,arguments),n=this._cmp;try{t.sort(n)}catch(a){return Dt(this,Je)}if(0===t.length)return It(this);var r=new this.Collection(this,function(){return Rt(t[0],t[t.length-1])});r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm(function(e,r,a){for(var s=e.key;0<n(s,t[i]);)if(++i===t.length)return r(a),!1;return 0===n(s,t[i])||(r(function(){e.continue(t[i])}),!1)}),r},Mt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Mt.prototype.noneOf=function(){var e=F.apply(R,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(n){return Dt(this,Je)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Mt.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,a=this._descending,s=this._min,o=this._max;if(0===e.length)return It(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0}))return Dt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",W.InvalidArgument);var l,c=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers,d=i;function h(e,t){return d(e[0],t[0])}try{(l=e.reduce(function(e,t){for(var n=0,i=e.length;n<i;++n){var a=e[n];if(r(t[0],a[1])<0&&0<r(t[1],a[0])){a[0]=s(a[0],t[0]),a[1]=o(a[1],t[1]);break}}return n===i&&e.push(t),e},[])).sort(h)}catch(v){return Dt(this,Je)}var p=0,f=u?function(e){return 0<i(e,l[p][1])}:function(e){return 0<=i(e,l[p][1])},m=c?function(e){return 0<a(e,l[p][0])}:function(e){return 0<=a(e,l[p][0])},g=f;return(e=new this.Collection(this,function(){return Rt(l[0][0],l[l.length-1][1],!c,!u)}))._ondirectionchange=function(e){d="next"===e?(g=f,i):(g=m,a),l.sort(h)},e._addAlgorithm(function(e,t,r){for(var a,s=e.key;g(s);)if(++p===l.length)return t(r),!1;return!f(a=s)&&!m(a)||(0===n._cmp(s,l[p][1])||0===n._cmp(s,l[p][0])||t(function(){d===i?e.continue(l[p][0]):e.continue(l[p][1])}),!1)}),e},Mt.prototype.startsWithAnyOf=function(){var e=F.apply(R,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?It(this):this.inAnyRange(e.map(function(e){return[e,e+Qe]})):Dt(this,"startsWithAnyOf() only works with strings")},Mt);function Mt(){}function zt(e){return Ae(function(t){return Lt(t),e(t.target.error),!1})}function Lt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Bt="storagemutated",Ut="x-storagemutated-1",Ht=bt(null,Bt),Vt=(qt.prototype._lock=function(){return y(!be.global),++this._reculock,1!==this._reculock||be.global||(be.lockOwnerFor=this),this},qt.prototype._unlock=function(){if(y(!be.global),0==--this._reculock)for(be.global||(be.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Ge(e[1],e[0])}catch(t){}}return this},qt.prototype._locked=function(){return this._reculock&&be.lockOwnerFor!==this},qt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(y(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new W.DatabaseClosed(r);case"MissingAPIError":throw new W.MissingAPI(r.message,r);default:throw new W.OpenFailed(r)}if(!this.active)throw new W.TransactionInactive;return y(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ae(function(n){Lt(n),t._reject(e.error)}),e.onabort=Ae(function(n){Lt(n),t.active&&t._reject(new W.Abort(e.error)),t.active=!1,t.on("abort").fire(n)}),e.oncomplete=Ae(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Ht.storagemutated.fire(e.mutatedParts)}),this},qt.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Xe(new W.ReadOnly("Transaction is readonly"));if(!this.active)return Xe(new W.TransactionInactive);if(this._locked())return new we(function(i,a){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,a)},be])});if(n)return Be(function(){var e=new we(function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var i=new we(function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)});return i._lib=!0,i},qt.prototype._root=function(){return this.parent?this.parent._root():this},qt.prototype.waitFor=function(e){var t,n=this._root(),r=we.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function e(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=e)}());var i=n._waitingFor;return new we(function(e,t){r.then(function(t){return n._waitingQueue.push(Ae(e.bind(null,t)))},function(e){return n._waitingQueue.push(Ae(t.bind(null,e)))}).finally(function(){n._waitingFor===i&&(n._waitingFor=null)})})},qt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new W.Abort))},qt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(u(t,e))return t[e];var n=this.schema[e];if(!n)throw new W.NotFound("Table "+e+" not part of transaction");return(n=new this.db.Table(e,n,this)).core=this.db.core.table(e),t[e]=n},qt);function qt(){}function Wt(e,t,n,r,i,a,s,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+Kt(t),type:o}}function Kt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Gt(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(e){return[e.name,e]},n.reduce(function(e,t,n){return(n=r(t,n))&&(e[n[0]]=n[1]),e},{}))};var r}var Yt=function(e){try{return e.only([[]]),Yt=function(){return[[]]},[[]]}catch(t){return Yt=function(){return Qe},Qe}};function Zt(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(e){return e[t]}:function(e){return _(e,t)}:function(t){return _(t,e)};var t}function Xt(e){return[].slice.call(e)}var Qt=0;function Jt(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function en(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,i=e.lowerOpen;return e=e.upperOpen,void 0===n?void 0===r?null:t.upperBound(r,!!e):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!e)}function i(e){var t,n=e.name;return{name:n,schema:e,mutate:function(e){var t=e.trans,i=e.type,a=e.keys,s=e.values,o=e.range;return new Promise(function(e,l){e=Ae(e);var c=t.objectStore(n),u=null==c.keyPath,d="put"===i||"add"===i;if(!d&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var h,p=(a||s||{length:1}).length;if(a&&s&&a.length!==s.length)throw new Error("Given keys array must have same length as given values array.");if(0===p)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function f(e){++v,Lt(e)}var m=[],g=[],v=0;if("deleteRange"===i){if(4===o.type)return e({numFailures:v,failures:g,results:[],lastResult:void 0});3===o.type?m.push(h=c.clear()):m.push(h=c.delete(r(o)))}else{var b=(u=d?u?[s,a]:[s,null]:[a,null])[0],y=u[1];if(d)for(var x=0;x<p;++x)m.push(h=y&&void 0!==y[x]?c[i](b[x],y[x]):c[i](b[x])),h.onerror=f;else for(x=0;x<p;++x)m.push(h=c[i](b[x])),h.onerror=f}function _(t){t=t.target.result,m.forEach(function(e,t){return null!=e.error&&(g[t]=e.error)}),e({numFailures:v,failures:g,results:"delete"===i?a:m.map(function(e){return e.result}),lastResult:t})}h.onerror=function(e){f(e),_(e)},h.onsuccess=_})},getMany:function(e){var t=e.trans,r=e.keys;return new Promise(function(e,i){e=Ae(e);for(var a,s=t.objectStore(n),o=r.length,l=new Array(o),c=0,u=0,d=function(t){t=t.target,l[t._pos]=t.result,++u===c&&e(l)},h=zt(i),p=0;p<o;++p)null!=r[p]&&((a=s.get(r[p]))._pos=p,a.onsuccess=d,a.onerror=h,++c);0===c&&e(l)})},get:function(e){var t=e.trans,r=e.key;return new Promise(function(e,i){e=Ae(e);var a=t.objectStore(n).get(r);a.onsuccess=function(t){return e(t.target.result)},a.onerror=zt(i)})},query:(t=c,function(e){return new Promise(function(i,a){i=Ae(i);var s,o,l,c=e.trans,u=e.values,d=e.limit,h=e.query,p=d===1/0?void 0:d,f=h.index;if(h=h.range,c=c.objectStore(n),f=f.isPrimaryKey?c:c.index(f.name),h=r(h),0===d)return i({result:[]});t?((p=u?f.getAll(h,p):f.getAllKeys(h,p)).onsuccess=function(e){return i({result:e.target.result})},p.onerror=zt(a)):(s=0,o=!u&&"openKeyCursor"in f?f.openKeyCursor(h):f.openCursor(h),l=[],o.onsuccess=function(e){var t=o.result;return t?(l.push(u?t.value:t.primaryKey),++s===d?i({result:l}):void t.continue()):i({result:l})},o.onerror=zt(a))})}),openCursor:function(e){var t=e.trans,i=e.values,a=e.query,s=e.reverse,o=e.unique;return new Promise(function(e,l){e=Ae(e);var c=a.index,u=a.range,d=t.objectStore(n),h=(d=c.isPrimaryKey?d:d.index(c.name),c=s?o?"prevunique":"prev":o?"nextunique":"next",!i&&"openKeyCursor"in d?d.openKeyCursor(r(u),c):d.openCursor(r(u),c));h.onerror=zt(l),h.onsuccess=Ae(function(n){var r,i,a,s,o=h.result;o?(o.___id=++Qt,o.done=!1,r=o.continue.bind(o),i=(i=o.continuePrimaryKey)&&i.bind(o),a=o.advance.bind(o),s=function(){throw new Error("Cursor not stopped")},o.trans=t,o.stop=o.continue=o.continuePrimaryKey=o.advance=function(){throw new Error("Cursor not started")},o.fail=Ae(l),o.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},o.start=function(e){function t(){if(h.result)try{e()}catch(t){o.fail(t)}else o.done=!0,o.start=function(){throw new Error("Cursor behind last entry")},o.stop()}var n=new Promise(function(e,t){e=Ae(e),h.onerror=zt(t),o.fail=t,o.stop=function(t){o.stop=o.continue=o.continuePrimaryKey=o.advance=s,e(t)}});return h.onsuccess=Ae(function(e){h.onsuccess=t,t()}),o.continue=r,o.continuePrimaryKey=i,o.advance=a,t(),n},e(o)):e(null)},l)})},count:function(e){var t=e.query,i=e.trans,a=t.index,s=t.range;return new Promise(function(e,t){var o=i.objectStore(n),l=a.isPrimaryKey?o:o.index(a.name);(l=(o=r(s))?l.count(o):l.count()).onsuccess=Ae(function(t){return e(t.target.result)}),l.onerror=zt(t)})}}}n=(o=n,l=Xt((a=e).objectStoreNames),u={schema:{name:a.name,tables:l.map(function(e){return o.objectStore(e)}).map(function(e){var t=e.keyPath,n=e.autoIncrement,r=s(t),i={};return n={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Zt(t)},indexes:Xt(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,n=e.unique,r=e.multiEntry;return e=e.keyPath,r={name:t,compound:s(e),keyPath:e,unique:n,multiEntry:r,extractKey:Zt(e)},i[Jt(e)]=r}),getIndexByKeyPath:function(e){return i[Jt(e)]}},i[":id"]=n.primaryKey,null!=t&&(i[Jt(t)]=n.primaryKey),n})},hasGetAll:0<l.length&&"getAll"in o.objectStore(l[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}).schema;var a,o,l,c=u.hasGetAll,u=n.tables.map(i),d={};return u.forEach(function(e){return d[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!d[e])throw new Error("Table '".concat(e,"' not found"));return d[e]},MIN_KEY:-1/0,MAX_KEY:Yt(t),schema:n}}function tn(e,n,r,i){var a=r.IDBKeyRange;return r.indexedDB,{dbcore:(i=en(n,a,i),e.dbcore.reduce(function(e,n){return n=n.create,t(t({},e),n(e))},i))}}function nn(e,t){var n=t.db;t=tn(e._middlewares,n,e._deps,t),e.core=t.dbcore,e.tables.forEach(function(t){var n=t.name;e.core.schema.tables.some(function(e){return e.name===n})&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))})}function rn(e,t,n,r){n.forEach(function(n){var i=r[n];t.forEach(function(t){var r=function e(t,n){return m(t,n)||(t=l(t))&&e(t,n)}(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?p(t,n,{get:function(){return this.table(n)},set:function(e){h(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))})})}function an(e,t){t.forEach(function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]})}function sn(e,t){return e._cfg.version-t._cfg.version}function on(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=Gt("$meta",mn("")[0],[]),e._storeNames.push("$meta"));var s=e._createTransaction("readwrite",e._storeNames,i);s.create(n),s._completion.catch(r);var o=s._reject.bind(s),l=be.transless||be;Be(function(){return be.trans=s,be.transless=l,0!==t?(nn(e,n),c=t,((r=s).storeNames.includes("$meta")?r.table("$meta").get("version").then(function(e){return null!=e?e:c}):we.resolve(c)).then(function(t){return i=t,o=s,l=n,c=[],t=(r=e)._versions,u=r._dbSchema=pn(0,r.idbdb,l),0!==(t=t.filter(function(e){return e._cfg.version>=i})).length?(t.forEach(function(e){c.push(function(){var t=u,n=e._cfg.dbschema;fn(r,t,l),fn(r,n,l),u=r._dbSchema=n;var s=cn(t,n);s.add.forEach(function(e){un(l,e[0],e[1].primKey,e[1].indexes)}),s.change.forEach(function(e){if(e.recreate)throw new W.Upgrade("Not yet support for changing primary key");var t=l.objectStore(e.name);e.add.forEach(function(e){return hn(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),hn(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var c=e._cfg.contentUpgrade;if(c&&e._cfg.version>i){nn(r,l),o._memoizedTables={};var d=k(n);s.del.forEach(function(e){d[e]=t[e]}),an(r,[r.Transaction.prototype]),rn(r,[r.Transaction.prototype],a(d),d),o.schema=d;var h,p=O(c);return p&&Ue(),s=we.follow(function(){var e;(h=c(o))&&p&&(e=He.bind(null,null),h.then(e,e))}),h&&"function"==typeof h.then?we.resolve(h):s.then(function(){return h})}}),c.push(function(t){var n,i,a=e._cfg.dbschema;n=a,i=t,[].slice.call(i.db.objectStoreNames).forEach(function(e){return null==n[e]&&i.db.deleteObjectStore(e)}),an(r,[r.Transaction.prototype]),rn(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),o.schema=r._dbSchema}),c.push(function(t){r.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(r.idbdb.version/10)===e._cfg.version?(r.idbdb.deleteObjectStore("$meta"),delete r._dbSchema.$meta,r._storeNames=r._storeNames.filter(function(e){return"$meta"!==e})):t.objectStore("$meta").put(e._cfg.version,"version"))})}),function e(){return c.length?we.resolve(c.shift()(o.idbtrans)).then(e):we.resolve()}().then(function(){dn(u,l)})):we.resolve();var r,i,o,l,c,u}).catch(o)):(a(i).forEach(function(e){un(n,e,i[e].primKey,i[e].indexes)}),nn(e,n),void we.follow(function(){return e.on.populate.fire(s)}).catch(o));var r,c})}function ln(e,t){dn(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=pn(0,e.idbdb,t);fn(e,e._dbSchema,t);for(var r=0,i=cn(n,e._dbSchema).change;r<i.length;r++){var a=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var n=t.objectStore(e.name);e.add.forEach(function(t){ie&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),hn(n,t)})}(i[r]);if("object"==typeof a)return a.value}}function cn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],a=t[n];if(i){var s={name:n,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto)s.recreate=!0,r.change.push(s);else{var o=i.idxByName,l=a.idxByName,c=void 0;for(c in o)l[c]||s.del.push(c);for(c in l){var u=o[c],d=l[c];u?u.src!==d.src&&s.change.push(d):s.add.push(d)}(0<s.del.length||0<s.add.length||0<s.change.length)&&r.change.push(s)}}else r.add.push([n,a])}return r}function un(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){return hn(i,e)}),i}function dn(e,t){a(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(ie&&console.debug("Dexie: Creating missing table",n),un(t,n,e[n].primKey,e[n].indexes))})}function hn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function pn(e,t,n){var r={};return v(t.objectStoreNames,0).forEach(function(e){for(var t=n.objectStore(e),i=Wt(Kt(o=t.keyPath),o||"",!0,!1,!!t.autoIncrement,o&&"string"!=typeof o,!0),a=[],s=0;s<t.indexNames.length;++s){var o=(l=t.index(t.indexNames[s])).keyPath,l=Wt(l.name,o,!!l.unique,!!l.multiEntry,!1,o&&"string"!=typeof o,!1);a.push(l)}r[e]=Gt(e,i,a)}),r}function fn(e,t,n){for(var r=n.db.objectStoreNames,a=0;a<r.length;++a){var s=r[a],o=n.objectStore(s);e._hasGetAll="getAll"in o;for(var l=0;l<o.indexNames.length;++l){var c=o.indexNames[l],u=o.index(c).keyPath,d="string"==typeof u?u:"["+v(u).join("+")+"]";!t[s]||(u=t[s].idxByName[d])&&(u.name=c,delete t[s].idxByName[d],t[s].idxByName[c]=u)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function mn(e){return e.split(",").map(function(e,t){var n=null===(r=(i=e.split(":"))[1])||void 0===r?void 0:r.trim(),r=(e=i[0].trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Wt(r,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),s(i),0===t,n)})}var gn=(vn.prototype._createTableSchema=Gt,vn.prototype._parseIndexSyntax=mn,vn.prototype._parseStoresSpec=function(e,t){var n=this;a(e).forEach(function(r){if(null!==e[r]){var i=n._parseIndexSyntax(e[r]),a=i.shift();if(!a)throw new W.Schema("Invalid schema for table "+r+": "+e[r]);if(a.unique=!0,a.multi)throw new W.Schema("Primary key cannot be multiEntry*");i.forEach(function(e){if(e.auto)throw new W.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new W.Schema("Index must have a name and cannot be an empty string")}),i=n._createTableSchema(r,a,i),t[r]=i}})},vn.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?o(this._cfg.storesSource,e):e,e=t._versions;var n={},r={};return e.forEach(function(e){o(n,e._cfg.storesSource),r=e._cfg.dbschema={},e._parseStoresSpec(n,r)}),t._dbSchema=r,an(t,[t._allTables,t,t.Transaction.prototype]),rn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],a(r),r),t._storeNames=a(r),this},vn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=re(this._cfg.contentUpgrade||Y,e),this},vn);function vn(){}function bn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new rr(nt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function yn(e){return e&&"function"==typeof e.databases}function xn(e){return Be(function(){return be.letThrough=!0,e()})}function _n(e){return!("from"in e)}var wn=function(e,t){if(!this){var n=new wn;return e&&"d"in e&&o(n,e),n}o(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function kn(e,t,n){var r=ct(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(_n(e))return o(e,{from:t,to:n,d:1});var i=e.l;if(r=e.r,ct(n,e.from)<0)return i?kn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Cn(e);if(0<ct(t,e.to))return r?kn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Cn(e);ct(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<ct(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,i&&!e.l&&Nn(e,i),r&&n&&Nn(e,r)}}function Nn(e,t){_n(t)||function e(t,n){var r=n.from,i=n.to,a=n.l;n=n.r,kn(t,r,i),a&&e(t,a),n&&e(t,n)}(e,t)}function jn(e,t){var n=Sn(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=Sn(e),s=a.next(i.from),o=s.value;!r.done&&!s.done;){if(ct(o.from,i.to)<=0&&0<=ct(o.to,i.from))return!0;ct(i.from,o.from)<0?i=(r=n.next(o.from)).value:o=(s=a.next(i.from)).value}return!1}function Sn(e){var t=_n(e)?null:{s:0,n:e};return{next:function(e){for(var n=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&ct(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||ct(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Cn(e){var n,r,i=((null===(n=e.r)||void 0===n?void 0:n.d)||0)-((null===(r=e.l)||void 0===r?void 0:r.d)||0),a=1<i?"r":i<-1?"l":"";a&&(n="r"==a?"l":"r",r=t({},e),i=e[a],e.from=i.from,e.to=i.to,e[a]=i[a],r[a]=i[n],(e[n]=r).d=En(r)),e.d=En(e)}function En(e){var t=e.r;return e=e.l,(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function Pn(e,t){return a(t).forEach(function(n){e[n]?Nn(e[n],t[n]):e[n]=function e(t){var n,r,i={};for(n in t)u(t,n)&&(r=t[n],i[n]=!r||"object"!=typeof r||C.has(r.constructor)?r:e(r));return i}(t[n])}),e}function $n(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&jn(t[n],e[n])})}d(wn.prototype,((M={add:function(e){return Nn(this,e),this},addKey:function(e){return kn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return kn(t,e,e)}),this},hasKey:function(e){var t=Sn(this).next(e).value;return t&&ct(t.from,e)<=0&&0<=ct(t.to,e)}})[D]=function(){return Sn(this)},M));var Tn={},Dn={},In=!1;function An(e){Pn(Dn,e),In||(In=!0,setTimeout(function(){In=!1,Rn(Dn,!(Dn={}))},0))}function Rn(e,t){void 0===t&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(Tn);r<i.length;r++)Fn(s=i[r],e,n,t);else for(var a in e){var s,o=/^idb\:\/\/(.*)\/(.*)\//.exec(a);o&&(a=o[1],o=o[2],(s=Tn["idb://".concat(a,"/").concat(o)])&&Fn(s,e,n,t))}n.forEach(function(e){return e()})}function Fn(e,t,n,r){for(var i=[],a=0,s=Object.entries(e.queries.query);a<s.length;a++){for(var o=s[a],l=o[0],c=[],u=0,d=o[1];u<d.length;u++){var h=d[u];$n(t,h.obsSet)?h.subscribers.forEach(function(e){return n.add(e)}):r&&c.push(h)}r&&i.push([l,c])}if(r)for(var p=0,f=i;p<f.length;p++){var m=f[p];l=m[0],c=m[1],e.queries.query[l]=c}}function On(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Xe(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(10*e.verno),s=!1;function o(){if(t.openCanceller!==r)throw new W.DatabaseClosed("db.open() was cancelled")}function l(){return new we(function(r,c){if(o(),!n)throw new W.MissingAPI;var u=e.name,p=t.autoSchema||!i?n.open(u):n.open(u,i);if(!p)throw new W.MissingAPI;p.onerror=zt(c),p.onblocked=Ae(e._fireOnBlocked),p.onupgradeneeded=Ae(function(r){var i;d=p.transaction,t.autoSchema&&!e._options.allowEmptyDB?(p.onerror=Lt,d.abort(),p.result.close(),(i=n.deleteDatabase(u)).onsuccess=i.onerror=Ae(function(){c(new W.NoSuchDatabase("Database ".concat(u," doesnt exist")))})):(d.onerror=zt(c),r=r.oldVersion>Math.pow(2,62)?0:r.oldVersion,h=r<1,e.idbdb=p.result,s&&ln(e,d),on(e,r/10,d,c))},c),p.onsuccess=Ae(function(){d=null;var n,o,c,f,m,g=e.idbdb=p.result,b=v(g.objectStoreNames);if(0<b.length)try{var y=g.transaction(1===(f=b).length?f[0]:f,"readonly");if(t.autoSchema)o=g,c=y,(n=e).verno=o.version/10,c=n._dbSchema=pn(0,o,c),n._storeNames=v(o.objectStoreNames,0),rn(n,[n._allTables],a(c),c);else if(fn(e,e._dbSchema,y),((m=cn(pn(0,(m=e).idbdb,y),m._dbSchema)).add.length||m.change.some(function(e){return e.add.length||e.change.length}))&&!s)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),g.close(),i=g.version+1,s=!0,r(l());nn(e,y)}catch(x){}tt.push(e),g.onversionchange=Ae(function(n){t.vcFired=!0,e.on("versionchange").fire(n)}),g.onclose=Ae(function(){e.close({disableAutoOpen:!1})}),h&&(m=e._deps,y=u,g=m.indexedDB,m=m.IDBKeyRange,yn(g)||y===nt||bn(g,m).put({name:y}).catch(Y)),r()},c)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),l();break;case"VersionError":if(0<i)return i=0,l()}return we.reject(e)})}var c,u=t.dbReadyResolve,d=null,h=!1;return we.race([r,("undefined"==typeof navigator?we.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){function t(){return indexedDB.databases().finally(e)}c=setInterval(t,100),t()}).finally(function(){return clearInterval(c)}):Promise.resolve()).then(l)]).then(function(){return o(),t.onReadyBeingFired=[],we.resolve(xn(function(){return e.on.ready.fire(e.vip)})).then(function n(){if(0<t.onReadyBeingFired.length){var r=t.onReadyBeingFired.reduce(re,Y);return t.onReadyBeingFired=[],we.resolve(xn(function(){return r(e.vip)})).then(n)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(n){t.dbOpenError=n;try{d&&d.abort()}catch(i){}return r===t.openCanceller&&e._close(),Xe(n)}).finally(function(){t.openComplete=!0,u()}).then(function(){var t;return h&&(t={},e.tables.forEach(function(n){n.schema.indexes.forEach(function(r){r.name&&(t["idb://".concat(e.name,"/").concat(n.name,"/").concat(r.name)]=new wn(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(n.name,"/")]=t["idb://".concat(e.name,"/").concat(n.name,"/:dels")]=new wn(-1/0,[[[]]])}),Ht(Bt).fire(t),Rn(t,!0)),e})}function Mn(e){function t(t){return e.next(t)}var n=i(t),r=i(function(t){return e.throw(t)});function i(e){return function(t){var i=e(t);return t=i.value,i.done?t:t&&"function"==typeof t.then?t.then(n,r):s(t)?Promise.all(t).then(n,r):n(t)}}return i(t)()}function zn(e,t,n){for(var r=s(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Ln={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(n){var r=e.table(n),i=r.schema,a={},s=[];function o(e,n,r){var i=Jt(e),l=a[i]=a[i]||[],c=null==e?0:"string"==typeof e?1:e.length,u=0<n;return u=t(t({},r),{name:u?"".concat(i,"(virtual-from:").concat(r.name,")"):r.name,lowLevelIndex:r,isVirtual:u,keyTail:n,keyLength:c,extractKey:Zt(e),unique:!u&&r.unique}),l.push(u),u.isPrimaryKey||s.push(u),1<c&&o(2===c?e[0]:e.slice(0,c-1),n+1,r),l.sort(function(e,t){return e.keyTail-t.keyTail}),u}n=o(i.primaryKey.keyPath,0,i.primaryKey),a[":id"]=[n];for(var l=0,c=i.indexes;l<c.length;l++){var u=c[l];o(u.keyPath,0,u)}function d(n){var r,i=n.query.index;return i.isVirtual?t(t({},n),{query:{index:i.lowLevelIndex,range:(r=n.query.range,i=i.keyTail,{type:1===r.type?2:r.type,lower:zn(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:zn(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}):n}return t(t({},r),{schema:t(t({},i),{primaryKey:n,indexes:s,getIndexByKeyPath:function(e){return(e=a[Jt(e)])&&e[0]}}),count:function(e){return r.count(d(e))},query:function(e){return r.query(d(e))},openCursor:function(t){var n=t.query.index,i=n.keyTail,a=n.isVirtual,s=n.keyLength;return a?r.openCursor(d(t)).then(function(e){return e&&o(e)}):r.openCursor(t);function o(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(zn(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(n.key.slice(0,s).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(zn(t,e.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===s?e[0]:e.slice(0,s)}},value:{get:function(){return n.value}}})}}})}})}};function Bn(e,t,n,r){return n=n||{},r=r||"",a(e).forEach(function(i){var a,s,o;u(t,i)?(a=e[i],s=t[i],"object"==typeof a&&"object"==typeof s&&a&&s?(o=T(a))!==T(s)?n[r+i]=t[i]:"Object"===o?Bn(a,s,n,r+i+"."):a!==s&&(n[r+i]=t[i]):a!==s&&(n[r+i]=t[i])):n[r+i]=void 0}),a(t).forEach(function(i){u(e,i)||(n[r+i]=t[i])}),n}function Un(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var Hn={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(n){var i=e.table(n),a=i.schema.primaryKey;return t(t({},i),{mutate:function(e){var s=be.trans,o=s.table(n).hook,l=o.deleting,c=o.creating,d=o.updating;switch(e.type){case"add":if(c.fire===Y)break;return s._promise("readwrite",function(){return h(e)},!0);case"put":if(c.fire===Y&&d.fire===Y)break;return s._promise("readwrite",function(){return h(e)},!0);case"delete":if(l.fire===Y)break;return s._promise("readwrite",function(){return h(e)},!0);case"deleteRange":if(l.fire===Y)break;return s._promise("readwrite",function(){return function e(n,r,s){return i.query({trans:n,values:!1,query:{index:a,range:r},limit:s}).then(function(i){var a=i.result;return h({type:"delete",keys:a,trans:n}).then(function(i){return 0<i.numFailures?Promise.reject(i.failures[0]):a.length<s?{failures:[],numFailures:0,lastResult:void 0}:e(n,t(t({},r),{lower:a[a.length-1],lowerOpen:!0}),s)})})}(e.trans,e.range,1e4)},!0)}return i.mutate(e);function h(e){var n,s,o,h=be.trans,p=e.keys||Un(a,e);if(!p)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:p}):t({},e)).type&&(e.values=r([],e.values)),e.keys&&(e.keys=r([],e.keys)),n=i,o=p,("add"===(s=e).type?Promise.resolve([]):n.getMany({trans:s.trans,keys:o,cache:"immutable"})).then(function(t){var n=p.map(function(n,r){var i,s,o,p=t[r],f={onerror:null,onsuccess:null};return"delete"===e.type?l.fire.call(f,n,p,h):"add"===e.type||void 0===p?(i=c.fire.call(f,n,e.values[r],h),null==n&&null!=i&&(e.keys[r]=n=i,a.outbound||w(e.values[r],a.keyPath,n))):(i=Bn(p,e.values[r]),(s=d.fire.call(f,i,n,p,h))&&(o=e.values[r],Object.keys(s).forEach(function(e){u(o,e)?o[e]=s[e]:w(o,e,s[e])}))),f});return i.mutate(e).then(function(r){for(var i=r.failures,a=r.results,s=r.numFailures,o=(r=r.lastResult,0);o<p.length;++o){var l=(a||p)[o],c=n[o];null==l?c.onerror&&c.onerror(i[o]):c.onsuccess&&c.onsuccess("put"===e.type&&t[o]?e.values[o]:l)}return{failures:i,results:a,numFailures:s,lastResult:r}}).catch(function(e){return n.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}}})}})}};function Vn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)0===ct(t.keys[i],e[a])&&(r.push(n?P(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch(s){return null}}var qn={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var r=e.table(n);return t(t({},r),{getMany:function(e){if(!e.cache)return r.getMany(e);var t=Vn(e.keys,e.trans._cache,"clone"===e.cache);return t?we.resolve(t):r.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?P(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),r.mutate(e)}})}}}};function Wn(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Kn(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Gn={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,r=new wn(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,n,r){if(be.subscr&&"readonly"!==n)throw new W.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(be.querier));return e.transaction(t,n,r)},table:function(i){var o=e.table(i),l=o.schema,c=l.primaryKey,u=l.indexes,d=c.extractKey,h=c.outbound,p=c.autoIncrement&&u.filter(function(e){return e.compound&&e.keyPath.includes(c.keyPath)}),f=t(t({},o),{mutate:function(t){function a(e){return e="idb://".concat(n,"/").concat(i,"/").concat(e),m[e]||(m[e]=new wn)}var u,d,h,f=t.trans,m=t.mutatedParts||(t.mutatedParts={}),g=a(""),v=a(":dels"),b=t.type,y=(_="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[Un(c,t).filter(function(e){return e}),t.values]:[])[0],x=_[1],_=t.trans._cache;return s(y)?(g.addKeys(y),(_="delete"===b||y.length===x.length?Vn(y,_):null)||v.addKeys(y),(_||x)&&(u=a,d=_,h=x,l.indexes.forEach(function(e){var t=u(e.name||"");function n(t){return null!=t?e.extractKey(t):null}function r(n){return e.multiEntry&&s(n)?n.forEach(function(e){return t.addKey(e)}):t.addKey(n)}(d||h).forEach(function(e,t){var i=d&&n(d[t]);0!==ct(i,t=h&&n(h[t]))&&(null!=i&&r(i),null!=t&&r(t))})}))):y?(x={from:null!==(x=y.lower)&&void 0!==x?x:e.MIN_KEY,to:null!==(x=y.upper)&&void 0!==x?x:e.MAX_KEY},v.add(x),g.add(x)):(g.add(r),v.add(r),l.indexes.forEach(function(e){return a(e.name).add(r)})),o.mutate(t).then(function(e){return!y||"add"!==t.type&&"put"!==t.type||(g.addKeys(e.results),p&&p.forEach(function(n){for(var r=t.values.map(function(e){return n.extractKey(e)}),i=n.keyPath.findIndex(function(e){return e===c.keyPath}),s=0,o=e.results.length;s<o;++s)r[s][i]=e.results[s];a(n.name).addKeys(r)})),f.mutatedParts=Pn(f.mutatedParts||{},m),e})}}),m={get:function(e){return[c,new wn(e.key)]},getMany:function(e){return[c,(new wn).addKeys(e.keys)]},count:u=function(t){t=(n=t.query).index;var n=n.range;return[t,new wn(null!==(t=n.lower)&&void 0!==t?t:e.MIN_KEY,null!==(n=n.upper)&&void 0!==n?n:e.MAX_KEY)]},query:u,openCursor:u};return a(m).forEach(function(e){f[e]=function(a){var s=!!(f=be.subscr),l=Wn(be,o)&&Kn(e,a)?a.obsSet={}:f;if(s){var c=function(e){return e="idb://".concat(n,"/").concat(i,"/").concat(e),l[e]||(l[e]=new wn)},u=c(""),p=c(":dels"),f=(s=(f=m[e](a))[0],f[1]);if(("query"===e&&s.isPrimaryKey&&!a.values?p:c(s.name||"")).add(f),!s.isPrimaryKey){if("count"!==e){var g="query"===e&&h&&a.values&&o.query(t(t({},a),{values:!1}));return o[e].apply(this,arguments).then(function(t){if("query"===e){if(h&&a.values)return g.then(function(e){return e=e.result,u.addKeys(e),t});var n=a.values?t.result.map(d):t.result;(a.values?u:p).addKeys(n)}else if("openCursor"===e){var r=t,i=a.values;return r&&Object.create(r,{key:{get:function(){return p.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return p.addKey(e),e}},value:{get:function(){return i&&u.addKey(r.primaryKey),r.value}}})}return t})}p.add(r)}}return o[e].apply(this,arguments)}}),f}})}};function Yn(e,n,r){if(0===r.numFailures)return n;if("deleteRange"===n.type)return null;var i=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return r.numFailures===i?null:(n=t({},n),s(n.keys)&&(n.keys=n.keys.filter(function(e,t){return!(t in r.failures)})),"values"in n&&s(n.values)&&(n.values=n.values.filter(function(e,t){return!(t in r.failures)})),n)}function Zn(e,t){return n=e,(void 0===(r=t).lower||(r.lowerOpen?0<ct(n,r.lower):0<=ct(n,r.lower)))&&(void 0===t.upper||(t.upperOpen?ct(e,t.upper)<0:ct(e,t.upper)<=0));var n,r}function Xn(e,t,n,r,i,a){if(!n||0===n.length)return e;var o=t.query.index,l=o.multiEntry,c=t.query.range,u=r.schema.primaryKey.extractKey,d=o.extractKey,h=(o.lowLevelIndex||o).extractKey;return(n=n.reduce(function(e,n){var r=e,i=[];if("add"===n.type||"put"===n.type)for(var a=new wn,o=n.values.length-1;0<=o;--o){var h,p=n.values[o],f=u(p);a.hasKey(f)||(h=d(p),(l&&s(h)?h.some(function(e){return Zn(e,c)}):Zn(h,c))&&(a.addKey(f),i.push(p)))}switch(n.type){case"add":var m=(new wn).addKeys(t.values?e.map(function(e){return u(e)}):e);r=e.concat(t.values?i.filter(function(e){return e=u(e),!m.hasKey(e)&&(m.addKey(e),!0)}):i.map(function(e){return u(e)}).filter(function(e){return!m.hasKey(e)&&(m.addKey(e),!0)}));break;case"put":var g=(new wn).addKeys(n.values.map(function(e){return u(e)}));r=e.filter(function(e){return!g.hasKey(t.values?u(e):e)}).concat(t.values?i:i.map(function(e){return u(e)}));break;case"delete":var v=(new wn).addKeys(n.keys);r=e.filter(function(e){return!v.hasKey(t.values?u(e):e)});break;case"deleteRange":var b=n.range;r=e.filter(function(e){return!Zn(u(e),b)})}return r},e))===e?e:(n.sort(function(e,t){return ct(h(e),h(t))||ct(u(e),u(t))}),t.limit&&t.limit<1/0&&(n.length>t.limit?n.length=t.limit:e.length===t.limit&&n.length<t.limit&&(i.dirty=!0)),a?Object.freeze(n):n)}function Qn(e,t){return 0===ct(e.lower,t.lower)&&0===ct(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Jn(e,t){return function(e,t,n,r){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=ct(e,t))){if(n&&r)return 0;if(n)return 1;if(r)return-1}return t}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(e,t,n,r){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;if(0===(t=ct(e,t))){if(n&&r)return 0;if(n)return-1;if(r)return 1}return t}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function er(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var r,i;e.subscribers.delete(n),0===e.subscribers.size&&(r=e,i=t,setTimeout(function(){0===r.subscribers.size&&A(i,r)},3e3))})}var tr={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name;return t(t({},e),{transaction:function(t,r,i){var a,s,o=e.transaction(t,r,i);return"readwrite"===r&&(s=(a=new AbortController).signal,i=function(i){return function(){if(a.abort(),"readwrite"===r){for(var s=new Set,l=0,c=t;l<c.length;l++){var u=c[l],d=Tn["idb://".concat(n,"/").concat(u)];if(d){var h=e.table(u),p=d.optimisticOps.filter(function(e){return e.trans===o});if(o._explicit&&i&&o.mutatedParts)for(var f=0,m=Object.values(d.queries.query);f<m.length;f++)for(var g=0,v=(x=m[f]).slice();g<v.length;g++)$n((_=v[g]).obsSet,o.mutatedParts)&&(A(x,_),_.subscribers.forEach(function(e){return s.add(e)}));else if(0<p.length){d.optimisticOps=d.optimisticOps.filter(function(e){return e.trans!==o});for(var b=0,y=Object.values(d.queries.query);b<y.length;b++)for(var x,_,w,k=0,N=(x=y[b]).slice();k<N.length;k++)null!=(_=N[k]).res&&o.mutatedParts&&(i&&!_.dirty?(w=Object.isFrozen(_.res),w=Xn(_.res,_.req,p,h,_,w),_.dirty?(A(x,_),_.subscribers.forEach(function(e){return s.add(e)})):w!==_.res&&(_.res=w,_.promise=we.resolve({result:w}))):(_.dirty&&A(x,_),_.subscribers.forEach(function(e){return s.add(e)})))}}}s.forEach(function(e){return e()})}}},o.addEventListener("abort",i(!1),{signal:s}),o.addEventListener("error",i(!1),{signal:s}),o.addEventListener("complete",i(!0),{signal:s})),o},table:function(r){var i=e.table(r),a=i.schema.primaryKey;return t(t({},i),{mutate:function(e){var s=be.trans;if(a.outbound||"disabled"===s.db._options.cache||s.explicit||"readwrite"!==s.idbtrans.mode)return i.mutate(e);var o=Tn["idb://".concat(n,"/").concat(r)];return o?(s=i.mutate(e),"add"!==e.type&&"put"!==e.type||!(50<=e.values.length||Un(a,e).some(function(e){return null==e}))?(o.optimisticOps.push(e),e.mutatedParts&&An(e.mutatedParts),s.then(function(t){0<t.numFailures&&(A(o.optimisticOps,e),(t=Yn(0,e,t))&&o.optimisticOps.push(t),e.mutatedParts&&An(e.mutatedParts))}),s.catch(function(){A(o.optimisticOps,e),e.mutatedParts&&An(e.mutatedParts)})):s.then(function(n){var r=Yn(0,t(t({},e),{values:e.values.map(function(e,r){var i;return n.failures[r]||w(e=null!==(i=a.keyPath)&&void 0!==i&&i.includes(".")?P(e):t({},e),a.keyPath,n.results[r]),e})}),n);o.optimisticOps.push(r),queueMicrotask(function(){return e.mutatedParts&&An(e.mutatedParts)})}),s):i.mutate(e)},query:function(e){if(!Wn(be,i)||!Kn("query",e))return i.query(e);var t="immutable"===(null===(o=be.trans)||void 0===o?void 0:o.db._options.cache),a=(c=be).requery,s=c.signal,o=function(e,t,n,r){var i=Tn["idb://".concat(e,"/").concat(t)];if(!i)return[];if(!(t=i.queries[n]))return[null,!1,i,null];var a=t[(r.query?r.query.index.name:null)||""];if(!a)return[null,!1,i,null];switch(n){case"query":var s=a.find(function(e){return e.req.limit===r.limit&&e.req.values===r.values&&Qn(e.req.query.range,r.query.range)});return s?[s,!0,i,a]:[a.find(function(e){return("limit"in e.req?e.req.limit:1/0)>=r.limit&&(!r.values||e.req.values)&&Jn(e.req.query.range,r.query.range)}),!1,i,a];case"count":return[s=a.find(function(e){return Qn(e.req.query.range,r.query.range)}),!!s,i,a]}}(n,r,"query",e),l=o[0],c=o[1],u=o[2],d=o[3];return l&&c?l.obsSet=e.obsSet:(c=i.query(e).then(function(e){var n=e.result;if(l&&(l.res=n),t){for(var r=0,i=n.length;r<i;++r)Object.freeze(n[r]);Object.freeze(n)}else e.result=P(n);return e}).catch(function(e){return d&&l&&A(d,l),Promise.reject(e)}),l={obsSet:e.obsSet,promise:c,subscribers:new Set,type:"query",req:e,dirty:!1},d?d.push(l):(d=[l],(u=u||(Tn["idb://".concat(n,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=d)),er(l,d,a,s),l.promise.then(function(n){return{result:Xn(n.result,e,null==u?void 0:u.optimisticOps,i,l,t)}})}})}})}};function nr(e,t){return new Proxy(e,{get:function(e,n,r){return"db"===n?t:Reflect.get(e,n,r)}})}var rr=(ir.prototype.version=function(e){if(isNaN(e)||e<.1)throw new W.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new W.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(t){return t._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(sn),n.stores({}),this._state.autoSchema=!1,n)},ir.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||be.letThrough||this._vip)?e():new we(function(e,n){if(t._state.openComplete)return n(new W.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void n(new W.DatabaseClosed);t.open().catch(Y)}t._state.dbReadyPromise.then(e,n)}).then(e)},ir.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:n,level:null==r?10:r,name:i}),e.sort(function(e,t){return e.level-t.level}),this},ir.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return r?e.create!==r:!!n&&e.name!==n})),this},ir.prototype.open=function(){var e=this;return Ge(ve,function(){return On(e)})},ir.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=tt.indexOf(this);if(0<=t&&tt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(n){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new we(function(t){e.dbReadyResolve=t}),e.openCanceller=new we(function(t,n){e.cancelOpen=n}))},ir.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen;e=this._state,t?(e.isBeingOpened&&e.cancelOpen(new W.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new W.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},ir.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var n=0<arguments.length&&"object"!=typeof arguments[0],r=this._state;return new we(function(i,a){function s(){t.close(e);var n=t._deps.indexedDB.deleteDatabase(t.name);n.onsuccess=Ae(function(){var e,n,r;e=t._deps,n=t.name,r=e.indexedDB,e=e.IDBKeyRange,yn(r)||n===nt||bn(r,e).delete(n).catch(Y),i()}),n.onerror=zt(a),n.onblocked=t._fireOnBlocked}if(n)throw new W.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(s):s()})},ir.prototype.backendDB=function(){return this.idbdb},ir.prototype.isOpen=function(){return null!==this.idbdb},ir.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},ir.prototype.hasFailed=function(){return null!==this._state.dbOpenError},ir.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ir.prototype,"tables",{get:function(){var e=this;return a(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),ir.prototype.transaction=function(){var e=function(e,t,n){var r=arguments.length;if(r<2)throw new W.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,j(i),n]}.apply(this,arguments);return this._transaction.apply(this,e)},ir.prototype._transaction=function(e,t,n){var r=this,i=be.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var a,s,o=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(s=t.map(function(e){if("string"!=typeof(e=e instanceof r.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==e||e===rt)a=rt;else{if("rw"!=e&&e!=it)throw new W.InvalidArgument("Invalid transaction mode: "+e);a=it}if(i){if(i.mode===rt&&a===it){if(!o)throw new W.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&s.forEach(function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!o)throw new W.SubTransaction("Table "+e+" not included in parent transaction.");i=null}}),o&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,function(e,t){t(c)}):Xe(c)}var l=function e(t,n,r,i,a){return we.resolve().then(function(){var s=be.transless||be,o=t._createTransaction(n,r,t._dbSchema,i);if(o.explicit=!0,s={trans:o,transless:s},i)o.idbtrans=i.idbtrans;else try{o.create(),o.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(u){return u.name===V.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,n,r,null,a)})):Xe(u)}var l,c=O(a);return c&&Ue(),s=we.follow(function(){var e;(l=a.call(o,o))&&(c?(e=He.bind(null,null),l.then(e,e)):"function"==typeof l.next&&"function"==typeof l.throw&&(l=Mn(l)))},s),(l&&"function"==typeof l.then?we.resolve(l).then(function(e){return o.active?e:Xe(new W.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):s.then(function(){return l})).then(function(e){return i&&o._resolve(),o._completion.then(function(){return e})}).catch(function(e){return o._reject(e),Xe(e)})})}.bind(null,this,a,s,i,n);return i?i._promise(a,l,"lock"):be.trans?Ge(be.transless,function(){return r._whenReady(l)}):this._whenReady(l)},ir.prototype.table=function(e){if(!u(this._allTables,e))throw new W.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},ir);function ir(e,n){var r=this;this._middlewares={},this.verno=0;var i=ir.dependencies;this._options=n=t({addons:ir.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},i=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a,s,o,l,c,u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Y,dbReadyPromise:null,cancelOpen:Y,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};u.dbReadyPromise=new we(function(e){u.dbReadyResolve=e}),u.openCanceller=new we(function(e,t){u.cancelOpen=t}),this._state=u,this.name=e,this.on=bt(this,"populate","blocked","versionchange","close",{ready:[re,Y]}),this.once=function(e,t){var n=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];r.on(e).unsubscribe(n),t.apply(r,i)};return r.on(e,n)},this.on.ready.subscribe=b(this.on.ready.subscribe,function(e){return function(t,n){ir.vip(function(){var i,a=r._state;a.openComplete?(a.dbOpenError||we.resolve().then(t),n&&e(t)):a.onReadyBeingFired?(a.onReadyBeingFired.push(t),n&&e(t)):(e(t),i=r,n||e(function e(){i.on.ready.unsubscribe(t),i.on.ready.unsubscribe(e)}))})}}),this.Collection=(a=this,yt(Ct.prototype,function(e,t){this.db=a;var n=st,r=null;if(t)try{n=t()}catch(s){r=s}var i=e._ctx;e=(t=i.table).hook.reading.fire,this._ctx={table:t,index:i.index,isPrimKey:!i.index||t.schema.primKey.keyPath&&i.index===t.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:e!==Z?e:null}})),this.Table=(s=this,yt(gt.prototype,function(e,t,n){this.db=s,this._tx=n,this.name=e,this.schema=t,this.hook=s._allTables[e]?s._allTables[e].hook:bt(null,{creating:[J,Y],reading:[X,Z],updating:[te,Y],deleting:[ee,Y]})})),this.Transaction=(o=this,yt(Vt.prototype,function(e,t,n,r,i){var a=this;"readonly"!==e&&t.forEach(function(e){(e=null===(e=n[e])||void 0===e?void 0:e.yProps)&&(t=t.concat(e.map(function(e){return e.updatesTable})))}),this.db=o,this.mode=e,this.storeNames=t,this.schema=n,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=bt(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new we(function(e,t){a._resolve=e,a._reject=t}),this._completion.then(function(){a.active=!1,a.on.complete.fire()},function(e){var t=a.active;return a.active=!1,a.on.error.fire(e),a.parent?a.parent._reject(e):t&&a.idbtrans&&a.idbtrans.abort(),Xe(e)})})),this.Version=(l=this,yt(gn.prototype,function(e){this.db=l,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(c=this,yt(Ot.prototype,function(e,t,n){if(this.db=c,this._ctx={table:e,index:":id"===t?null:t,or:n},this._cmp=this._ascending=ct,this._descending=function(e,t){return ct(t,e)},this._max=function(e,t){return 0<ct(e,t)?e:t},this._min=function(e,t){return ct(e,t)<0?e:t},this._IDBKeyRange=c._deps.IDBKeyRange,!this._IDBKeyRange)throw new W.MissingAPI})),this.on("versionchange",function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}),this._maxKey=Yt(n.IDBKeyRange),this._createTransaction=function(e,t,n,i){return new r.Transaction(e,t,n,r._options.chromeTransactionDurability,i)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),tt.filter(function(e){return e.name===r.name&&e!==r&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(qn),this.use(tr),this.use(Gn),this.use(Ln),this.use(Hn);var d=new Proxy(this,{get:function(e,t,n){if("_vip"===t)return!0;if("table"===t)return function(e){return nr(r.table(e),d)};var i=Reflect.get(e,t,n);return i instanceof gt?nr(i,d):"tables"===t?i.map(function(e){return nr(e,d)}):"_createTransaction"===t?function(){return nr(i.apply(this,arguments),d)}:i}});this.vip=d,i.forEach(function(e){return e(r)})}M="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var ar,sr=(or.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},or.prototype[M]=function(){return this},or);function or(e){this._subscribe=e}try{ar={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(fr){ar={indexedDB:null,IDBKeyRange:null}}function lr(e){var t,n=!1,r=new sr(function(r){var i,a=O(e),s=!1,o={},l={},c={get closed(){return s},unsubscribe:function(){s||(s=!0,i&&i.abort(),d&&Ht.storagemutated.unsubscribe(p))}};r.start&&r.start(c);var d=!1,h=function(){return Ze(f)},p=function(e){Pn(o,e),$n(l,o)&&h()},f=function(){var c,f,m;!s&&ar.indexedDB&&(o={},c={},i&&i.abort(),i=new AbortController,m=function(t){var n=$e();try{a&&Ue();var r=Be(e,t);return r=a?r.finally(He):r}finally{n&&Te()}}(f={subscr:c,signal:i.signal,requery:h,querier:e,trans:null}),Promise.resolve(m).then(function(e){n=!0,t=e,s||f.signal.aborted||(o={},function(e){for(var t in e)if(u(e,t))return;return 1}(l=c)||d||(Ht(Bt,p),d=!0),Ze(function(){return!s&&r.next&&r.next(e)}))},function(e){n=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||s||Ze(function(){s||r.error&&r.error(e)})}))};return setTimeout(h,0),c});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var cr=rr;function ur(e){var t=hr;try{hr=!0,Ht.storagemutated.fire(e),Rn(e,!0)}finally{hr=t}}d(cr,t(t({},G),{delete:function(e){return new cr(e,{addons:[]}).delete()},exists:function(e){return new cr(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return n=(t=cr.dependencies).indexedDB,t=t.IDBKeyRange,(yn(n)?Promise.resolve(n.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==nt})}):bn(n,t).toCollection().primaryKeys()).then(e)}catch(r){return Xe(new W.MissingAPI)}var t,n},defineClass:function(){return function(e){o(this,e)}},ignoreTransaction:function(e){return be.trans?Ge(be.transless,e):e()},vip:xn,async:function(e){return function(){try{var t=Mn(e.apply(this,arguments));return t&&"function"==typeof t.then?t:we.resolve(t)}catch(n){return Xe(n)}}},spawn:function(e,t,n){try{var r=Mn(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:we.resolve(r)}catch(i){return Xe(i)}},currentTransaction:{get:function(){return be.trans||null}},waitFor:function(e,t){return t=we.resolve("function"==typeof e?cr.ignoreTransaction(e):e).timeout(t||6e4),be.trans?be.trans.waitFor(t):t},Promise:we,debug:{get:function(){return ie},set:function(e){ae(e)}},derive:f,extend:o,props:d,override:b,Events:bt,on:Ht,liveQuery:lr,extendObservabilitySet:Pn,getByKeyPath:_,setByKeyPath:w,delByKeyPath:function(e,t){"string"==typeof t?w(e,t,void 0):"length"in t&&[].map.call(t,function(t){w(e,t,void 0)})},shallowClone:k,deepClone:P,getObjectDiff:Bn,cmp:ct,asap:x,minKey:-1/0,addons:[],connections:tt,errnames:V,dependencies:ar,cache:Tn,semVer:"4.2.1",version:"4.2.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),cr.maxKey=Yt(cr.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Ht(Bt,function(e){hr||(e=new CustomEvent(Ut,{detail:e}),hr=!0,dispatchEvent(e),hr=!1)}),addEventListener(Ut,function(e){e=e.detail,hr||ur(e)}));var dr,hr=!1,pr=function(){};return"undefined"!=typeof BroadcastChannel&&((pr=function(){(dr=new BroadcastChannel(Ut)).onmessage=function(e){return e.data&&ur(e.data)}})(),"function"==typeof dr.unref&&dr.unref(),Ht(Bt,function(e){hr||dr.postMessage(e)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(e){if(!rr.disableBfCache&&e.persisted){ie&&console.debug("Dexie: handling persisted pagehide"),null!=dr&&dr.close();for(var t=0,n=tt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!rr.disableBfCache&&e.persisted&&(ie&&console.debug("Dexie: handling persisted pageshow"),pr(),ur({all:new wn(-1/0,[[]])}))})),we.rejectionMapper=function(e,t){return!e||e instanceof L||e instanceof TypeError||e instanceof SyntaxError||!e.name||!K[e.name]?e:(t=new K[e.name](t||e.message,e),"stack"in e&&p(t,"stack",{get:function(){return this.inner.stack}}),t)},ae(ie),t(rr,Object.freeze({__proto__:null,Dexie:rr,liveQuery:lr,Entity:lt,cmp:ct,PropModification:pt,replacePrefix:function(e,t){return new pt({replacePrefix:[e,t]})},add:function(e){return new pt({add:e})},remove:function(e){return new pt({remove:e})},default:rr,RangeSet:wn,mergeRanges:Nn,rangesOverlap:jn}),{default:rr}),rr}();const tw=r(ew.exports),nw=Symbol.for("Dexie"),rw=globalThis[nw]||(globalThis[nw]=tw);if(tw.semVer!==rw.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${tw.semVer} and ${rw.semVer}`);const{liveQuery:iw,mergeRanges:aw,rangesOverlap:sw,RangeSet:ow,cmp:lw,Entity:cw,PropModification:uw,replacePrefix:dw,add:hw,remove:pw,DexieYProvider:fw}=rw;const mw=new class extends rw{constructor(){super("fichegen"),t(this,"settings"),t(this,"ebookSpecs"),t(this,"searchHistory"),this.version(1).stores({settings:"&key",ebookSpecs:"&id",searchHistory:"++id, query"}),this.version(2).stores({settings:"&key",ebookSpecs:"&id",searchHistory:"++id, createdAt, query"}),this.version(3).stores({settings:"&key",ebookSpecs:"&id",searchHistory:"++id, createdAt, query, generatedNFO"})}},gw=U.createContext(void 0),vw={fr:{"footer.version":"V.1.5","header.title":"FicheGen","header.subtitle":"Gnrateur de Fiches mdia","search.placeholder":"Rechercher un film, une srie, un spectacle ...","search.nfo.upload":"Importer NFO","search.nfo.paste":"Coller NFO","search.nfo.notitle":"NFO import / gnr avec succs, mais aucun titre trouv. Recherchez le manuellement.","nfo.media.not.found.title":"Mdia non trouv","nfo.media.not.found.description":"Les informations du NFO ont t enregistres, mais aucun mdia correspondant n'a t trouv. Veuillez affiner votre recherche manuellement.","specs.title":"Spcifications techniques","specs.back":"Retour","specs.name":"Nom de la release","specs.size":"Taille","specs.video":"Vido","specs.resolution":"Rsolution","specs.codec":"Codec","specs.bitrate":"Dbit","specs.audio":"Audio","specs.subtitles":"Sous-titres","specs.language":"Audio","specs.format":"Format","specs.default":"Dfaut","specs.add":"Ajouter","specs.generate":"Gnrer la fiche","lang.french":"Franais","lang.english":"Anglais","lang.spanish":"Espagnol","lang.german":"Allemand","lang.italian":"Italien","lang.portuguese":"Portugais","lang.russian":"Russe","lang.japanese":"Japonais","lang.korean":"Coren","lang.chinese":"Chinois","lang.arabic":"Arabe","lang.hindi":"Hindi","lang.dutch":"Nerlandais","lang.swedish":"Sudois","lang.norwegian":"Norvgien","lang.danish":"Danois","lang.finnish":"Finnois","lang.polish":"Polonais","lang.czech":"Tchque","lang.hungarian":"Hongrois","lang.romanian":"Roumain","lang.bulgarian":"Bulgare","lang.greek":"Grec","lang.turkish":"Turc","lang.hebrew":"Hbreu","lang.thai":"Tha","lang.vietnamese":"Vietnamien","lang.indonesian":"Indonsien","lang.malay":"Malais","lang.filipino":"Filipino","lang.ukrainian":"Ukrainien","lang.croatian":"Croate","lang.serbian":"Serbe","lang.slovenian":"Slovne","lang.slovak":"Slovaque","lang.lithuanian":"Lituanien","lang.latvian":"Letton","lang.estonian":"Estonien","lang.quebecois":"Qubcois","lang.other":"Autre","card.synopsis":"Synopsis","card.cast":"Distribution","card.crew":"quipe technique","card.director":"Ralisateur","card.writer":"Scnariste","card.producer":"Producteur","card.composer":"Compositeur","card.cinematographer":"Directeur de la photographie","card.editor":"Monteur","card.production":"Production","card.company":"Socit de production","card.country":"Pays","card.release":"Date de sortie","card.runtime":"Dure","card.budget":"Budget","card.revenue":"Recettes","card.genres":"Genres","card.rating":"Note","card.votes":"votes","card.technical":"Infos complmentaires","card.torrent":"Infos","card.torrent.specs":"Spcifications techniques","card.export.bbcode":"Exporter BBCode","card.export.html":"Exporter HTML","card.export.markdown":"Exporter Markdown","card.export.text":"Exporter Texte","tv.seasons":"Saisons","tv.episodes":"pisodes","tv.status":"Statut","tv.network":"Chane","tv.firstAired":"Premire diffusion","tv.lastAired":"Dernire diffusion","app.create":"Crez vos Prez et NFO","app.professional":"de sries, films ...","app.description":"Recherchez un mdia via sa vido, son titre, un NFO ou son ID TMDB","app.config.required":"Configuration requise :","app.config.message":"Vous devez configurer votre cl API TMDB pour utiliser cette application.","app.config.now":"Configurer maintenant","app.loading":"Chargement des dtails...","app.specs.detected":"Spcifications techniques dtectes :","app.specs.message":"NFO analys. Vous pouvez modifier les informations si ncessaire.","app.preview.title":"Prvisualisation de la fiche","app.preview.change":"Changer","app.preview.continue":"Continuer","app.preview.check":"Prvisualisation :","app.preview.verify":"Vrifiez que c'est bien le bon film/srie avant de remplir les spcifications techniques.","app.sheet.generated":"Fiche gnre","app.sheet.modify":"Modifier le film/srie","app.sheet.edit.specs":"Modifier les spcifications","app.sheet.new":"Nouvelle recherche","app.ready.title":"Prt  crer votre premire fiche ?","app.ready.description":"Utilisez la barre de recherche ci-dessus ou glissez une vido pour commencer.","app.step1":"Recherchez","app.step1.desc":"Scannez votre video ou tapez le nom d'un film, d'une srie ou son ID TMDB","app.step2":"Slectionnez","app.step2.desc":"Choisissez dans les rsultats de recherche","app.step3":"Exportez","app.step3.desc":"Tlchargez votre NFO et la fiche en BBCODE, HTML, Markdown ou TXT","search.movie":"Film","search.tv":"Srie","search.searching":"Recherche en cours...","nfo.title.not.found":"Titre non trouv","nfo.close":"Fermer","nfo.paste.title":"Coller le contenu NFO","nfo.paste.description":"Collez ici le contenu de votre NFO. Les spcifications techniques seront automatiquement analyses.","nfo.paste.placeholder":"Collez le contenu de votre fichier NFO ici...","nfo.cancel":"Annuler","nfo.analyze":"Analyser","specs.channels":"Canaux","specs.additional":"Infos supplmentaires","specs.release.group":"Release","specs.notes":"Notes","specs.notes.placeholder":"Informations supplmentaires ...","specs.release.placeholder":"ex : nom de la release source","specs.track.audio":"Piste Audio","specs.track.subtitle":"Sous-titre","specs.type":"Type","specs.embedded":"Intgr","specs.external":"Externe","specs.forced":"Forc","card.main.cast":"Casting principal","card.data.provided":"Donnes fournies par","specs.video.title":"Spcifications Vido","specs.quality":"Qualit","specs.audio.tracks":"Pistes Audio","specs.bitrate.label":"Dbit","specs.track.default":"Piste par dfaut","poster.choose":"Choisir une affiche","poster.select":"Slectionner","poster.close":"Fermer","poster.description":"Slectionnez l'affiche voulue. Les affiches sont tries par popularit et qualit.","poster.loading":"Chargement des affiches...","poster.none":"Aucune affiche supplmentaire disponible","poster.use":"Utiliser cette affiche","api.title":"Configuration API TMDB","api.description":"Entrez votre cl API TMDB pour accder aux donnes des films et sries.","api.key.label":"Cl API TMDB","api.key.placeholder":"Votre cl API TMDB...","api.get.key":"Obtenir une cl API","api.save":"Sauvegarder","export.title":"Exporter la fiche en bbcode","export.style":"Style de la prsentation","export.copy":"Copier le code","export.download":"Tlcharger","card.export.actions":"Actions","card.change.poster":"Changer l'affiche","card.export.formats":"Formats d'export","history.title":"Historique des fiches","history.clear.all":"Tout supprimer","history.empty":"Aucune fiche dans l'historique","history.empty.description":"Les fiches gnres apparatront ici","history.load":"Charger","history.button":"Historique","nav.movies":"Vido","nav.books":"eBook","ebook.create":"Crez vos fiches","ebook.professional":"de livres, BD etc ...","ebook.description":"Recherchez un livre ou une BD via son titre dans Google Book","ebook.search.placeholder":"Rechercher un livre ou BD par titre, auteur ou ISBN...","ebook.search.results":"livres trouvs","ebook.search.loading":"Chargement...","ebook.search.loadMore":"Charger plus","ebook.more":"autres","ebook.showMore":"Voir plus","ebook.showLess":"Voir moins","ebook.categories":"Catgories","ebook.technical.specs":"Spcifications eBook","ebook.format":"Format","ebook.size":"Taille","ebook.quality":"Qualit","ebook.drm":"Protection DRM","ebook.yes":"Oui","ebook.no":"Non","ebook.source":"Source","ebook.notes":"Notes","ebook.notes.placeholder":"Informations supplmentaires...","ebook.specs.title":"Spcifications eBook","ebook.filename":"Nom du fichier","ebook.language":"Langue","ebook.edition":"dition","ebook.publisher":"diteur","ebook.year":"Anne","ebook.uploaded.by":"Upload par","ebook.cancel":"Annuler","ebook.generate.sheet":"Gnrer la fiche","ebook.preview.title":"Prvisualisation du livre","ebook.sheet.generated":"Fiche eBook gnre","ebook.ready.title":"Prt  crer votre premire fiche eBook ?","ebook.ready.description":"Recherchez un livre par titre, auteur ou ISBN pour commencer.","ebook.step1":"Recherchez","ebook.step1.desc":"Tapez le titre d'un livre, le nom d'un auteur ou un ISBN","ebook.step2":"Configurez","ebook.step2.desc":"Ajoutez les spcifications techniques du fichier eBook","ebook.step3":"Exportez","ebook.step3.desc":"Tlchargez votre fiche en HTML, Markdown ou TXT","modal.cover.title":"Changer la couverture","modal.cover.current":"Couverture actuelle","modal.cover.url":"URL de la nouvelle couverture","modal.cover.preview":"Aperu","modal.cover.error":"Image non valide","modal.cover.help.title":"Conseil :","modal.cover.help.description":"Utilisez une URL d'image directe (se terminant par .jpg, .png, etc.)","modal.cover.cancel":"Annuler","modal.cover.confirm":"Confirmer","upload.video.dropzone":"Dposez votre vido ici ...","upload.video.nfo":"ou votre fichier NFO","upload.video.analyse":"Relchez pour analyser","upload.video.analyse2":"Analyse en cours...","upload.video.extract":"Extraction des mtadonnes du fichier vido","upload.video.select":"Slectionnez votre fichier","upload.video.charge":"Chargement...","upload.video.more":"Voir plus de rsultats","nfo.generator.title":"Gnrateur NFO","nfo.generator.subtitle":"MediaInfo","nfo.generator.description":"Gnrez un fichier NFO MediaInfo  partir de votre fichier vido","nfo.generator.drop.title":"  Gooooooooo !!  ","nfo.generator.drop.subtitle":"Dposez votre fichier vido","nfo.generator.drop.desc":"ou cliquez sur le bouton ci-dessous pour slectionner un fichier","nfo.generator.drop.analyzing":"Analyse du fichier...","nfo.generator.select.button":"Slectionner un fichier vido","nfo.generator.analyzing.title":"Analyse en cours...","nfo.generator.analyzing.desc":"Extraction des informations techniques du fichier vido","nfo.generator.success":"NFO gnr avec succs","nfo.generator.copy":"Copier","nfo.generator.download":"Tlcharger","nfo.generator.new":"Nouveau","nfo.generator.content.title":"Contenu du fichier NFO","nfo.generator.copy.success":"NFO copi dans le presse-papiers !","nfo.generator.error":"Erreur lors de la gnration du fichier NFO. Veuillez ressayer.","nfo.generator.summary.success":"Vido analyse avec succs !","nfo.generator.summary.description":"Caractristiques :","nfo.generator.summary.source":"Source","nfo.generator.summary.codec":"Codec","nfo.generator.summary.resolution":"Rsolution","nfo.generator.summary.audio":"Audio","nfo.generator.hdlight.warning.title":"Avertissement de compression","nfo.generator.hdlight.warning.message":"Cette vido est encode en HD light (compression leve).<br/>La qualit peut tre infrieure  un encodage HD standard ou  un remux.","nfo.generator.gpu.warning.title":"Encodage Matriel (GPU) Probable !","nfo.generator.gpu.warning.message":"Cet encodage semble avoir t ralis avec une puce matrielle (GPU), ce qui peut entraner une qualit infrieure  un encodage logiciel (CPU)  bitrate quivalent.","nfo.viewer.title":"NFO MediaInfo","nfo.viewer.subtitle":"Fichier technique gnr","nfo.viewer.show":"Afficher","nfo.viewer.copy":"Copier","nfo.viewer.copied":"Copi !","nfo.viewer.download":"Tlcharger","html.export.title":"HTML Export","html.export.choose":"Choisissez le type d'export HTML pour","html.export.simple.title":"HTML Simple","html.export.simple.desc":"Export rapide avec images distantes (URLs)","html.export.simple.check1":"Fichier unique, lger","html.export.simple.check2":"Ncessite une connexion internet","html.export.complete.title":"HTML Complet","html.export.complete.desc":"Export avec toutes les images tlcharges","html.export.complete.check1":"Archive ZIP avec HTML + images","html.export.complete.check2":"Fonctionne hors ligne","html.export.generating":"Gnration du fichier HTML...","html.export.downloading":"Test des permissions et tlchargement des images...","html.export.error.cors":"Erreur CORS dtecte","html.export.error.cors.details":"Les images n'ont pas pu tre tlcharges.\n\nSolutions :\n Utilisez l'export HTML simple (images distantes)\n Ouvrez les DevTools (appuyez sur F12) puis ressayez","html.export.error.generic":"Erreur d'export","html.export.error.generic.details":"Une erreur s'est produite lors de l'export: {error}. Veuillez ressayer.","html.export.error.unexpected":"Erreur inattendue","html.export.error.unexpected.details":"Une erreur inattendue s'est produite: {error}. Veuillez ressayer.","html.export.close":"Fermer","html.export.try.simple":"Essayer l'export simple","export.modal.style.complete":"Complet avec images","export.modal.style.minimalist":"Minimaliste","export.modal.style.modern":"Moderne","export.modal.style.classic":"Classique","export.modal.style.modern.emux":"Moderne (eMux)","export.modal.desc":"Voici le BBCode gnr pour","export.modal.desc.suffix":"Il vous suffit de le copier et le coller.","export.modal.generated":"BBCode gnr (modifiable)","export.modal.placeholder":"Votre BBCode apparatra ici...","export.modal.warning":"Attention :","export.modal.warning.desc":"Le BBCode est capricieux et peut ne pas fonctionner correctement selon la destination, il peut falloir apporter des modifications.","specs.files.count":"Nb de fichiers","ebook.googleBookLink":"Google Book","ebook.pages":"pages","ebook.isbn":"ISBN: ","ebook.yearLabel":"Anne :","ebook.editionLabel":"dition :","ebook.filesCountLabel":"Nb fichiers :","ebook.fileNameLabel":"Nom fichier :","ebook.export.bbcode":"BB","ebook.export.markdown":"MD","ebook.export.text":"TXT","ebook.ratings":"valuations","export.error.copy":"Erreur lors de la copie:","export.style.label":"Style","ebook.fileInfo":"Informations sur le fichier","ebook.audiobook":"Livre audio","ebook.fileNamePlaceholder":"MonLivre.epub","ebook.metadata":"Mtadonnes du livre","ebook.title":"Titre","ebook.subtitle":"Sous-titre","ebook.titlePlaceholder":"Titre du livre","ebook.subtitlePlaceholder":"Sous-titre (optionnel)","ebook.authors":"Auteurs","ebook.authorsPlaceholder":"Spars par des virgules","ebook.publisherPlaceholder":"Nom de l'diteur","ebook.yearPlaceholder":"2023","ebook.isbnLabel":"ISBN","ebook.isbnPlaceholder":"978-2-123456-78-9","ebook.tomeNumber":"Numro du tome","ebook.tomeNumberPlaceholder":"Tome 1, Volume 2...","ebook.editionPlaceholder":"dition spciale, rvise...","ebook.languagePlaceholder":"fr, en, es...","ebook.pagesLabel":"Pages","ebook.pagesPlaceholder":"Nombre de pages","ebook.mainCategory":"Catgorie principale","ebook.mainCategoryPlaceholder":"Genre, catgorie...","ebook.publicationDate":"Date de publication","ebook.publicationDatePlaceholder":"YYYY-MM-DD ou YYYY","ebook.descriptionLabel":"Description","ebook.descriptionPlaceholder":"Rsum ou description du livre","ebook.releaseInfo":"Informations de la release","ebook.sourcePlaceholder":"Source du fichier","ebook.filesCount":"Nombre de fichiers","ebook.filesCountPlaceholder":"1"},en:{"footer.version":"V.1.5","header.title":"FicheGen","header.subtitle":"Sheet Generator for media","search.placeholder":"Search for a movie, a series, a show...","search.nfo.upload":"Upload NFO","search.nfo.paste":"Paste NFO","search.nfo.notitle":"NFO successfully imported/generated, but no extractable title found. Please search manually.","nfo.media.not.found.title":"Media not found","nfo.media.not.found.description":"The NFO information has been saved, but no matching media was found. Please refine your search manually.","specs.title":"Technical Specifications","specs.back":"Back","specs.name":"Release","specs.size":"Size","specs.video":"Video","specs.resolution":"Resolution","specs.codec":"Codec","specs.bitrate":"Bitrate","specs.audio":"Audio","specs.subtitles":"Subtitles","specs.language":"Audio","specs.format":"Format","specs.default":"Default","specs.add":"Add","specs.generate":"Generate Sheet","lang.french":"French","lang.english":"English","lang.spanish":"Spanish","lang.german":"German","lang.italian":"Italian","lang.portuguese":"Portuguese","lang.russian":"Russian","lang.japanese":"Japanese","lang.korean":"Korean","lang.chinese":"Chinese","lang.arabic":"Arabic","lang.hindi":"Hindi","lang.dutch":"Dutch","lang.swedish":"Swedish","lang.norwegian":"Norwegian","lang.danish":"Danish","lang.finnish":"Finnish","lang.polish":"Polish","lang.czech":"Czech","lang.hungarian":"Hungarian","lang.romanian":"Romanian","lang.bulgarian":"Bulgarian","lang.greek":"Greek","lang.turkish":"Turkish","lang.hebrew":"Hebrew","lang.thai":"Thai","lang.vietnamese":"Vietnamese","lang.indonesian":"Indonesian","lang.malay":"Malay","lang.filipino":"Filipino","lang.ukrainian":"Ukrainian","lang.croatian":"Croatian","lang.serbian":"Serbian","lang.slovenian":"Slovenian","lang.slovak":"Slovak","lang.lithuanian":"Lithuanian","lang.latvian":"Latvian","lang.estonian":"Estonian","lang.quebecois":"Quebec French","lang.other":"Other","card.synopsis":"Synopsis","card.cast":"Cast","card.crew":"Crew","card.director":"Director","card.writer":"Writer","card.producer":"Producer","card.composer":"Composer","card.cinematographer":"Cinematographer","card.editor":"Editor","card.production":"Production","card.company":"Production Company","card.country":"Country","card.release":"Release Date","card.runtime":"Runtime","card.budget":"Budget","card.revenue":"Revenue","card.genres":"Genres","card.rating":"Rating","card.votes":"votes","card.technical":"Technical Information","card.torrent":"Specifications","card.torrent.specs":"Technical Specifications","card.export.bbcode":"Export BBCode","card.export.html":"Export HTML","card.export.markdown":"Export Markdown","card.export.text":"Export Text","tv.seasons":"Seasons","tv.episodes":"Episodes","tv.status":"Status","tv.network":"Network","tv.firstAired":"First Aired","tv.lastAired":"Last Aired","app.create":"Create NFOs & Layouts","app.professional":"for TV shows, movies...","app.description":"Search for media by its video, title, NFO, or TMDB ID","app.config.required":"Configuration required:","app.config.message":"You must configure your TMDB API key to use this application.","app.config.now":"Configure now","app.loading":"Loading details...","app.specs.detected":"Technical specifications detected:","app.specs.message":"NFO file information has been analyzed and pre-filled automatically. You can modify them if necessary","app.preview.title":"Sheet Preview","app.preview.change":"Change","app.preview.continue":"Continue","app.preview.check":"Preview:","app.preview.verify":"Check that this is the correct movie/series before filling in the technical specifications.","app.sheet.generated":"Generated Sheet","app.sheet.modify":"Modify movie/TV show","app.sheet.edit.specs":"Edit specifications","app.sheet.new":"New search","app.ready.title":"Ready to create your first sheet?","app.ready.description":"Use the search bar above or drag and drop a video to get started.","app.step1":"Search","app.step1.desc":"Scan your video or type the name of a movie, series, or its TMD ID","app.step2":"Select","app.step2.desc":"Choose from search results","app.step3":"Export","app.step3.desc":"Download your NFO and the datasheet in BBCODE, HTML, Markdown or TXT","search.movie":"Movie","search.tv":"TV Show","search.searching":"Searching...","nfo.title.not.found":"Title not found","nfo.close":"Close","nfo.paste.title":"Paste NFO content","nfo.paste.description":"Paste your NFO file content here (MediaInfo or XML). Technical specifications will be automatically analyzed.","nfo.paste.placeholder":"Paste your NFO file content here...","nfo.cancel":"Cancel","nfo.analyze":"Analyze","specs.channels":"Channels","specs.additional":"Additional Information","specs.release.group":"Release","specs.notes":"Notes","specs.notes.placeholder":"Additional information...","specs.release.placeholder":"Ex: release source","specs.track.audio":"Audio Track","specs.track.subtitle":"Subtitle","specs.type":"Type","specs.embedded":"Embedded","specs.external":"External","specs.forced":"Forced","card.main.cast":"Main Cast","card.data.provided":"Data provided by","specs.video.title":"Video Specifications","specs.quality":"Quality","specs.audio.tracks":"Audio Tracks","specs.bitrate.label":"Bitrate","specs.track.default":"Default track","poster.choose":"Choose Poster","poster.select":"Select","poster.close":"Close","poster.description":"Select the poster you want to use for your sheet. Posters are sorted by popularity and quality.","poster.loading":"Loading posters...","poster.none":"No additional posters available","poster.use":"Use this poster","api.title":"TMDB API Configuration","api.description":"Enter your TMDB API key to access movie and TV show data.","api.key.label":"TMDB API Key","api.key.placeholder":"Your TMDB API key...","api.get.key":"Get API Key","api.save":"Save","export.title":"Export Sheet","export.style":"Export Style","export.copy":"Copy Code","export.download":"Download","card.export.actions":"Actions","card.change.poster":"Change Poster","card.export.formats":"Export Formats","history.title":"Sheet History","history.clear.all":"Clear All","history.empty":"No sheets in history","history.empty.description":"Generated sheets will appear here","history.load":"Load","history.button":"History","nav.movies":"Video","nav.books":"eBook","ebook.create":"Create your sheets","ebook.professional":"for books, comics, etc.","ebook.description":"Search for a book or a comic by its title in Google Books","ebook.search.placeholder":"Search for a book by title, author or ISBN...","ebook.search.results":"books found","ebook.search.loading":"Loading...","ebook.search.loadMore":"Load more","ebook.more":"more","ebook.showMore":"Show more","ebook.showLess":"Show less","ebook.categories":"Categories","ebook.technical.specs":"eBook Specifications","ebook.format":"Format","ebook.size":"Size","ebook.quality":"Quality","ebook.drm":"DRM Protection","ebook.yes":"Yes","ebook.no":"No","ebook.source":"Source","ebook.notes":"Notes","ebook.notes.placeholder":"Additional information...","ebook.specs.title":"eBook Specifications","ebook.filename":"Filename","ebook.language":"Language","ebook.edition":"Edition","ebook.publisher":"Publisher","ebook.year":"Year","ebook.uploaded.by":"Uploaded by","ebook.cancel":"Cancel","ebook.generate.sheet":"Generate Sheet","ebook.preview.title":"Book Preview","ebook.sheet.generated":"eBook Sheet Generated","ebook.ready.title":"Ready to create your first eBook sheet?","ebook.ready.description":"Search for a book by title, author or ISBN to start.","ebook.step1":"Search","ebook.step1.desc":"Enter a book title, author name or ISBN","ebook.step2":"Configure","ebook.step2.desc":"Add the eBook file technical specifications","ebook.step3":"Export","ebook.step3.desc":"Download your sheet in HTML, Markdown or TXT","modal.cover.title":"Change Cover","modal.cover.current":"Current cover","modal.cover.url":"New cover URL","modal.cover.preview":"Preview","modal.cover.error":"Invalid image","modal.cover.help.title":"Tip:","modal.cover.help.description":"Use a direct image URL (ending with .jpg, .png, etc.)","modal.cover.cancel":"Cancel","modal.cover.confirm":"Confirm","upload.video.dropzone":"Drop your video here ...","upload.video.nfo":"or your NFO file","upload.video.analyse":"Drop to analyze","upload.video.analyse2":"Analysis in progress...","upload.video.extract":"Extracting metadata from the video file","upload.video.select":"Select your file","upload.video.charge":"Loading...","upload.video.more":"See more results","nfo.generator.title":"NFO Generator","nfo.generator.subtitle":"MediaInfo","nfo.generator.description":"Generate a MediaInfo NFO file from your video file","nfo.generator.drop.title":"  Gooooooooo !!  ","nfo.generator.drop.subtitle":"Drop your video file","nfo.generator.drop.desc":"or click the button below to select a file","nfo.generator.drop.analyzing":"Analyzing file...","nfo.generator.select.button":"Select a video file","nfo.generator.analyzing.title":"Analysis in progress...","nfo.generator.analyzing.desc":"Extracting technical information from the video file","nfo.generator.success":"NFO generated successfully","nfo.generator.copy":"Copy","nfo.generator.download":"Download","nfo.generator.new":"New","nfo.generator.content.title":"NFO File Content","nfo.generator.copy.success":"NFO copied to clipboard!","nfo.generator.error":"Error generating NFO file. Please try again.","nfo.generator.summary.success":"Video analyzed successfully!","nfo.generator.summary.description":"Specifications :","nfo.generator.summary.source":"Source","nfo.generator.summary.codec":"Codec","nfo.generator.summary.resolution":"Resolution","nfo.generator.summary.audio":"Audio","nfo.generator.hdlight.warning.title":"Compression Warning","nfo.generator.hdlight.warning.message":"This video is encoded in HD light (high compression).<br/>The quality may be lower than a standard HD encode or a remux.","nfo.generator.gpu.warning.title":"Hardware (GPU) Encoding Likely !","nfo.generator.gpu.warning.message":"This encoding appears to have been done using a hardware chip (GPU), which can result in lower quality than a software encode (CPU) at an equivalent bitrate.","nfo.viewer.title":"MediaInfo NFO","nfo.viewer.subtitle":"Generated technical file","nfo.viewer.show":"Show","nfo.viewer.copy":"Copy","nfo.viewer.copied":"Copied!","nfo.viewer.download":"Download","html.export.title":"HTML Export","html.export.choose":"Choose HTML export type for","html.export.simple.title":"Simple HTML","html.export.simple.desc":"Quick export with remote images (URLs)","html.export.simple.check1":"Single, lightweight file","html.export.simple.check2":"Requires internet connection","html.export.complete.title":"Complete HTML","html.export.complete.desc":"Export with all images downloaded","html.export.complete.check1":"ZIP archive with HTML + images","html.export.complete.check2":"Works offline","html.export.generating":"Generating HTML file...","html.export.downloading":"Testing permissions and downloading images...","html.export.error.cors":"CORS Error Detected","html.export.error.cors.details":"Images could not be downloaded.\n\nSolutions:\n Use simple HTML export (remote images)\n Open DevTools (press F12) and try again","html.export.error.generic":"Export Error","html.export.error.generic.details":"An error occurred during export: {error}. Please try again.","html.export.error.unexpected":"Unexpected Error","html.export.error.unexpected.details":"An unexpected error occurred: {error}. Please try again.","html.export.close":"Close","html.export.try.simple":"Try simple export","export.modal.style.complete":"Complete with images","export.modal.style.minimalist":"Minimalist","export.modal.style.modern":"Modern","export.modal.style.classic":"Classique","export.modal.style.modern.emux":"Moderne (eMux)","export.modal.desc":"Voici le BBCode gnr pour","export.modal.desc.suffix":"Il vous suffit de le copier et le coller.","export.modal.generated":"BBCode gnr (modifiable)","export.modal.placeholder":"Votre BBCode apparatra ici...","export.modal.warning":"Attention :","export.modal.warning.desc":"Le BBCode est capricieux et peut ne pas fonctionner correctement selon la destination, il peut falloir apporter des modifications.","specs.files.count":"File count","ebook.googleBookLink":"Google Book","ebook.pages":"pages","ebook.isbn":"ISBN: ","ebook.yearLabel":"Year:","ebook.editionLabel":"Edition:","ebook.filesCountLabel":"Nb files:","ebook.fileNameLabel":"File name:","ebook.export.bbcode":"BB","ebook.export.markdown":"MD","ebook.export.text":"TXT","ebook.ratings":"ratings","export.error.copy":"Error copying:","export.style.label":"Style","ebook.fileInfo":"File Information","ebook.audiobook":"Audiobook","ebook.fileNamePlaceholder":"MyBook.epub","ebook.metadata":"Book Metadata","ebook.title":"Title","ebook.subtitle":"Subtitle","ebook.titlePlaceholder":"Book title","ebook.subtitlePlaceholder":"Subtitle (optional)","ebook.authors":"Authors","ebook.authorsPlaceholder":"Separated by commas","ebook.publisherPlaceholder":"Publisher name","ebook.yearPlaceholder":"2023","ebook.isbnLabel":"ISBN","ebook.isbnPlaceholder":"978-2-123456-78-9","ebook.tomeNumber":"Tome Number","ebook.tomeNumberPlaceholder":"Tome 1, Volume 2...","ebook.editionPlaceholder":"Special edition, revised...","ebook.languagePlaceholder":"en, fr, es...","ebook.pagesLabel":"Pages","ebook.pagesPlaceholder":"Number of pages","ebook.mainCategory":"Main Category","ebook.mainCategoryPlaceholder":"Genre, category...","ebook.publicationDate":"Publication Date","ebook.publicationDatePlaceholder":"YYYY-MM-DD or YYYY","ebook.descriptionLabel":"Description","ebook.descriptionPlaceholder":"Summary or description of the book","ebook.releaseInfo":"Release Information","ebook.sourcePlaceholder":"File source","ebook.filesCount":"Number of files","ebook.filesCountPlaceholder":"1"}},bw=({children:e})=>{const[t,n]=U.useState("en");U.useEffect(()=>{(async()=>{const e=await mw.settings.get("language");if(!e||"fr"!==e.value&&"en"!==e.value){const e=navigator.language.startsWith("fr")?"fr":"en";n(e),await mw.settings.put({key:"language",value:e})}else n(e.value)})()},[]);return X.jsx(gw.Provider,{value:{language:t,setLanguage:async e=>{n(e),await mw.settings.put({key:"language",value:e})},t:e=>vw[t][e]||e},children:e})},yw=()=>{const e=U.useContext(gw);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e};function xw({onResultSelect:e,onTechnicalSpecsFound:t,onNFOGenerated:n,apiKey:r,disabled:i=!1,language:a="fr"}){const{t:s}=yw(),[o,l]=U.useState(""),[c,u]=U.useState([]),[d,h]=U.useState(!1),[p,f]=U.useState(!1),[m,g]=U.useState(1),[v,b]=U.useState(0),[y,x]=U.useState(!1),[_,w]=U.useState(!1),[k,N]=U.useState(!1),[j,S]=U.useState(""),[C,E]=U.useState(null),[P,$]=U.useState(!1),[T,D]=U.useState(!1),[I,A]=U.useState(!1),[R,F]=U.useState(!1),[O,M]=U.useState(null),[z,L]=U.useState(!1),[B,H]=U.useState("UNKNOWN"),V=U.useRef(null),q=U.useRef(null),W=U.useRef(null);U.useEffect(()=>{r&&N_.setApiKey(r)},[r]),U.useEffect(()=>{if(C){const e=Q_(C);if(e){const t=e.video,n=e.audio,r={source:e.source||null,codec:(null==t?void 0:t.codec)||null,resolution:(null==t?void 0:t.quality)||null,audio:(null==n?void 0:n.map(e=>e.codec).join(", "))||null};M(r);const i=C.split(/\r?\n\r?\n/).find(e=>e.startsWith("Video"))||C,a=i.toLowerCase();if(["nvenc","hevc_nvenc","qsv","quicksync","amf","avc coding"].some(e=>a.includes(e)))H("GPU");else{let e=0;[{pattern:/x264/i,weight:1},{pattern:/libx264/i,weight:1},{pattern:/x265/i,weight:1},{pattern:/libx265/i,weight:1},{pattern:/rc=crf\s*=\s*\d+/i,weight:2},{pattern:/psy-rd/i,weight:1},{pattern:/psy-rdoq/i,weight:1},{pattern:/bframes\s*=\s*\d+/i,weight:2},{pattern:/ref\s*=\s*\d+/i,weight:2},{pattern:/wpp/i,weight:1},{pattern:/numa-pools/i,weight:1}].forEach(t=>{t.pattern.test(a)&&(e+=t.weight)}),H(e>=3?"CPU":"UNKNOWN")}const s=i.match(/Bits\/\(Pixel\*Frame\)\s*:\s*([\d.]+)/);if(s&&(null==t?void 0:t.quality)){const e=parseFloat(s[1]);"2160p"===t.quality&&e<.035||("1080p"===t.quality||"720p"===t.quality)&&e<.1?L(!0):L(!1)}else L(!1)}else M(null),L(!1),H("UNKNOWN")}else M(null),L(!1),H("UNKNOWN")},[C]),U.useEffect(()=>{const e=setTimeout(async()=>{if(o.trim()){h(!0),g(1);try{const e=o.match(/\b(19\d{2}|20[0-3]\d)\b/),t=e?parseInt(e[1]):void 0,n=t?o.replace(/\b(19\d{2}|20[0-3]\d)\b/g,"").trim().replace(/\s+/g," "):o,r=await N_.searchMulti(n,1,a,t);u(r.results),b(r.total_pages),f(!0),I&&0===r.results.length&&F(!0)}catch(e){console.error("Erreur de recherche:",e),u([]),b(0)}finally{h(!1),I&&A(!1)}}else u([]),f(!1),g(1),b(0)},300);return()=>clearTimeout(e)},[o,a]);const K=e=>{if(F_(e)){let n="";if(O_(e)){n=L_(e);const r=Q_(e);r&&t&&t(r)}else{n=M_(e).title||""}n?($(!1),F(!1),A(!0),l(n)):(F(!1),$(!0))}},G=async(e,t=[])=>{if(e.isFile)try{const n=await new Promise((t,n)=>e.file(t,n)),r=/\.(mkv|avi|mp4|mov|wmv|flv|webm|m4v|3gp|ogv|iso|ts|m2ts)$/i;(n.type.startsWith("video/")||r.test(n.name))&&t.push(n)}catch(n){console.warn(`Impossible de lire le fichier: ${e.fullPath}`,n)}else if(e.isDirectory)try{const n=e.createReader(),r=await new Promise((e,t)=>{const r=[],i=()=>{n.readEntries(t=>{0===t.length?e(r):(r.push(...t),i())},t)};i()});for(const e of r)await G(e,t)}catch(n){console.warn(`Impossible de lire le dossier: ${e.fullPath}`,n)}return t},Y=()=>{N(!1),S("")},Z=async e=>{var r;const i=e.target.files;if(i&&0!==i.length){D(!0);try{const a=/\.(mkv|avi|mp4|mov|wmv|flv|webm|m4v|3gp|ogv|iso|ts|m2ts)$/i;let s=null;for(let e=0;e<i.length;e++){const t=i[e];if(t.type.startsWith("video/")||a.test(t.name)){s=t;break}}if(!s)throw new Error("Aucun fichier vido trouv");let o=0;for(let e=0;e<i.length;e++)o+=i[e].size;const c=parseFloat((o/1e9).toFixed(2)),u=i.length>1?(null==(r=e.target.dataset)?void 0:r.folderName)||(s.webkitRelativePath?s.webkitRelativePath.split("/")[0]:null):null,d=await R_.analyzeFile(s);E(d),n&&n(d);let h=u?z_(u):L_(d);if(h)$(!1),F(!1),A(!0),l(h);else{const e=z_(s.name);e&&($(!1),F(!1),A(!0),l(e))}const p=Q_(d);p&&t&&(p.video&&(p.video.size=c),p.numberOfFiles=i.length,u&&(p.releaseName=u,p.releaseGroup=u),t(p))}catch(a){console.error("Erreur lors de la gnration NFO:",a),F(!1),$(!0)}finally{D(!1),e.target.value=""}}},Q=()=>{l(""),u([]),f(!1),$(!1),F(!1),E(null),n&&n(null)};return X.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-4",children:[O&&X.jsxs("div",{className:"space-y-2",children:[X.jsx("div",{className:"mt-2 p-3 border rounded-lg animate-in fade-in bg-green-500/10 border-green-500/20",children:X.jsxs("div",{className:"flex items-start gap-2",children:[X.jsx(Rx,{className:"h-4 w-4 shrink-0 mt-0.5 text-green-500","aria-hidden":"true"}),X.jsxs("div",{className:"flex-1 space-y-1",children:[X.jsx("p",{className:"text-xs font-semibold text-green-500",children:s("nfo.generator.summary.success")}),X.jsx("p",{className:"text-xs text-gray-300",children:s("nfo.generator.summary.description")}),O.source&&X.jsxs("p",{className:"text-xs text-gray-400",children:[" ",s("nfo.generator.summary.source"),": ",X.jsx("span",{className:"text-gray-300",children:O.source})]}),O.codec&&X.jsxs("p",{className:"text-xs text-gray-400",children:[" ",s("nfo.generator.summary.codec"),": ",X.jsx("span",{className:"text-gray-300",children:O.codec})]}),O.resolution&&X.jsxs("p",{className:"text-xs text-gray-400",children:[" ",s("nfo.generator.summary.resolution"),": ",X.jsx("span",{className:"text-gray-300",children:O.resolution})]}),O.audio&&X.jsxs("p",{className:"text-xs text-gray-400",children:[" ",s("nfo.generator.summary.audio"),": ",X.jsx("span",{className:"text-gray-300",children:O.audio})]})]})]})}),"GPU"===B&&X.jsx("div",{className:"mt-2 p-3 border rounded-lg animate-in fade-in bg-red-500/10 border-red-500/20",children:X.jsxs("div",{className:"flex items-start gap-2",children:[X.jsx(Ex,{className:"h-4 w-4 shrink-0 mt-0.5 text-red-500","aria-hidden":"true"}),X.jsxs("div",{className:"flex-1 space-y-1",children:[X.jsx("p",{className:"text-xs font-semibold text-red-400",children:s("nfo.generator.gpu.warning.title")}),X.jsx("p",{className:"text-xs text-gray-300",dangerouslySetInnerHTML:{__html:s("nfo.generator.gpu.warning.message")}})]})]})}),z&&"GPU"!==B&&X.jsx("div",{className:"mt-2 p-3 border rounded-lg animate-in fade-in bg-yellow-500/10 border-yellow-500/20",children:X.jsxs("div",{className:"flex items-start gap-2",children:[X.jsx(n_,{className:"h-4 w-4 shrink-0 mt-0.5 text-yellow-500","aria-hidden":"true"}),X.jsxs("div",{className:"flex-1 space-y-1",children:[X.jsx("p",{className:"text-xs font-semibold text-yellow-400",children:s("nfo.generator.hdlight.warning.title")}),X.jsx("p",{className:"text-xs text-gray-300",dangerouslySetInnerHTML:{__html:s("nfo.generator.hdlight.warning.message")}})]})]})})]}),X.jsxs("div",{ref:V,className:"relative",children:[X.jsx("div",{className:"relative bg-gray-800/60 backdrop-blur-sm border-2 border-gray-700/50 rounded-xl hover:border-gray-600/70 focus-within:border-violet-500 transition-all duration-200",children:X.jsxs("div",{className:"flex items-center px-4 py-3",children:[X.jsx(d_,{className:"w-5 h-5 text-gray-400 mr-3"}),X.jsx("input",{type:"text",placeholder:s("search.placeholder"),value:o,onChange:e=>{l(e.target.value),P&&$(!1),R&&F(!1)},className:"flex-1 bg-transparent text-white placeholder-gray-400 outline-none",disabled:T}),o&&X.jsx("button",{onClick:Q,className:"ml-2 p-1 text-gray-400 hover:text-white transition-colors",children:X.jsx(__,{className:"w-4 h-4"})}),X.jsxs("div",{className:"flex items-center space-x-2 ml-3",children:[X.jsxs("button",{onClick:()=>{var e;Q(),null==(e=q.current)||e.click()},className:"px-3 py-1.5 text-sm bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 hover:text-white transition-colors rounded-lg border border-gray-600/50 hover:border-gray-500 flex items-center space-x-1.5",title:"Importer un fichier NFO",children:[X.jsx(v_,{className:"w-4 h-4"}),X.jsx("span",{children:"NFO"})]}),X.jsxs("button",{onClick:()=>{Q(),N(!0)},className:"px-3 py-1.5 text-sm bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 hover:text-white transition-colors rounded-lg border border-gray-600/50 hover:border-gray-500 flex items-center space-x-1.5",title:"Coller contenu NFO",children:[X.jsx(zx,{className:"w-4 h-4"}),X.jsx("span",{children:"Coller"})]})]})]})}),X.jsx("input",{ref:q,type:"file",accept:".nfo,.txt",onChange:e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];if(!r)return;const i=new FileReader;i.onload=async e=>{var t;const r=null==(t=e.target)?void 0:t.result;E(r),n&&n(r),K(r)},i.readAsText(r),e.target.value=""},className:"hidden"}),X.jsx("input",{ref:W,type:"file",webkitdirectory:"",directory:"",multiple:!0,onChange:Z,className:"hidden"}),p&&c.length>0&&!i&&X.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800/95 backdrop-blur-sm border border-gray-700/50 rounded-xl shadow-2xl overflow-hidden z-50 max-h-[32rem]",children:[X.jsx("div",{className:"overflow-y-auto max-h-[28rem]",children:c.map(t=>X.jsxs("button",{onClick:()=>(t=>{e(t),f(!1),l(t.title||t.name||"")})(t),className:"w-full flex items-center px-4 py-3 hover:bg-gray-700/50 transition-colors text-left",children:[X.jsx("div",{className:"flex-shrink-0 w-12 h-16 mr-3 bg-gray-700 rounded overflow-hidden",children:(null==t?void 0:t.poster_path)?X.jsx("img",{src:N_.getImageUrl(null==t?void 0:t.poster_path,"w92"),alt:"",className:"w-full h-full object-cover"}):X.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"movie"===(null==t?void 0:t.media_type)?X.jsx(Zx,{className:"w-5 h-5 text-gray-500"}):X.jsx(g_,{className:"w-5 h-5 text-gray-500"})})}),X.jsxs("div",{className:"flex-1 min-w-0",children:[X.jsx("h3",{className:"text-white font-medium truncate",children:(null==t?void 0:t.title)||(null==t?void 0:t.name)}),X.jsxs("p",{className:"text-gray-400 text-sm",children:["movie"===(null==t?void 0:t.media_type)?s("search.movie"):s("search.tv"),"  ",(null==t?void 0:t.release_date)?new Date(t.release_date).getFullYear():(null==t?void 0:t.first_air_date)?new Date(t.first_air_date).getFullYear():"N/A"]}),(null==t?void 0:t.vote_average)>0&&X.jsx("div",{className:"flex items-center mt-1",children:X.jsxs("div",{className:"flex items-center",children:[X.jsx("span",{className:"text-yellow-400 text-sm",children:""}),X.jsx("span",{className:"text-gray-400 text-sm ml-1",children:null==t?void 0:t.vote_average.toFixed(1)})]})})]})]},t.id))}),m<v&&X.jsx("div",{className:"border-t border-gray-700/50 p-3",children:X.jsx("button",{onClick:async()=>{if(!(y||m>=v)){x(!0);try{const e=o.match(/\b(19\d{2}|20[0-3]\d)\b/),t=e?parseInt(e[1]):void 0,n=t?o.replace(/\b(19\d{2}|20[0-3]\d)\b/g,"").trim().replace(/\s+/g," "):o,r=await N_.searchMulti(n,m+1,a,t);u(e=>[...e,...r.results]),g(e=>e+1)}catch(e){console.error("Erreur lors du chargement de plus de rsultats:",e)}x(!1)}},disabled:y,className:"w-full py-2 text-sm text-violet-300 hover:text-violet-200 disabled:text-gray-500 transition-colors",children:y?s("upload.video.charge"):`${s("upload.video.more")} (${c.length}/${v>1?"20+":c.length})`})})]}),d&&X.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800/95 backdrop-blur-sm border border-gray-700/50 rounded-xl p-4 text-center z-50",children:[X.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-violet-500 mx-auto"}),X.jsx("p",{className:"text-gray-400 text-sm mt-2",children:s("search.searching")})]})]}),!p&&!C&&X.jsx("div",{onDragOver:e=>{e.preventDefault(),w(!0)},onDragLeave:e=>{e.preventDefault(),w(!1)},onDrop:async e=>{var t;e.preventDefault(),w(!1);try{let r=[],i=null;if(e.dataTransfer.items&&e.dataTransfer.items.length>0){const a=Array.from(e.dataTransfer.items);for(const e of a)if("file"===e.kind){const a=null==(t=e.webkitGetAsEntry)?void 0:t.call(e);if(a)if(a.isDirectory){i=a.name;const e=await G(a);r.push(...e)}else{const t=e.getAsFile();if(t){const e=/\.(mkv|avi|mp4|mov|wmv|flv|webm|m4v|3gp|ogv|iso|ts|m2ts)$/i;if(t.type.startsWith("video/")||e.test(t.name))r.push(t);else if(t.name.endsWith(".nfo")||t.type.startsWith("text/")){const e=new FileReader;return e.onload=e=>{var t;const r=null==(t=e.target)?void 0:t.result;E(r),n&&n(r),K(r)},void e.readAsText(t)}}}}}if(0===r.length)return;const a=new DataTransfer;r.forEach(e=>a.items.add(e));const s={target:{files:a.files,value:"",dataset:{folderName:i}}};await Z(s)}catch(r){console.error("Erreur lors du traitement du drop:",r)}},className:"relative transition-all duration-300 "+(_?"scale-[1.02]":""),children:X.jsx("div",{className:"relative bg-gradient-to-br from-gray-800/80 to-gray-900/80 backdrop-blur-sm border-2 border-dashed rounded-2xl p-12 transition-all duration-300 "+(_?"border-violet-400 bg-violet-500/10 shadow-lg shadow-violet-500/20":"border-gray-600/50 hover:border-gray-500/70"),children:T?X.jsxs("div",{className:"text-center",children:[X.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-violet-500/20 rounded-full mb-4",children:X.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-violet-500 border-t-transparent"})}),X.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:s("upload.video.analyse2")}),X.jsx("p",{className:"text-gray-400",children:s("upload.video.extract")})]}):X.jsxs("div",{className:"text-center",children:[X.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-violet-500/20 to-blue-500/20 rounded-full mb-6",children:X.jsx(Gx,{className:"w-10 h-10 text-violet-400"})}),X.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:_?"  Gooooooooo !!  ":s("upload.video.dropzone")}),X.jsx("p",{className:"text-gray-400 mb-6",children:s(_?"upload.video.analyse":"upload.video.nfo")}),X.jsx("div",{className:"flex items-center justify-center space-x-4",children:X.jsxs("button",{onClick:()=>{var e;return null==(e=W.current)?void 0:e.click()},className:"px-6 py-3 bg-gradient-to-r from-violet-600 to-blue-600 hover:from-violet-500 hover:to-blue-500 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-violet-500/25 flex items-center space-x-2",children:[X.jsx(v_,{className:"w-5 h-5"}),X.jsx("span",{children:s("upload.video.select")})]})}),X.jsx("p",{className:"text-gray-500 text-sm mt-4",children:"Slectionnez un dossier pour scanner le premier fichier vido et calculer la taille totale"}),X.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-2 text-xs text-gray-500",children:[X.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"MKV"}),X.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"ISO"}),X.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"MP4"}),X.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"AVI"}),X.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"MOV"}),X.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"TS"}),X.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"M2TS"}),X.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"NFO"})]})]})})}),P&&X.jsx("div",{className:"bg-orange-500/10 backdrop-blur-sm border border-orange-500/30 rounded-xl p-4",children:X.jsxs("div",{className:"flex items-start",children:[X.jsx(Kx,{className:"w-5 h-5 text-orange-400 mr-3 mt-0.5 flex-shrink-0"}),X.jsxs("div",{className:"flex-1",children:[X.jsx("p",{className:"text-orange-300 font-medium mb-1",children:s("nfo.title.not.found")}),X.jsx("p",{className:"text-orange-200 text-sm mb-3",children:s("search.nfo.notitle")}),X.jsx("button",{onClick:()=>$(!1),className:"text-orange-300 hover:text-orange-200 text-sm underline",children:s("nfo.close")})]})]})}),R&&X.jsx("div",{className:"bg-orange-500/10 backdrop-blur-sm border border-orange-500/30 rounded-xl p-4",children:X.jsxs("div",{className:"flex items-start",children:[X.jsx(Kx,{className:"w-5 h-5 text-orange-400 mr-3 mt-0.5 flex-shrink-0"}),X.jsxs("div",{className:"flex-1",children:[X.jsx("p",{className:"text-orange-300 font-medium mb-1",children:s("nfo.media.not.found.title")}),X.jsx("p",{className:"text-orange-200 text-sm mb-3",children:s("nfo.media.not.found.description")}),X.jsx("button",{onClick:()=>F(!1),className:"text-orange-300 hover:text-orange-200 text-sm underline",children:s("nfo.close")})]})]})}),k&&X.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:X.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-2xl w-full max-h-[80vh] shadow-2xl border border-gray-700",children:[X.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[X.jsxs("div",{className:"flex items-center",children:[X.jsx(Kx,{className:"w-6 h-6 text-violet-400 mr-3"}),X.jsx("h2",{className:"text-xl font-bold text-white",children:s("nfo.paste.title")})]}),X.jsx("button",{onClick:Y,className:"text-gray-400 hover:text-white transition-colors",children:X.jsx(__,{className:"w-5 h-5"})})]}),X.jsxs("div",{className:"p-6",children:[X.jsx("p",{className:"text-gray-300 mb-4",children:s("nfo.paste.description")}),X.jsx("textarea",{value:j,onChange:e=>S(e.target.value),placeholder:s("nfo.paste.placeholder"),className:"w-full h-64 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500 font-mono text-sm resize-none"}),X.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[X.jsx("button",{onClick:Y,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:s("nfo.cancel")}),X.jsx("button",{onClick:()=>{j.trim()&&(E(j),n&&n(j),K(j),N(!1),S(""))},disabled:!j.trim(),className:"px-6 py-2 bg-violet-600 hover:bg-violet-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:s("nfo.analyze")})]})]})]})})]})}const _w=(e,t)=>"Kbps"===t&&e>=1e3?e.toLocaleString("fr-FR").replace(/,/g," "):e.toString(),ww=e=>{if(e<1){const t=1e3*e;return t>=100?`${t.toLocaleString("fr-FR").replace(/,/g," ")} MB`:`${t} MB`}return`${e} GB`},kw=e=>{if(!e)return"N/A";return`${Math.floor(e/60)}h${(e%60).toString().padStart(2,"0")}`},Nw=e=>{if(!e||0===e.length)return"N/A";const t=Math.round(e.reduce((e,t)=>e+t,0)/e.length);return`${t} min`},jw=(e,t,n)=>{const r="movie"===n,i=e,a=e;return{isMovie:r,movie:i,tvShow:a,director:t.crew.find(e=>"Director"===e.job),creators:t.crew.filter(e=>"Creator"===e.job||"Executive Producer"===e.job),mainActors:t.cast.slice(0,5),title:r?i.title:a.name,originalTitle:r?i.original_title:a.original_name,releaseDate:r?i.release_date:a.first_air_date,overview:e.overview,tagline:e.tagline,voteAverage:e.vote_average,voteCount:e.vote_count,id:e.id,posterPath:e.poster_path,genres:e.genres,productionCountries:e.production_countries}},Sw=e=>e.map(e=>`[i][url=https://www.sharewood.tv/torrents?tags=${encodeURIComponent(e.name)}]${e.name}[/url][/i]`).join(", ");function Cw(e,t,n,r,i=1,a){switch(i){case 1:default:return Ew(e,t,n,r,a);case 2:return function(e,t,n,r){const{isMovie:i,movie:a,tvShow:s,director:o,creators:l,mainActors:c,title:u,originalTitle:d,releaseDate:h,overview:p,tagline:f,voteAverage:m,voteCount:g,posterPath:v,genres:b,productionCountries:y}=jw(e,t,n);let x=`[center][b][size=29]${u}[/size][/b]\n[size=18](${new Date(h).getFullYear()})[/size]\n\n[img]${N_.getImageUrl(v,"original")}[/img]${f?`\n\n[i]"${f}"[/i]`:""}[/center]\n\n[list]\n[*] [b]Titre original :[/b] ${d}[/*]\n[*] [b]Pays :[/b] ${y.map(e=>e.name).join(", ")||"N/A"}[/*]\n[*] [b]Genres :[/b] ${Sw(b)}[/*]\n[*] [b]Date de sortie :[/b] ${new Date(h).toLocaleDateString("fr-FR")}[/*]\n[*] [b]Dure :[/b] ${i?kw(a.runtime):Nw(s.episode_run_time)}[/*]`;i||(x+=`\n[*] [b]Saisons :[/b] ${s.number_of_seasons}[/*]\n[*] [b]pisodes :[/b] ${s.number_of_episodes}[/*]`);x+=`\n[*] [b]${i?"Ralisateur":"Crateur(s)"} :[/b] ${i?(null==o?void 0:o.name)||"N/A":l.slice(0,2).map(e=>e.name).join(", ")||"N/A"}[/*]\n[*] [b]Note TMDB :[/b] ${m.toFixed(1)}/10 (${g} votes)[/*]\n[/list]\n[b]Synopsis :[/b]\n${p||"Aucun synopsis disponible."}\n\n[b]Casting :[/b]\n    [list]`,c.forEach(e=>{x+=`\n    [*] ${e.name} - ${e.character}[/*]`}),x+="\n   [/list]",r&&(x+=`\n[b]Spcifications techniques :[/b]\n[list]\n[*] [b]Source :[/b] ${r.source||"N/A"}[/*]\n[*] [b]Qualit :[/b] ${r.video.quality}[/*]\n[*] [b]Format :[/b] ${r.video.format}[/*]\n[*] [b]Codec vido :[/b] ${r.video.codec}[/*]\n[*] [b]Dbit vido :[/b] ${_w(r.video.bitrate,r.video.bitrateUnit)} ${r.video.bitrateUnit}[/*]\n[*] [b]Taille :[/b] ${ww(r.video.size)}[/*]\n[*] [b]Nombre de fichiers :[/b] ${r.numberOfFiles||(i?1:s.number_of_episodes||1)}[/*]\n[/list]`,r.audio.length>0&&(x+="\n[b]Audio :[/b]\n    [list=1]",r.audio.forEach(e=>{let t=W_(e.languageCode);!t.flag&&e.language&&(t=W_(e.language));const n=t.flag?`[img]${t.flag}[/img] `:"";x+=`\n   [*] ${n}${e.language} [${e.channels}] ${e.codec} @ ${_w(e.bitrate,e.bitrateUnit)} ${"Mbps"===e.bitrateUnit?"Mb/s":"kb/s"}[/*]`}),x+="\n   [/list]"),r.subtitles.length>0&&(x+="\n[b]Sous-titres :[/b]\n    [list=1]",r.subtitles.forEach(e=>{let t=W_(e.languageCode);!t.flag&&e.language&&(t=W_(e.language));const n=t.flag?`[img]${t.flag}[/img] `:"";let r="";e.isForced?r=" - Forc":e.isSDH&&(r=" - SDH"),x+=`\n    [*] ${n}${e.language} (${e.format})${r}[/*]`}),x+="\n    [/list] "),r.releaseGroup&&(x+=`\n[*] [b]Release :[/b] ${r.releaseGroup}[/*]`),r.notes&&(x+=`\n[*] [b]Notes :[/b] ${r.notes}[/*]`),x+="\n");return x}(e,t,n,r);case 3:return function(e,t,n,r,i){const{isMovie:a,movie:s,tvShow:o,director:l,creators:c,mainActors:u,title:d,originalTitle:h,releaseDate:p,overview:f,tagline:m,voteAverage:g,posterPath:v,genres:b}=jw(e,t,n),y=N_.getImageUrl(v,"original"),x=new Date(p).getFullYear(),_=Sw(b.slice(0,2)),w=a?kw(s.runtime):Nw(o.episode_run_time),k=`${g.toFixed(1)}/10`,N=a?(null==l?void 0:l.name)||"N/A":c.slice(0,2).map(e=>e.name).join(", ")||"N/A",j=u.map(e=>e.name).join(", "),S=f||"Aucun synopsis disponible.",C=(null==r?void 0:r.video.quality)||"N/A",E=ww((null==r?void 0:r.video.size)||0),P=(null==r?void 0:r.video.format)||"N/A",$=r?`${_w(r.video.bitrate,r.video.bitrateUnit)} ${r.video.bitrateUnit}`:"N/A",T=(null==r?void 0:r.source)||"N/A",D=(null==r?void 0:r.numberOfFiles)||(a?1:o.number_of_episodes||1);let I="N/A";r&&r.audio.length>0&&(I=r.audio.map(e=>{let t=W_(e.languageCode);!t.flag&&e.language&&(t=W_(e.language));return`${t.flag?`[img]${t.flag}[/img] `:""}${e.language} [${e.channels}] ${e.codec} @ ${_w(e.bitrate,e.bitrateUnit)} ${"Mbps"===e.bitrateUnit?"Mb/s":"kb/s"}`}).join(", "));let A="Aucun";r&&r.subtitles.length>0&&(A=r.subtitles.map(e=>{let t=W_(e.languageCode);!t.flag&&e.language&&(t=W_(e.language));const n=t.flag?`[img]${t.flag}[/img] `:"";let r="complets";return e.isForced?r="Forc":e.isSDH&&(r="SDH"),`${n}${e.language} (${e.format} - ${r})`}).join(", "));const R=null==r?void 0:r.releaseGroup,F=null==r?void 0:r.notes;let O=`[table][tr][td] [/td][td][table][tr][td][table][tr][td][table][tr][td]\n&nbsp; &nbsp; &nbsp; [img width=550]${y}[/img] &nbsp; &nbsp; &nbsp; [/td][td] [/td][/tr][/table][/td][td][table][tr][td]\n  [/td][td]   [/td][/tr][/table][/td][td][table][tr][td][table][tr][td][table][tr][td][color=#3d85c6][size=29] ${d}[/size][/color][/td][/tr][tr][td][table][tr][td]  ${x} - ${_} - ${w}  [/td][td][size=10]   [/size][/td][td] &nbsp; - Note : ${k} - [url=https://www.themoviedb.org/${a?"movie":"tv"}/${e.id}][img]https://i.imgur.com/mxI05s2.png[/img][/url] &nbsp; [/td][/tr][/table][/td][/tr][tr][td][hr=#FF0000][/hr][/td][/tr][/table][/td][/tr]`;const M=i?`[url=${i}][img]https://i.imgur.com/jKQt520.png[/img][/url] &nbsp; `:"";O=O.replace(`&nbsp; - Note : ${k} - [url=https://www.themoviedb.org/${a?"movie":"tv"}/${e.id}][img]https://i.imgur.com/mxI05s2.png[/img][/url] &nbsp; [/td][/tr][/table][/td][/tr][tr][td][hr=#FF0000][/hr][/td][/tr][/table][/td][/tr]`,`&nbsp; - Note : ${k} - [url=https://www.themoviedb.org/${a?"movie":"tv"}/${e.id}][img]https://i.imgur.com/mxI05s2.png[/img][/url] &nbsp; ${M}[/td][/tr][/table][/td][/tr][tr][td][hr=#FF0000][/hr][/td][/tr][/table][/td][/tr]`),m&&(O+=`[tr][td][i][color=#c27ba0][size=18][center][b]"${m}"[/b][/center][/size][/color][/i]\n[/td][/tr]`);O+=`[tr][td] \n[/td][/tr][tr][td][table][tr][td][b][color=#3d85c6]Titre original : &nbsp;[/color][/b] ${h}[/td][/tr][tr][td][b][color=#3d85c6]Ralisateur : &nbsp;[/color][/b] ${N}[/td][/tr][tr][td][b][color=#3d85c6]Acteurs : &nbsp;[/color][/b] ${j}[/td][/tr][/table][/td][/tr][tr][td]  [br] [/br][b][color=#3d85c6]Synopsis &nbsp;[br] [/br] [br] [/br][/color][/b][/td][/tr][tr][td]  &nbsp; ${S}[br] [/br][hr=#FF0000][/hr][/td][/tr][/table][/td][/tr][tr][td][table][tr][td][b][color=#3d85c6]Qualit :  &nbsp;[/color][/b][/td][td]${C}[/td][td] &nbsp; [/td][td][b][color=#3d85c6]&nbsp;&nbsp;&nbsp;[right]Format vido :  &nbsp;[/right][/color][/b][/td][td]${P}[/td][/tr][/table][/td][/tr][tr][td][table][tr][td][b][color=#3d85c6]Dbit vido : &nbsp;[/color][/b][/td][td]${$}[/td][td] &nbsp; [/td][td][b][color=#3d85c6]&nbsp;&nbsp;&nbsp;[right]Source  : &nbsp;[/right][/color][/b][/td][td]&nbsp;${T}[/td][/tr][/table][/td][/tr][tr][td][table][tr][td] [b][color=#3d85c6]Taille totale : &nbsp;[/color][/b][/td][td]${E}[/td][td] &nbsp; [/td][td][b][color=#3d85c6]&nbsp;&nbsp;&nbsp;[right]Nb de fichiers : &nbsp;[/right][/color][/b][/td][td]&nbsp;${D}[/td][/tr][/table][/td][/tr][tr][td][table][tr][td][br] [/br][/td][td][br] [/br][/td][/tr][/table][/td][/tr][tr][td][table][tr][td][b][color=#3d85c6] Audio : &nbsp;[/color][/b][/td][td][br] [/br][/td][/tr][/table][/td][/tr][tr][td][table][tr][td][size=13]&nbsp;&nbsp;${I}[/size][/td][td][br] [/br][/td][/tr][/table][/td][/tr][tr][td][table][tr][td][br] [/br][b][color=#3d85c6]Sous-titres : &nbsp;[/color][/b][/td][td][br] [/br][/td][/tr][/table][/td][/tr][tr][td][table][tr][td][size=13]&nbsp;&nbsp;${A}[/size][br] [/br][/td][td][br] [/br][/td][/tr][/table][/td][/tr][/table][/td][/tr][/table][/td][/tr][tr][td][hr=#FF0000][/hr][/td][/tr]`,R&&(O+=`[tr][td][b][color=#3d85c6]Nom release : &nbsp; [/color][/b] [br] [/br] ${R}[/td][/tr]`);F&&(O+=`[tr][td][b][color=#3d85c6][br] [/br]Notes:  [/color][/b] [br] [/br] ${F}[/td][/tr]`);return O+="[/table][/td][/tr][/table]",O}(e,t,n,r,a)}}function Ew(e,t,n,r,i){const{isMovie:a,movie:s,tvShow:o,director:l,creators:c,mainActors:u,title:d,originalTitle:h,releaseDate:p,overview:f,tagline:m,voteAverage:g,voteCount:v,id:b,posterPath:y,genres:x,productionCountries:_}=jw(e,t,n);let w=`[center][b][font=Verdana][color=#3d85c6][size=29]${d}\n\n[/size][size=18](${new Date(p).getFullYear()})[/size][/color][/font][/b]\n\n[img]${N_.getImageUrl(y,"original")}[/img]${m?`[color=#ea9999][i]\n\n[/i][/color][color=#ea9999][i][b][font=Verdana][size=29]\n"${m}"[/size][/font][/b][/i][/color]`:""}\n\n[img]${(e=>"movie"===e?"https://i.imgur.com/gCBzIjL.png":"https://i.imgur.com/mHzDDIe.png")(n)}[/img]${a?"":"\n"}\n\n[font=Verdana][size=13]${a?`[b][color=#3d85c6]Titre original :[/color][/b] [i]${h}[/i]\n`:""}[b][color=#3d85c6]Pays :[/color][/b] [i]${_.map(e=>e.name).join(", ")||"N/A"}[/i]\n[b][color=#3d85c6]Genres :[/color][/b] ${Sw(x)}\n[b][color=#3d85c6]Date de sortie :[/color][/b] [i]${k=p,new Date(k).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})}[/i]\n${a?`[b][color=#3d85c6]Dure :[/color][/b] [i]${kw(s.runtime)}[/i]`:`[b][color=#3d85c6]Titre original :[/color][/b] [i]${h}[/i]\n[b][color=#3d85c6]Dure :[/color][/b] [i]${Nw(o.episode_run_time)}[/i]`}\n\n[b][color=#3d85c6]${a?"Ralisateur":"Crateur(s)"} :[/color][/b] [i]${a?(null==l?void 0:l.name)||"N/A":c.slice(0,2).map(e=>e.name).join(", ")||"N/A"}[/i]\n[color=#3d85c6][b]Acteurs :[/b] [/color][i]${u.map(e=>e.name).join(", ")}`;var k;const N=u.filter(e=>e.profile_path).map(e=>`[img]${N_.getImageUrl(e.profile_path,"w185")}[/img]`).join(" ");return N&&(w+=`\n${a?"\n":""}${N}`),w+=`\n[/i]\n\n[b][color=#3d85c6]Note des spectateurs :[/color][/b] [img]https://img.streetprez.com/note/${Math.round(10*g)}.svg[/img] [i]${g.toFixed(2)} (${v})[/i]\n\n[size=13][url=https://www.themoviedb.org/${a?"movie":"tv"}/${b}][b][color=#1e84cc]Plus d'info  >> [img]https://i.imgur.com/mxI05s2.png[/img][/color][/b][/url]\n\n${i?`[url=${i}][img]https://i.imgur.com/jKQt520.png[/img][b][color=#1e84cc]${a?"Bande Annonce":"Voir Bande Annonce"}[/color][/b][/url]`:""}[/size]\n\n[img]https://i.imgur.com/ATVsdeo.png[/img]\n\n[font=Verdana][size=13]${f||"Aucun synopsis disponible."}[/size][/font]\n\n\n[img]https://i.imgur.com/Ji92VqD.png[/img]`,r&&(w+=`\n[b][color=#3d85c6]${a?"Source":"Release source"} :[/color][/b] [i]${r.source||"N/A"}[/i]\n[b][color=#3d85c6]Qualit vido :[/color][/b] [i]${r.video.quality}[/i]\n[color=#3d85c6][b]Format vido :[/b] [/color][i]${r.video.format}[/i]\n[b][color=#3d85c6]Codec vido :[/color][/b] [i]${r.video.codec}[/i]\n[b][color=#3d85c6]Dbit vido :[/color][/b] [i]${_w(r.video.bitrate,r.video.bitrateUnit)} ${r.video.bitrateUnit}${a?"\n[/i]":"[/i]"}\n\n[b][color=#3d85c6]Audio${a?"(s)":""} :[/color][/b]`,w+=`\n${(e=>e.audio.map(e=>{let t=W_(e.languageCode);return!t.flag&&e.language&&(t=W_(e.language)),`${t.flag?`[img]${t.flag}[/img] `:""}${e.language} [${e.channels}] ${e.codec} @ ${_w(e.bitrate,e.bitrateUnit)} ${"Mbps"===e.bitrateUnit?"Mb/s":"kb/s"}`}).join("\n"))(r)}\n${a?"\n":""}[b][color=#3d85c6]Sous-titres :[/color][/b]\n${(e=>0===e.subtitles.length?"Aucun":e.subtitles.map(e=>{let t=W_(e.languageCode);!t.flag&&e.language&&(t=W_(e.language));const n=t.flag?`[img]${t.flag}[/img] `:"";let r="complets";return e.isForced?r="Forc":e.isSDH&&(r="SDH"),`${n}${e.language} : ${e.format} (${r})`}).join("\n"))(r)}`),w+="\n\n[img]https://i.imgur.com/ZutFbjb.png[/img]",(null==r?void 0:r.releaseGroup)&&(w+=`\n[b][color=#3d85c6]Release :[/color][/b] [i]${r.releaseGroup}[/i]`),(null==r?void 0:r.notes)&&(w+=`\n[b][color=#3d85c6]Notes :[/color][/b] [i]${r.notes}[/i]`),w+=`\n[b][color=#3d85c6]Taille totale :[/color][/b] ${ww((null==r?void 0:r.video.size)||0)}\n[color=#3d85c6][b]Nombre de fichier [/b][/color]: ${(null==r?void 0:r.numberOfFiles)||(a?1:o.number_of_episodes||1)}[/size][/font][/center]`,w}function Pw(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $w={exports:{}};
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/$w.exports=function e(t,n,r){function i(s,o){if(!n[s]){if(!t[s]){if(!o&&Pw)return Pw(s);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){return i(t[s][1][e]||e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var a=Pw,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){var r=e("./utils"),i=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,s,o,l,c,u=[],d=0,h=e.length,p=h,f="string"!==r.getTypeOf(e);d<e.length;)p=h-d,i=f?(t=e[d++],n=d<h?e[d++]:0,d<h?e[d++]:0):(t=e.charCodeAt(d++),n=d<h?e.charCodeAt(d++):0,d<h?e.charCodeAt(d++):0),s=t>>2,o=(3&t)<<4|n>>4,l=1<p?(15&n)<<2|i>>6:64,c=2<p?63&i:64,u.push(a.charAt(s)+a.charAt(o)+a.charAt(l)+a.charAt(c));return u.join("")},n.decode=function(e){var t,n,r,s,o,l,c=0,u=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var h,p=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===a.charAt(64)&&p--,e.charAt(e.length-2)===a.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=i.uint8array?new Uint8Array(0|p):new Array(0|p);c<e.length;)t=a.indexOf(e.charAt(c++))<<2|(s=a.indexOf(e.charAt(c++)))>>4,n=(15&s)<<4|(o=a.indexOf(e.charAt(c++)))>>2,r=(3&o)<<6|(l=a.indexOf(e.charAt(c++))),h[u++]=t,64!==o&&(h[u++]=n),64!==l&&(h[u++]=r);return h}},{"./support":30,"./utils":32}],2:[function(e,t,n){var r=e("./external"),i=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),s=e("./stream/DataLengthProbe");function o(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}o.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,n){return e.pipe(new a).pipe(new s("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new s("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var a=i,s=r+n;e^=-1;for(var o=r;o<s;o++)e=e>>>8^a[255&(e^t[o])];return-1^e}(0|t,e,e.length,0):function(e,t,n,r){var a=i,s=r+n;e^=-1;for(var o=r;o<s;o++)e=e>>>8^a[255&(e^t.charCodeAt(o))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),a=e("./utils"),s=e("./stream/GenericWorker"),o=r?"uint8array":"array";function l(e,t){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",a.inherits(l,s),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(o,e.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new l("Deflate",e)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,s,u){var d,h,p=e.file,f=e.compression,m=u!==o.utf8encode,g=a.transformTo("string",u(p.name)),v=a.transformTo("string",o.utf8encode(p.name)),b=p.comment,y=a.transformTo("string",u(b)),x=a.transformTo("string",o.utf8encode(b)),_=v.length!==p.name.length,w=x.length!==b.length,k="",N="",j="",S=p.dir,C=p.date,E={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(E.crc32=e.crc32,E.compressedSize=e.compressedSize,E.uncompressedSize=e.uncompressedSize);var P=0;t&&(P|=8),m||!_&&!w||(P|=2048);var $,T,D,I=0,A=0;S&&(I|=16),"UNIX"===s?(A=798,I|=($=p.unixPermissions,T=S,D=$,$||(D=T?16893:33204),(65535&D)<<16)):(A=20,I|=function(e){return 63&(e||0)}(p.dosPermissions)),d=C.getUTCHours(),d<<=6,d|=C.getUTCMinutes(),d<<=5,d|=C.getUTCSeconds()/2,h=C.getUTCFullYear()-1980,h<<=4,h|=C.getUTCMonth()+1,h<<=5,h|=C.getUTCDate(),_&&(N=r(1,1)+r(l(g),4)+v,k+="up"+r(N.length,2)+N),w&&(j=r(1,1)+r(l(y),4)+x,k+="uc"+r(j.length,2)+j);var R="";return R+="\n\0",R+=r(P,2),R+=f.magic,R+=r(d,2),R+=r(h,2),R+=r(E.crc32,4),R+=r(E.compressedSize,4),R+=r(E.uncompressedSize,4),R+=r(g.length,2),R+=r(k.length,2),{fileRecord:c.LOCAL_FILE_HEADER+R+g+k,dirRecord:c.CENTRAL_FILE_HEADER+r(A,2)+R+r(y.length,2)+"\0\0\0\0"+r(I,4)+r(i,4)+g+k+y}}var a=e("../utils"),s=e("../stream/GenericWorker"),o=e("../utf8"),l=e("../crc32"),c=e("../signature");function u(e,t,n,r){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(u,s),u.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,s.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t,n=this.streamFiles&&!e.file.dir,a=i(e,n,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(a.dirRecord),n)this.push({data:(t=e,c.DATA_DESCRIPTOR+r(t.crc32,4)+r(t.compressedSize,4)+r(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:a.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n,i,s,o,l,u,d=this.bytesWritten-e,h=(n=this.dirRecords.length,i=d,s=e,o=this.zipComment,l=this.encodeFileName,u=a.transformTo("string",l(o)),c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(n,2)+r(n,2)+r(i,4)+r(s,4)+r(u.length,2)+u);this.push({data:h,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},u.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!s.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(r){}return!0},u.prototype.lock=function(){s.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var a=new i(t.streamFiles,n,t.platform,t.encodeFileName),s=0;try{e.forEach(function(e,n){s++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),o=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,c=n.date;n._compressWorker(i,o).withStreamInfo("file",{name:e,dir:l,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(a)}),a.entriesCount=s}catch(o){a.error(o)}return a}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){var r=e("./utils"),i=e("./external"),a=e("./utf8"),s=e("./zipEntries"),o=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new i.Promise(function(t,n){var r=e.decompressed.getContentWorker().pipe(new o);r.on("error",function(e){n(e)}).on("end",function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var n=new s(t);return n.load(e),n}).then(function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var a=0;a<r.length;a++)n.push(c(r[a]));return i.Promise.all(n)}).then(function(e){for(var i=e.shift(),a=i.files,s=0;s<a.length;s++){var o=a[s],l=o.fileNameStr,c=r.resolve(o.fileNameStr);n.file(c,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:t.createFolders}),o.dir||(n.file(c).unsafeOriginalName=l)}return i.zipComment.length&&(n.comment=i.zipComment),n})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){var r=e("../utils"),i=e("../stream/GenericWorker");function a(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(a,i),a.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},a.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",function(e,t){i.push(e)||i._helper.pause(),n&&n(t)}).on("error",function(e){i.emit("error",e)}).on("end",function(){i.push(null)})}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){function r(e,t,n){var r,i=a.getTypeOf(t),o=a.extend(n||{},l);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(e=m(e)),o.createFolders&&(r=f(e))&&g.call(this,r,!0);var d="string"===i&&!1===o.binary&&!1===o.base64;n&&void 0!==n.binary||(o.binary=!d),(t instanceof c&&0===t.uncompressedSize||o.dir||!t||0===t.length)&&(o.base64=!1,o.binary=!0,t="",o.compression="STORE",i="string");var v=null;v=t instanceof c||t instanceof s?t:h.isNode&&h.isStream(t)?new p(e,t):a.prepareContent(e,t,o.binary,o.optimizedBinaryString,o.base64);var b=new u(e,v,o);this.files[e]=b}var i=e("./utf8"),a=e("./utils"),s=e("./stream/GenericWorker"),o=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),u=e("./zipObject"),d=e("./generate"),h=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),f=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=m(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function v(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach(function(n,r){e(n,r)&&t.push(r)}),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(v(e)){var i=e;return this.filter(function(e,t){return!t.dir&&i.test(e)})}var a=this.files[this.root+e];return a&&!a.dir?a:null},folder:function(e){if(!e)return this;if(v(e))return this.filter(function(t,n){return n.dir&&e.test(t)});var t=this.root+e,n=g.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter(function(t,n){return n.name.slice(0,e.length)===e}),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=a.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");a.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=d.generateWorker(this,n,r)}catch(l){(t=new s("error")).error(l)}return new o(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),a=this.length-4;0<=a;--a)if(this.data[a]===t&&this.data[a+1]===n&&this.data[a+2]===r&&this.data[a+3]===i)return a-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),a=this.readData(4);return t===a[0]&&n===a[1]&&r===a[2]&&i===a[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){var r=e("../utils"),i=e("../support"),a=e("./ArrayReader"),s=e("./StringReader"),o=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new o(e):i.uint8array?new l(r.transformTo("uint8array",e)):new a(r.transformTo("array",e)):new s(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){var r=e("./GenericWorker"),i=e("../utils");function a(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(a,r),a.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){var r=e("./GenericWorker"),i=e("../crc32");function a(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,r),a.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){var r=e("../utils"),i=e("./GenericWorker");function a(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(a,i),a.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){var r=e("../utils"),i=e("./GenericWorker");function a(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}r.inherits(a,i),a.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){var r=e("../utils"),i=e("./ConvertWorker"),a=e("./GenericWorker"),s=e("../base64"),o=e("../support"),l=e("../external"),c=null;if(o.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(h){}function u(e,t){return new l.Promise(function(n,i){var a=[],o=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",function(e,n){a.push(e),t&&t(n)}).on("error",function(e){a=[],i(e)}).on("end",function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return s.encode(t);default:return r.transformTo(e,t)}}(l,function(e,t){var n,r=0,i=null,a=0;for(n=0;n<t.length;n++)a+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(a),n=0;n<t.length;n++)i.set(t[n],r),r+=t[n].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(o,a),c);n(e)}catch(t){i(t)}a=[]}).resume()})}function d(e,t,n){var s=t;switch(t){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=t,this._mimeType=n,r.checkSupport(s),this._worker=e.pipe(new i(s)),e.lock()}catch(o){this._worker=new a("error"),this._worker.error(o)}}d.prototype={accumulate:function(e){return u(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,function(e){t.call(n,e.data,e.meta)}):this._worker.on(e,function(){r.delay(t,arguments,n)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(a){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=0===i.getBlob("application/zip").size}catch(s){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(a){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){for(var r=e("./utils"),i=e("./support"),a=e("./nodejsUtils"),s=e("./stream/GenericWorker"),o=new Array(256),l=0;l<256;l++)o[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function u(){s.call(this,"utf-8 encode")}o[254]=o[254]=1,n.utf8encode=function(e){return i.nodebuffer?a.newBufferFrom(e,"utf-8"):function(e){var t,n,r,a,s,o=e.length,l=0;for(a=0;a<o;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(l):new Array(l),a=s=0;s<l;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[s++]=n:(n<2048?t[s++]=192|n>>>6:(n<65536?t[s++]=224|n>>>12:(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63),t[s++]=128|n>>>6&63),t[s++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,a,s=e.length,l=new Array(2*s);for(t=n=0;t<s;)if((i=e[t++])<128)l[n++]=i;else if(4<(a=o[i]))l[n++]=65533,t+=a-1;else{for(i&=2===a?31:3===a?15:7;1<a&&t<s;)i=i<<6|63&e[t++],a--;1<a?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(c,s),c.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var a=t;(t=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),t.set(a,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var s=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}(t),l=t;s!==t.length&&(i.uint8array?(l=t.subarray(0,s),this.leftOver=t.subarray(s,t.length)):(l=t.slice(0,s),this.leftOver=t.slice(s,t.length))),this.push({data:n.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,r.inherits(u,s),u.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){var r=e("./support"),i=e("./base64"),a=e("./nodejsUtils"),s=e("./external");function o(e){return e}function l(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(i){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(a){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,n){var r=[],i=0,a=e.length;if(a<=n)return String.fromCharCode.apply(null,e);for(;i<a;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,a)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,a)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch(e){return!1}}()}};function u(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=c.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=c.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return c.stringifyByChunk(e,r,t)}catch(a){t=Math.floor(t/2)}return c.stringifyByChar(e)}function d(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=u;var h={};h.string={string:o,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return h.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,a.allocBuffer(e.length))}},h.array={string:u,array:o,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(e)}},h.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:o,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(new Uint8Array(e))}},h.uint8array={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:o,nodebuffer:function(e){return a.newBufferFrom(e)}},h.nodebuffer={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return h.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:o},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return h[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var i=t[r];"."===i||""===i&&0!==r&&r!==t.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&a.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){setImmediate(function(){e.apply(n||null,t||[])})},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,a,o,c){return s.Promise.resolve(t).then(function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)}):e}).then(function(t){var u,d=n.getTypeOf(t);return d?("arraybuffer"===d?t=n.transformTo("uint8array",t):"string"===d&&(c?t=i.decode(t):a&&!0!==o&&(t=l(u=t,r.uint8array?new Uint8Array(u.length):new Array(u.length)))),t):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){var r=e("./reader/readerFor"),i=e("./utils"),a=e("./signature"),s=e("./zipEntry"),o=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=o.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,a.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){var r=e("./reader/readerFor"),i=e("./utils"),a=e("./compressedObject"),s=e("./crc32"),o=e("./utf8"),l=e("./compressions"),c=e("./support");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var a=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||s(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||s(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null}},t.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),s=e("./utf8"),o=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var a=!this._dataBinary;a&&!r&&(t=t.pipe(new s.Utf8EncodeWorker)),!a&&r&&(t=t.pipe(new s.Utf8DecodeWorker))}catch(o){(t=new l("error")).error(o)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new s.Utf8EncodeWorker)),o.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof l?this._data:new a(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)r.prototype[c[d]]=u;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var a=0,s=new i(u),o=e.document.createTextNode("");s.observe(o,{characterData:!0}),n=function(){o.data=a=++a%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||n()}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){var r=e("immediate");function i(){}var a={},s=["REJECTED"],o=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&p(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r(function(){var r;try{r=t(n)}catch(i){return a.reject(e,i)}r===e?a.reject(e,new TypeError("Cannot resolve promise with itself")):a.resolve(e,r)})}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,a.reject(e,t))}function i(t){n||(n=!0,a.resolve(e,t))}var s=f(function(){t(i,r)});"error"===s.status&&r(s.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===o||"function"!=typeof t&&this.state===s)return this;var n=new this.constructor(i);return this.state!==l?d(n,this.state===o?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){a.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){a.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},a.resolve=function(e,t){var n=f(h,t);if("error"===n.status)return a.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=o,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},a.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:a.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return a.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),o=0,l=-1,c=new this(i);++l<n;)u(e[l],l);return c;function u(e,i){t.resolve(e).then(function(e){s[i]=e,++o!==n||r||(r=!0,a.resolve(c,s))},function(e){r||(r=!0,a.reject(c,e))})}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s,o=-1,l=new this(i);++o<n;)s=e[o],t.resolve(s).then(function(e){r||(r=!0,a.resolve(l,e))},function(e){r||(r=!0,a.reject(l,e))});return l}},{immediate:36}],38:[function(e,t,n){var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){var r=e("./zlib/deflate"),i=e("./utils/common"),a=e("./utils/strings"),s=e("./zlib/messages"),o=e("./zlib/zstream"),l=Object.prototype.toString,c=0,u=-1,d=0,h=8;function p(e){if(!(this instanceof p))return new p(e);this.options=i.assign({level:u,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c)throw new Error(s[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var f;if(f="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,f))!==c)throw new Error(s[n]);this._dict_set=!0}}function f(e,t){var n=new p(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}p.prototype.push=function(e,t){var n,s,o=this.strm,u=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,"string"==typeof e?o.input=a.string2buf(e):"[object ArrayBuffer]"===l.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new i.Buf8(u),o.next_out=0,o.avail_out=u),1!==(n=r.deflate(o,s))&&n!==c)return this.onEnd(n),!(this.ended=!0);0!==o.avail_out&&(0!==o.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(a.buf2binstring(i.shrinkBuf(o.output,o.next_out))):this.onData(i.shrinkBuf(o.output,o.next_out)))}while((0<o.avail_in||0===o.avail_out)&&1!==n);return 4===s?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==s||(this.onEnd(c),!(o.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=p,n.deflate=f,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,f(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){var r=e("./zlib/inflate"),i=e("./utils/common"),a=e("./utils/strings"),s=e("./zlib/constants"),o=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==s.Z_OK)throw new Error(o[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function h(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}d.prototype.push=function(e,t){var n,o,l,c,d,h,p=this.strm,f=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?p.input=a.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(f),p.next_out=0,p.avail_out=f),(n=r.inflate(p,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&m&&(h="string"==typeof m?a.string2buf(m):"[object ArrayBuffer]"===u.call(m)?new Uint8Array(m):m,n=r.inflateSetDictionary(this.strm,h)),n===s.Z_BUF_ERROR&&!0===g&&(n=s.Z_OK,g=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&n!==s.Z_STREAM_END&&(0!==p.avail_in||o!==s.Z_FINISH&&o!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(l=a.utf8border(p.output,p.next_out),c=p.next_out-l,d=a.buf2string(p.output,l),p.next_out=c,p.avail_out=f-c,c&&i.arraySet(p.output,p.output,l,c,0),this.onData(d)):this.onData(i.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(g=!0)}while((0<p.avail_in||0===p.avail_out)&&n!==s.Z_STREAM_END);return n===s.Z_STREAM_END&&(o=s.Z_FINISH),o===s.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):o!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(p.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=h,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},n.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){var t,n,r,i,a,s;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(s=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)a=e[t],s.set(a,i),i+=a.length;return s}},a={arraySet:function(e,t,n,r,i){for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,a))},n.setTyped(r)},{}],42:[function(e,t,n){var r=e("./common"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(c){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(c){a=!1}for(var s=new r.Buf8(256),o=0;o<256;o++)s[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function l(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",s=0;s<t;s++)n+=String.fromCharCode(e[s]);return n}s[254]=s[254]=1,n.string2buf=function(e){var t,n,i,a,s,o=e.length,l=0;for(a=0;a<o;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),a=s=0;s<l;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),n<128?t[s++]=n:(n<2048?t[s++]=192|n>>>6:(n<65536?t[s++]=224|n>>>12:(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63),t[s++]=128|n>>>6&63),t[s++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,a,o=t||e.length,c=new Array(2*o);for(n=r=0;n<o;)if((i=e[n++])<128)c[r++]=i;else if(4<(a=s[i]))c[r++]=65533,n+=a-1;else{for(i&=2===a?31:3===a?15:7;1<a&&n<o;)i=i<<6|63&e[n++],a--;1<a?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return l(c,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){t.exports=function(e,t,n,r){for(var i=65535&e,a=e>>>16&65535,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;a=a+(i=i+t[r++]|0)|0,--s;);i%=65521,a%=65521}return i|a<<16}},{}],44:[function(e,t,n){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var a=r,s=i+n;e^=-1;for(var o=i;o<s;o++)e=e>>>8^a[255&(e^t[o])];return-1^e}},{}],46:[function(e,t,n){var r,i=e("../utils/common"),a=e("./trees"),s=e("./adler32"),o=e("./crc32"),l=e("./messages"),c=0,u=4,d=0,h=-2,p=-1,f=4,m=2,g=8,v=9,b=286,y=30,x=19,_=2*b+1,w=15,k=3,N=258,j=N+k+1,S=42,C=113,E=1,P=2,$=3,T=4;function D(e,t){return e.msg=l[t],t}function I(e){return(e<<1)-(4<e?9:0)}function A(e){for(var t=e.length;0<=--t;)e[t]=0}function R(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function F(e,t){a._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,R(e.strm)}function O(e,t){e.pending_buf[e.pending++]=t}function M(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function z(e,t){var n,r,i=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-j?e.strstart-(e.w_size-j):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+N,p=c[a+s-1],f=c[a+s];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(n=t)+s]===f&&c[n+s-1]===p&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<h);if(r=N-(h-a),a=h-N,s<r){if(e.match_start=t,o<=(s=r))break;p=c[a+s-1],f=c[a+s]}}}while((t=d[t&u])>l&&0!=--i);return s<=e.lookahead?s:e.lookahead}function L(e){var t,n,r,a,l,c,u,d,h,p,f=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-j)){for(i.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=n=e.hash_size;r=e.head[--t],e.head[t]=f<=r?r-f:0,--n;);for(t=n=f;r=e.prev[--t],e.prev[t]=f<=r?r-f:0,--n;);a+=f}if(0===e.strm.avail_in)break;if(c=e.strm,u=e.window,d=e.strstart+e.lookahead,p=void 0,(h=a)<(p=c.avail_in)&&(p=h),n=0===p?0:(c.avail_in-=p,i.arraySet(u,c.input,c.next_in,p,d),1===c.state.wrap?c.adler=s(c.adler,u,p,d):2===c.state.wrap&&(c.adler=o(c.adler,u,p,d)),c.next_in+=p,c.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=k)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+k-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<k)););}while(e.lookahead<j&&0!==e.strm.avail_in)}function B(e,t){for(var n,r;;){if(e.lookahead<j){if(L(e),e.lookahead<j&&t===c)return E;if(0===e.lookahead)break}if(n=0,e.lookahead>=k&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-j&&(e.match_length=z(e,n)),e.match_length>=k)if(r=a._tr_tally(e,e.strstart-e.match_start,e.match_length-k),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=k){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(F(e,!1),0===e.strm.avail_out))return E}return e.insert=e.strstart<k-1?e.strstart:k-1,t===u?(F(e,!0),0===e.strm.avail_out?$:T):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?E:P}function U(e,t){for(var n,r,i;;){if(e.lookahead<j){if(L(e),e.lookahead<j&&t===c)return E;if(0===e.lookahead)break}if(n=0,e.lookahead>=k&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=k-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-j&&(e.match_length=z(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===k&&4096<e.strstart-e.match_start)&&(e.match_length=k-1)),e.prev_length>=k&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-k,r=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-k),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=k-1,e.strstart++,r&&(F(e,!1),0===e.strm.avail_out))return E}else if(e.match_available){if((r=a._tr_tally(e,0,e.window[e.strstart-1]))&&F(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return E}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<k-1?e.strstart:k-1,t===u?(F(e,!0),0===e.strm.avail_out?$:T):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?E:P}function H(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function V(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*_),this.dyn_dtree=new i.Buf16(2*(2*y+1)),this.bl_tree=new i.Buf16(2*(2*x+1)),A(this.dyn_ltree),A(this.dyn_dtree),A(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(w+1),this.heap=new i.Buf16(2*b+1),A(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*b+1),A(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function q(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=m,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?S:C,e.adler=2===t.wrap?0:1,t.last_flush=c,a._tr_init(t),d):D(e,h)}function W(e){var t,n=q(e);return n===d&&((t=e.state).window_size=2*t.w_size,A(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=k-1,t.match_available=0,t.ins_h=0),n}function K(e,t,n,r,a,s){if(!e)return h;var o=1;if(t===p&&(t=6),r<0?(o=0,r=-r):15<r&&(o=2,r-=16),a<1||v<a||n!==g||r<8||15<r||t<0||9<t||s<0||f<s)return D(e,h);8===r&&(r=9);var l=new V;return(e.state=l).strm=e,l.wrap=o,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+k-1)/k),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=s,l.method=n,W(e)}r=[new H(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(L(e),0===e.lookahead&&t===c)return E;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,F(e,!1),0===e.strm.avail_out))return E;if(e.strstart-e.block_start>=e.w_size-j&&(F(e,!1),0===e.strm.avail_out))return E}return e.insert=0,t===u?(F(e,!0),0===e.strm.avail_out?$:T):(e.strstart>e.block_start&&(F(e,!1),e.strm.avail_out),E)}),new H(4,4,8,4,B),new H(4,5,16,8,B),new H(4,6,32,32,B),new H(4,4,16,16,U),new H(8,16,32,32,U),new H(8,16,128,128,U),new H(8,32,128,256,U),new H(32,128,258,1024,U),new H(32,258,258,4096,U)],n.deflateInit=function(e,t){return K(e,t,g,15,8,0)},n.deflateInit2=K,n.deflateReset=W,n.deflateResetKeep=q,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?h:(e.state.gzhead=t,d):h},n.deflate=function(e,t){var n,i,s,l;if(!e||!e.state||5<t||t<0)return e?D(e,h):h;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==u)return D(e,0===e.avail_out?-5:h);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===S)if(2===i.wrap)e.adler=0,O(i,31),O(i,139),O(i,8),i.gzhead?(O(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),O(i,255&i.gzhead.time),O(i,i.gzhead.time>>8&255),O(i,i.gzhead.time>>16&255),O(i,i.gzhead.time>>24&255),O(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),O(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(O(i,255&i.gzhead.extra.length),O(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=o(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(O(i,0),O(i,0),O(i,0),O(i,0),O(i,0),O(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),O(i,3),i.status=C);else{var p=g+(i.w_bits-8<<4)<<8;p|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(p|=32),p+=31-p%31,i.status=C,M(i,p),0!==i.strstart&&(M(i,e.adler>>>16),M(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),R(e),s=i.pending,i.pending!==i.pending_buf_size));)O(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),R(e),s=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,O(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),R(e),s=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,O(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>s&&(e.adler=o(e.adler,i.pending_buf,i.pending-s,s)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&R(e),i.pending+2<=i.pending_buf_size&&(O(i,255&e.adler),O(i,e.adler>>8&255),e.adler=0,i.status=C)):i.status=C),0!==i.pending){if(R(e),0===e.avail_out)return i.last_flush=-1,d}else if(0===e.avail_in&&I(t)<=I(n)&&t!==u)return D(e,-5);if(666===i.status&&0!==e.avail_in)return D(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==c&&666!==i.status){var f=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(L(e),0===e.lookahead)){if(t===c)return E;break}if(e.match_length=0,n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(F(e,!1),0===e.strm.avail_out))return E}return e.insert=0,t===u?(F(e,!0),0===e.strm.avail_out?$:T):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?E:P}(i,t):3===i.strategy?function(e,t){for(var n,r,i,s,o=e.window;;){if(e.lookahead<=N){if(L(e),e.lookahead<=N&&t===c)return E;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=k&&0<e.strstart&&(r=o[i=e.strstart-1])===o[++i]&&r===o[++i]&&r===o[++i]){s=e.strstart+N;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);e.match_length=N-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=k?(n=a._tr_tally(e,1,e.match_length-k),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(F(e,!1),0===e.strm.avail_out))return E}return e.insert=0,t===u?(F(e,!0),0===e.strm.avail_out?$:T):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?E:P}(i,t):r[i.level].func(i,t);if(f!==$&&f!==T||(i.status=666),f===E||f===$)return 0===e.avail_out&&(i.last_flush=-1),d;if(f===P&&(1===t?a._tr_align(i):5!==t&&(a._tr_stored_block(i,0,0,!1),3===t&&(A(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),R(e),0===e.avail_out))return i.last_flush=-1,d}return t!==u?d:i.wrap<=0?1:(2===i.wrap?(O(i,255&e.adler),O(i,e.adler>>8&255),O(i,e.adler>>16&255),O(i,e.adler>>24&255),O(i,255&e.total_in),O(i,e.total_in>>8&255),O(i,e.total_in>>16&255),O(i,e.total_in>>24&255)):(M(i,e.adler>>>16),M(i,65535&e.adler)),R(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?d:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==S&&69!==t&&73!==t&&91!==t&&103!==t&&t!==C&&666!==t?D(e,h):(e.state=null,t===C?D(e,-3):d):h},n.deflateSetDictionary=function(e,t){var n,r,a,o,l,c,u,p,f=t.length;if(!e||!e.state)return h;if(2===(o=(n=e.state).wrap)||1===o&&n.status!==S||n.lookahead)return h;for(1===o&&(e.adler=s(e.adler,t,f,0)),n.wrap=0,f>=n.w_size&&(0===o&&(A(n.head),n.strstart=0,n.block_start=0,n.insert=0),p=new i.Buf8(n.w_size),i.arraySet(p,t,f-n.w_size,n.w_size,0),t=p,f=n.w_size),l=e.avail_in,c=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=t,L(n);n.lookahead>=k;){for(r=n.strstart,a=n.lookahead-(k-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+k-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--a;);n.strstart=r,n.lookahead=k-1,L(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=k-1,n.match_available=0,e.next_in=c,e.input=u,e.avail_in=l,n.wrap=o,d},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){t.exports=function(e,t){var n,r,i,a,s,o,l,c,u,d,h,p,f,m,g,v,b,y,x,_,w,k,N,j,S;n=e.state,r=e.next_in,j=e.input,i=r+(e.avail_in-5),a=e.next_out,S=e.output,s=a-(t-e.avail_out),o=a+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,h=n.window,p=n.hold,f=n.bits,m=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;e:do{f<15&&(p+=j[r++]<<f,f+=8,p+=j[r++]<<f,f+=8),y=m[p&v];t:for(;;){if(p>>>=x=y>>>24,f-=x,0==(x=y>>>16&255))S[a++]=65535&y;else{if(!(16&x)){if(!(64&x)){y=m[(65535&y)+(p&(1<<x)-1)];continue t}if(32&x){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}_=65535&y,(x&=15)&&(f<x&&(p+=j[r++]<<f,f+=8),_+=p&(1<<x)-1,p>>>=x,f-=x),f<15&&(p+=j[r++]<<f,f+=8,p+=j[r++]<<f,f+=8),y=g[p&b];n:for(;;){if(p>>>=x=y>>>24,f-=x,!(16&(x=y>>>16&255))){if(!(64&x)){y=g[(65535&y)+(p&(1<<x)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(w=65535&y,f<(x&=15)&&(p+=j[r++]<<f,(f+=8)<x&&(p+=j[r++]<<f,f+=8)),l<(w+=p&(1<<x)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=x,f-=x,(x=a-s)<w){if(u<(x=w-x)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(N=h,(k=0)===d){if(k+=c-x,x<_){for(_-=x;S[a++]=h[k++],--x;);k=a-w,N=S}}else if(d<x){if(k+=c+d-x,(x-=d)<_){for(_-=x;S[a++]=h[k++],--x;);if(k=0,d<_){for(_-=x=d;S[a++]=h[k++],--x;);k=a-w,N=S}}}else if(k+=d-x,x<_){for(_-=x;S[a++]=h[k++],--x;);k=a-w,N=S}for(;2<_;)S[a++]=N[k++],S[a++]=N[k++],S[a++]=N[k++],_-=3;_&&(S[a++]=N[k++],1<_&&(S[a++]=N[k++]))}else{for(k=a-w;S[a++]=S[k++],S[a++]=S[k++],S[a++]=S[k++],2<(_-=3););_&&(S[a++]=S[k++],1<_&&(S[a++]=S[k++]))}break}}break}}while(r<i&&a<o);r-=_=f>>3,p&=(1<<(f-=_<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=a<o?o-a+257:257-(a-o),n.hold=p,n.bits=f}},{}],49:[function(e,t,n){var r=e("../utils/common"),i=e("./adler32"),a=e("./crc32"),s=e("./inffast"),o=e("./inftrees"),l=1,c=2,u=0,d=-2,h=1,p=852,f=592;function m(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=h,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(p),t.distcode=t.distdyn=new r.Buf32(f),t.sane=1,t.back=-1,u):d}function b(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,v(e)):d}function y(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?d:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,b(e))):d}function x(e,t){var n,r;return e?(r=new g,(e.state=r).window=null,(n=y(e,t))!==u&&(e.state=null),n):d}var _,w,k=!0;function N(e){if(k){var t;for(_=new r.Buf32(512),w=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(l,e.lens,0,288,_,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(c,e.lens,0,32,w,0,e.work,{bits:5}),k=!1}e.lencode=_,e.lenbits=9,e.distcode=w,e.distbits=5}function j(e,t,n,i){var a,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new r.Buf8(s.wsize)),i>=s.wsize?(r.arraySet(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(a=s.wsize-s.wnext)&&(a=i),r.arraySet(s.window,t,n-i,a,s.wnext),(i-=a)?(r.arraySet(s.window,t,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0}n.inflateReset=b,n.inflateReset2=y,n.inflateResetKeep=v,n.inflateInit=function(e){return x(e,15)},n.inflateInit2=x,n.inflate=function(e,t){var n,p,f,g,v,b,y,x,_,w,k,S,C,E,P,$,T,D,I,A,R,F,O,M,z=0,L=new r.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;12===(n=e.state).mode&&(n.mode=13),v=e.next_out,f=e.output,y=e.avail_out,g=e.next_in,p=e.input,b=e.avail_in,x=n.hold,_=n.bits,w=b,k=y,F=u;e:for(;;)switch(n.mode){case h:if(0===n.wrap){n.mode=13;break}for(;_<16;){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}if(2&n.wrap&&35615===x){L[n.check=0]=255&x,L[1]=x>>>8&255,n.check=a(n.check,L,2,0),_=x=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&x)<<8)+(x>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&x)){e.msg="unknown compression method",n.mode=30;break}if(_-=4,R=8+(15&(x>>>=4)),0===n.wbits)n.wbits=R;else if(R>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<R,e.adler=n.check=1,n.mode=512&x?10:12,_=x=0;break;case 2:for(;_<16;){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}if(n.flags=x,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=x>>8&1),512&n.flags&&(L[0]=255&x,L[1]=x>>>8&255,n.check=a(n.check,L,2,0)),_=x=0,n.mode=3;case 3:for(;_<32;){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}n.head&&(n.head.time=x),512&n.flags&&(L[0]=255&x,L[1]=x>>>8&255,L[2]=x>>>16&255,L[3]=x>>>24&255,n.check=a(n.check,L,4,0)),_=x=0,n.mode=4;case 4:for(;_<16;){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}n.head&&(n.head.xflags=255&x,n.head.os=x>>8),512&n.flags&&(L[0]=255&x,L[1]=x>>>8&255,n.check=a(n.check,L,2,0)),_=x=0,n.mode=5;case 5:if(1024&n.flags){for(;_<16;){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}n.length=x,n.head&&(n.head.extra_len=x),512&n.flags&&(L[0]=255&x,L[1]=x>>>8&255,n.check=a(n.check,L,2,0)),_=x=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(b<(S=n.length)&&(S=b),S&&(n.head&&(R=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,p,g,S,R)),512&n.flags&&(n.check=a(n.check,p,S,g)),b-=S,g+=S,n.length-=S),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===b)break e;for(S=0;R=p[g+S++],n.head&&R&&n.length<65536&&(n.head.name+=String.fromCharCode(R)),R&&S<b;);if(512&n.flags&&(n.check=a(n.check,p,S,g)),b-=S,g+=S,R)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===b)break e;for(S=0;R=p[g+S++],n.head&&R&&n.length<65536&&(n.head.comment+=String.fromCharCode(R)),R&&S<b;);if(512&n.flags&&(n.check=a(n.check,p,S,g)),b-=S,g+=S,R)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;_<16;){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}if(x!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}_=x=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;_<32;){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}e.adler=n.check=m(x),_=x=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=v,e.avail_out=y,e.next_in=g,e.avail_in=b,n.hold=x,n.bits=_,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){x>>>=7&_,_-=7&_,n.mode=27;break}for(;_<3;){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}switch(n.last=1&x,_-=1,3&(x>>>=1)){case 0:n.mode=14;break;case 1:if(N(n),n.mode=20,6!==t)break;x>>>=2,_-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}x>>>=2,_-=2;break;case 14:for(x>>>=7&_,_-=7&_;_<32;){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}if((65535&x)!=(x>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&x,_=x=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(S=n.length){if(b<S&&(S=b),y<S&&(S=y),0===S)break e;r.arraySet(f,p,g,S,v),b-=S,g+=S,y-=S,v+=S,n.length-=S;break}n.mode=12;break;case 17:for(;_<14;){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}if(n.nlen=257+(31&x),x>>>=5,_-=5,n.ndist=1+(31&x),x>>>=5,_-=5,n.ncode=4+(15&x),x>>>=4,_-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;_<3;){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}n.lens[B[n.have++]]=7&x,x>>>=3,_-=3}for(;n.have<19;)n.lens[B[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,O={bits:n.lenbits},F=o(0,n.lens,0,19,n.lencode,0,n.work,O),n.lenbits=O.bits,F){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;$=(z=n.lencode[x&(1<<n.lenbits)-1])>>>16&255,T=65535&z,!((P=z>>>24)<=_);){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}if(T<16)x>>>=P,_-=P,n.lens[n.have++]=T;else{if(16===T){for(M=P+2;_<M;){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}if(x>>>=P,_-=P,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}R=n.lens[n.have-1],S=3+(3&x),x>>>=2,_-=2}else if(17===T){for(M=P+3;_<M;){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}_-=P,R=0,S=3+(7&(x>>>=P)),x>>>=3,_-=3}else{for(M=P+7;_<M;){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}_-=P,R=0,S=11+(127&(x>>>=P)),x>>>=7,_-=7}if(n.have+S>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;S--;)n.lens[n.have++]=R}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,O={bits:n.lenbits},F=o(l,n.lens,0,n.nlen,n.lencode,0,n.work,O),n.lenbits=O.bits,F){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,O={bits:n.distbits},F=o(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,O),n.distbits=O.bits,F){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=b&&258<=y){e.next_out=v,e.avail_out=y,e.next_in=g,e.avail_in=b,n.hold=x,n.bits=_,s(e,k),v=e.next_out,f=e.output,y=e.avail_out,g=e.next_in,p=e.input,b=e.avail_in,x=n.hold,_=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;$=(z=n.lencode[x&(1<<n.lenbits)-1])>>>16&255,T=65535&z,!((P=z>>>24)<=_);){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}if($&&!(240&$)){for(D=P,I=$,A=T;$=(z=n.lencode[A+((x&(1<<D+I)-1)>>D)])>>>16&255,T=65535&z,!(D+(P=z>>>24)<=_);){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}x>>>=D,_-=D,n.back+=D}if(x>>>=P,_-=P,n.back+=P,n.length=T,0===$){n.mode=26;break}if(32&$){n.back=-1,n.mode=12;break}if(64&$){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&$,n.mode=22;case 22:if(n.extra){for(M=n.extra;_<M;){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}n.length+=x&(1<<n.extra)-1,x>>>=n.extra,_-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;$=(z=n.distcode[x&(1<<n.distbits)-1])>>>16&255,T=65535&z,!((P=z>>>24)<=_);){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}if(!(240&$)){for(D=P,I=$,A=T;$=(z=n.distcode[A+((x&(1<<D+I)-1)>>D)])>>>16&255,T=65535&z,!(D+(P=z>>>24)<=_);){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}x>>>=D,_-=D,n.back+=D}if(x>>>=P,_-=P,n.back+=P,64&$){e.msg="invalid distance code",n.mode=30;break}n.offset=T,n.extra=15&$,n.mode=24;case 24:if(n.extra){for(M=n.extra;_<M;){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}n.offset+=x&(1<<n.extra)-1,x>>>=n.extra,_-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===y)break e;if(S=k-y,n.offset>S){if((S=n.offset-S)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}C=S>n.wnext?(S-=n.wnext,n.wsize-S):n.wnext-S,S>n.length&&(S=n.length),E=n.window}else E=f,C=v-n.offset,S=n.length;for(y<S&&(S=y),y-=S,n.length-=S;f[v++]=E[C++],--S;);0===n.length&&(n.mode=21);break;case 26:if(0===y)break e;f[v++]=n.length,y--,n.mode=21;break;case 27:if(n.wrap){for(;_<32;){if(0===b)break e;b--,x|=p[g++]<<_,_+=8}if(k-=y,e.total_out+=k,n.total+=k,k&&(e.adler=n.check=n.flags?a(n.check,f,k,v-k):i(n.check,f,k,v-k)),k=y,(n.flags?x:m(x))!==n.check){e.msg="incorrect data check",n.mode=30;break}_=x=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;_<32;){if(0===b)break e;b--,x+=p[g++]<<_,_+=8}if(x!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}_=x=0}n.mode=29;case 29:F=1;break e;case 30:F=-3;break e;case 31:return-4;default:return d}return e.next_out=v,e.avail_out=y,e.next_in=g,e.avail_in=b,n.hold=x,n.bits=_,(n.wsize||k!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&j(e,e.output,e.next_out,k-e.avail_out)?(n.mode=31,-4):(w-=e.avail_in,k-=e.avail_out,e.total_in+=w,e.total_out+=k,n.total+=k,n.wrap&&k&&(e.adler=n.check=n.flags?a(n.check,f,k,e.next_out-k):i(n.check,f,k,e.next_out-k)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==w&&0===k||4===t)&&F===u&&(F=-5),F)},n.inflateEnd=function(e){if(!e||!e.state)return d;var t=e.state;return t.window&&(t.window=null),e.state=null,u},n.inflateGetHeader=function(e,t){var n;return e&&e.state&&2&(n=e.state).wrap?((n.head=t).done=!1,u):d},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?d:11===n.mode&&i(1,t,r,0)!==n.check?-3:j(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,u):d},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,c,u,d,h){var p,f,m,g,v,b,y,x,_,w=h.bits,k=0,N=0,j=0,S=0,C=0,E=0,P=0,$=0,T=0,D=0,I=null,A=0,R=new r.Buf16(16),F=new r.Buf16(16),O=null,M=0;for(k=0;k<=15;k++)R[k]=0;for(N=0;N<l;N++)R[t[n+N]]++;for(C=w,S=15;1<=S&&0===R[S];S--);if(S<C&&(C=S),0===S)return c[u++]=20971520,c[u++]=20971520,h.bits=1,0;for(j=1;j<S&&0===R[j];j++);for(C<j&&(C=j),k=$=1;k<=15;k++)if($<<=1,($-=R[k])<0)return-1;if(0<$&&(0===e||1!==S))return-1;for(F[1]=0,k=1;k<15;k++)F[k+1]=F[k]+R[k];for(N=0;N<l;N++)0!==t[n+N]&&(d[F[t[n+N]]++]=N);if(b=0===e?(I=O=d,19):1===e?(I=i,A-=257,O=a,M-=257,256):(I=s,O=o,-1),k=j,v=u,P=N=D=0,m=-1,g=(T=1<<(E=C))-1,1===e&&852<T||2===e&&592<T)return 1;for(;;){for(y=k-P,_=d[N]<b?(x=0,d[N]):d[N]>b?(x=O[M+d[N]],I[A+d[N]]):(x=96,0),p=1<<k-P,j=f=1<<E;c[v+(D>>P)+(f-=p)]=y<<24|x<<16|_,0!==f;);for(p=1<<k-1;D&p;)p>>=1;if(0!==p?(D&=p-1,D+=p):D=0,N++,0==--R[k]){if(k===S)break;k=t[n+d[N]]}if(C<k&&(D&g)!==m){for(0===P&&(P=C),v+=j,$=1<<(E=k-P);E+P<S&&!(($-=R[E+P])<=0);)E++,$<<=1;if(T+=1<<E,1===e&&852<T||2===e&&592<T)return 1;c[m=D&g]=C<<24|E<<16|v-u}}return 0!==D&&(c[v+D]=k-P<<24|64<<16),h.bits=C,0}},{"../utils/common":41}],51:[function(e,t,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){var r=e("../utils/common"),i=0,a=1;function s(e){for(var t=e.length;0<=--t;)e[t]=0}var o=0,l=29,c=256,u=c+1+l,d=30,h=19,p=2*u+1,f=15,m=16,g=7,v=256,b=16,y=17,x=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],j=new Array(2*(u+2));s(j);var S=new Array(2*d);s(S);var C=new Array(512);s(C);var E=new Array(256);s(E);var P=new Array(l);s(P);var $,T,D,I=new Array(d);function A(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function R(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function F(e){return e<256?C[e]:C[256+(e>>>7)]}function O(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function M(e,t,n){e.bi_valid>m-n?(e.bi_buf|=t<<e.bi_valid&65535,O(e,e.bi_buf),e.bi_buf=t>>m-e.bi_valid,e.bi_valid+=n-m):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function z(e,t,n){M(e,n[2*t],n[2*t+1])}function L(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function B(e,t,n){var r,i,a=new Array(f+1),s=0;for(r=1;r<=f;r++)a[r]=s=s+n[r-1]<<1;for(i=0;i<=t;i++){var o=e[2*i+1];0!==o&&(e[2*i]=L(a[o]++,o))}}function U(e){var t;for(t=0;t<u;t++)e.dyn_ltree[2*t]=0;for(t=0;t<d;t++)e.dyn_dtree[2*t]=0;for(t=0;t<h;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*v]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function H(e){8<e.bi_valid?O(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function V(e,t,n,r){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]}function q(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&V(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!V(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function W(e,t,n){var r,i,a,s,o=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],i=e.pending_buf[e.l_buf+o],o++,0===r?z(e,i,t):(z(e,(a=E[i])+c+1,t),0!==(s=_[a])&&M(e,i-=P[a],s),z(e,a=F(--r),n),0!==(s=w[a])&&M(e,r-=I[a],s)),o<e.last_lit;);z(e,v,t)}function K(e,t){var n,r,i,a=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=p,n=0;n<l;n++)0!==a[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,o&&(e.static_len-=s[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;1<=n;n--)q(e,a,n);for(i=l;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],q(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,q(e,a,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,a,s,o,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,g=t.stat_desc.max_length,v=0;for(a=0;a<=f;a++)e.bl_count[a]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<p;n++)g<(a=l[2*l[2*(r=e.heap[n])+1]+1]+1)&&(a=g,v++),l[2*r+1]=a,c<r||(e.bl_count[a]++,s=0,m<=r&&(s=h[r-m]),o=l[2*r],e.opt_len+=o*(a+s),d&&(e.static_len+=o*(u[2*r+1]+s)));if(0!==v){do{for(a=g-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[g]--,v-=2}while(0<v);for(a=g;0!==a;a--)for(r=e.bl_count[a];0!==r;)c<(i=e.heap[--n])||(l[2*i+1]!==a&&(e.opt_len+=(a-l[2*i+1])*l[2*i],l[2*i+1]=a),r--)}}(e,t),B(a,c,e.bl_count)}function G(e,t,n){var r,i,a=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++o<l&&i===s||(o<c?e.bl_tree[2*i]+=o:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*b]++):o<=10?e.bl_tree[2*y]++:e.bl_tree[2*x]++,a=i,c=(o=0)===s?(l=138,3):i===s?(l=6,3):(l=7,4))}function Y(e,t,n){var r,i,a=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++o<l&&i===s)){if(o<c)for(;z(e,i,e.bl_tree),0!=--o;);else 0!==i?(i!==a&&(z(e,i,e.bl_tree),o--),z(e,b,e.bl_tree),M(e,o-3,2)):o<=10?(z(e,y,e.bl_tree),M(e,o-3,3)):(z(e,x,e.bl_tree),M(e,o-11,7));a=i,c=(o=0)===s?(l=138,3):i===s?(l=6,3):(l=7,4)}}s(I);var Z=!1;function X(e,t,n,i){var a,s,l;M(e,(o<<1)+(i?1:0),3),s=t,l=n,H(a=e),O(a,l),O(a,~l),r.arraySet(a.pending_buf,a.window,s,l,a.pending),a.pending+=l}n._tr_init=function(e){Z||(function(){var e,t,n,r,i,a=new Array(f+1);for(r=n=0;r<l-1;r++)for(P[r]=n,e=0;e<1<<_[r];e++)E[n++]=r;for(E[n-1]=r,r=i=0;r<16;r++)for(I[r]=i,e=0;e<1<<w[r];e++)C[i++]=r;for(i>>=7;r<d;r++)for(I[r]=i<<7,e=0;e<1<<w[r]-7;e++)C[256+i++]=r;for(t=0;t<=f;t++)a[t]=0;for(e=0;e<=143;)j[2*e+1]=8,e++,a[8]++;for(;e<=255;)j[2*e+1]=9,e++,a[9]++;for(;e<=279;)j[2*e+1]=7,e++,a[7]++;for(;e<=287;)j[2*e+1]=8,e++,a[8]++;for(B(j,u+1,a),e=0;e<d;e++)S[2*e+1]=5,S[2*e]=L(e,5);$=new A(j,_,c+1,u,f),T=new A(S,w,0,d,f),D=new A(new Array(0),k,0,h,g)}(),Z=!0),e.l_desc=new R(e.dyn_ltree,$),e.d_desc=new R(e.dyn_dtree,T),e.bl_desc=new R(e.bl_tree,D),e.bi_buf=0,e.bi_valid=0,U(e)},n._tr_stored_block=X,n._tr_flush_block=function(e,t,n,r){var s,o,l=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return a;for(t=32;t<c;t++)if(0!==e.dyn_ltree[2*t])return a;return i}(e)),K(e,e.l_desc),K(e,e.d_desc),l=function(e){var t;for(G(e,e.dyn_ltree,e.l_desc.max_code),G(e,e.dyn_dtree,e.d_desc.max_code),K(e,e.bl_desc),t=h-1;3<=t&&0===e.bl_tree[2*N[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),s=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=s&&(s=o)):s=o=n+5,n+4<=s&&-1!==t?X(e,t,n,r):4===e.strategy||o===s?(M(e,2+(r?1:0),3),W(e,j,S)):(M(e,4+(r?1:0),3),function(e,t,n,r){var i;for(M(e,t-257,5),M(e,n-1,5),M(e,r-4,4),i=0;i<r;i++)M(e,e.bl_tree[2*N[i]+1],3);Y(e,e.dyn_ltree,t-1),Y(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),W(e,e.dyn_ltree,e.dyn_dtree)),U(e),r&&H(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(E[n]+c+1)]++,e.dyn_dtree[2*F(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){var t;M(e,2,3),z(e,v,j),16===(t=e).bi_valid?(O(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,t,n){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){if(!e.setImmediate){var n,r,i,a,s=1,o={},l=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,n="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick(function(){h(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(a="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",p,!1):e.attachEvent("onmessage",p),function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){h(e.data)},function(e){i.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(h,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return o[s]=i,n(s),s++},u.clearImmediate=d}function d(e){delete o[e]}function h(e){if(l)setTimeout(h,0,e);else{var n=o[e];if(n){l=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{d(e),l=!1}}}}function p(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&h(+t.data.slice(a.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10);const Tw=r($w.exports),Dw=e=>{if(e<1){const t=1e3*e;return t>=100?`${t.toLocaleString("fr-FR").replace(/,/g," ")} MB`:`${t} MB`}return`${e} GB`},Iw=(e,t)=>"Kbps"===t&&e>=1e3?e.toLocaleString("fr-FR").replace(/,/g," "):e.toString(),Aw=e=>{var t,n;const r=null==(n=null==(t=import.meta)?void 0:t.env)?void 0:n.VITE_IMG_PROXY_BASE;return r&&"string"==typeof r&&r.length>0?`${r}${encodeURIComponent(e)}`:e},Rw=async(e,t,n)=>{try{const r=await fetch(e,{headers:{Accept:"image/*"},mode:"cors"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const i=await r.blob(),a=await i.arrayBuffer(),s=n.folder("images");return null==s||s.file(t,a),`images/${t}`}catch(r){if(console.error("Image download failed:",e,r),r instanceof TypeError&&(r.message.includes("Failed to fetch")||r.message.includes("CORS")||r.message.includes("Access-Control-Allow-Origin")))throw new Error("CORS_ERROR");throw r}},Fw=(e,t,n,r="remote",i)=>{var a;const s="title"in e,o=s?e.title:e.name,l=s?e.release_date:e.first_air_date,c=t.crew.find(e=>"Director"===e.job),u=t.crew.filter(e=>"Writer"===e.job||"Screenplay"===e.job),d=t.cast.slice(0,6),h=e.id,p=s?e.imdb_id:null==(a=e.external_ids)?void 0:a.imdb_id,f=s?e.budget:void 0,m=s?e.revenue:void 0,g=h?s?`https://www.themoviedb.org/movie/${h}`:`https://www.themoviedb.org/tv/${h}`:void 0,v=e=>"number"==typeof e&&e>0?e.toLocaleString("fr-FR",{style:"currency",currency:"USD",maximumFractionDigits:0}):null,b=s?void 0:e.created_by,y=s?void 0:e.last_air_date,x=s?[]:e.episode_run_time||[],_=!s&&x.length?Math.round(x.reduce((e,t)=>e+t,0)/x.length):void 0,w=e=>"remote"===r?e:"embedded"===r?(null==i?void 0:i.get(e))||e:"local"===r&&(null==i?void 0:i.get(e))||e;return`<!DOCTYPE html>\n<html lang="fr">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>${o}</title>\n    <style>\n        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: linear-gradient(135deg, #1e1b4b, #312e81, #3730a3); min-height: 100vh; color: white; }\n        .container { max-width: 1200px; margin: 0 auto; background: linear-gradient(135deg, #1f2937, #374151, #1f2937); border-radius: 16px; overflow: hidden; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); }\n        .header { position: relative; height: 420px; background-size: cover; }\n        .header::before { content: ''; position: absolute; inset: 0; background: linear-gradient(to right, rgba(0,0,0,0.8), rgba(0,0,0,0.4), transparent); }\n        .header::after { content: ''; position: absolute; inset: 0; background: linear-gradient(to top, #1f2937, transparent); }\n        .header-content { position: absolute; bottom: 0; left: 0; right: 0; padding: 32px; z-index: 10; }\n        .header-flex { display: flex; align-items: end; gap: 24px; }\n        .poster { width: 192px; height: 288px; border-radius: 12px; object-fit: cover; border: 4px solid rgba(255,255,255,0.2); box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); }\n        .title-info { flex: 1; padding-bottom: 16px; }\n        .title { font-size: 48px; font-weight: bold; margin-bottom: 8px; }\n        .original-title { font-size: 20px; color: #d1d5db; margin-bottom: 16px; }\n        .meta-info { display: flex; align-items: center; gap: 24px; margin-bottom: 16px; }\n        .rating { display: flex; align-items: center; color: #fbbf24; }\n        .star { width: 20px; height: 20px; fill: currentColor; margin-right: 4px; }\n        .genres { display: flex; flex-wrap: wrap; gap: 8px; }\n        .genre { padding: 4px 12px; background: rgba(139, 92, 246, 0.3); color: #c4b5fd; border-radius: 9999px; font-size: 14px; border: 1px solid rgba(139, 92, 246, 0.3); }\n        .content { padding: 32px; }\n        .grid { display: grid; grid-template-columns: 2fr 1fr; gap: 32px; }\n        .section { margin-bottom: 32px; }\n        .section-title { font-size: 24px; font-weight: bold; margin-bottom: 16px; display: flex; align-items: center; }\n        /*.icon { width: 24px; height: 24px; margin-right: 12px; color: #a78bfa; }*/\n        .synopsis { font-size: 18px; line-height: 1.75; color: #d1d5db; }\n        .tagline { color: #c4b5fd; font-style: italic; font-size: 18px; margin-top: 16px; border-left: 4px solid #8b5cf6; padding-left: 16px; }\n        .cast-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }\n        .cast-member { background: rgba(31, 41, 55, 0.5); border-radius: 12px; padding: 16px; text-align: center; }\n        .cast-photo { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin: 0 auto 12px; background: #374151; }\n        .cast-name { font-weight: 600; font-size: 14px; }\n        .cast-character { color: #9ca3af; font-size: 12px; margin-top: 4px; }\n        .sidebar { display: flex; flex-direction: column; gap: 24px; }\n        .icon { width: 24px; height: 24px; margin-right: 12px; color: #8b5cf6; padding: 0.25rem; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }\n        .info-card { background: rgba(31, 41, 55, 0.5); border-radius: 12px; padding: 0 24px 24px 24px; }\n        .info-card h3 { font-size: 20px; font-weight: bold; margin-bottom: 16px; }\n        .info-item { margin-bottom: 12px; }\n        .info-label { color: #9ca3af; font-size: 14px; }\n        .info-value { font-weight: 500; margin-top: 4px;}\n        .info-value a { --tw-text-opacity: 1; color: rgb(96 165 250 / var(--tw-text-opacity, 1)); text-decoration: none; }\n        .info-value a:hover { --tw-text-opacity: 1; color: rgb(147 197 253 / var(--tw-text-opacity, 1)); text-decoration: none; }\n        .studio-item { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; }\n        .studio-logo { width: 32px; height: 32px; object-fit: contain; background: white; border-radius: 4px; padding: 2px; }\n        .info-note { color: #9ca3af; font-size: 14px; white-space: pre-line; }\n        .specs-section { margin-bottom: 16px; }\n        .specs-title { font-size: 18px; font-weight: 600; margin-bottom: 8px; }\n        .video-title { color: #c4b5fd; }\n        .audio-title { color: #86efac; }\n        .subtitle-title { color: #fde047; }\n        .spec-item { display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 8px; }\n        .track { background: rgba(55, 65, 81, 0.5); border-radius: 8px; padding: 12px; margin-bottom: 8px; }\n        .track-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }\n        .track-name { font-weight: 500; font-size: 14px; }\n        .track-codec { color: #9ca3af; font-size: 12px; }\n        .track-details { display: flex; justify-content: space-between; font-size: 12px; color: #9ca3af; }\n        .text-gray-400 { --tw-text-opacity: 1; color: rgb(156 163 175 / var(--tw-text-opacity, 1));}\n    </style>\n</head>\n<body>\n    <div class="container">\n        <div class="header" style="background-image: url('${w(`https://image.tmdb.org/t/p/w1280${e.backdrop_path}`)}')">\n            <div class="header-content">\n                <div class="header-flex">\n                    <img\n                        src="${w(`https://image.tmdb.org/t/p/original${e.poster_path}`)}"\n                        alt="${o}"\n                        class="poster"\n                    />\n                    <div class="title-info">\n                        <h1 class="title">${o}</h1>\n                        ${s&&e.original_title!==o||!s&&e.original_name!==o?`<h2 class="original-title">${s?e.original_title:e.original_name}</h2>`:""}\n                        <div class="meta-info">\n                            <div class="rating">\n                                <svg class="star" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>\n                                <span style="font-size: 18px; font-weight: 600;">${e.vote_average.toFixed(1)}</span>\n                                <span style="color: #9ca3af; margin-left: 4px;">(${e.vote_count.toLocaleString()} votes)</span>\n                            </div>\n                            <div style="color: #d1d5db;"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 25 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar w-5 h-5 mr-2"><path d="M8 2v4"></path><path d="M16 2v4"></path><rect width="18" height="18" x="3" y="4" rx="2"></rect><path d="M3 10h18"></path></svg> ${new Date(l).getFullYear()}</div>\n                            ${s?`<div style="color: #d1d5db;"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 25 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock w-5 h-5 mr-2"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> ${Math.floor(e.runtime/60)}h${(e.runtime%60).toString().padStart(2,"0")}</div>`:`<div style="color: #d1d5db;">${e.number_of_seasons} saison${e.number_of_seasons>1?"s":""}</div>`}\n                        </div>\n                        <div class="genres">\n                            ${e.genres.map(e=>`<span class="genre">${e.name}</span>`).join("")}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <div class="content">\n            <div class="grid">\n                <div>\n                    ${e.tagline?`\n                    <div class="section" style="text-align: center; margin-bottom: 32px;">\n                        <p style="color: #c4b5fd; font-style: italic; font-size: 24px; font-weight: 500; line-height: 1.75;">"${e.tagline}"</p>\n                    </div>\n                    `:""}\n                    \n                    <div class="section">\n                        <h3 class="section-title">\n                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M2 7h20v13H2z"/><path d="M17 2l-5 5-5-5"/></svg>\n                             Synopsis\n                        </h3>\n                        <p class="synopsis">${e.overview||"Aucun synopsis disponible."}</p>\n                    </div>\n                    \n                    ${d.length>0?`\n                    <div class="section">\n                        <h3 class="section-title">\n                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>\n                            Casting principal\n                        </h3>\n                        <div class="cast-grid">\n                            ${d.map(e=>`\n                                <div class="cast-member">\n                                    ${e.profile_path?`<img src="${w(`https://image.tmdb.org/t/p/w185${e.profile_path}`)}" alt="${e.name}" class="cast-photo">`:'<div class="cast-photo"></div>'}\n                                    <h4 class="cast-name">${e.name}</h4>\n                                    <p class="cast-character">${e.character}</p>\n                                </div>\n                            `).join("")}\n                        </div>\n                    </div>\n                    `:""}\n                    ${n&&n.notes?`\n                    <div class="section">\n                      <h3 class="section-title">\n                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/></svg>\n                        Notes\n                      </h3>\n                      <p class="info-note">${n.notes}</p>\n                    </div>\n                    `:""}\n                </div>\n                \n                <div class="sidebar">\n                    ${n?`\n                    <div class="info-card">\n                        <h3 style="display: flex; align-items: center;">\n                           <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="white"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M7 3v18"/><path d="M3 7.5h4"/><path d="M3 12h18"/><path d="M3 16.5h4"/><path d="M17 3v18"/><path d="M17 7.5h4"/><path d="M17 16.5h4"/></svg>\n                           Spcifications techniques\n                        </h3>\n                        \n                        <div class="specs-section">\n                            <h4 class="specs-title video-title">Vido</h4>\n                            <div class="spec-item"><span class="text-gray-400">Qualit : </span><span>${n.video.quality}</span></div>\n                            <div class="spec-item"><span class="text-gray-400">Format : </span><span>${n.video.format}</span></div>\n                            <div class="spec-item"><span class="text-gray-400">Codec : </span><span>${n.video.codec}</span></div>\n                            <div class="spec-item"><span class="text-gray-400">Dbit : </span><span>${Iw(n.video.bitrate,n.video.bitrateUnit)} ${n.video.bitrateUnit}</span></div>\n                            <div class="spec-item"><span class="text-gray-400">Taille : </span><span>${Dw(n.video.size)}</span></div>\n                            ${n.source?`<div class="spec-item"><span class="text-gray-400">Source :</span><span>${n.source}</span></div>`:""}\n                            \n                        </div>\n                        \n                        <div class="specs-section">\n                            <h4 class="specs-title audio-title">Audio</h4>\n                            ${n.audio.map(e=>`\n                                <div class="track">\n                                    <div class="track-header">\n                                        <span class="track-name">${e.language} ${e.isDefault?"(Dfaut)":""}</span>\n                                        <span class="track-codec">${e.codec}</span>\n                                    </div>\n                                    <div class="track-details">\n                                        <span>${e.channels}</span>\n                                        <span>${Iw(e.bitrate,e.bitrateUnit)} ${e.bitrateUnit}</span>\n                                    </div>\n                                </div>\n                            `).join("")}\n                        </div>\n                        \n                        ${n.subtitles.length>0?`\n                        <div class="specs-section">\n                            <h4 class="specs-title subtitle-title">Sous-titres</h4>\n                            ${n.subtitles.map(e=>`\n                                <div class="track">\n                                    <div class="track-header">\n                                        <span class="track-name">${e.language} ${e.isDefault?"(Dfaut)":""} ${e.isForced?"(Forc)":""}</span>\n                                        <span class="track-codec">${e.format}</span>\n                                    </div>\n                                    <div class="track-details">\n                                        <span>${"embedded"===e.type?"Intgr":"Externe"}</span>\n                                    </div>\n                                </div>\n                            `).join("")}\n                        </div>\n                        `:""}\n                        <div class="spec-item"><span class="text-gray-400">Nombre de fichiers:</span><span>${n.numberOfFiles||(s?1:e.number_of_episodes||1)}</span></br></div>\n                        ${n.releaseGroup?`<div class="spec-item"><span class="text-gray-400">${n.releaseGroup}</span></div>`:""}\n                    </div>\n                    `:""}\n                    \n                    <div class="info-card">\n                        <h3 style="display: flex; align-items: center;">\n                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="white"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>\n                            Infos\n                        </h3>\n                        ${c?`<div class="info-item"><div class="info-label">Ralisateur</div><div class="info-value">${c.name}</div></div>`:""}\n                        ${u.length>0?`<div class="info-item"><div class="info-label">Scnariste${u.length>1?"s":""}</div><div class="info-value">${u.map(e=>e.name).join(", ")}</div></div>`:""}\n                        ${!s&&b&&b.length?`<div class="info-item"><div class="info-label">Crateurs</div><div class="info-value">${b.map(e=>e.name).join(", ")}</div></div>`:""}\n                        <div class="info-item"><div class="info-label">${s?"Date de sortie":"Premire diffusion"}</div><div class="info-value">${new Date(l).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}</div></div>\n                        ${!s&&y?`<div class="info-item"><div class="info-label">Dernire diffusion</div><div class="info-value">${new Date(y).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}</div></div>`:""}\n                        ${s?`\n    <div class="info-item"><div class="info-label">Dure</div><div class="info-value">${Math.floor(e.runtime/60)}h${(e.runtime%60).toString().padStart(2,"0")}</div></div>\n  `:`\n    <div class="info-item"><div class="info-label">Nombre de saisons</div><div class="info-value">${e.number_of_seasons}</div></div>\n    <div class="info-item"><div class="info-label">Nombre d'pisodes</div><div class="info-value">${e.number_of_episodes}</div></div>\n    ${_?`<div class="info-item"><div class="info-label">Dure moyenne</div><div class="info-value">${k=_,("number"==typeof k&&k>0?`${Math.floor(k/60)}h${(k%60).toString().padStart(2,"0")}`:null)||_+" min"}</div></div>`:""}\n  `}\n                        ${s&&v(f)?`<div class="info-item"><div class="info-label">Budget</div><div class="info-value">${v(f)}</div></div>`:""}\n                        ${s&&v(m)?`<div class="info-item"><div class="info-label">Recettes</div><div class="info-value">${v(m)}</div></div>`:""}\n                        ${p?`<div class="info-item"><div class="info-label">IMDB ID</div><div class="info-value"><a href="https://www.imdb.com/title/${p}/" target="_blank" rel="noopener noreferrer">${p}</a></div></div>`:""}\n                        ${h?`<div class="info-item"><div class="info-label">TMDB ID</div><div class="info-value"><a href="${g}" target="_blank" rel="noopener noreferrer">${h}</a></div></div>`:""}\n                    </div>\n                    \n                    <div class="info-card">\n                        <h3 style="display: flex; align-items: center;">\n                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="white"><circle cx="12" cy="12" r="10"/> <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>\n                            Production\n                        </h3>\n                        ${e.production_companies&&e.production_companies.length>0?`\n                        <div class="info-item">\n                            <div class="info-label">Studios</div>\n                            <div class="info-value">\n                                ${e.production_companies.slice(0,3).map(e=>`\n                                    <div class="studio-item">\n                                        ${e.logo_path?`<img src="${w(`https://image.tmdb.org/t/p/w92${e.logo_path}`)}" alt="${e.name}" class="studio-logo">`:""}\n                                        <span>${e.name}</span>\n                                    </div>\n                                `).join("")}\n                            </div>\n                        </div>\n                        `:""}\n                        ${e.production_countries&&e.production_countries.length>0?`\n                        <div class="info-item">\n                            <div class="info-label">Pays</div>\n                            <div class="info-value">${e.production_countries.map(e=>e.name).join(", ")}</div>\n                        </div>\n                        `:""}\n                        ${e.spoken_languages&&e.spoken_languages.length>0?`\n                        <div class="info-item">\n                            <div class="info-label">Langues</div>\n                            <div class="info-value">${e.spoken_languages.map(e=>e.name).join(", ")}</div>\n                        </div>\n                        `:""}\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n</html>`;var k},Ow=async(e,t,n)=>{console.log("Starting HTML export with images...");const r="title"in e?e.title:e.name,i=new Tw;i.folder("images");const a=new Map,s=[],o=(e,t)=>{if(!e)return;const n=((e,t="")=>`${t}${(e.split("/").pop()||"image.jpg").replace(/[^a-zA-Z0-9._-]/g,"_")}`)(e,t);s.some(t=>t.url===e)||s.push({url:e,filename:n})};if(e.backdrop_path){const t=`https://image.tmdb.org/t/p/w1280${e.backdrop_path}`;o(t,"backdrop_")}if(e.poster_path){const t=`https://image.tmdb.org/t/p/original${e.poster_path}`;o(t,"poster_")}if(t.cast.slice(0,6).forEach((e,t)=>{if(e.profile_path){const n=`https://image.tmdb.org/t/p/w185${e.profile_path}`;o(n,`actor_${t+1}_`)}}),e.production_companies&&e.production_companies.slice(0,3).forEach((e,t)=>{if(e.logo_path){const n=`https://image.tmdb.org/t/p/w92${e.logo_path}`;o(n,`studio_${t+1}_`)}}),s.length>0){console.log("Testing CORS with first image...");try{if(!(await fetch(s[0].url,{method:"HEAD",mode:"cors"})).ok)throw new Error("Test fetch failed");console.log("CORS test passed, proceeding with download...")}catch(h){return console.log("CORS test failed:",h),{success:!1,error:"CORS_ERROR"}}}try{console.log(`Attempting to download ${s.length} images...`);for(const{url:e,filename:t}of s){console.log(`Downloading image: ${e}`);const n=Aw(e),r=await Rw(n,t,i);a.set(e,r)}console.log("All images downloaded successfully")}catch(h){return console.error("Error during image download:",h),h instanceof Error&&"CORS_ERROR"===h.message?(console.log("CORS error detected, returning error status"),{success:!1,error:"CORS_ERROR"}):{success:!1,error:"DOWNLOAD_ERROR"}}console.log("Generating HTML with local paths...");const l=Fw(e,t,n,"local",a);i.file("index.html",l),console.log("Generating ZIP file...");const c=await i.generateAsync({type:"blob"}),u=URL.createObjectURL(c),d=document.createElement("a");return d.href=u,d.download=`${r.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_complete.zip`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u),console.log("Export completed successfully"),{success:!0}},Mw=(e,t,n)=>{const r="title"in e,i=r?e.title:e.name,a=r?e.release_date:e.first_air_date;return`# ${i}\n\n${e.poster_path?`![${i}](https://image.tmdb.org/t/p/w500${e.poster_path})`:""}\n\n## Informations gnrales\n\n- **Date de sortie:** ${a||"N/A"}\n- **Note TMDB:** ${e.vote_average}/10\n${r?`- **Dure:** ${e.runtime} min`:`- **Saisons:** ${e.number_of_seasons}`}\n- **Genres:** ${e.genres.map(e=>e.name).join(", ")}\n\n## Synopsis\n\n${e.overview||"Aucun synopsis disponible."}\n\n## Distribution\n\n${t.cast.slice(0,10).map(e=>`- **${e.name}** - ${e.character}`).join("\n")}\n\n${n?`\n## Spcifications Techniques\n\n| Proprit | Valeur |\n|-----------|--------|\n| Qualit | ${n.video.quality} |\n| Format | ${n.video.format} |\n| Codec Vido | ${n.video.codec} |\n| Taille | ${Dw(n.video.size)} |\n| Audio | ${n.audio.map(e=>`${e.language} ${e.codec} ${e.channels}`).join(", ")} |\n| Sous-titres | ${n.subtitles.map(e=>`${e.language} (${e.format})`).join(", ")} |\n${n.releaseGroup?`| Release | ${n.releaseGroup} |`:""}\n| Nb de fichiers | ${n.numberOfFiles||(r?1:e.number_of_episodes||1)} |\n${n.notes?`| Notes | ${n.notes} |`:""}\n`:""}`},zw=(e,t,n)=>{const r="title"in e,i=r?e.title:e.name,a=r?e.release_date:e.first_air_date;return`${i}\n${"=".repeat(i.length)}\n\nINFORMATIONS GNRALES\nDate de sortie: ${a||"N/A"}\nNote TMDB: ${e.vote_average}/10\n${r?`Dure: ${e.runtime} min`:`Saisons: ${e.number_of_seasons}`}\nGenres: ${e.genres.map(e=>e.name).join(", ")}\n\nSYNOPSIS\n${e.overview||"Aucun synopsis disponible."}\n\nDISTRIBUTION\n${t.cast.slice(0,10).map(e=>`${e.name} - ${e.character}`).join("\n")}\n\n${n?`\nSPCIFICATIONS TECHNIQUES\nQualit: ${n.video.quality}\nFormat: ${n.video.format}\nCodec Vido: ${n.video.codec}\nTaille: ${Dw(n.video.size)}\nAudio: ${n.audio.map(e=>`${e.language} ${e.codec} ${e.channels}`).join(", ")}\nSous-titres: ${n.subtitles.map(e=>`${e.language} (${e.format})`).join(", ")}\n${n.releaseGroup?`Release: ${n.releaseGroup}`:""}\nNb de fichiers: ${n.numberOfFiles||(r?1:e.number_of_episodes||1)}\n${n.notes?`Notes: ${n.notes}`:""}\n`:""}`},Lw=(e,t,n)=>{const r=new Blob([e],{type:n}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)};function Bw({style:e,title:t,year:n,director:r,actors:i,genres:a,rating:s,runtime:o,quality:l="1080p",format:c="MKV",codec:u="H.264"}){const{t:d}=yw(),h=e=>{const t=[],n=Math.floor(e),r=e-n>=.5;for(let a=0;a<n;a++)t.push(X.jsx(p_,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"},a));r&&t.push(X.jsx(p_,{className:"w-3 h-3 fill-yellow-400/50 text-yellow-400"},"half"));const i=5-n-(r?1:0);for(let a=0;a<i;a++)t.push(X.jsx(p_,{className:"w-3 h-3 text-gray-400"},`empty-${a}`));return t};switch(e){case 1:return X.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 text-center text-xs",children:[X.jsx("div",{className:"text-red-400 font-bold text-lg mb-3",children:t}),X.jsx("div",{className:"w-16 h-24 bg-gray-700 rounded mx-auto mb-3 flex items-center justify-center",children:X.jsx(Zx,{className:"w-6 h-6 text-gray-500"})}),X.jsxs("div",{className:"space-y-1 text-left text-gray-300",children:[X.jsxs("div",{children:[X.jsxs("span",{className:"text-white font-semibold",children:[d("card.director"),":"]})," ",r]}),X.jsxs("div",{children:[X.jsxs("span",{className:"text-white font-semibold",children:[d("card.cast"),":"]})," ",i.slice(0,3).join(", ")]}),X.jsxs("div",{children:[X.jsxs("span",{className:"text-white font-semibold",children:[d("card.genres"),":"]})," ",a.slice(0,2).join(", ")]}),X.jsxs("div",{className:"flex items-center",children:[h(s)," ",X.jsx("span",{className:"ml-1",children:s.toFixed(1)})]}),X.jsxs("div",{children:[X.jsxs("span",{className:"text-white font-semibold",children:[d("specs.quality"),":"]})," ",l]}),X.jsxs("div",{children:[X.jsxs("span",{className:"text-white font-semibold",children:[d("specs.format"),":"]})," ",c]})]})]});case 2:return X.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 text-xs",children:[X.jsx("div",{className:"text-white font-bold text-lg mb-2 text-center",children:t}),X.jsxs("div",{className:"text-gray-400 text-center mb-3",children:["(",n,")"]}),X.jsx("div",{className:"w-16 h-24 bg-gray-700 rounded mx-auto mb-3 flex items-center justify-center",children:X.jsx(Zx,{className:"w-6 h-6 text-gray-500"})}),X.jsxs("div",{className:"space-y-1 text-left text-gray-300",children:[X.jsxs("div",{className:"flex items-start",children:[X.jsx("span",{className:"text-xs mr-1",children:""}),X.jsxs("span",{className:"text-white font-semibold text-xs",children:[d("card.director"),":"]}),X.jsx("span",{className:"ml-1 text-xs",children:r})]}),X.jsxs("div",{className:"flex items-start",children:[X.jsx("span",{className:"text-xs mr-1",children:""}),X.jsxs("span",{className:"text-white font-semibold text-xs",children:[d("card.genres"),":"]}),X.jsx("span",{className:"ml-1 text-xs",children:a.slice(0,2).join(", ")})]}),X.jsxs("div",{className:"flex items-start",children:[X.jsx("span",{className:"text-xs mr-1",children:""}),X.jsxs("span",{className:"text-white font-semibold text-xs",children:[d("card.cast"),":"]})]}),X.jsx("div",{className:"ml-3 space-y-0.5",children:i.slice(0,2).map((e,t)=>X.jsxs("div",{className:"flex items-start",children:[X.jsx("span",{className:"text-xs mr-1",children:""}),X.jsx("span",{className:"text-xs",children:e})]},t))})]})]});case 3:return X.jsx("div",{className:"bg-gray-900 rounded-lg p-4 text-xs",children:X.jsx("div",{className:"border border-gray-700 rounded p-3",children:X.jsxs("div",{className:"flex items-start space-x-3",children:[X.jsx("div",{className:"w-12 h-18 bg-gray-700 rounded flex items-center justify-center flex-shrink-0",children:X.jsx(Zx,{className:"w-4 h-4 text-gray-500"})}),X.jsxs("div",{className:"flex-1",children:[X.jsxs("div",{className:"text-white font-bold text-lg",children:[t," ",X.jsxs("span",{className:"text-gray-400 text-sm",children:[" ",n]})]}),X.jsxs("div",{className:"text-gray-400 text-xs mt-1",children:["(US)  ",a.slice(0,2).join(", "),"  ",o]}),X.jsx("div",{className:"border-t border-gray-700 my-2"}),X.jsx("div",{className:"italic text-gray-300 text-xs",children:"Un film  dcouvrir..."}),X.jsx("div",{className:"flex items-center mt-2",children:h(s)}),X.jsxs("div",{className:"mt-3 space-y-1 text-gray-300",children:[X.jsxs("div",{children:[X.jsxs("span",{className:"text-gray-500",children:[d("card.director"),":"]})," ",r]}),X.jsxs("div",{children:[X.jsxs("span",{className:"text-gray-500",children:[d("card.cast"),":"]})," ",i.slice(0,2).join(", ")]})]})]})]})})});case 4:return X.jsx("div",{className:"bg-gray-900 rounded-lg p-4 text-xs",children:X.jsxs("div",{className:"border border-gray-700 rounded p-2",children:[X.jsxs("div",{className:"flex items-start space-x-2",children:[X.jsx("div",{className:"w-10 h-14 bg-gray-700 rounded flex items-center justify-center",children:X.jsx(Zx,{className:"w-3 h-3 text-gray-500"})}),X.jsxs("div",{className:"flex-1",children:[X.jsx("div",{className:"text-white font-bold text-sm",children:t}),X.jsxs("div",{className:"text-gray-400 text-xs",children:[a.slice(0,2).join(", ")," - ",o]}),X.jsxs("div",{className:"flex items-center mt-1",children:[X.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"TMDB"}),h(s)]}),X.jsxs("div",{className:"mt-2 space-y-1",children:[X.jsxs("div",{className:"flex justify-between",children:[X.jsx("span",{className:"text-gray-500",children:d("card.director")}),X.jsx("span",{className:"text-white",children:r.split(" ")[0]})]}),X.jsxs("div",{className:"flex justify-between",children:[X.jsx("span",{className:"text-gray-500",children:d("specs.quality")}),X.jsxs("span",{className:"text-white",children:[l," ",c]})]})]})]})]}),X.jsx("div",{className:"text-center text-gray-500 text-xs mt-2 border-t border-gray-700 pt-1",children:"Filmothque"})]})});default:return null}}function Uw({isOpen:e,onClose:t,bbcode:n,title:r,onStyleChange:i,movieData:a,tvShowData:s,ebookData:o,credits:l}){const{t:c}=yw(),[u,d]=U.useState(!1),[h,p]=U.useState(1),[f,m]=U.useState(n);if(H.useEffect(()=>{m(n)},[n]),H.useEffect(()=>(document.body.style.overflow=e?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[e]),!e)return null;const g=(()=>{if(a&&l){const e=l.crew.find(e=>"Director"===e.job),t=l.cast.slice(0,6);return{title:a.title,year:new Date(a.release_date).getFullYear().toString(),director:(null==e?void 0:e.name)||"N/A",actors:t.map(e=>e.name),genres:a.genres.map(e=>e.name),rating:a.vote_average/2,runtime:a.runtime?`${Math.floor(a.runtime/60)}h${(a.runtime%60).toString().padStart(2,"0")}`:"N/A"}}if(s&&l){const e=l.crew.filter(e=>"Creator"===e.job||"Executive Producer"===e.job),t=l.cast.slice(0,6),n=s.episode_run_time.length>0?Math.round(s.episode_run_time.reduce((e,t)=>e+t,0)/s.episode_run_time.length):0;return{title:s.name,year:new Date(s.first_air_date).getFullYear().toString(),director:e.slice(0,2).map(e=>e.name).join(", ")||"N/A",actors:t.map(e=>e.name),genres:s.genres.map(e=>e.name),rating:s.vote_average/2,runtime:n>0?`${n} min`:"N/A"}}if(o){const e=o.volumeInfo.authors||[];return{title:o.volumeInfo.title,year:new Date(o.volumeInfo.publishedDate).getFullYear().toString(),director:e.join(", "),actors:[],genres:o.volumeInfo.categories||[],rating:o.volumeInfo.averageRating||0,runtime:o.volumeInfo.pageCount?`${o.volumeInfo.pageCount} ${c("ebook.pages")}`:"N/A"}}return null})();return X.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-start justify-center z-50 p-4 overflow-y-auto",children:X.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-4xl w-full min-h-[90vh] max-h-none shadow-2xl border border-gray-700 flex flex-col mt-20 mb-4",children:[X.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[X.jsxs("div",{className:"flex items-center",children:[X.jsx(Bx,{className:"w-6 h-6 text-violet-400 mr-3"}),X.jsx("h2",{className:"text-xl font-bold text-white",children:c("export.title")})]}),X.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:X.jsx(__,{className:"w-5 h-5"})})]}),X.jsxs("div",{className:"flex-1 p-6 overflow-hidden flex flex-col",children:[X.jsxs("div",{className:"mb-4",children:[X.jsxs("div",{className:"mb-6",children:[X.jsxs("div",{className:"flex items-center mb-3",children:[X.jsx(s_,{className:"w-5 h-5 text-violet-400 mr-2"}),X.jsx("span",{className:"text-white font-medium",children:c("export.style")})]}),X.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[1,2,3].map(e=>X.jsxs("div",{className:"space-y-2",children:[X.jsxs("button",{onClick:()=>(e=>{p(e),i&&i(e)})(e),className:"w-full p-3 rounded-lg border-2 transition-all "+(h===e?"border-violet-500 bg-violet-500/20 text-white":"border-gray-600 bg-gray-700/50 text-gray-300 hover:border-gray-500"),children:[X.jsxs("div",{className:"text-sm font-medium",children:[c("export.style.label")," ",e]}),X.jsx("div",{className:"text-xs mt-1 opacity-75",children:c(o?1===e?"export.modal.style.complete":2===e?"export.modal.style.minimalist":"export.modal.style.modern":1===e?"export.modal.style.classic":2===e?"export.modal.style.minimalist":"export.modal.style.modern.emux")})]}),g&&X.jsx("div",{className:"hidden sm:block border-2 rounded-lg transition-all "+(h===e?"border-violet-500/50":"border-gray-600/30"),children:X.jsx(Bw,{style:e,title:g.title,year:g.year,director:g.director,actors:g.actors,genres:g.genres,rating:g.rating,runtime:g.runtime})})]},e))})]}),X.jsxs("p",{className:"text-gray-300 mb-4",children:[c("export.modal.desc")," ",X.jsx("strong",{children:r}),".",c("export.modal.desc.suffix")]}),X.jsxs("div",{className:"flex space-x-3 mb-4",children:[X.jsxs("button",{onClick:async()=>{try{await navigator.clipboard.writeText(f),d(!0),setTimeout(()=>d(!1),2e3)}catch(e){console.error(c("export.error.copy"),e)}},className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors "+(u?"bg-green-600 text-white":"bg-violet-600 hover:bg-violet-500 text-white"),children:[u?X.jsx(Fx,{className:"w-4 h-4"}):X.jsx(Ux,{className:"w-4 h-4"}),X.jsx("span",{children:c(u?"nfo.viewer.copied":"export.copy")})]}),X.jsxs("button",{onClick:()=>{const e=new Blob([f],{type:"text/plain"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=`${r.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_bbcode.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)},className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:[X.jsx(Hx,{className:"w-4 h-4"}),X.jsx("span",{children:c("export.download")})]})]})]}),X.jsxs("div",{className:"flex-1 bg-gray-900 rounded-xl border border-gray-600 overflow-hidden",children:[X.jsx("div",{className:"bg-gray-700 px-4 py-2 border-b border-gray-600",children:X.jsx("span",{className:"text-gray-300 text-sm font-medium",children:c("export.modal.generated")})}),X.jsx("textarea",{value:f,onChange:e=>m(e.target.value),className:"w-full h-full p-4 bg-transparent text-gray-300 text-sm font-mono leading-relaxed resize-none border-none outline-none",style:{minHeight:"400px"},placeholder:c("export.modal.placeholder")})]})]}),X.jsx("div",{className:"p-6 border-t border-gray-700",children:X.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:X.jsxs("p",{className:"text-blue-300 text-sm",children:[X.jsx("strong",{children:c("export.modal.warning")})," ",c("export.modal.warning.desc")]})})})]})})}function Hw({isOpen:e,onClose:t,onSelect:n,movieId:r,tvShowId:i,currentPoster:a,mediaType:s}){const{t:o}=yw(),[l,c]=U.useState([]),[u,d]=U.useState(!1),[h,p]=U.useState(a);U.useEffect(()=>{e&&(r||i)&&f()},[e,r,i]);const f=async()=>{d(!0);try{let e;if("movie"===s&&r?e=await N_.getMovieImages(r):"tv"===s&&i&&(e=await N_.getTVImages(i)),console.log("TMDB Images Response:",e),e&&e.posters){const t=e.posters.sort((e,t)=>{const n=(e.vote_average||0)*(e.vote_count||0),r=(t.vote_average||0)*(t.vote_count||0);return r!==n?r-n:t.height-e.height});c(t),console.log("Sorted Posters:",t)}else console.log("No posters found in response")}catch(e){console.error("Erreur lors du chargement des affiches:",e)}d(!1)};return e?X.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:X.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-6xl w-full max-h-[90vh] shadow-2xl border border-gray-700 flex flex-col",children:[X.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[X.jsxs("div",{className:"flex items-center",children:[X.jsx(t_,{className:"w-6 h-6 text-violet-400 mr-3"}),X.jsx("h2",{className:"text-xl font-bold text-white",children:o("poster.choose")})]}),X.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:X.jsx(__,{className:"w-5 h-5"})})]}),X.jsxs("div",{className:"flex-1 p-6 overflow-hidden",children:[X.jsx("p",{className:"text-gray-300 mb-6",children:o("poster.description")}),u?X.jsxs("div",{className:"flex items-center justify-center h-64",children:[X.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-violet-500"}),X.jsx("span",{className:"text-white text-lg ml-4",children:o("poster.loading")})]}):X.jsxs("div",{className:"overflow-auto max-h-[60vh]",children:[X.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:l.map((e,t)=>X.jsxs("div",{className:"relative cursor-pointer rounded-lg overflow-hidden transition-all duration-200 hover:scale-105 "+(h===e.file_path?"ring-4 ring-violet-500 shadow-lg shadow-violet-500/25":"hover:ring-2 hover:ring-gray-400"),onClick:()=>{return t=e.file_path,void p(t);var t},children:[X.jsx("div",{className:"aspect-[2/3] bg-gray-700",children:X.jsx("img",{src:N_.getImageUrl(e.file_path,"w342"),alt:`Affiche ${t+1}`,className:"w-full h-full object-cover",loading:"lazy"})}),h===e.file_path&&X.jsx("div",{className:"absolute inset-0 bg-violet-500/20 flex items-center justify-center",children:X.jsx("div",{className:"bg-violet-500 rounded-full p-2",children:X.jsx(Fx,{className:"w-6 h-6 text-white"})})}),X.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2",children:X.jsxs("div",{className:"text-white text-xs",children:[X.jsxs("div",{children:[e.width,"",e.height]}),e.vote_count>0&&X.jsxs("div",{className:"flex items-center",children:[X.jsx("span",{className:"text-yellow-400",children:""}),X.jsx("span",{className:"ml-1",children:e.vote_average.toFixed(1)})]})]})})]},e.file_path))}),0===l.length&&!u&&X.jsxs("div",{className:"text-center py-12",children:[X.jsx(t_,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),X.jsx("p",{className:"text-gray-400 text-lg",children:o("poster.none")}),X.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Vrifiez la console pour plus d'informations de dbogage"})]})]})]}),X.jsx("div",{className:"p-6 border-t border-gray-700",children:X.jsxs("div",{className:"flex justify-end space-x-3",children:[X.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:o("poster.close")}),X.jsx("button",{onClick:()=>{h&&(n(h),t())},disabled:!h,className:"px-6 py-2 bg-violet-600 hover:bg-violet-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:o("poster.use")})]})})]})}):null}function Vw({isOpen:e,onClose:t,onExportSimple:n,onExportComplete:r,title:i}){const{t:a}=yw(),[s,o]=U.useState(!1),[l,c]=U.useState(null),[u,d]=U.useState(!1),[h,p]=U.useState(""),[f,m]=U.useState("");if(U.useEffect(()=>(e?(document.body.style.overflow="hidden",d(!1),p(""),m(""),o(!1),c(null)):document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),!e)return null;const g=async e=>{o(!0),c(e),d(!1),p(""),console.log(`Starting ${e} export...`);try{if("simple"===e)console.log("Performing simple export..."),n(),o(!1),c(null),t();else{console.log("Performing complete export...");const e=await r();console.log("Export result:",e),e&&e.success||(console.log("Export failed, showing error modal"),"CORS_ERROR"===(null==e?void 0:e.error)?(p(a("html.export.error.cors")),m(a("html.export.error.cors.details"))):(p(a("html.export.error.generic")),m(a("html.export.error.generic.details").replace("{error}",(null==e?void 0:e.error)||"Erreur inconnue"))),d(!0)),o(!1),c(null),(null==e?void 0:e.success)&&(console.log("Export successful, closing modal"),t())}}catch(i){console.error("Erreur lors de l'export:",i),p(a("html.export.error.unexpected")),m(a("html.export.error.unexpected.details").replace("{error}",i instanceof Error?i.message:"Erreur inconnue")),o(!1),c(null),d(!0)}},v=()=>{d(!1),p(""),m("")},b=u?X.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[60] p-4",children:X.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-lg w-full shadow-2xl border border-gray-700",children:[X.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[X.jsxs("div",{className:"flex items-center",children:[X.jsx(jx,{className:"w-6 h-6 text-red-400 mr-3"}),X.jsx("h2",{className:"text-xl font-bold text-white",children:h})]}),X.jsx("button",{onClick:v,className:"text-gray-400 hover:text-white transition-colors",children:X.jsx(__,{className:"w-5 h-5"})})]}),X.jsxs("div",{className:"p-6",children:[X.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 mb-6",children:X.jsx("p",{className:"text-red-300 text-sm leading-relaxed whitespace-pre-line",children:f})}),X.jsxs("div",{className:"flex justify-end space-x-3",children:[X.jsx("button",{onClick:v,className:"px-6 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:a("html.export.close")}),X.jsx("button",{onClick:()=>{v(),g("simple")},className:"px-6 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors",children:a("html.export.try.simple")})]})]})]})}):null;return X.jsxs(X.Fragment,{children:[X.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:X.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-md w-full shadow-2xl border border-gray-700",children:[X.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[X.jsxs("div",{className:"flex items-center",children:[X.jsx(Hx,{className:"w-6 h-6 text-violet-400 mr-3"}),X.jsx("h2",{className:"text-xl font-bold text-white",children:a("html.export.title")})]}),X.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",disabled:s,children:X.jsx(__,{className:"w-5 h-5"})})]}),X.jsxs("div",{className:"p-6",children:[X.jsxs("p",{className:"text-gray-300 mb-6",children:[a("html.export.choose")," ",X.jsx("strong",{children:i})," :"]}),X.jsxs("div",{className:"space-y-4",children:[X.jsx("button",{onClick:()=>g("simple"),disabled:s,className:"w-full p-4 bg-gray-700/50 hover:bg-gray-600/50 disabled:bg-gray-700/30 border border-gray-600 hover:border-gray-500 disabled:border-gray-600 rounded-xl transition-all text-left group",children:X.jsxs("div",{className:"flex items-start space-x-4",children:[X.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg group-hover:bg-blue-500/30 transition-colors",children:X.jsx(Xx,{className:"w-6 h-6 text-blue-400"})}),X.jsxs("div",{className:"flex-1",children:[X.jsx("h3",{className:"text-white font-semibold mb-1",children:a("html.export.simple.title")}),X.jsx("p",{className:"text-gray-400 text-sm mb-2",children:a("html.export.simple.desc")}),X.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[X.jsx(Fx,{className:"w-3 h-3 mr-1"}),X.jsx("span",{children:a("html.export.simple.check1")})]}),X.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[X.jsx(Xx,{className:"w-3 h-3 mr-1"}),X.jsx("span",{children:a("html.export.simple.check2")})]})]}),s&&"simple"===l&&X.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500"})]})}),X.jsx("button",{onClick:()=>g("complete"),disabled:s,className:"w-full p-4 bg-gray-700/50 hover:bg-gray-600/50 disabled:bg-gray-700/30 border border-gray-600 hover:border-gray-500 disabled:border-gray-600 rounded-xl transition-all text-left group",children:X.jsxs("div",{className:"flex items-start space-x-4",children:[X.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg group-hover:bg-green-500/30 transition-colors",children:X.jsx(Qx,{className:"w-6 h-6 text-green-400"})}),X.jsxs("div",{className:"flex-1",children:[X.jsx("h3",{className:"text-white font-semibold mb-1",children:a("html.export.complete.title")}),X.jsx("p",{className:"text-gray-400 text-sm mb-2",children:a("html.export.complete.desc")}),X.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[X.jsx(t_,{className:"w-3 h-3 mr-1"}),X.jsx("span",{children:a("html.export.complete.check1")})]}),X.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[X.jsx(Qx,{className:"w-3 h-3 mr-1"}),X.jsx("span",{children:a("html.export.complete.check2")})]})]}),s&&"complete"===l&&X.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-green-500"})]})})]}),s&&X.jsx("div",{className:"mt-6 p-4 bg-violet-500/10 border border-violet-500/30 rounded-lg",children:X.jsxs("div",{className:"flex items-center",children:[X.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-violet-500 mr-3"}),X.jsx("span",{className:"text-violet-300 text-sm",children:a("simple"===l?"html.export.generating":"html.export.downloading")})]})})]})]})}),b]})}function qw({nfoContent:e,mediaTitle:t}){const{t:n}=yw(),[r,i]=U.useState(!1),[a,s]=U.useState(!1),o=()=>{navigator.clipboard.writeText(e),s(!0),setTimeout(()=>s(!1),2e3)},l=()=>{const n=new Blob([e],{type:"text/plain"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${(()=>{const n=e.match(/Complete name\s*:\s*(.+?)\.(mkv|mp4|avi|m2ts|iso)/i);return n&&n[1]?n[1].trim():t||"media"})()}.nfo`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)};return X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-cyan-600/10 backdrop-blur-sm border border-blue-400/20 rounded-2xl p-6",children:[X.jsx("div",{className:"flex items-center justify-between mb-4",children:X.jsxs("div",{className:"flex items-center space-x-3",children:[X.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:X.jsx(Kx,{className:"w-5 h-5 text-blue-400"})}),X.jsxs("div",{children:[X.jsx("h3",{className:"text-white font-semibold",children:n("nfo.viewer.title")}),X.jsx("p",{className:"text-gray-400 text-sm",children:n("nfo.viewer.subtitle")})]})]})}),X.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[X.jsxs("button",{onClick:()=>i(!0),className:"flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600/20 hover:bg-blue-600/30 border border-blue-500/30 rounded-xl text-blue-300 hover:text-blue-200 transition-all",children:[X.jsx(Wx,{className:"w-4 h-4"}),X.jsx("span",{children:n("nfo.viewer.show")})]}),X.jsxs("button",{onClick:o,className:"flex items-center justify-center space-x-2 px-4 py-3 bg-green-600/20 hover:bg-green-600/30 border border-green-500/30 rounded-xl text-green-300 hover:text-green-200 transition-all",children:[a?X.jsx(Fx,{className:"w-4 h-4"}):X.jsx(Ux,{className:"w-4 h-4"}),X.jsx("span",{children:n(a?"nfo.viewer.copied":"nfo.viewer.copy")})]}),X.jsxs("button",{onClick:l,className:"flex items-center justify-center space-x-2 px-4 py-3 bg-violet-600/20 hover:bg-violet-600/30 border border-violet-500/30 rounded-xl text-violet-300 hover:text-violet-200 transition-all",children:[X.jsx(Hx,{className:"w-4 h-4"}),X.jsx("span",{children:n("nfo.viewer.download")})]})]})]}),r&&X.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:X.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-4xl w-full max-h-[80vh] shadow-2xl border border-gray-700 flex flex-col",children:[X.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[X.jsxs("div",{className:"flex items-center space-x-3",children:[X.jsx(Kx,{className:"w-6 h-6 text-blue-400"}),X.jsx("h2",{className:"text-xl font-bold text-white",children:n("nfo.viewer.title")})]}),X.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-white transition-colors",children:X.jsx(__,{className:"w-5 h-5"})})]}),X.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:X.jsx("pre",{className:"bg-gray-900 border border-gray-700 rounded-lg p-4 text-gray-300 font-mono text-sm whitespace-pre-wrap break-words",children:e})}),X.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-700",children:[X.jsxs("button",{onClick:o,className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors flex items-center space-x-2",children:[a?X.jsx(Fx,{className:"w-4 h-4"}):X.jsx(Ux,{className:"w-4 h-4"}),X.jsx("span",{children:n(a?"nfo.viewer.copied":"nfo.viewer.copy")})]}),X.jsxs("button",{onClick:l,className:"px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors flex items-center space-x-2",children:[X.jsx(Hx,{className:"w-4 h-4"}),X.jsx("span",{children:n("nfo.viewer.download")})]})]})]})})]})}function Ww({movie:e,credits:t,torrentSpecs:n,isPreview:r=!1,selectedPoster:i,onPosterChange:a,generatedNFO:s}){const{t:o}=yw(),[l,c]=H.useState(!1),[u,d]=H.useState(1),[h,p]=H.useState(!1),[f,m]=H.useState(e.poster_path),[g,v]=H.useState(null),[b,y]=H.useState(!1),x=void 0!==i?i:f,_=t.crew.find(e=>"Director"===e.job),w=t.crew.filter(e=>"Writer"===e.job||"Screenplay"===e.job),k=t.cast.slice(0,6),N=e=>{if(!e)return"N/A";return`${Math.floor(e/60)}h${(e%60).toString().padStart(2,"0")}`},j=e=>0===e?"N/A":e>=1e6?`$${(e/1e6).toFixed(0)}M`:`$${e.toLocaleString()}`,S={...e,poster_path:x},C=function(e,t,n,r=1,i){return Cw(e,t,"movie",n,r,i)}(S,t,n,u,g);return H.useEffect(()=>{(async()=>{try{const t=await N_.getTrailerUrl(e.id,"movie");v(t)}catch(t){console.error("Erreur lors de la rcupration de la bande-annonce:",t)}})()},[e.id]),X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"max-w-6xl mx-auto bg-gradient-to-br from-gray-900 rounded-2xl overflow-hidden shadow-2xl",children:[X.jsxs("div",{className:"relative h-96 overflow-hidden",children:[X.jsx("div",{className:"absolute inset-0 bg-cover",style:{backgroundImage:`url(${N_.getBackdropUrl(e.backdrop_path,"w1280")})`}}),X.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 via-black/40 to-transparent"}),X.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent"}),X.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 pt-12",children:X.jsxs("div",{className:"flex items-end space-x-6",children:[X.jsx("div",{className:"flex-shrink-0 w-48 h-72 rounded-xl overflow-hidden shadow-2xl border-4 border-white/20",children:X.jsx("img",{src:N_.getImageUrl(x,"w500"),alt:e.title,className:"w-full h-full object-cover cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>!r&&p(!0)})}),X.jsxs("div",{className:"flex-1 pb-4",children:[X.jsx("h1",{className:"text-5xl font-bold text-white mb-2",children:e.title}),e.original_title!==e.title&&X.jsx("h2",{className:"text-xl text-gray-300 mb-4",children:e.original_title}),X.jsxs("div",{className:"flex items-center space-x-6 mb-4",children:[X.jsxs("div",{className:"flex items-center text-yellow-400",children:[X.jsx(p_,{className:"w-5 h-5 mr-1 fill-current"}),X.jsx("span",{className:"text-lg font-semibold",children:e.vote_average.toFixed(1)}),X.jsxs("span",{className:"text-gray-400 ml-1",children:["(",e.vote_count.toLocaleString()," ",o("card.votes"),")"]})]}),X.jsxs("div",{className:"flex items-center text-gray-300",children:[X.jsx(Ix,{className:"w-5 h-5 mr-2"}),X.jsx("span",{children:new Date(e.release_date).getFullYear()})]}),X.jsxs("div",{className:"flex items-center text-gray-300",children:[X.jsx(Lx,{className:"w-5 h-5 mr-2"}),X.jsx("span",{children:N(e.runtime)})]})]}),X.jsx("div",{className:"flex flex-wrap gap-2",children:e.genres.map(e=>X.jsx("span",{className:"px-3 py-1 bg-violet-600/30 text-violet-300 rounded-full text-sm border border-violet-500/30",children:e.name},e.id))})]})]})}),!r&&X.jsx("div",{className:"absolute top-4 right-4",children:X.jsx("div",{className:"bg-black/60 backdrop-blur-md rounded-2xl p-4 border border-white/10",children:X.jsxs("div",{className:"flex flex-col space-y-3",children:[X.jsx("div",{className:"text-white text-sm font-medium text-center mb-2",children:o("card.export.actions")}),X.jsxs("button",{onClick:()=>p(!0),className:"flex items-center space-x-3 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors text-sm font-medium",children:[X.jsx(t_,{className:"w-4 h-4"}),X.jsx("span",{children:o("card.change.poster")})]}),X.jsxs("div",{className:"border-t border-white/10 pt-3",children:[X.jsx("div",{className:"text-white text-xs font-medium text-center mb-2 opacity-75",children:o("card.export.formats")}),X.jsxs("button",{onClick:()=>{c(!0)},className:"w-full flex items-center justify-center space-x-2 px-3 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors text-sm font-medium mb-2",children:[X.jsx(Hx,{className:"w-4 h-4"}),X.jsx("span",{children:"BBCODE"})]}),X.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[X.jsxs("button",{onClick:()=>y(!0),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg transition-colors text-xs font-medium",children:[X.jsx(Bx,{className:"w-3 h-3"}),X.jsx("span",{children:"HTML"})]}),X.jsxs("button",{onClick:()=>{const r=Mw(S,t,n);Lw(r,`${e.title}.md`,"text/markdown")},className:"flex items-center justify-center space-x-2 px-3 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors text-xs font-medium",children:[X.jsx(Kx,{className:"w-3 h-3"}),X.jsx("span",{children:"MD"})]}),X.jsxs("button",{onClick:()=>{const r=zw(S,t,n);Lw(r,`${e.title}.txt`,"text/plain")},className:"flex items-center justify-center space-x-2 px-3 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors text-xs font-medium",children:[X.jsx(Yx,{className:"w-3 h-3"}),X.jsx("span",{children:"TXT"})]})]})]})]})})})]}),X.jsx("div",{className:"p-8",children:X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(0,1fr)_404px] gap-8",children:[X.jsxs("div",{className:"space-y-8",children:[e.tagline&&e.tagline.trim()&&X.jsx("div",{className:"text-center",children:X.jsxs("p",{className:"text-violet-300 italic text-2xl font-medium leading-relaxed",children:['"',e.tagline,'"']})}),X.jsxs("div",{children:[X.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center",children:[X.jsx(Cx,{className:"w-6 h-6 mr-3 text-violet-400"}),o("card.synopsis")]}),X.jsx("p",{className:"text-gray-300 text-lg leading-relaxed",children:e.overview||"Aucun synopsis disponible."})]}),k.length>0&&X.jsxs("div",{children:[X.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center",children:[X.jsx(b_,{className:"w-6 h-6 mr-3 text-violet-400"}),o("card.main.cast")]}),X.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:k.map(e=>X.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 text-center",children:[X.jsx("div",{className:"w-20 h-20 mx-auto mb-3 rounded-full overflow-hidden bg-gray-700",children:e.profile_path?X.jsx("img",{src:N_.getImageUrl(e.profile_path,"w185"),alt:e.name,className:"w-full h-full object-cover"}):X.jsx("div",{className:"w-full h-full flex items-center justify-center",children:X.jsx(b_,{className:"w-8 h-8 text-gray-500"})})}),X.jsx("h4",{className:"text-white font-semibold text-sm",children:e.name}),X.jsx("p",{className:"text-gray-400 text-xs mt-1",children:e.character})]},e.id))})]}),n&&n.notes&&X.jsxs("div",{children:[X.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center",children:[X.jsx(u_,{className:"w-6 h-6 mr-3 text-violet-400"}),o("specs.notes")]}),X.jsx("p",{className:"text-gray-400 text-sm leading-relaxed whitespace-pre-line",children:n.notes})]})]}),X.jsxs("div",{className:"space-y-6",children:[s&&!r&&X.jsx(qw,{nfoContent:s,mediaTitle:e.title}),n&&!r&&X.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[X.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[X.jsx(Qx,{className:"w-5 h-5 mr-2"}),o("card.torrent.specs")]}),X.jsxs("div",{className:"mb-4",children:[X.jsx("h4",{className:"text-lg font-semibold text-violet-300 mb-2",children:o("specs.video")}),X.jsxs("div",{className:"space-y-2 text-sm",children:[X.jsxs("div",{className:"flex justify-between",children:[X.jsxs("span",{className:"text-gray-400",children:[o("specs.quality"),":"]}),X.jsx("span",{className:"text-white font-medium",children:n.video.quality})]}),X.jsxs("div",{className:"flex justify-between",children:[X.jsxs("span",{className:"text-gray-400",children:[o("specs.format"),":"]}),X.jsx("span",{className:"text-white font-medium",children:n.video.format})]}),X.jsxs("div",{className:"flex justify-between",children:[X.jsxs("span",{className:"text-gray-400",children:[o("specs.codec"),":"]}),X.jsx("span",{className:"text-white font-medium",children:n.video.codec})]}),X.jsxs("div",{className:"flex justify-between",children:[X.jsxs("span",{className:"text-gray-400",children:[o("specs.bitrate.label"),":"]}),X.jsxs("span",{className:"text-white font-medium",children:[n.video.bitrate," ",n.video.bitrateUnit]})]}),X.jsxs("div",{className:"flex justify-between",children:[X.jsxs("span",{className:"text-gray-400",children:[o("specs.size"),":"]}),X.jsxs("span",{className:"text-white font-medium",children:[n.video.size," GB"]})]}),n.source&&X.jsxs("div",{className:"flex justify-between",children:[X.jsxs("span",{className:"text-gray-400",children:[o("ebook.source"),":"]}),X.jsx("span",{className:"text-white font-medium",children:n.source})]})]})]}),X.jsxs("div",{className:"mb-4",children:[X.jsx("h4",{className:"text-lg font-semibold text-green-300 mb-2",children:o("specs.audio")}),X.jsx("div",{className:"space-y-2",children:n.audio.map((e,t)=>X.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[X.jsxs("div",{className:"flex items-center justify-between mb-1",children:[X.jsxs("span",{className:"text-white font-medium text-sm",children:[e.language," ",e.isDefault&&`(${o("specs.default")})`]}),X.jsx("span",{className:"text-gray-400 text-xs",children:e.codec})]}),X.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[X.jsx("span",{children:e.channels}),X.jsxs("span",{children:[e.bitrate," ",e.bitrateUnit]})]})]},e.id))})]}),n.subtitles.length>0&&X.jsxs("div",{className:"mb-4",children:[X.jsx("h4",{className:"text-lg font-semibold text-yellow-300 mb-2",children:o("specs.subtitles")}),X.jsx("div",{className:"space-y-2",children:n.subtitles.map((e,t)=>X.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[X.jsxs("div",{className:"flex items-center justify-between mb-1",children:[X.jsxs("span",{className:"text-white font-medium text-sm",children:[e.language," ",e.isDefault&&`(${o("specs.default")})`," ",e.isForced&&`(${o("specs.forced")})`]}),X.jsx("span",{className:"text-gray-400 text-xs",children:e.format})]}),X.jsx("div",{className:"text-xs text-gray-400",children:e.isForced?o("specs.forced"):e.isSDH?"SDH":"Complet"})]},e.id))})]}),n.releaseGroup&&X.jsx("div",{children:X.jsx("div",{className:"flex justify-between mb-2",children:X.jsx("span",{className:"text-gray-400  font-medium text-sm",children:n.releaseGroup})})})]}),X.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[X.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[X.jsx(Xx,{className:"w-5 h-5 mr-2"}),o("card.production")]}),X.jsxs("div",{className:"space-y-3",children:[e.production_companies.length>0&&X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:o("card.company")}),X.jsx("div",{className:"mt-2 space-y-2",children:e.production_companies.slice(0,3).map(e=>X.jsxs("div",{className:"flex items-center space-x-2",children:[e.logo_path&&X.jsx("img",{src:N_.getImageUrl(e.logo_path,"w92"),alt:e.name,className:"w-8 h-8 object-contain bg-white rounded p-1"}),X.jsx("span",{className:"text-white text-sm",children:e.name})]},e.id))})]}),e.production_countries.length>0&&X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:o("card.country")}),X.jsx("p",{className:"text-white font-medium",children:e.production_countries.map(e=>e.name).join(", ")})]}),e.spoken_languages.length>0&&X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:o("ebook.language")}),X.jsx("p",{className:"text-white font-medium",children:e.spoken_languages.map(e=>e.name).join(", ")})]})]})]}),X.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[X.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[X.jsx(n_,{className:"w-5 h-5 mr-2"}),o("card.technical")]}),X.jsxs("div",{className:"space-y-3",children:[_&&X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:o("card.director")}),X.jsx("p",{className:"text-white font-medium",children:_.name})]}),w.length>0&&X.jsxs("div",{children:[X.jsxs("span",{className:"text-gray-400 text-sm",children:[o("card.writer"),w.length>1?"s":""]}),X.jsx("p",{className:"text-white font-medium",children:w.map(e=>e.name).join(", ")})]}),X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:o("card.release")}),X.jsx("p",{className:"text-white font-medium",children:new Date(e.release_date).toLocaleDateString("Franais"===o("lang.french")?"fr-FR":"en-US",{year:"numeric",month:"long",day:"numeric"})})]}),X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:o("card.runtime")}),X.jsx("p",{className:"text-white font-medium",children:N(e.runtime)})]}),e.budget>0&&X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:o("card.budget")}),X.jsx("p",{className:"text-white font-medium",children:j(e.budget)})]}),e.revenue>0&&X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:o("card.revenue")}),X.jsx("p",{className:"text-white font-medium",children:j(e.revenue)})]}),e.imdb_id&&X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:"IMDB ID"}),X.jsx("p",{className:"text-white font-medium",children:X.jsx("a",{href:`https://www.imdb.com/title/${e.imdb_id}/`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors",children:e.imdb_id})})]}),X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:"TMDB ID"}),X.jsx("p",{className:"text-white font-medium",children:X.jsx("a",{href:`https://www.themoviedb.org/movie/${e.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors",children:e.id})})]})]})]})]})]})}),X.jsx("div",{className:"px-8 pb-6",children:X.jsxs("div",{className:"flex items-center justify-center space-x-3 pt-4 border-t border-gray-700/50",children:[X.jsx("img",{src:"https://www.themoviedb.org/assets/2/v4/logos/v2/blue_square_1-5bdc75aaebeb75dc7ae79426ddd9be3b2be1e342510f8202baf6bffa71d7f5c4.svg",alt:"TMDB Logo",className:"w-6 h-6"}),X.jsxs("p",{className:"text-gray-400 text-xs",children:[o("card.data.provided")," ",X.jsx("a",{href:"https://www.themoviedb.org/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors",children:"TMDB"})]})]})})]}),!r&&X.jsxs(X.Fragment,{children:[X.jsx(Uw,{isOpen:l,onClose:()=>c(!1),bbcode:C,title:e.title,onStyleChange:e=>{d(e)},movieData:S,credits:t}),X.jsx(Hw,{isOpen:h,onClose:()=>p(!1),onSelect:e=>{a?a(e):m(e)},movieId:e.id,currentPoster:x,mediaType:"movie"}),X.jsx(Vw,{isOpen:b,onClose:()=>y(!1),onExportSimple:()=>{const r=Fw(S,t,n);Lw(r,`${e.title}.html`,"text/html")},onExportComplete:async()=>{try{console.log("MovieCard: Starting complete export...");const e=await Ow(S,t,n);return console.log("MovieCard: Export result:",e),e}catch(e){return console.error("MovieCard: Erreur dans exportHTMLComplete:",e),{success:!1,error:"UNEXPECTED_ERROR"}}},title:e.title})]})]})}function Kw({tvShow:e,credits:t,torrentSpecs:n,isPreview:r=!1,selectedPoster:i,onPosterChange:a,onSeasonSelect:s,generatedNFO:o}){if(!e)return null;const{t:l}=yw(),[c,u]=H.useState(!1),[d,h]=H.useState(1),[p,f]=H.useState(!1),[m,g]=H.useState(e.poster_path),[v,b]=H.useState(null),[y,x]=H.useState(!1),_=void 0!==i?i:m,w=t.crew.filter(e=>"Creator"===e.job||"Executive Producer"===e.job),k=t.cast.slice(0,6),N=e=>{if(!e||0===e.length)return"N/A";const t=Math.round(e.reduce((e,t)=>e+t,0)/e.length);return`${t} min`},j={...e,poster_path:_},S=function(e,t,n,r=1,i){return Cw(e,t,"tv",n,r,i)}(j,t,n,d,v);H.useEffect(()=>{(async()=>{try{const t=await N_.getTrailerUrl(e.id,"tv");b(t)}catch(t){console.error("Erreur lors de la rcupration de la bande-annonce:",t)}})()},[e.id]);const C={"Returning Series":{text:"En cours",color:"text-green-400"},Ended:{text:"Termine",color:"text-red-400"},Canceled:{text:"Annule",color:"text-red-400"},"In Production":{text:"En production",color:"text-blue-400"},Planned:{text:"Planifie",color:"text-yellow-400"}}[E=e.status]||{text:E,color:"text-gray-400"};var E;return X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"max-w-6xl mx-auto bg-gradient-to-br from-gray-900 rounded-2xl overflow-hidden shadow-2xl",children:[X.jsxs("div",{className:"relative h-96 overflow-hidden",children:[X.jsx("div",{className:"absolute inset-0 bg-cover",style:{backgroundImage:`url(${N_.getBackdropUrl(e.backdrop_path,"w1280")})`}}),X.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 via-black/40 to-transparent"}),X.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent"}),X.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 pt-12",children:X.jsxs("div",{className:"flex items-end space-x-6",children:[X.jsx("div",{className:"flex-shrink-0 w-48 h-72 rounded-xl overflow-hidden shadow-2xl border-4 border-white/20",children:X.jsx("img",{src:N_.getImageUrl(_,"w500"),alt:e.name,className:"w-full h-full object-cover cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>!r&&f(!0)})}),X.jsxs("div",{className:"flex-1 pb-4",children:[X.jsx("h1",{className:"text-5xl font-bold text-white mb-2",children:e.name}),e.original_name!==e.name&&X.jsx("h2",{className:"text-xl text-gray-300 mb-4",children:e.original_name}),X.jsxs("div",{className:"flex items-center space-x-6 mb-4",children:[X.jsxs("div",{className:"flex items-center text-yellow-400",children:[X.jsx(p_,{className:"w-5 h-5 mr-1 fill-current"}),X.jsx("span",{className:"text-lg font-semibold",children:e.vote_average.toFixed(1)}),X.jsxs("span",{className:"text-gray-400 ml-1",children:["(",e.vote_count.toLocaleString()," votes)"]})]}),X.jsxs("div",{className:"flex items-center text-gray-300",children:[X.jsx(Ix,{className:"w-5 h-5 mr-2"}),X.jsx("span",{children:new Date(e.first_air_date).getFullYear()}),e.last_air_date&&"Ended"===e.status&&X.jsxs("span",{children:[" - ",new Date(e.last_air_date).getFullYear()]})]}),X.jsxs("div",{className:"flex items-center text-gray-300",children:[X.jsx(Lx,{className:"w-5 h-5 mr-2"}),X.jsx("span",{children:N(e.episode_run_time)})]}),X.jsxs("div",{className:`flex items-center ${C.color}`,children:[X.jsx(g_,{className:"w-5 h-5 mr-2"}),X.jsx("span",{children:C.text})]})]}),X.jsx("div",{className:"flex flex-wrap gap-2",children:e.genres.map(e=>X.jsx("span",{className:"px-3 py-1 bg-violet-600/30 text-violet-300 rounded-full text-sm border border-violet-500/30",children:e.name},e.id))})]})]})}),!r&&X.jsx("div",{className:"absolute top-4 right-4",children:X.jsx("div",{className:"bg-black/60 backdrop-blur-md rounded-2xl p-4 border border-white/10",children:X.jsxs("div",{className:"flex flex-col space-y-3",children:[X.jsx("div",{className:"text-white text-sm font-medium text-center mb-2",children:l("card.export.actions")}),X.jsxs("button",{onClick:()=>f(!0),className:"flex items-center space-x-3 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors text-sm font-medium",children:[X.jsx(t_,{className:"w-4 h-4"}),X.jsx("span",{children:l("card.change.poster")})]}),X.jsxs("div",{className:"border-t border-white/10 pt-3",children:[X.jsx("div",{className:"text-white text-xs font-medium text-center mb-2 opacity-75",children:l("card.export.formats")}),X.jsxs("button",{onClick:()=>{u(!0)},className:"w-full flex items-center justify-center space-x-2 px-3 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors text-sm font-medium mb-2",children:[X.jsx(Hx,{className:"w-4 h-4"}),X.jsx("span",{children:"BBCODE"})]}),X.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[X.jsxs("button",{onClick:()=>x(!0),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg transition-colors text-xs font-medium",children:[X.jsx(Bx,{className:"w-3 h-3"}),X.jsx("span",{children:"HTML"})]}),X.jsxs("button",{onClick:()=>{const r=Mw(j,t,n);Lw(r,`${e.name}.md`,"text/markdown")},className:"flex items-center justify-center space-x-2 px-3 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors text-xs font-medium",children:[X.jsx(Kx,{className:"w-3 h-3"}),X.jsx("span",{children:"MD"})]}),X.jsxs("button",{onClick:()=>{const r=zw(j,t,n);Lw(r,`${e.name}.txt`,"text/plain")},className:"flex items-center justify-center space-x-2 px-3 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors text-xs font-medium",children:[X.jsx(Yx,{className:"w-3 h-3"}),X.jsx("span",{children:"TXT"})]})]})]})]})})})]}),X.jsx("div",{className:"p-8",children:X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(0,1fr)_404px] gap-8",children:[X.jsxs("div",{className:"space-y-8",children:[e.tagline&&e.tagline.trim()&&X.jsx("div",{className:"text-center",children:X.jsxs("p",{className:"text-violet-300 italic text-2xl font-medium leading-relaxed",children:['"',e.tagline,'"']})}),X.jsxs("div",{children:[X.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center",children:[X.jsx(g_,{className:"w-6 h-6 mr-3 text-violet-400"}),"Synopsis"]}),X.jsx("p",{className:"text-gray-300 text-lg leading-relaxed",children:e.overview||"Aucun synopsis disponible."})]}),k.length>0&&X.jsxs("div",{children:[X.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center",children:[X.jsx(b_,{className:"w-6 h-6 mr-3 text-violet-400"}),"Casting principal"]}),X.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:k.map(e=>X.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 text-center",children:[X.jsx("div",{className:"w-20 h-20 mx-auto mb-3 rounded-full overflow-hidden bg-gray-700",children:e.profile_path?X.jsx("img",{src:N_.getImageUrl(e.profile_path,"w185"),alt:e.name,className:"w-full h-full object-cover"}):X.jsx("div",{className:"w-full h-full flex items-center justify-center",children:X.jsx(b_,{className:"w-8 h-8 text-gray-500"})})}),X.jsx("h4",{className:"text-white font-semibold text-sm",children:e.name}),X.jsx("p",{className:"text-gray-400 text-xs mt-1",children:e.character})]},e.id))})]}),e.seasons&&e.seasons.length>0&&X.jsxs("div",{children:[X.jsxs("h3",{className:"text-2xl font-bold text-white mb-4",children:["Saisons",r&&s&&X.jsx("span",{className:"text-sm text-violet-400 ml-2 font-normal",children:"(Cliquez pour slectionner)"})]}),X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.seasons.filter(e=>e.season_number>0).map(e=>X.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 flex space-x-4 "+(r&&s?"cursor-pointer hover:bg-gray-700/50 hover:border-violet-500 border border-transparent transition-all duration-200":""),onClick:()=>r&&s&&s(e.season_number),children:[X.jsx("div",{className:"w-16 h-24 flex-shrink-0 rounded overflow-hidden bg-gray-700",children:(null==e?void 0:e.poster_path)?X.jsx("img",{src:N_.getImageUrl(null==e?void 0:e.poster_path,"w154"),alt:e.name,className:"w-full h-full object-cover"}):X.jsx("div",{className:"w-full h-full flex items-center justify-center",children:X.jsx(g_,{className:"w-6 h-6 text-gray-500"})})}),X.jsxs("div",{className:"flex-1",children:[X.jsx("h4",{className:"text-white font-semibold",children:e.name}),X.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[e.episode_count," pisode",e.episode_count>1?"s":""]}),e.air_date&&X.jsx("p",{className:"text-gray-400 text-sm",children:new Date(e.air_date).getFullYear()})]})]},e.id))})]}),n&&n.notes&&X.jsxs("div",{children:[X.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center",children:[X.jsx(u_,{className:"w-6 h-6 mr-3 text-violet-400"}),"Notes"]}),X.jsx("p",{className:"text-gray-400 text-sm leading-relaxed whitespace-pre-line",children:n.notes})]})]}),X.jsxs("div",{className:"space-y-6",children:[o&&!r&&X.jsx(qw,{nfoContent:o,mediaTitle:e.name}),n&&!r&&X.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[X.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[X.jsx(Qx,{className:"w-5 h-5 mr-2"}),l("card.torrent.specs")]}),X.jsxs("div",{className:"mb-4",children:[X.jsx("h4",{className:"text-lg font-semibold text-violet-300 mb-2",children:"Vido"}),X.jsxs("div",{className:"space-y-2 text-sm",children:[X.jsxs("div",{className:"flex justify-between",children:[X.jsx("span",{className:"text-gray-400",children:"Qualit:"}),X.jsx("span",{className:"text-white font-medium",children:n.video.quality})]}),X.jsxs("div",{className:"flex justify-between",children:[X.jsx("span",{className:"text-gray-400",children:"Format:"}),X.jsx("span",{className:"text-white font-medium",children:n.video.format})]}),X.jsxs("div",{className:"flex justify-between",children:[X.jsx("span",{className:"text-gray-400",children:"Codec:"}),X.jsx("span",{className:"text-white font-medium",children:n.video.codec})]}),X.jsxs("div",{className:"flex justify-between",children:[X.jsx("span",{className:"text-gray-400",children:"Dbit:"}),X.jsxs("span",{className:"text-white font-medium",children:[n.video.bitrate," ",n.video.bitrateUnit]})]}),X.jsxs("div",{className:"flex justify-between",children:[X.jsx("span",{className:"text-gray-400",children:"Taille:"}),X.jsxs("span",{className:"text-white font-medium",children:[n.video.size," GB"]})]}),n.source&&X.jsxs("div",{className:"flex justify-between",children:[X.jsx("span",{className:"text-gray-400",children:"Source:"}),X.jsx("span",{className:"text-white font-medium",children:n.source})]})]})]}),X.jsxs("div",{className:"mb-4",children:[X.jsx("h4",{className:"text-lg font-semibold text-green-300 mb-2",children:"Audio"}),X.jsx("div",{className:"space-y-2",children:n.audio.map((e,t)=>X.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[X.jsxs("div",{className:"flex items-center justify-between mb-1",children:[X.jsxs("span",{className:"text-white font-medium text-sm",children:[e.language," ",e.isDefault&&"(Dfaut)"]}),X.jsx("span",{className:"text-gray-400 text-xs",children:e.codec})]}),X.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[X.jsx("span",{children:e.channels}),X.jsxs("span",{children:[e.bitrate," ",e.bitrateUnit]})]})]},e.id))})]}),n.subtitles.length>0&&X.jsxs("div",{className:"mb-4",children:[X.jsx("h4",{className:"text-lg font-semibold text-yellow-300 mb-2",children:"Sous-titres"}),X.jsx("div",{className:"space-y-2",children:n.subtitles.map((e,t)=>X.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[X.jsxs("div",{className:"flex items-center justify-between mb-1",children:[X.jsxs("span",{className:"text-white font-medium text-sm",children:[e.language," ",e.isDefault&&"(Dfaut)"," ",e.isForced&&"(Forc)"]}),X.jsx("span",{className:"text-gray-400 text-xs",children:e.format})]}),X.jsx("div",{className:"text-xs text-gray-400",children:"embedded"===e.type?"Intgr":"Externe"})]},e.id))})]}),(n.releaseGroup||n.notes)&&X.jsx("div",{children:n.releaseGroup&&X.jsx("div",{className:"flex justify-between mb-2",children:X.jsx("span",{className:"text-gray-400  font-medium text-sm",children:n.releaseGroup})})})]}),X.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[X.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[X.jsx(n_,{className:"w-5 h-5 mr-2"}),"Informations"]}),X.jsxs("div",{className:"space-y-3",children:[w.length>0&&X.jsxs("div",{children:[X.jsxs("span",{className:"text-gray-400 text-sm",children:["Crateur",w.length>1?"s":""]}),X.jsx("p",{className:"text-white font-medium",children:w.slice(0,2).map(e=>e.name).join(", ")})]}),X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:"Premire diffusion"}),X.jsx("p",{className:"text-white font-medium",children:new Date(e.first_air_date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_air_date&&"Ended"===e.status&&X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:"Dernire diffusion"}),X.jsx("p",{className:"text-white font-medium",children:new Date(e.last_air_date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})})]}),X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:"Statut"}),X.jsx("p",{className:`font-medium ${C.color}`,children:C.text})]}),X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:"Nombre de saisons"}),X.jsx("p",{className:"text-white font-medium",children:e.number_of_seasons})]}),X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:"Nombre d'pisodes"}),X.jsx("p",{className:"text-white font-medium",children:e.number_of_episodes})]}),X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:"Dure moyenne"}),X.jsx("p",{className:"text-white font-medium",children:N(e.episode_run_time)})]}),X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:"TMDB ID"}),X.jsx("p",{className:"text-white font-medium",children:X.jsx("a",{href:`https://www.themoviedb.org/tv/${e.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors",children:e.id})})]})]})]}),e.networks.length>0&&X.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[X.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Diffuseurs"}),X.jsx("div",{className:"space-y-3",children:e.networks.map(e=>X.jsxs("div",{className:"flex items-center space-x-3",children:[e.logo_path&&X.jsx("img",{src:N_.getImageUrl(e.logo_path,"w92"),alt:e.name,className:"w-12 h-8 object-contain bg-white rounded p-1"}),X.jsxs("div",{children:[X.jsx("p",{className:"text-white font-medium",children:e.name}),X.jsx("p",{className:"text-gray-400 text-sm",children:e.origin_country})]})]},e.id))})]}),X.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[X.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[X.jsx(Xx,{className:"w-5 h-5 mr-2"}),"Production"]}),X.jsxs("div",{className:"space-y-3",children:[e.production_companies.length>0&&X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:"Studios"}),X.jsx("div",{className:"mt-2 space-y-2",children:e.production_companies.slice(0,3).map(e=>X.jsxs("div",{className:"flex items-center space-x-2",children:[e.logo_path&&X.jsx("img",{src:N_.getImageUrl(e.logo_path,"w92"),alt:e.name,className:"w-8 h-8 object-contain bg-white rounded p-1"}),X.jsx("span",{className:"text-white text-sm",children:e.name})]},e.id))})]}),e.production_countries.length>0&&X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:"Pays"}),X.jsx("p",{className:"text-white font-medium",children:e.production_countries.map(e=>e.name).join(", ")})]}),e.spoken_languages.length>0&&X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400 text-sm",children:"Langues"}),X.jsx("p",{className:"text-white font-medium",children:e.spoken_languages.map(e=>e.name).join(", ")})]})]})]})]})]})}),X.jsx("div",{className:"px-8 pb-6",children:X.jsxs("div",{className:"flex items-center justify-center space-x-3 pt-4 border-t border-gray-700/50",children:[X.jsx("img",{src:"https://www.themoviedb.org/assets/2/v4/logos/v2/blue_square_1-5bdc75aaebeb75dc7ae79426ddd9be3b2be1e342510f8202baf6bffa71d7f5c4.svg",alt:"TMDB Logo",className:"w-6 h-6"}),X.jsxs("p",{className:"text-gray-400 text-xs",children:["Donnes fournies par"," ",X.jsx("a",{href:"https://www.themoviedb.org//",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors",children:"TMDB"})]})]})})]}),!r&&X.jsxs(X.Fragment,{children:[X.jsx(Uw,{isOpen:c,onClose:()=>u(!1),bbcode:S,title:e.name,onStyleChange:e=>{h(e)},tvShowData:j,credits:t}),X.jsx(Hw,{isOpen:p,onClose:()=>f(!1),onSelect:e=>{a?a(e):g(e)},tvShowId:e.id,currentPoster:_,mediaType:"tv"}),X.jsx(Vw,{isOpen:y,onClose:()=>x(!1),onExportSimple:()=>{const r=Fw(j,t,n);Lw(r,`${e.name}.html`,"text/html")},onExportComplete:async()=>{try{console.log("TVShowCard: Starting complete export...");const e=await Ow(j,t,n);return console.log("TVShowCard: Export result:",e),e}catch(e){return console.error("TVShowCard: Erreur dans exportHTMLComplete:",e),{success:!1,error:"UNEXPECTED_ERROR"}}},title:e.name})]})]})}const Gw=["UHD Full BluRay","UHD-Remux","Full BluRay","BluRay-Remux","2160p","1080p/i","720p/i","SD"],Yw=["MKV","MP4","AVI","M2TS","ISO","Autre"],Zw=["H.264","H.265","x264","x265","HEVC","VC-1","AV1","VP9","VP8","DivX","XviD","XVID","MPEG-2","MPEG-4","Autre"],Xw=["Dolby Digital / AC3","Dolby Digital Plus / E-AC3","Dolby Digital Plus / E-AC3 Atmos","Dolby TrueHD","Dolby TrueHD Atmos","DTS","DTS-ES","DTS-HD HRA","DTS-HD MA","AAC","PCM","FLAC","Opus","Autre"],Qw=["Mono","Stro","5.1","5.1.x","6.1","7.1","7.1.x"],Jw=["SRT","ASS","SSA","PGS","VobSub","SUP"],ek=["BluRay","UHD BluRay","WEB","WEBRip","HDTV","DVDRip","BDRip","REMUX","CAM","TS","R5"];function tk({onSave:e,onCancel:t,initialSpecs:n}){var r,i,a,s,o,l,c;const{t:u}=yw(),[d,h]=U.useState(!1);U.useEffect(()=>{if(null==n?void 0:n.video){const{writingLibrary:e,encodingSettings:t}=n.video,r=`${e||""} ${t||""}`.toLowerCase();if(["nvenc","hevc_nvenc","qsv","quicksync","amf","avc coding"].some(e=>r.includes(e)))h(!0);else{let e=0;[{pattern:/x264/i,weight:1},{pattern:/libx264/i,weight:1},{pattern:/x265/i,weight:1},{pattern:/libx265/i,weight:1},{pattern:/rc=crf\s*=\s*\d+/i,weight:2},{pattern:/psy-rd/i,weight:1},{pattern:/psy-rdoq/i,weight:1},{pattern:/bframes\s*=\s*\d+/i,weight:2},{pattern:/ref\s*=\s*\d+/i,weight:2},{pattern:/wpp/i,weight:1},{pattern:/numa-pools/i,weight:1}].forEach(t=>{t.pattern.test(r)&&(e+=t.weight)}),h(!1)}}},[n]);const p=e=>Number(e.toFixed(2)).toString(),f=[{code:"fr",name:u("lang.french")},{code:"fr-ad",name:"Franais AD"},{code:"fr-ca",name:u("lang.quebecois")},{code:"en",name:u("lang.english")},{code:"es",name:u("lang.spanish")},{code:"de",name:u("lang.german")},{code:"it",name:u("lang.italian")},{code:"pt",name:u("lang.portuguese")},{code:"ru",name:u("lang.russian")},{code:"ja",name:u("lang.japanese")},{code:"ko",name:u("lang.korean")},{code:"zh",name:u("lang.chinese")},{code:"nl",name:u("lang.dutch")},{code:"sv",name:u("lang.swedish")},{code:"no",name:u("lang.norwegian")},{code:"da",name:u("lang.danish")},{code:"fi",name:u("lang.finnish")},{code:"pl",name:u("lang.polish")},{code:"cs",name:u("lang.czech")},{code:"hu",name:u("lang.hungarian")},{code:"tr",name:u("lang.turkish")},{code:"ar",name:u("lang.arabic")},{code:"he",name:u("lang.hebrew")},{code:"th",name:u("lang.thai")},{code:"vi",name:u("lang.vietnamese")},{code:"hi",name:u("lang.hindi")},{code:"other",name:u("lang.other")}],m=(e,t)=>{const n=(t||"").toLowerCase();let r=(e||"").toLowerCase();if(r){const e=W_(r);if(e.flag)return{code:e.code,name:e.name}}if(n){const e=W_(n);if(e.flag)return{code:e.code,name:e.name}}if(new Set(f.map(e=>e.code)).has(r)){const e=W_(r);return"other"===r?{code:"other",name:t||u("lang.other")}:{code:e.code,name:e.name}}const i=e=>{const t=W_(e);return{code:t.code,name:t.name}};return/\b(french\s*\(ca\)|french ca|vfq|canadian)\b/i.test(t||"")?i("fr-ca"):/\b(french|franais)\b/i.test(t||"")?i("fr"):/\b(english|anglais)\b/i.test(t||"")?i("en"):/\b(german|deutsch|\(de\))\b/i.test(t||"")?i("de"):/\b(spanish|espaol|\(es\))\b/i.test(t||"")?i("es"):/\b(portuguese|portugus|\(pt\)|\(br\))\b/i.test(t||"")?i("pt"):/\b(italian|italiano|\(it\))\b/i.test(t||"")?i("it"):/\b(finnish|suomi|\(fi\))\b/i.test(t||"")?i("fi"):/\b(japanese||\(jp\))\b/i.test(t||"")?i("ja"):/\b(dutch|nederlands|\(nl\))\b/i.test(t||"")?i("nl"):/\b(polish|polski|\(pl\))\b/i.test(t||"")?i("pl"):/\b(swedish|svenska|\(se\)|\(sv\))\b/i.test(t||"")?i("sv"):/\b(hindi|\(in\))\b/i.test(t||"")?i("hi"):{code:"other",name:t||u("lang.other")}},g=(v=n)?{video:{quality:"1080p"===(null==(b=v.video)?void 0:b.quality)?"1080p/i":"720p"===(null==(y=v.video)?void 0:y.quality)?"720p/i":"480p"===(null==(x=v.video)?void 0:x.quality)?"SD":Gw.includes(null==(_=v.video)?void 0:_.quality)?null==(w=v.video)?void 0:w.quality:(null==(k=v.video)?void 0:k.quality)||"1080p/i",format:Yw.includes(null==(N=v.video)?void 0:N.format)?null==(j=v.video)?void 0:j.format:(null==(S=v.video)?void 0:S.format)?"Autre":"MKV",codec:(()=>{var e,t,n,r;const i=(null==(e=v.video)?void 0:e.codec)||"",a=(null==(t=v.video)?void 0:t.format)||"";if("HEVC"===a||"V_MPEGH/ISO/HEVC"===i)return"H.265";if("AVC"===a||"V_MPEG4/ISO/AVC"===i)return"H.264";const s=`${(null==(n=v.video)?void 0:n.writingLibrary)||""} ${(null==(r=v.video)?void 0:r.encodingSettings)||""}`.toLowerCase();return s.includes("x265")?"x265":s.includes("x264")?"x264":"MPEG Video"===i?"MPEG-2":"XVID"===i||"XviD"===i?"XVID":Zw.includes(i)?i:i?"Autre":"H.264"})(),bitrate:(()=>{var e,t;const n=(null==(e=v.video)?void 0:e.bitrate)||5;let r="Mbps"===((null==(t=v.video)?void 0:t.bitrateUnit)||"Mbps")?1e3*n:n;return r<=9999?r:r/1e3})(),bitrateUnit:(()=>{var e,t;const n=(null==(e=v.video)?void 0:e.bitrate)||5;return("Mbps"===((null==(t=v.video)?void 0:t.bitrateUnit)||"Mbps")?1e3*n:n)<=9999?"Kbps":"Mbps"})(),size:(null==(C=v.video)?void 0:C.size)||8,duration:null==(E=v.video)?void 0:E.duration},audio:(null==(P=v.audio)?void 0:P.map((e,t)=>({id:e.id||(t+1).toString(),...(()=>{const t=m(e.languageCode,e.language);return{language:t.name,languageCode:t.code}})(),codec:(()=>{const t=e.codec||"";return t.includes("Dolby Digital Plus with Dolby Atmos")||t.includes("Dolby Digital Plus with Atmos")?"Dolby Digital Plus / E-AC3 Atmos":t.includes("DTS-HD High Resolution Audio")||"DTS-HD HRA"===t?"DTS-HD HRA":t.includes("MLP FBA 16-ch")||t.includes("MLP FBA")?"Dolby TrueHD Atmos":t.includes("DTS-HD Master Audio")||"DTS-HD MA"===t?"DTS-HD MA":t.includes("Dolby TrueHD with Dolby Atmos")||t.includes("TrueHD Atmos")?"Dolby TrueHD Atmos":t.includes("Dolby TrueHD")||"TrueHD"===t?"Dolby TrueHD":t.includes("DTS-HD High Resolution Audio")||"DTS-HD HRA"===t?"DTS-HD HRA":t.includes("DTS-ES")||"DTS-ES"===t?"DTS-ES":"E-AC-3"===t||t.includes("E-AC-3")?"Dolby Digital Plus / E-AC3":"AC-3"===t||t.includes("AC-3")?"Dolby Digital / AC3":"DTS"===t||t.includes("DTS")?"DTS":"AAC"===t||t.includes("AAC")?"AAC":"PCM"===t||t.includes("PCM")?"PCM":Xw.includes(t)?t:t?"Autre":"Dolby Digital Plus / E-AC3"})(),channels:e.channels||"5.1",bitrate:e.bitrate||640,bitrateUnit:e.bitrateUnit||"Kbps",isDefault:e.isDefault||0===t})))||[],subtitles:(null==($=v.subtitles)?void 0:$.map((e,t)=>({id:e.id||(t+1).toString(),...(()=>{const t=m(e.languageCode,e.language);return{language:t.name,languageCode:t.code}})(),type:e.type||"embedded",format:e.format||"SRT",isForced:!0===e.isForced,isComplete:!1!==e.isComplete&&!0!==e.isForced&&!0!==e.isSDH||!0===e.isComplete,isSDH:!0===e.isSDH,isDefault:!0===e.isDefault})))||[],source:v.source,releaseGroup:v.releaseGroup,notes:v.notes}:null;var v,b,y,x,_,w,k,N,j,S,C,E,P,$;const[T,D]=U.useState({quality:(null==(r=null==g?void 0:g.video)?void 0:r.quality)||"1080p/i",format:(null==(i=null==g?void 0:g.video)?void 0:i.format)||"MKV",codec:(null==(a=null==g?void 0:g.video)?void 0:a.codec)||"H.264",bitrate:(null==(s=null==g?void 0:g.video)?void 0:s.bitrate)||2.3,bitrateUnit:(null==(o=null==g?void 0:g.video)?void 0:o.bitrateUnit)||"Mbps",size:(null==(l=null==g?void 0:g.video)?void 0:l.size)||8.5,duration:null==(c=null==g?void 0:g.video)?void 0:c.duration}),[I,A]=U.useState(()=>{var e;return((null==(e=null==g?void 0:g.video)?void 0:e.size)||8.5)<1?"MB":"GB"}),[R,F]=U.useState(()=>{var e;const t=(null==(e=null==g?void 0:g.video)?void 0:e.bitrate)||2.3;return p(t)}),[O,M]=U.useState(()=>{var e;const t=(null==(e=null==g?void 0:g.video)?void 0:e.size)||8.5;return p("MB"===(t<1?"MB":"GB")?1e3*t:t)}),[z,L]=U.useState(()=>(null==g?void 0:g.audio)&&g.audio.length>0?g.audio.map(e=>({...e,bitrateUnit:e.bitrateUnit||"Kbps"})):[{id:"1",language:"Franais",languageCode:"fr",codec:"Dolby Digital Plus / E-AC3",channels:"5.1",bitrate:640,bitrateUnit:"Kbps",isDefault:!0}]),[B,H]=U.useState(()=>(null==g?void 0:g.subtitles)&&g.subtitles.length>0?g.subtitles.map(e=>({...e,type:e.type,isForced:!0===e.isForced,isComplete:!0===e.isComplete,isSDH:!0===e.isSDH})):[]),[V,q]=U.useState((null==g?void 0:g.releaseGroup)||""),[W,K]=U.useState((null==n?void 0:n.numberOfFiles)||1),[G,Y]=U.useState(()=>{var e;if(null==g?void 0:g.source){const e={Bluray:"BluRay",BluRay:"BluRay","blu-ray":"BluRay",bluray:"BluRay","UHD BluRay":"UHD BluRay","uhd bluray":"UHD BluRay","4k bluray":"UHD BluRay",WEB:"WEB",WEBRip:"WEBRip","WEB-DL":"WEB",WEBDL:"WEB","web-dl":"WEB",webrip:"WEBRip",web:"WEB",HDTV:"HDTV",DVDRip:"DVDRip",BDRip:"BDRip",REMUX:"REMUX",remux:"REMUX"},t=(g.source||"").toString(),n=e[t]||e[t.toLowerCase()]||t;return ek.includes(n)?n:"WEB"}return"ISO"===(null==(e=null==g?void 0:g.video)?void 0:e.format)?"DVDRip":"BluRay"}),[Z,Q]=U.useState((null==g?void 0:g.notes)||(null==n?void 0:n.notes)||""),J=(e,t)=>{L(z.map(n=>n.id===e?{...n,...t}:!0===t.isDefault&&n.isDefault?{...n,isDefault:!1}:n))},ee=(e,t)=>{H(B.map(n=>n.id===e?{...n,...t}:!0===t.isDefault&&n.isDefault?{...n,isDefault:!1}:n))};return X.jsxs("div",{className:"max-w-4xl mx-auto bg-gray-800/60 backdrop-blur-sm rounded-2xl p-8 border border-gray-700/50",children:[X.jsx("div",{className:"flex items-center justify-between mb-8",children:X.jsxs("div",{className:"flex items-center",children:[X.jsxs("button",{onClick:t,className:"flex items-center space-x-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors mr-4",children:[X.jsx(Sx,{className:"w-4 h-4"}),X.jsx("span",{children:u("specs.back")})]}),X.jsx(Qx,{className:"w-6 h-6 text-violet-400 mr-3"}),X.jsx("h2",{className:"text-2xl font-bold text-white",children:u("specs.title")})]})}),d&&X.jsx("div",{className:"mb-6 p-3 border rounded-lg animate-in fade-in bg-red-500/10 border-red-500/20",children:X.jsxs("div",{className:"flex items-start gap-2",children:[X.jsx(Ex,{className:"h-4 w-4 shrink-0 mt-0.5 text-red-500","aria-hidden":"true"}),X.jsxs("div",{className:"flex-1 space-y-1",children:[X.jsx("p",{className:"text-xs font-semibold text-red-400",children:u("nfo.generator.gpu.warning.title")}),X.jsx("p",{className:"text-xs text-gray-300",dangerouslySetInnerHTML:{__html:u("nfo.generator.gpu.warning.message")}})]})]})}),X.jsxs("div",{className:"space-y-8",children:[X.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[X.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[X.jsx(y_,{className:"w-5 h-5 mr-2 text-blue-400"}),u("specs.video.title")]}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:u("specs.quality")}),X.jsx("select",{value:T.quality,onChange:e=>D({...T,quality:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:Gw.map(e=>X.jsx("option",{value:e,children:e},e))})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:u("specs.format")}),X.jsx("select",{value:T.format,onChange:e=>D({...T,format:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:Yw.map(e=>X.jsx("option",{value:e,children:e},e))})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:u("specs.codec")}),X.jsx("select",{value:T.codec,onChange:e=>D({...T,codec:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:Zw.map(e=>X.jsx("option",{value:e,children:e},e))})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:u("ebook.source")}),X.jsx("select",{value:G,onChange:e=>Y(e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:ek.map(e=>X.jsx("option",{value:e,children:e},e))})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:u("specs.bitrate.label")}),X.jsxs("div",{className:"flex space-x-2",children:[X.jsx("input",{type:"text",value:R,onChange:e=>{const t=e.target.value;if(""===t||/^[0-9.,\s]*$/.test(t)){F(t);const e=t.replace(/\s/g,"").replace(/,/g,"."),n=parseFloat(e);!isNaN(n)&&n>0&&D({...T,bitrate:n})}},onBlur:()=>{const e=R.replace(/\s/g,"").replace(/,/g,"."),t=parseFloat(e);!isNaN(t)&&t>0?F(p(t)):F(p(T.bitrate))},className:"w-24 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"}),X.jsxs("select",{value:T.bitrateUnit,onChange:e=>{const t=e.target.value,n=T.bitrate,r=T.bitrateUnit;let i=n;"Mbps"===r&&"Kbps"===t?i=1e3*n:"Kbps"===r&&"Mbps"===t&&(i=n/1e3),D({...T,bitrateUnit:t,bitrate:i}),F(p(i))},className:"w-20 bg-gray-700 border border-gray-600 rounded-lg px-2 py-2 text-white focus:outline-none focus:border-violet-500",children:[X.jsx("option",{value:"Mbps",children:"Mbps"}),X.jsx("option",{value:"Kbps",children:"Kbps"})]})]})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:u("specs.size")}),X.jsxs("div",{className:"flex space-x-2",children:[X.jsx("input",{type:"text",value:O,onChange:e=>{const t=e.target.value;if(""===t||/^[0-9.,\s]*$/.test(t)){M(t);const e=t.replace(/\s/g,"").replace(/,/g,"."),n=parseFloat(e);if(!isNaN(n)&&n>0){const e="MB"===I?n/1e3:n;D({...T,size:e})}}},onBlur:()=>{const e=O.replace(/\s/g,"").replace(/,/g,"."),t=parseFloat(e);if(!isNaN(t)&&t>0)M(p(t));else{const e="MB"===I?1e3*T.size:T.size;M(p(e))}},className:"w-24 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"}),X.jsxs("select",{value:I,onChange:e=>{const t=e.target.value,n=T.size;A(t);M(p("MB"===t?1e3*n:n))},className:"w-16 bg-gray-700 border border-gray-600 rounded-lg px-2 py-2 text-white focus:outline-none focus:border-violet-500",children:[X.jsx("option",{value:"MB",children:"MB"}),X.jsx("option",{value:"GB",children:"GB"})]})]})]})]})]}),X.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[X.jsxs("div",{className:"flex items-center justify-between mb-6",children:[X.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[X.jsx(x_,{className:"w-5 h-5 mr-2 text-green-400"}),u("specs.audio.tracks")]}),X.jsxs("button",{onClick:()=>{const e={id:Date.now().toString(),language:"Anglais",languageCode:"en",codec:"Dolby Digital Plus / E-AC3",channels:"5.1",bitrate:640,bitrateUnit:"Kbps",isDefault:!1};L([...z,e])},className:"flex items-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors",children:[X.jsx(l_,{className:"w-4 h-4"}),X.jsx("span",{children:u("specs.add")})]})]}),X.jsx("div",{className:"space-y-4",children:z.map((e,t)=>X.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[X.jsxs("div",{className:"flex items-center justify-between mb-4",children:[X.jsxs("h4",{className:"text-white font-medium",children:[u("specs.track.audio")," #",t+1]}),z.length>1&&X.jsx("button",{onClick:()=>{return t=e.id,void(z.length>1&&L(z.filter(e=>e.id!==t)));var t},className:"text-red-400 hover:text-red-300 transition-colors",children:X.jsx(m_,{className:"w-4 h-4"})})]}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_1fr_auto_auto] lg:grid-cols-[1fr_1fr_auto_auto] gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:u("ebook.language")}),"other"===e.languageCode?X.jsx("input",{type:"text",value:e.language,onChange:t=>J(e.id,{language:t.target.value,languageCode:"other"}),placeholder:"Nom de la langue",className:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500"}):X.jsx("select",{value:e.languageCode,onChange:t=>{const n=t.target.value;if("other"===n)J(e.id,{language:"",languageCode:"other"});else{const t=f.find(e=>e.code===n),r=W_(n);J(e.id,{language:(null==t?void 0:t.name)||r.name,languageCode:r.code})}},className:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:f.map(e=>X.jsx("option",{value:e.code,children:e.name},e.code))})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:u("specs.codec")}),X.jsx("select",{value:e.codec,onChange:t=>J(e.id,{codec:t.target.value}),className:"w-55 bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:Xw.map(e=>X.jsx("option",{value:e,children:e},e))})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:u("specs.channels")}),X.jsx("select",{value:e.channels,onChange:t=>J(e.id,{channels:t.target.value}),className:"w-25 bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:Qw.map(e=>X.jsx("option",{value:e,children:e},e))})]}),X.jsxs("div",{children:[X.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[u("specs.bitrate.label")," (Kbps)"]}),X.jsx("input",{value:e.bitrate,onChange:t=>J(e.id,{bitrate:parseInt(t.target.value)}),className:"w-20 bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),X.jsx("div",{className:"col-span-full mt-4 flex items-center space-x-4",children:X.jsxs("label",{className:"flex items-center",children:[X.jsx("input",{type:"checkbox",checked:e.isDefault,onChange:t=>J(e.id,{isDefault:t.target.checked}),className:"mr-2 rounded border-gray-500 bg-gray-600 text-violet-600 focus:ring-violet-500"}),X.jsx("span",{className:"text-gray-300 text-sm",children:u("specs.track.default")})]})})]})]},e.id))})]}),X.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[X.jsxs("div",{className:"flex items-center justify-between mb-6",children:[X.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[X.jsx(Ax,{className:"w-5 h-5 mr-2 text-yellow-400"}),u("specs.subtitles")]}),X.jsxs("button",{onClick:()=>{const e={id:Date.now().toString(),language:"Anglais",languageCode:"en",type:"embedded",format:"SRT",isForced:!1,isComplete:!0,isSDH:!1,isDefault:!1};H([...B,e])},className:"flex items-center space-x-2 px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg transition-colors",children:[X.jsx(l_,{className:"w-4 h-4"}),X.jsx("span",{children:u("specs.add")})]})]}),X.jsx("div",{className:"space-y-4",children:B.map((e,t)=>X.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[X.jsxs("div",{className:"flex items-center justify-between mb-4",children:[X.jsxs("h4",{className:"text-white font-medium",children:[u("specs.track.subtitle")," #",t+1]}),X.jsx("button",{onClick:()=>{return t=e.id,void H(B.filter(e=>e.id!==t));var t},className:"text-red-400 hover:text-red-300 transition-colors",children:X.jsx(m_,{className:"w-4 h-4"})})]}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:u("ebook.language")}),"other"===e.languageCode?X.jsx("input",{type:"text",value:e.language,onChange:t=>ee(e.id,{language:t.target.value,languageCode:"other"}),placeholder:"Nom de la langue",className:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500"}):X.jsx("select",{value:e.languageCode,onChange:t=>{const n=t.target.value;if("other"===n)ee(e.id,{language:"",languageCode:"other"});else{const t=f.find(e=>e.code===n),r=W_(n);ee(e.id,{language:(null==t?void 0:t.name)||r.name,languageCode:r.code})}},className:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:f.map(e=>X.jsx("option",{value:e.code,children:e.name},e.code))})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:u("specs.format")}),X.jsx("select",{value:e.format,onChange:t=>ee(e.id,{format:t.target.value}),className:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:Jw.map(e=>X.jsx("option",{value:e,children:e},e))})]})]}),X.jsxs("div",{className:"mt-4 space-y-2",children:[X.jsx("div",{className:"flex items-center",children:X.jsxs("label",{className:"flex items-center",children:[X.jsx("input",{type:"checkbox",checked:e.isDefault,onChange:t=>ee(e.id,{isDefault:t.target.checked}),className:"mr-2 rounded border-gray-500 bg-gray-600 text-violet-600 focus:ring-violet-500"}),X.jsx("span",{className:"text-gray-300 text-sm",children:u("specs.track.default")})]})}),X.jsxs("div",{className:"flex items-center space-x-4",children:[X.jsxs("span",{className:"text-gray-300 text-sm",children:[u("specs.type")," :"]}),X.jsxs("label",{className:"flex items-center",children:[X.jsx("input",{type:"radio",name:`subtitle-type-${e.id}`,checked:!0===e.isForced,onChange:()=>ee(e.id,{isForced:!0,isComplete:!1,isSDH:!1}),className:"mr-1 text-violet-600 focus:ring-violet-500"}),X.jsx("span",{className:"text-gray-300 text-sm",children:u("specs.forced")})]}),X.jsxs("label",{className:"flex items-center",children:[X.jsx("input",{type:"radio",name:`subtitle-type-${e.id}`,checked:!0===e.isComplete,onChange:()=>ee(e.id,{isForced:!1,isComplete:!0,isSDH:!1}),className:"mr-1 text-violet-600 focus:ring-violet-500"}),X.jsx("span",{className:"text-gray-300 text-sm",children:"Complet"})]}),X.jsxs("label",{className:"flex items-center",children:[X.jsx("input",{type:"radio",name:`subtitle-type-${e.id}`,checked:!0===e.isSDH,onChange:()=>ee(e.id,{isForced:!1,isComplete:!1,isSDH:!0}),className:"mr-1 text-violet-600 focus:ring-violet-500"}),X.jsx("span",{className:"text-gray-300 text-sm",children:"SDH"})]})]})]})]},e.id))})]}),X.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[X.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:u("specs.additional")}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:u("specs.release.group")}),X.jsx("input",{type:"text",value:V,onChange:e=>q(e.target.value),placeholder:u("specs.release.placeholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:u("specs.files.count")}),X.jsx("input",{type:"number",value:W,onChange:e=>K(parseInt(e.target.value)||1),min:"1",className:"w-20 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:u("specs.notes")}),X.jsx("textarea",{value:Z,onChange:e=>Q(e.target.value),placeholder:u("specs.notes.placeholder"),rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500"})]})]}),X.jsxs("div",{className:"flex justify-end space-x-4",children:[X.jsx("button",{onClick:t,className:"px-6 py-3 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:u("nfo.cancel")}),X.jsxs("button",{onClick:()=>{e({video:T,audio:z,subtitles:B,releaseGroup:V||void 0,source:G||void 0,notes:Z||void 0,numberOfFiles:W})},className:"flex items-center space-x-2 px-6 py-3 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors",children:[X.jsx(c_,{className:"w-4 h-4"}),X.jsx("span",{children:u("specs.generate")})]})]})]})]})}function nk({isOpen:e,onClose:t,onSave:n,currentApiKey:r}){const{t:i}=yw(),[a,s]=U.useState(r),[o,l]=U.useState(!1);if(!e)return null;return X.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:X.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl border border-gray-700",children:[X.jsxs("div",{className:"flex items-center justify-between mb-6",children:[X.jsxs("div",{className:"flex items-center",children:[X.jsx(r_,{className:"w-6 h-6 text-violet-400 mr-3"}),X.jsx("h2",{className:"text-xl font-bold text-white",children:i("api.title")})]}),X.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:X.jsx(__,{className:"w-5 h-5"})})]}),X.jsxs("div",{className:"mb-6",children:[X.jsx("p",{className:"text-gray-300 mb-4",children:i("api.description")}),X.jsxs("div",{className:"bg-violet-500/10 border border-violet-500/30 rounded-lg p-4 mb-4",children:[X.jsx("p",{className:"text-violet-300 text-sm",children:X.jsx("strong",{children:"Comment obtenir votre cl API :"})}),X.jsxs("ol",{className:"list-decimal list-inside text-violet-200 text-sm mt-2 space-y-1",children:[X.jsxs("li",{children:["Crez un compte sur ",X.jsx("a",{href:"https://www.themoviedb.org/",target:"_blank",rel:"noopener noreferrer",className:"text-violet-400 hover:underline",children:"TMDB"})]}),X.jsx("li",{children:"Allez dans les paramtres de votre compte"}),X.jsx("li",{children:'Cliquez sur "API"'}),X.jsx("li",{children:"Demandez une cl API (gratuite)"}),X.jsx("li",{children:"Copiez votre cl API v3"})]}),X.jsxs("a",{href:"https://www.themoviedb.org/settings/api",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-violet-400 hover:text-violet-300 text-sm mt-3 transition-colors",children:[i("api.get.key")," ",X.jsx(Vx,{className:"w-4 h-4 ml-1"})]})]})]}),X.jsxs("div",{className:"mb-6",children:[X.jsx("label",{htmlFor:"apiKey",className:"block text-sm font-medium text-gray-300 mb-2",children:i("api.key.label")}),X.jsxs("div",{className:"relative",children:[X.jsx("input",{type:o?"text":"password",id:"apiKey",value:a,onChange:e=>s(e.target.value),placeholder:i("api.key.placeholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500 pr-12"}),X.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:o?X.jsx(qx,{className:"w-5 h-5"}):X.jsx(Wx,{className:"w-5 h-5"})})]})]}),X.jsxs("div",{className:"flex space-x-3",children:[X.jsx("button",{onClick:t,className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 px-4 rounded-lg transition-colors",children:i("nfo.cancel")}),X.jsx("button",{onClick:()=>{n(a),t()},disabled:!a.trim(),className:"flex-1 bg-violet-600 hover:bg-violet-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors",children:i("api.save")})]})]})})}const rk=()=>{const{language:e,setLanguage:t}=yw();return X.jsx("button",{onClick:()=>t("fr"===e?"en":"fr"),className:"group p-2 rounded-lg hover:bg-white/10 transition-colors",title:"fr"===e?"Switch to English":"Passer en franais",children:X.jsx("div",{className:"text-lg transition-transform duration-200 group-hover:scale-110",children:"fr"===e?"":""})})},ik={async addItem(e){if(await mw.searchHistory.count()>=50){const e=await mw.searchHistory.orderBy("createdAt").first();e&&e.id&&await mw.searchHistory.delete(e.id)}const t={...e,createdAt:Date.now()};await mw.searchHistory.add(t)},getHistory:async()=>mw.searchHistory.orderBy("createdAt").reverse().toArray(),async removeItem(e){await mw.searchHistory.delete(e)},async clearHistory(){await mw.searchHistory.clear()},getItem:async e=>mw.searchHistory.get(e),getNfoHistoryItemByContent:async e=>mw.searchHistory.where("generatedNFO").equals(e).and(e=>"nfo"===e.type).first()};function ak({isOpen:e,onClose:t,onSelectItem:n,currentMode:r}){const{t:i}=yw(),[a,s]=U.useState([]),[o,l]=U.useState(!1),c=async()=>{l(!0);try{const e=await ik.getHistory();s(e)}catch(e){console.error("Failed to load history:",e),s([])}finally{l(!1)}};U.useEffect(()=>{e&&c()},[e]);return e?X.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:X.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-4xl w-full max-h-[90vh] shadow-2xl border border-gray-700 flex flex-col",children:[X.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[X.jsxs("div",{className:"flex items-center",children:[X.jsx(e_,{className:"w-6 h-6 text-violet-400 mr-3"}),X.jsx("h2",{className:"text-xl font-bold text-white",children:i("history.title")})]}),X.jsxs("div",{className:"flex items-center space-x-3",children:[a.length>0&&X.jsxs("button",{onClick:async()=>{await ik.clearHistory(),s([])},className:"flex items-center space-x-2 px-3 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg transition-colors text-sm",children:[X.jsx(m_,{className:"w-4 h-4"}),X.jsx("span",{children:i("history.clear.all")})]}),X.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:X.jsx(__,{className:"w-5 h-5"})})]})]}),X.jsx("div",{className:"flex-1 p-6 overflow-auto",children:o?X.jsx("div",{className:"flex justify-center items-center h-full",children:X.jsx(a_,{className:"w-8 h-8 text-violet-400 animate-spin"})}):0===a.length?X.jsxs("div",{className:"text-center py-12",children:[X.jsx(e_,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),X.jsx("p",{className:"text-gray-400 text-lg",children:i("history.empty")}),X.jsx("p",{className:"text-gray-500 text-sm mt-2",children:i("history.empty.description")})]}):X.jsx("div",{className:"space-y-4",children:a.map(e=>{return"movies"===r&&("movie"===e.type||"tv"===e.type)||"books"===r&&"book"===e.type||"nfo"===r&&"nfo"===e.type?X.jsx("div",{className:"bg-gray-700/50 rounded-xl p-4 hover:bg-gray-700/70 transition-colors",children:X.jsxs("div",{className:"flex items-center space-x-4",children:[X.jsx("div",{className:"flex-shrink-0 w-16 h-24 rounded overflow-hidden bg-gray-600",children:e.poster?X.jsx("img",{src:"book"===e.type?e.poster:N_.getImageUrl(e.poster,"w92"),alt:e.title,className:"w-full h-full object-cover"}):X.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"movie"===e.type?X.jsx(Zx,{className:"w-6 h-6 text-gray-400"}):"tv"===e.type?X.jsx(g_,{className:"w-6 h-6 text-gray-400"}):"book"===e.type?X.jsx($x,{className:"w-6 h-6 text-gray-400"}):X.jsx(Kx,{className:"w-6 h-6 text-gray-400"})})}),X.jsxs("div",{className:"flex-1",children:[X.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:["movie"===e.type?X.jsx(Zx,{className:"w-4 h-4 text-emerald-400"}):"tv"===e.type?X.jsx(g_,{className:"w-4 h-4 text-emerald-400"}):"book"===e.type?X.jsx($x,{className:"w-4 h-4 text-emerald-400"}):X.jsx(Kx,{className:"w-4 h-4 text-emerald-400"}),X.jsx("h3",{className:"text-white font-semibold",children:e.title}),"nfo"!==e.type&&X.jsxs("span",{className:"text-gray-400",children:["(",e.year,")"]})]}),X.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[X.jsx(Ix,{className:"w-4 h-4 mr-1"}),X.jsx("span",{children:(a=e.createdAt,new Date(a).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]})]}),X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx("button",{onClick:()=>{n(e),t()},className:"px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors text-sm font-medium",children:i("history.load")}),X.jsx("button",{onClick:()=>(async e=>{"number"==typeof e&&(await ik.removeItem(e),await c())})(e.id),className:"p-2 text-red-400 hover:text-red-300 transition-colors",children:X.jsx(m_,{className:"w-4 h-4"})})]})]})},e.id):null;var a})})})]})}):null}const sk=new class{constructor(){t(this,"baseUrl","https://www.googleapis.com/books/v1"),t(this,"maxResults",40)}async searchBooks(e,t=0){const n=`${this.baseUrl}/volumes?q=${encodeURIComponent(e)}&startIndex=${t}&maxResults=${this.maxResults}&printType=books&orderBy=relevance`,r=await fetch(n);if(!r.ok)throw new Error(`Google Books API error: ${r.status}`);const i=await r.json();return i.items&&(i.items=i.items.filter(e=>{var t;return null==(t=e.volumeInfo)?void 0:t.title}).map(e=>({...e,volumeInfo:{...e.volumeInfo,imageLinks:e.volumeInfo.imageLinks?{...e.volumeInfo.imageLinks,thumbnail:this.getBestImageUrl(e.volumeInfo.imageLinks)||e.volumeInfo.imageLinks.thumbnail}:void 0}}))),i}async getVolumeDetails(e){var t;const n=`${this.baseUrl}/volumes/${e}`,r=await fetch(n);if(!r.ok)throw new Error(`Google Books API error: ${r.status}`);const i=await r.json();if(null==(t=i.volumeInfo)?void 0:t.imageLinks){const e=this.getBestImageUrl(i.volumeInfo.imageLinks);e&&(i.volumeInfo.imageLinks.thumbnail=e)}return i}getHighQualityImage(e){if(!e)return null;const t=["extraLarge","large","medium","small","thumbnail","smallThumbnail"];for(const n of t)if(e[n])return this.normalizeImageUrl(e[n]);return null}getBestImageUrl(e){const t=["extraLarge","large","medium","small","thumbnail","smallThumbnail"];for(const n of t){const t=e[n];if(t)return this.normalizeImageUrl(t)}return null}normalizeImageUrl(e){let t=e.replace("http://","https://");return t.includes("books.google.com")&&(t=t.replace(/[&?]zoom=\d+/,""),t.includes("&w=")||t.includes("?w=")?t=t.replace(/[&?]w=\d+/,"&w=500"):t+=t.includes("?")?"&w=500":"?w=500",t+="&zoom=0.jpg"),t}extractISBN(e){if(!e)return null;const t=e.find(e=>"ISBN_13"===e.type),n=e.find(e=>"ISBN_10"===e.type),r=e.find(e=>"OTHER"===e.type);return(null==t?void 0:t.identifier)||(null==n?void 0:n.identifier)||(null==r?void 0:r.identifier)||null}formatISBN(e){return e?e.filter(e=>"ISBN_10"===e.type||"ISBN_13"===e.type).map(e=>e.identifier):[]}},ok=({onBookSelect:e,onResultSelect:t})=>{const{t:n}=(null==yw?void 0:yw())??{t:e=>e},[r,i]=U.useState(""),[a,s]=U.useState([]),[o,l]=U.useState(!1),[c,u]=U.useState(0),[d,h]=U.useState(0),[p,f]=U.useState(!1),[m,g]=U.useState(!1),v=U.useRef(null),b=U.useCallback(async(e,t=0,n=!1)=>{if(!e.trim())return s([]),g(!1),u(0),void f(!1);l(!0);try{const r=await sk.searchBooks(e,t),i=r.items||[];s(e=>n?[...e,...i]:i),u(r.totalItems||0),h(t),f(t+i.length<(r.totalItems||0)),g(!0)}catch(r){console.error("Erreur lors de la recherche:",r),s([]),u(0),f(!1),g(!1)}finally{l(!1)}},[]),y=(e,t)=>e?e.length<=t?e:e.substring(0,t)+"...":"",x=e=>{if(!e)return null;if(sk.getHighQualityImage){const t=sk.getHighQualityImage(e);if(t)return t}return e.thumbnail||e.smallThumbnail||null};return U.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),X.jsxs("div",{className:"relative w-full max-w-2xl mx-auto search-container",children:[X.jsxs("div",{className:"relative group",children:[X.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10",children:X.jsx(d_,{className:"w-5 h-5 text-gray-400 group-focus-within:text-emerald-300"})}),X.jsx("input",{type:"text",value:r,onChange:e=>{return t=e.target.value,i(t),v.current&&clearTimeout(v.current),void(v.current=setTimeout(()=>{b(t)},500));var t},placeholder:n("ebook.search.placeholder")||"Rechercher un livre par titre, auteur ou ISBN...",className:"w-full pl-12 pr-10 py-4 text-lg bg-gray-800/60 backdrop-blur-sm border-2 border-gray-700/50 rounded-2xl text-white placeholder-gray-400 focus:outline-none focus:border-emerald-500/70 focus:bg-gray-800/80 transition-all duration-300"}),o&&X.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:X.jsx(i_,{className:"w-5 h-5 text-emerald-400 animate-spin"})})]}),m&&X.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800/95 backdrop-blur-md border border-gray-700/50 rounded-2xl shadow-2xl z-50 max-h-[50vh] overflow-y-auto",children:[c>0&&X.jsxs("div",{className:"px-4 py-3 border-b border-gray-700/50 flex items-center justify-between",children:[X.jsxs("span",{className:"text-sm text-emerald-300",children:[X.jsx("strong",{children:c.toLocaleString()})," ",n("ebook.search.results")||"rsultats"]}),X.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-white transition-colors","aria-label":"Fermer les rsultats",children:X.jsx(Ox,{className:"w-4 h-4"})})]}),0===a.length&&!o&&r&&X.jsxs("div",{className:"px-4 py-8 text-center",children:[X.jsx($x,{className:"w-12 h-12 text-gray-500 mx-auto mb-3"}),X.jsx("p",{className:"text-gray-400",children:n("search.no.results")||"Aucun rsultat"})]}),o&&0===a.length&&X.jsxs("div",{className:"px-4 py-8 text-center",children:[X.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-emerald-500 border-t-transparent mx-auto mb-3"}),X.jsx("p",{className:"text-emerald-300",children:n("ebook.search.loading")||"Chargement..."})]}),a.map(r=>{return X.jsx("div",{onClick:()=>(n=>{null==e||e(n),null==t||t(n),g(!1),i(""),s([])})(r),className:"px-4 py-4 border-b border-gray-700/30 hover:bg-gray-700/30 cursor-pointer transition-colors group last:border-b-0",children:X.jsxs("div",{className:"flex space-x-4",children:[X.jsx("div",{className:"flex-shrink-0",children:x(r.volumeInfo.imageLinks)?X.jsx("img",{src:x(r.volumeInfo.imageLinks),alt:r.volumeInfo.title,className:"w-16 h-24 object-cover rounded-lg shadow-lg group-hover:shadow-xl transition-shadow",loading:"lazy"}):X.jsx("div",{className:"w-16 h-24 bg-gradient-to-br from-emerald-500/20 to-teal-600/20 rounded-lg flex items-center justify-center border border-emerald-400/20",children:X.jsx($x,{className:"w-6 h-6 text-emerald-400"})})}),X.jsxs("div",{className:"flex-1 min-w-0",children:[X.jsx("h3",{className:"text-white font-semibold text-lg leading-tight mb-1 group-hover:text-emerald-300 transition-colors",children:y(r.volumeInfo.title||"",60)}),r.volumeInfo.subtitle&&X.jsx("p",{className:"text-gray-400 text-sm mb-2 leading-tight",children:y(r.volumeInfo.subtitle,80)}),X.jsxs("div",{className:"space-y-1",children:[r.volumeInfo.authors&&X.jsxs("div",{className:"flex items-center text-sm text-gray-300",children:[X.jsx(b_,{className:"w-3 h-3 mr-2 text-emerald-400 flex-shrink-0"}),X.jsx("span",{children:(a=r.volumeInfo.authors,a&&0!==a.length?1===a.length?a[0]:2===a.length?`${a[0]} & ${a[1]}`:`${a[0]} ${n("ebook.more",{count:a.length-1})||"+"+(a.length-1)}`:n("ebook.unknown.author")||"Auteur inconnu")})]}),r.volumeInfo.publishedDate&&X.jsxs("div",{className:"flex items-center text-sm text-gray-300",children:[X.jsx(Ix,{className:"w-3 h-3 mr-2 text-emerald-400 flex-shrink-0"}),X.jsx("span",{children:new Date(r.volumeInfo.publishedDate).getFullYear()})]}),r.volumeInfo.categories&&r.volumeInfo.categories.length>0&&X.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[r.volumeInfo.categories.slice(0,2).map((e,t)=>X.jsx("span",{className:"px-2 py-1 bg-emerald-500/10 text-emerald-300 text-xs rounded-full border border-emerald-400/20",children:e},t)),r.volumeInfo.categories.length>2&&X.jsxs("span",{className:"text-gray-400 text-xs px-1 py-1",children:["+",r.volumeInfo.categories.length-2," ",n("ebook.showMore")||"de plus"]})]})]})]})]})},r.id);var a}),p&&!o&&a.length>0&&X.jsx("div",{className:"px-4 py-4 text-center border-t border-gray-700/50",children:X.jsx("button",{onClick:()=>{b(r,d+40,!0)},className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors",children:n("ebook.search.loadMore")||"Charger plus"})}),p&&o&&a.length>0&&X.jsx("div",{className:"px-4 py-4 text-center border-t border-gray-700/50",children:X.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-emerald-500 border-t-transparent mx-auto"})})]})]})},lk={Fiction:"Fiction","Literary Fiction":"Fiction littraire","Historical Fiction":"Fiction historique","Science Fiction":"Science-fiction",Fantasy:"Fantasy",Mystery:"Mystre",Thriller:"Thriller",Romance:"Romance",Horror:"Horreur",Adventure:"Aventure",Crime:"Policier",Detective:"Policier",Suspense:"Suspense",Western:"Western","Young Adult Fiction":"Fiction jeune adulte","Children's Fiction":"Fiction pour enfants",Biography:"Biographie",Autobiography:"Autobiographie",Memoir:"Mmoires",History:"Histoire",Philosophy:"Philosophie",Psychology:"Psychologie",Religion:"Religion",Spirituality:"Spiritualit","Self-Help":"Dveloppement personnel",Health:"Sant",Fitness:"Fitness",Cooking:"Cuisine",Travel:"Voyage",Nature:"Nature",Science:"Science",Technology:"Technologie",Medicine:"Mdecine",Law:"Droit",Politics:"Politique",Economics:"conomie",Business:"Business",Management:"Management",Education:"ducation",Art:"Art",Music:"Musique",Photography:"Photographie",Sports:"Sport",Games:"Jeux",Humor:"Humour",Comics:"Bande dessine","Graphic Novels":"Roman graphique",Poetry:"Posie",Drama:"Thtre",Essays:"Essais",Reference:"Rfrence",Dictionary:"Dictionnaire",Encyclopedia:"Encyclopdie",Textbook:"Manuel scolaire","Study Guide":"Guide d'tude","Language Arts":"Arts du langage",Literature:"Littrature",Classics:"Classiques","Computer Science":"Informatique",Programming:"Programmation","Web Development":"Dveloppement web",Database:"Base de donnes",Networking:"Rseaux",Security:"Scurit","Artificial Intelligence":"Intelligence artificielle","Machine Learning":"Apprentissage automatique","Juvenile Fiction":"Fiction jeunesse","Juvenile Nonfiction":"Documentaire jeunesse","Children's Books":"Livres pour enfants","Picture Books":"Albums illustrs","Early Readers":"Premiers lecteurs","True Crime":"Faits divers","Current Events":"Actualits","Social Science":"Sciences sociales",Anthropology:"Anthropologie",Sociology:"Sociologie",Geography:"Gographie","Environmental Science":"Sciences environnementales",Mathematics:"Mathmatiques",Physics:"Physique",Chemistry:"Chimie",Biology:"Biologie",Astronomy:"Astronomie",Geology:"Gologie",Architecture:"Architecture",Design:"Design",Fashion:"Mode",Gardening:"Jardinage",Crafts:"Artisanat",Hobbies:"Loisirs",Pets:"Animaux de compagnie",Family:"Famille",Parenting:"Parentalit",Relationships:"Relations","Personal Growth":"Dveloppement personnel",Meditation:"Mditation",Yoga:"Yoga","Alternative Medicine":"Mdecine alternative",Diet:"Rgime",Nutrition:"Nutrition",Wine:"Vin",Beer:"Bire",Cocktails:"Cocktails"};function ck(e){const t=e.trim();if(lk[t])return lk[t];for(const[n,r]of Object.entries(lk))if(t.toLowerCase().includes(n.toLowerCase())||n.toLowerCase().includes(t.toLowerCase()))return r;return t}const uk=e=>e?e.split(",").map(e=>{const t=e.trim();return`[url=https://www.sharewood.tv/torrents?tags=${encodeURIComponent(t)}]${t}[/url]`}).join(", "):"";const dk=new class{generateBBCode(e,t=1){return 1===t?this.generateBBCodeStyle1(e):2===t?this.generateBBCodeStyle2(e):this.generateBBCodeStyle3(e)}generateBBCodeStyle1(e){var t,n;const{book:r,specs:i,coverImage:a}=e,s=i.title||r.volumeInfo.title||"Titre inconnu",o=i.subtitle||r.volumeInfo.subtitle||"",l=this.formatAuthors(i.authors||r.volumeInfo.authors),c=i.publisher||r.volumeInfo.publisher||"",u=i.publishedDate||r.volumeInfo.publishedDate||"",d=i.year||(u?new Date(u).getFullYear():""),h=this.stripHtml(i.description||r.volumeInfo.description||""),p=i.mainCategory||ck((null==(t=r.volumeInfo.categories)?void 0:t[0])||"")||"",f=i.isbn||this.getISBN(i.industryIdentifiers||r.volumeInfo.industryIdentifiers)||"",m=i.pageCount||r.volumeInfo.pageCount||"",g=r.volumeInfo.infoLink||"",v=i.bookDisplayNumber||(null==(n=r.volumeInfo.seriesInfo)?void 0:n.bookDisplayNumber)||"",b=i.edition||"",y=i.source||"",x=i.fileName||"",_=i.notes||"";let w=`[center][b][font=Verdana][color=#3d85c6][size=29]${s}\n\n[/size][size=18](${d})[/size][/color][/font][/b]\n\n[img]${a}[/img][color=#ea9999][i]\n\n[/i][/color][color=#ea9999][i][b][font=Verdana][size=29]\n${o}[/size][/font][/b][/i][/color]\n\n[img]https://i.imgur.com/zNnPX3V.png[/img]\n\n[font=Verdana][size=13][b][color=#3d85c6]Auteurs :[/color][/b] [i]${l}[/i]`;return c&&(w+=`\n[b][color=#3d85c6]Editeur :[/color][/b] [i]${c}[/i]`),w+=`\n[b][color=#3d85c6]Genres :[/color][/b] ${uk(p)}\n[b][color=#3d85c6]Anne :[/color][/b] [i]${d}[/i]`,u&&(w+=`\n[b][color=#3d85c6]Date de sortie :[/color][/b] [i]${u}[/i]`),w+=`\n[b][color=#3d85c6]Pages :[/color][/b] [i]${m}[/i]`,v&&(w+=`\n[b][color=#3d85c6]Tome n  :[/color][/b] [i]${v}[/i]`),b&&(w+=`\n[color=#3d85c6][b]dition :[/b] [/color][i]${b}[/i]`),w+=`\n[color=#3d85c6][b]ISBN :[/b] [/color][i]${f}[/i]\n\n[size=13][url=${g}][b][color=#1e84cc]Plus d'info  >> Google Book[/color][/b][/url][/size]\n\n[img]https://i.imgur.com/ATVsdeo.png[/img]\n\n[font=Verdana][size=13]${h}[/size][/font]\n\n\n[img]https://i.imgur.com/Ji92VqD.png[/img]`,y&&(w+=`\n[b][color=#3d85c6]Source :[/color][/b] [i]${y}[/i]`),w+=`\n[color=#3d85c6][b]Format :[/b] [/color][i]${i.format}[/i]\n[b][color=#3d85c6]Qualit :[/color][/b] [i]${i.quality}[/i]\n\n[b][color=#3d85c6]Langue :[/color][/b][i]${(i.language||r.volumeInfo.language).toUpperCase()}[/i]\n\n\n[img]https://i.imgur.com/ZutFbjb.png[/img]`,x&&(w+=`\n[b][color=#3d85c6]Release :[/color][/b] [i]${x}[/i]`),_&&(w+=`\n[b][color=#3d85c6]Notes :[/color][/b] [i]${_}[/i]`),w+=`\n[b][color=#3d85c6]Taille totale :[/color][/b] ${i.fileSize.value} ${i.fileSize.unit}\n[color=#3d85c6][b]Nombre de fichier [/b][/color]: ${i.numberOfFiles||"1"}[/size][/font][/center]`,w}generateBBCodeStyle2(e){var t;const{book:n,specs:r,coverImage:i}=e,a=r.title||n.volumeInfo.title||"Titre inconnu",s=r.subtitle||n.volumeInfo.subtitle||"",o=this.formatAuthors(r.authors||n.volumeInfo.authors),l=r.publisher||n.volumeInfo.publisher||"",c=r.publishedDate||n.volumeInfo.publishedDate||"",u=r.year||(c?new Date(c).getFullYear():""),d=this.stripHtml(r.description||n.volumeInfo.description||""),h=r.isbn||this.getISBN(r.industryIdentifiers||n.volumeInfo.industryIdentifiers)||"",p=r.pageCount||n.volumeInfo.pageCount||"",f=n.volumeInfo.infoLink||"",m=r.bookDisplayNumber||(null==(t=n.volumeInfo.seriesInfo)?void 0:t.bookDisplayNumber)||"",g=r.fileName||"",v=r.notes||"";let b=`[center][color=#10b981][size=29][b]${a}[/b][/size][/color]\n\n[color=#10b981][size=29][b]${s}[/b][/size][/color]\n\n[size=10] [/size]\n\n[size=29][b][img]${i}[/img][/b][/size]\n\n[color=#10b981][b][size=16]    [/size][/b][/color]\n\n[size=16][color=#10b981][b]Auteur :[/b] ${o}\n[b]Anne :[/b] ${u}`;return m&&(b+=`\n[b]Tome n [/b]:  ${m}`),l&&(b+=`\n[b]Editeur :[/b] ${l}`),b+=`\n[b]Nombres de pages [/b]:  ${p}\n[b]ISBN [/b]:  ${h}\n\n[size=13][url=${f}][b][color=#1e84cc]Voir >> [img]https://i.imgur.com/vCfx0LD.png[/img][/color][/b][/url][/size]\n\n[b]Synopsis[/b][b] :[/b] [/color]\n\n${d}\n\n[/size]\n\n[size=16]\n[color=#10b981][b]Format :[/b][/color] ${r.format}\n[color=#10b981][b]Qualit :[/b][/color] ${r.quality}\n\n[color=#10b981][b]Langue :[/b][/color] ${(r.language||n.volumeInfo.language).toUpperCase()}`,g&&(b+=`\n[color=#10b981][b]Nom de la release :[/b][/color] ${g}`),v&&(b+=`\n\n[color=#10b981][b]Notes :[/b][/color] [i]${v}[/i]`),r.numberOfFiles&&(b+=`\n\n[color=#10b981][b]Nombre de fichiers :[/b][/color] ${r.numberOfFiles}`),b+=`\n[color=#10b981][b]Poids Total :[/b][/color] ${r.fileSize.value} ${r.fileSize.unit}\n\n[/size]\n[/center]`,b}generateBBCodeStyle3(e){var t,n;const{book:r,specs:i,coverImage:a}=e,s=i.title||r.volumeInfo.title||"Titre inconnu",o=i.subtitle||r.volumeInfo.subtitle||"",l=this.formatAuthors(i.authors||r.volumeInfo.authors),c=i.publisher||r.volumeInfo.publisher||"",u=i.publishedDate||r.volumeInfo.publishedDate||"",d=i.year||(r.volumeInfo.publishedDate?new Date(r.volumeInfo.publishedDate).getFullYear():""),h=this.stripHtml(i.description||r.volumeInfo.description||""),p=i.mainCategory||ck((null==(t=r.volumeInfo.categories)?void 0:t[0])||"")||"",f=i.isbn||this.getISBN(i.industryIdentifiers||r.volumeInfo.industryIdentifiers)||"",m=i.pageCount||r.volumeInfo.pageCount||"",g=r.volumeInfo.infoLink||"",v=i.bookDisplayNumber||(null==(n=r.volumeInfo.seriesInfo)?void 0:n.bookDisplayNumber)||"",b=i.edition||"",y=i.source||"",x=i.fileName||"",_=i.notes||"",w=(i.language||r.volumeInfo.language).toUpperCase();let k=`[table][tr][td] [/td][td][table][tr][td][table][tr][td][table][tr][td]\n&nbsp; &nbsp; &nbsp; [img width=550]${a}[/img] &nbsp; &nbsp; &nbsp; [/td][td] [/td][/tr][/table][/td][td][table][tr][td]\n  [/td][td]   [/td][/tr][/table][/td][td][table][tr][td][table][tr][td][table][tr][td][color=#3d85c6][size=29] ${s}[/size][/color][/td][/tr][tr][td][table][tr][td]  ${d} - ${uk(p)} - ${m} pages  [/td][td][size=10]   [/size][/td][td] &nbsp; - [url=${g}][img]https://i.imgur.com/vCfx0LD.png[/img][/url] &nbsp; &nbsp; [/td][/tr][/table][/td][/tr][tr][td][hr=#FF0000][/hr][/td][/tr][/table][/td][/tr][tr][td][i][color=#c27ba0][size=18][center][b]"${o}"[/b][/center][/size][/color][/i]\n[/td][/tr][tr][td] \n[/td][/tr][tr][td][table][tr][td][b][color=#3d85c6]Auteurs : &nbsp;[/color][/b] ${l}[/td][/tr][tr][td][b][color=#3d85c6]Editeur : &nbsp;[/color][/b] ${c}[/td][/tr]`;return b&&u?k+=`[tr][td][b][color=#3d85c6]Edition : &nbsp;[/color][/b] ${b}  [b][color=#3d85c6]  Parution : &nbsp;[/color][/b] ${u}[/td][/tr]`:b&&!u?k+=`[tr][td][b][color=#3d85c6]Edition : &nbsp;[/color][/b] ${b}[/td][/tr]`:!b&&u&&(k+=`[tr][td][b][color=#3d85c6]Parution : &nbsp;[/color][/b] ${u}[/td][/tr]`),k+=`[tr][td][b][color=#3d85c6][/color][/b][/td][td] [/td][/tr][/table][/td][/tr][tr][td]  [br] [/br][b][color=#3d85c6]Synopsis &nbsp;[br] [/br] [br] [/br][/color][/b][/td][/tr][tr][td]  &nbsp; ${h}[br] [/br][hr=#FF0000][/hr][/td][/tr][/table][/td][/tr][tr][td][table][tr][td][b][color=#3d85c6]Format :  &nbsp;[/color][/b][/td][td]${i.format}[/td][td] &nbsp; [/td][td][b][color=#3d85c6]&nbsp;&nbsp;&nbsp;[right]Qualit :  &nbsp;[/right][/color][/b][/td][td]${i.quality}[/td][/tr][/table][/td][/tr][tr][td][table][tr][td][b][color=#3d85c6]Tome n : &nbsp;[/color][/b][/td][td]${v}[/td][td] &nbsp; [/td][td][b][color=#3d85c6]&nbsp;&nbsp;&nbsp;[right]Source  : &nbsp;[/right][/color][/b][/td][td]&nbsp;${y}[/td][/tr][/table][/td][/tr][tr][td][table][tr][td] [b][color=#3d85c6]Taille totale : &nbsp;[/color][/b][/td][td]${i.fileSize.value} ${i.fileSize.unit}[/td][td] &nbsp; [/td][td][b][color=#3d85c6]&nbsp;&nbsp;&nbsp;[right]Nb de fichiers : &nbsp;[/right][/color][/b][/td][td]&nbsp;${i.numberOfFiles||"1"}[/td][/tr][/table][/td][/tr][tr][td][table][tr][td][br] [/br][/td][td][br] [/br][/td][/tr][/table][/td][/tr][tr][td][table][tr][td][b][color=#3d85c6] Langue : &nbsp;[/color][/b][/td][td][br] [/br][/td][/tr][/table][/td][/tr][tr][td][table][tr][td][size=13]&nbsp;&nbsp;${w}[/size][/td][td][br] [/br][/td][/tr][/table][/td][/tr][tr][td][table][tr][td][br] [/br][b][color=#3d85c6]ISBN : &nbsp;[/color][/b][/td][td][br] [/br][/td][/tr][/table][/td][/tr][tr][td][table][tr][td][size=13]&nbsp;&nbsp;${f}[/size][br] [/br][/td][td][br] [/br][/td][/tr][/table][/td][/tr][/table][/td][/tr][/table][/td][/tr][tr][td][hr=#FF0000][/hr][/td][/tr]`,x&&(k+=`[tr][td][b][color=#3d85c6]Nom release : &nbsp; [/color][/b] [br] [/br] ${x}[/td][/tr]`),_&&(k+=`[tr][td][b][color=#3d85c6][br] [/br]Notes:  [/color][/b] [br] [/br] ${_}[/td][/tr]`),k+="[/table][/td][/tr][/table]",k}generateHTML(e){var t;const{book:n,specs:r,coverImage:i}=e,a=n.volumeInfo.title||"Titre inconnu",s=this.formatAuthors(n.volumeInfo.authors),o=n.volumeInfo.publisher||"diteur inconnu",l=n.volumeInfo.publishedDate?new Date(n.volumeInfo.publishedDate).getFullYear():"Anne inconnue",c=n.volumeInfo.description||"Aucun synopsis disponible.",u=(null==(t=n.volumeInfo.categories)?void 0:t.join(", "))||"Non spcifi",d=this.getISBN(n.volumeInfo.industryIdentifiers),h=n.volumeInfo.pageCount||"Non spcifi";return`<!DOCTYPE html>\n<html lang="fr">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>${a} - Fiche eBook</title>\n    <style>\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            line-height: 1.6;\n            color: #ffffff;\n            background: linear-gradient(135deg, #064e3b, #065f46, #047857);\n            margin: 0;\n            padding: 20px;\n            min-height: 100vh;\n        }\n        .container {\n            max-width: 800px;\n            margin: 0 auto;\n            background: rgba(17, 24, 39, 0.9);\n            border-radius: 20px;\n            padding: 30px;\n            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n            border: 1px solid rgba(75, 85, 99, 0.3);\n        }\n        .header {\n            text-align: center;\n            margin-bottom: 30px;\n            padding-bottom: 20px;\n            border-bottom: 2px solid #10b981;\n        }\n        h1 {\n            color: #10b981;\n            font-size: 2.5em;\n            margin: 0 0 10px 0;\n            font-weight: 700;\n        }\n        .subtitle {\n            color: #9ca3af;\n            font-size: 1.2em;\n            margin-bottom: 20px;\n        }\n        .cover {\n            text-align: center;\n            margin: 20px 0;\n        }\n        .cover img {\n            max-width: 200px;\n            border-radius: 10px;\n            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);\n        }\n        .section {\n            margin: 30px 0;\n        }\n        .section-title {\n            color: #059669;\n            font-size: 1.5em;\n            font-weight: 600;\n            margin-bottom: 15px;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n        .info-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 15px;\n            margin: 20px 0;\n        }\n        .info-item {\n            background: rgba(31, 41, 55, 0.6);\n            padding: 15px;\n            border-radius: 10px;\n            border: 1px solid rgba(75, 85, 99, 0.3);\n        }\n        .label {\n            color: #10b981;\n            font-weight: 600;\n            margin-bottom: 5px;\n        }\n        .value {\n            color: #f3f4f6;\n        }\n        .synopsis {\n            background: rgba(31, 41, 55, 0.6);\n            padding: 20px;\n            border-radius: 10px;\n            border-left: 4px solid #10b981;\n            margin: 20px 0;\n        }\n        .specs-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 15px;\n        }\n        .footer {\n            text-align: center;\n            margin-top: 40px;\n            padding-top: 20px;\n            border-top: 1px solid rgba(75, 85, 99, 0.3);\n            color: #9ca3af;\n            font-size: 0.9em;\n        }\n        .notes {\n            background: rgba(31, 41, 55, 0.6);\n            padding: 20px;\n            border-radius: 10px;\n            border-left: 4px solid #10b981;\n            margin: 20px 0;\n            font-style: italic;\n        }\n        @media print {\n            body { background: white; color: black; }\n            .container { box-shadow: none; background: white; }\n        }\n    </style>\n</head>\n<body>\n    <div class="container">\n        <div class="header">\n            <h1>${a}</h1>\n            ${n.volumeInfo.subtitle?`<div class="subtitle">${n.volumeInfo.subtitle}</div>`:""}\n        </div>\n\n        ${i?`<div class="cover"><img src="${i}" alt="${a}"></div>`:""}\n\n        <div class="section">\n            <h2 class="section-title"> Informations gnrales</h2>\n            <div class="info-grid">\n                <div class="info-item">\n                    <div class="label">Auteur(s)</div>\n                    <div class="value">${s}</div>\n                </div>\n                <div class="info-item">\n                    <div class="label">diteur</div>\n                    <div class="value">${o}</div>\n                </div>\n                <div class="info-item">\n                    <div class="label">Anne</div>\n                    <div class="value">${l}</div>\n                </div>\n                <div class="info-item">\n                    <div class="label">Pages</div>\n                    <div class="value">${h}</div>\n                </div>\n                <div class="info-item">\n                    <div class="label">Langue</div>\n                    <div class="value">${(n.volumeInfo.language||r.language).toUpperCase()}</div>\n                </div>\n                <div class="info-item">\n                    <div class="label">Catgories</div>\n                    <div class="value">${u}</div>\n                </div>\n                ${d?`<div class="info-item"><div class="label">ISBN</div><div class="value">${d}</div></div>`:""}\n            </div>\n        </div>\n\n        <div class="section">\n            <h2 class="section-title"> Synopsis</h2>\n            <div class="synopsis">${c}</div>\n        </div>\n\n        <div class="section">\n            <h2 class="section-title"> Spcifications techniques</h2>\n            <div class="specs-grid">\n${r.fileName?`<div class="info-item"><div class="label">Nom du fichier</div><div class="value">${r.fileName}</div></div>`:""}\n                <div class="info-item">\n                    <div class="label">Format</div>\n                    <div class="value">${r.format}</div>\n                </div>\n                <div class="info-item">\n                    <div class="label">Taille</div>\n                    <div class="value">${r.fileSize.value} ${r.fileSize.unit}</div>\n                </div>\n                <div class="info-item">\n                    <div class="label">Qualit</div>\n                    <div class="value">${r.quality}</div>\n                </div>\n\n${r.source?`<div class="info-item"><div class="label">Source</div><div class="value">${r.source}</div></div>`:""}\n                ${r.edition?`<div class="info-item"><div class="label">dition</div><div class="value">${r.edition}</div></div>`:""}\n                ${r.numberOfFiles?`<div class="info-item"><div class="label">Nombre de fichiers</div><div class="value">${r.numberOfFiles}</div></div>`:""}\n                ${r.uploadedBy?`<div class="info-item"><div class="label">Upload par</div><div class="value">${r.uploadedBy}</div></div>`:""}\n            </div>\n        </div>\n\n        ${r.notes?`\n        <div class="section">\n            <h2 class="section-title"> Notes</h2>\n            <div class="notes">${r.notes}</div>\n        </div>`:""}\n\n        <div class="footer">\n            Fiche gnre avec <strong>FicheGen</strong>\n        </div>\n    </div>\n</body>\n</html>`}generateMarkdown(e){var t;const{book:n,specs:r,coverImage:i}=e,a=n.volumeInfo.title||"Titre inconnu",s=this.formatAuthors(n.volumeInfo.authors),o=n.volumeInfo.publisher||"diteur inconnu",l=n.volumeInfo.publishedDate?new Date(n.volumeInfo.publishedDate).getFullYear():"Anne inconnue",c=this.stripHtml(n.volumeInfo.description||""),u=(null==(t=n.volumeInfo.categories)?void 0:t.join(", "))||"Non spcifi",d=this.getISBN(n.volumeInfo.industryIdentifiers),h=n.volumeInfo.pageCount||"Non spcifi";return`# ${a}\n${n.volumeInfo.subtitle?`## ${n.volumeInfo.subtitle}`:""}\n\n${i?`![${a}](${i})`:""}\n\n##  Informations gnrales\n\n- **Auteur(s) :** ${s}\n- **diteur :** ${o}\n- **Anne de publication :** ${l}\n- **Pages :** ${h}\n- **Langue :** ${(n.volumeInfo.language||r.language).toUpperCase()}\n- **Catgories :** ${u}\n${d?`- **ISBN :** ${d}`:""}\n\n##  Synopsis\n\n> ${c||"Aucun synopsis disponible."}\n\n##  Spcifications techniques\n\n${r.fileName?`- **Nom du fichier :** ${r.fileName}\n`:""}- **Format :** ${r.format}\n- **Taille :** ${r.fileSize.value} ${r.fileSize.unit}\n- **Qualit :** ${r.quality}\n${r.source?`- **Source :** ${r.source}`:""}\n${r.edition?`- **dition :** ${r.edition}`:""}\n${r.numberOfFiles?`- **Nombre de fichiers :** ${r.numberOfFiles}`:""}\n${r.uploadedBy?`- **Upload par :** ${r.uploadedBy}`:""}\n\n${r.notes?`##  Notes\n\n> ${r.notes}`:""}\n\n---\n*Fiche gnre avec FicheGen*`}generateText(e){var t;const{book:n,specs:r}=e,i=n.volumeInfo.title||"Titre inconnu",a=this.formatAuthors(n.volumeInfo.authors),s=n.volumeInfo.publisher||"diteur inconnu",o=n.volumeInfo.publishedDate?new Date(n.volumeInfo.publishedDate).getFullYear():"Anne inconnue",l=this.stripHtml(n.volumeInfo.description||""),c=(null==(t=n.volumeInfo.categories)?void 0:t.join(", "))||"Non spcifi",u=this.getISBN(n.volumeInfo.industryIdentifiers),d=n.volumeInfo.pageCount||"Non spcifi";return`${i.toUpperCase()}\n${n.volumeInfo.subtitle?n.volumeInfo.subtitle:""}\n\n\nINFORMATIONS GNRALES\n\n\nAuteur(s): ${a}\nditeur: ${s}\nAnne de publication: ${o}\nPages: ${d}\nLangue: ${(n.volumeInfo.language||r.language).toUpperCase()}\nCatgories: ${c}\n${u?`ISBN: ${u}`:""}\n\n\nSYNOPSIS\n\n\n${l||"Aucun synopsis disponible."}\n\n\nSPCIFICATIONS TECHNIQUES\n\n\n${r.fileName?`Nom du fichier: ${r.fileName}\n`:""}Format: ${r.format}\nTaille: ${r.fileSize.value} ${r.fileSize.unit}\nQualit: ${r.quality}\n${r.source?`Source: ${r.source}`:""}\n${r.edition?`dition: ${r.edition}`:""}\n${r.numberOfFiles?`Nombre de fichiers: ${r.numberOfFiles}`:""}\n${r.uploadedBy?`Upload par: ${r.uploadedBy}`:""}\n\n${r.notes?`\nNOTES\n\n\n${r.notes}\n\n`:""}\nFiche gnre avec FicheGen\n`}formatAuthors(e){return e&&0!==e.length?1===e.length?e[0]:2===e.length?`${e[0]} & ${e[1]}`:e.join(", "):"Auteur inconnu"}stripHtml(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}getISBN(e){if(!e)return null;const t=e.find(e=>"ISBN_13"===e.type),n=e.find(e=>"ISBN_10"===e.type),r=e.find(e=>"OTHER"===e.type);return(null==t?void 0:t.identifier)||(null==n?void 0:n.identifier)||(null==r?void 0:r.identifier)||null}};function hk({isOpen:e,onClose:t,onCoverChange:n,currentCover:r}){const{t:i}=yw(),[a,s]=U.useState(""),[o,l]=U.useState(!1);if(!e)return null;const c=()=>{t(),s(""),l(!1)};return X.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:X.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl max-w-md w-full shadow-2xl",children:[X.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[X.jsxs("h2",{className:"text-xl font-bold text-white flex items-center",children:[X.jsx(t_,{className:"w-5 h-5 mr-2 text-emerald-400"}),i("modal.cover.title")]}),X.jsx("button",{onClick:c,className:"text-gray-400 hover:text-white transition-colors",children:X.jsx(__,{className:"w-5 h-5"})})]}),X.jsxs("form",{onSubmit:e=>{e.preventDefault(),a.trim()&&(n(a.trim()),t(),s(""),l(!1))},className:"p-6 space-y-4",children:[r&&X.jsxs("div",{className:"text-center",children:[X.jsx("p",{className:"text-sm text-gray-400 mb-2",children:i("modal.cover.current")}),X.jsx("img",{src:r,alt:"Cover actuelle",className:"w-20 h-28 object-cover rounded-lg mx-auto border border-gray-600",onError:e=>{e.currentTarget.src=getPlaceholderSvg()}})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:i("modal.cover.url")}),X.jsx("input",{type:"url",value:a,onChange:e=>{s(e.target.value),l(!1)},placeholder:"https://example.com/image.jpg",className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",required:!0})]}),a&&X.jsxs("div",{className:"text-center",children:[X.jsx("p",{className:"text-sm text-gray-400 mb-2",children:i("modal.cover.preview")}),o?X.jsx("div",{className:"w-20 h-28 bg-gray-800 border border-red-500 rounded-lg mx-auto flex items-center justify-center",children:X.jsx("span",{className:"text-red-400 text-xs text-center px-2",children:i("modal.cover.error")})}):X.jsx("img",{src:a,alt:"Aperu",className:"w-20 h-28 object-cover rounded-lg mx-auto border border-gray-600",onError:()=>l(!0)})]}),X.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:X.jsxs("div",{className:"flex items-start space-x-2",children:[X.jsx(Vx,{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0"}),X.jsxs("div",{className:"text-sm text-blue-300",children:[X.jsx("p",{className:"font-medium mb-1",children:i("modal.cover.help.title")}),X.jsx("p",{className:"text-blue-300/80",children:i("modal.cover.help.description")})]})]})}),X.jsxs("div",{className:"flex space-x-3 pt-4",children:[X.jsx("button",{type:"button",onClick:c,className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:i("modal.cover.cancel")}),X.jsx("button",{type:"submit",disabled:!a.trim()||o,className:"flex-1 px-4 py-2 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:i("modal.cover.confirm")})]})]})]})})}function pk({book:e,ebookSpecs:t,isPreview:n=!1,selectedCover:r,onCoverChange:i}){var a,s,o,l;const{t:c}=yw(),[u,d]=U.useState(!1),[h,p]=U.useState(!1),[f,m]=U.useState(!1),g=()=>`data:image/svg+xml;base64,${btoa('\n          <svg width="128" height="192" viewBox="0 0 128 192" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <rect width="128" height="192" fill="#374151"/>\n                <path d="M32 48h64v8H32v-8zm0 16h64v8H32v-8zm0 16h48v8H32v-8z" fill="#6B7280"/>\n                <rect x="48" y="96" width="32" height="32" rx="4" fill="#6B7280"/>\n            </svg>\n\n        ')}`,v=()=>{if(r)return r;const t=e.volumeInfo.imageLinks||{};return t.extraLarge||t.large||t.medium||t.small||t.thumbnail||t.smallThumbnail||g()},[b,y]=U.useState(1),x={book:e,specs:t,coverImage:v()},_=t?dk.generateBBCode(x,b):"",w=e.volumeInfo.authors||[];w.length>3&&w.slice(0,3),w.length;const k=(null==(s=null==(a=e.volumeInfo.industryIdentifiers)?void 0:a.find(e=>"ISBN_13"===e.type))?void 0:s.identifier)||(null==(l=null==(o=e.volumeInfo.industryIdentifiers)?void 0:o.find(e=>"ISBN_10"===e.type))?void 0:l.identifier)||"",N=e.volumeInfo.description||"",j=N.length>300?N.slice(0,300)+"...":N,S=n=>{if(!t)return;const r={book:e,specs:t,coverImage:v()};let i="",a=`${e.volumeInfo.title.replace(/[^a-z0-9]/gi,"_")}`,s="text/plain";switch(n){case"html":i=dk.generateHTML(r),a+=".html",s="text/html";break;case"markdown":i=dk.generateMarkdown(r),a+=".md",s="text/markdown";break;case"text":i=dk.generateText(r),a+=".txt",s="text/plain"}const o=new Blob([i],{type:s}),l=URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=a,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l)};return X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-md border border-gray-700/50 rounded-2xl overflow-hidden shadow-2xl",children:[X.jsxs("div",{className:"relative bg-gradient-to-r from-emerald-600/20 to-teal-600/20 p-6 border-b border-gray-700/50",children:[X.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start md:space-x-6",children:[X.jsx("div",{className:"flex-shrink-0 mb-4 md:mb-0",children:X.jsxs("div",{className:"relative group",children:[X.jsx("img",{src:v(),alt:e.volumeInfo.title,className:"w-32 h-48 object-cover rounded-lg border border-gray-600/50 shadow-lg group-hover:scale-105 transition-transform duration-300",onError:e=>{e.currentTarget.src=g()}}),i&&!n&&X.jsx("button",{onClick:()=>m(!0),className:"absolute inset-0 bg-black/60 backdrop-blur-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:X.jsx("span",{className:"text-white text-sm font-medium px-3 py-1 bg-emerald-600 rounded-md",children:c("card.change.poster")})})]})}),X.jsxs("div",{className:"flex-1 min-w-0",children:[X.jsx("h2",{className:"text-3xl font-bold text-white mb-2 leading-tight",children:(null==t?void 0:t.title)||e.volumeInfo.title}),((null==t?void 0:t.subtitle)||e.volumeInfo.subtitle)&&X.jsx("h3",{className:"text-xl text-gray-300 mb-3",children:(null==t?void 0:t.subtitle)||e.volumeInfo.subtitle}),((null==t?void 0:t.authors)||w).length>0&&X.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[X.jsx(b_,{className:"w-4 h-4 text-emerald-400 flex-shrink-0"}),X.jsxs("div",{className:"flex items-center flex-wrap gap-1",children:[((null==t?void 0:t.authors)||w).slice(0,3).map((e,n)=>X.jsxs("span",{className:"text-emerald-400 font-medium",children:[e,n<Math.min(3,((null==t?void 0:t.authors)||w).length)-1&&", "]},n)),((null==t?void 0:t.authors)||w).length>3&&X.jsxs("span",{className:"text-gray-400 text-sm ml-1",children:["+",((null==t?void 0:t.authors)||w).length-3," ",c("ebook.more")]})]})]}),X.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[void 0!==e.volumeInfo.averageRating&&X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(p_,{className:"w-4 h-4 text-yellow-400 fill-current"}),X.jsxs("span",{className:"text-white font-medium",children:[e.volumeInfo.averageRating,"/5"]}),e.volumeInfo.ratingsCount&&X.jsxs("span",{className:"text-gray-400 text-sm",children:["(",e.volumeInfo.ratingsCount," ",c("ebook.ratings"),")"]})]}),e.volumeInfo.seriesInfo&&X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(Tx,{className:"w-4 h-4 text-gray-400"}),X.jsx("span",{className:"text-gray-300",children:e.volumeInfo.seriesInfo.bookDisplayNumber})]}),e.volumeInfo.infoLink&&X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(Vx,{className:"w-4 h-4 text-emerald-400 flex-shrink-0"}),X.jsx("a",{href:`https://books.google.fr/books?id=${e.id}&printsec=frontcover&hl=fr&source=gbs_ge_summary_r&cad=0`,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-400 hover:text-emerald-300 truncate",children:c("ebook.googleBookLink")})]})]}),X.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[((null==t?void 0:t.year)||(null==t?void 0:t.publishedDate)||e.volumeInfo.publishedDate)&&X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(Ix,{className:"w-4 h-4 text-gray-400"}),X.jsx("span",{className:"text-gray-300",children:(null==t?void 0:t.year)||((null==t?void 0:t.publishedDate)?new Date(t.publishedDate).getFullYear():new Date(e.volumeInfo.publishedDate).getFullYear())})]}),((null==t?void 0:t.publisher)||e.volumeInfo.publisher)&&X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(Dx,{className:"w-4 h-4 text-gray-400"}),X.jsx("span",{className:"text-gray-300 truncate",children:(null==t?void 0:t.publisher)||e.volumeInfo.publisher})]}),((null==t?void 0:t.pageCount)||e.volumeInfo.pageCount)&&X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(Tx,{className:"w-4 h-4 text-gray-400"}),X.jsxs("span",{className:"text-gray-300",children:[(null==t?void 0:t.pageCount)||e.volumeInfo.pageCount," ",c("ebook.pages")]})]}),((null==t?void 0:t.language)||e.volumeInfo.language)&&X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(Xx,{className:"w-4 h-4 text-gray-400"}),X.jsx("span",{className:"text-gray-300",children:((null==t?void 0:t.language)||e.volumeInfo.language).toUpperCase()})]})]}),k&&X.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[X.jsx(Jx,{className:"w-4 h-4 text-gray-400"}),X.jsxs("span",{className:"text-gray-300",children:[c("ebook.isbn"),k]})]})]})]}),!n&&X.jsx("div",{className:"absolute top-4 right-4",children:X.jsx("div",{className:"bg-black/60 backdrop-blur-md rounded-2xl p-4 border border-white/10",children:X.jsxs("div",{className:"flex flex-col space-y-3",children:[X.jsx("div",{className:"text-white text-sm font-medium text-center mb-2",children:c("card.export.actions")}),X.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-3 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors text-sm font-medium",children:[X.jsx(t_,{className:"w-4 h-4"}),X.jsx("span",{children:c("card.change.poster")})]}),X.jsxs("div",{className:"border-t border-white/10 pt-3",children:[X.jsx("div",{className:"text-white text-xs font-medium text-center mb-2 opacity-75",children:c("card.export.formats")}),X.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[X.jsxs("button",{onClick:()=>S("html"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg transition-colors text-xs font-medium",children:[X.jsx(Bx,{className:"w-3 h-3"}),X.jsx("span",{children:"HTML"})]}),X.jsxs("button",{onClick:()=>S("markdown"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors text-xs font-medium",children:[X.jsx(Kx,{className:"w-3 h-3"}),X.jsx("span",{children:c("ebook.export.markdown")})]}),X.jsxs("button",{onClick:()=>S("text"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors text-xs font-medium",children:[X.jsx(Yx,{className:"w-3 h-3"}),X.jsx("span",{children:c("ebook.export.text")})]}),X.jsxs("button",{onClick:()=>p(!0),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors text-xs font-medium",children:[X.jsx(Hx,{className:"w-3 h-3"}),X.jsx("span",{children:c("ebook.export.bbcode")})]})]})]})]})})})]}),X.jsxs("div",{className:"p-6 space-y-6",children:[N&&X.jsxs("div",{children:[X.jsxs("h3",{className:"text-xl font-semibold text-white mb-3 flex items-center",children:[X.jsx($x,{className:"w-5 h-5 mr-2 text-emerald-400"}),c("card.synopsis")]}),X.jsxs("div",{className:"bg-gray-800/60 border border-gray-700/50 rounded-xl p-4",children:[X.jsx("div",{className:"text-gray-300 leading-relaxed "+(!u&&N.length>300?"line-clamp-4":""),dangerouslySetInnerHTML:{__html:u?N:j}}),N.length>300&&X.jsx("button",{onClick:()=>d(!u),className:"text-emerald-400 hover:text-emerald-300 text-sm font-medium mt-2 transition-colors",children:c(u?"ebook.showLess":"ebook.showMore")})]})]}),e.volumeInfo.categories&&e.volumeInfo.categories.length>0&&X.jsxs("div",{children:[X.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[X.jsx(f_,{className:"w-5 h-5 mr-2 text-emerald-400"}),c("ebook.categories")]}),X.jsx("div",{className:"flex flex-wrap gap-2",children:e.volumeInfo.categories.map((e,t)=>X.jsx("span",{className:"px-3 py-1 bg-emerald-600/20 text-emerald-300 rounded-full text-sm border border-emerald-600/30",children:ck(e)},t))})]}),t&&!n&&X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_auto] gap-6 items-start",children:X.jsxs("div",{children:[X.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[X.jsx(Hx,{className:"w-5 h-5 mr-2 text-emerald-400"}),c("ebook.technical.specs")]}),X.jsxs("div",{className:"bg-gray-800/60 border border-gray-700/50 rounded-xl p-4 space-y-3",children:[X.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[X.jsxs("div",{children:[X.jsxs("span",{className:"text-gray-400",children:[c("ebook.format")," :"]}),X.jsx("span",{className:"text-white ml-2 font-medium",children:t.format})]}),X.jsxs("div",{children:[X.jsxs("span",{className:"text-gray-400",children:[c("ebook.quality")," :"]}),X.jsx("span",{className:"text-white ml-2 font-medium",children:t.quality})]}),X.jsxs("div",{children:[X.jsxs("span",{className:"text-gray-400",children:[c("ebook.size")," :"]}),X.jsx("span",{className:"text-white ml-2 font-medium",children:(C=t,`${C.fileSize.value} ${C.fileSize.unit}`)})]}),t.year&&X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400",children:c("ebook.yearLabel")}),X.jsx("span",{className:"text-white ml-2 font-medium",children:t.year})]}),t.edition&&X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400",children:c("ebook.editionLabel")}),X.jsx("span",{className:"text-white ml-2 font-medium",children:t.edition})]}),t.numberOfFiles&&X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400",children:c("ebook.filesCountLabel")}),X.jsx("span",{className:"text-white ml-2 font-medium",children:t.numberOfFiles})]}),t.fileName&&X.jsxs("div",{children:[X.jsx("span",{className:"text-gray-400",children:c("ebook.fileNameLabel")}),X.jsx("span",{className:"text-white ml-2 font-medium",children:t.fileName})]}),t.source&&X.jsxs("div",{children:[X.jsxs("span",{className:"text-gray-400",children:[c("ebook.source")," :"]}),X.jsx("span",{className:"text-white ml-2 font-medium",children:t.source})]}),(t.language||e.volumeInfo.language)&&X.jsxs("div",{children:[X.jsxs("span",{className:"text-gray-400",children:[c("ebook.language")," :"]}),X.jsx("span",{className:"text-white ml-2 font-medium",children:t.language||e.volumeInfo.language})]})]}),t.notes&&X.jsxs("div",{className:"pt-3 border-t border-gray-700/30",children:[X.jsxs("span",{className:"text-gray-400",children:[c("ebook.notes")," :"]}),X.jsx("p",{className:"text-white mt-1 text-sm",children:t.notes})]})]})]})}),X.jsxs("div",{className:"text-center pt-4 border-t border-gray-700/30",children:[X.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-400",children:[X.jsx("span",{children:c("card.data.provided")}),X.jsxs("a",{href:e.volumeInfo.canonicalVolumeLink||`https://books.google.com/books?id=${e.id}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-emerald-400 hover:text-emerald-300 transition-colors",children:[X.jsx("span",{children:c("ebook.googleBookLink")}),X.jsx(Vx,{className:"w-3 h-3"})]})]}),k&&X.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:[c("ebook.isbn"),k]})]})]})]}),X.jsx(Uw,{isOpen:h,onClose:()=>p(!1),bbcode:_,title:e.volumeInfo.title,ebookData:e,onStyleChange:e=>{y(e)}}),X.jsx(hk,{isOpen:f,onClose:()=>m(!1),onCoverChange:e=>{i&&i(e),m(!1)},currentCover:v()})]});var C}const fk=["ePUB","CBR","CBZ","PDF","MOBI","AZW3","FB2","TXT","DJVU","Autre"],mk=["MP3","FLAC","Autre"],gk=["Original","3200x4307","2560x3361","2100 x 2700","1650x2169","1622x2200","1325x1721","760 x 1060","Autre"],vk=["320 kbps","160 kbps","128 kbps","64 kbps","Autre"],bk=["Ko","Mo","Go"];function yk({onSave:e,onCancel:t,initialSpecs:n,bookData:r}){var i;const{t:a}=yw(),[s,o]=U.useState(()=>{var e,t,i,a;const s={isAudiobook:(null==n?void 0:n.isAudiobook)||!1,fileName:(null==n?void 0:n.fileName)||"",fileSize:(null==n?void 0:n.fileSize)||{value:1,unit:"Mo"},format:(null==n?void 0:n.format)||"ePub",quality:(null==n?void 0:n.quality)||"Original",source:(null==n?void 0:n.source)||"",edition:(null==n?void 0:n.edition)||void 0,language:(null==n?void 0:n.language)||"fr",notes:(null==n?void 0:n.notes)||void 0,publisher:(null==n?void 0:n.publisher)||void 0,year:(null==n?void 0:n.year)||(new Date).getFullYear(),isbn:(null==n?void 0:n.isbn)||void 0,title:null==n?void 0:n.title,subtitle:null==n?void 0:n.subtitle,authors:null==n?void 0:n.authors,pageCount:null==n?void 0:n.pageCount,description:null==n?void 0:n.description,mainCategory:null==n?void 0:n.mainCategory,bookDisplayNumber:null==n?void 0:n.bookDisplayNumber,numberOfFiles:null==n?void 0:n.numberOfFiles};if(null==r?void 0:r.volumeInfo){const{volumeInfo:n}=r;if(s.title=n.title,s.subtitle=n.subtitle,s.authors=n.authors,s.publisher=n.publisher,s.publishedDate=n.publishedDate,n.publishedDate&&(s.year=new Date(n.publishedDate).getFullYear()),s.description=n.description,n.industryIdentifiers){s.industryIdentifiers=n.industryIdentifiers.map(e=>({type:e.type,identifier:e.identifier}));const r=null==(e=n.industryIdentifiers.find(e=>"ISBN_13"===e.type))?void 0:e.identifier,a=null==(t=n.industryIdentifiers.find(e=>"ISBN_10"===e.type))?void 0:t.identifier;s.isbn=r||a||(null==(i=n.industryIdentifiers[0])?void 0:i.identifier)}s.pageCount=n.pageCount,s.language=n.language||"fr",n.categories&&n.categories.length>0&&(s.mainCategory=ck(n.categories[0])),(null==(a=n.seriesInfo)?void 0:a.bookDisplayNumber)&&(s.bookDisplayNumber=n.seriesInfo.bookDisplayNumber)}return s});U.useEffect(()=>{n&&o(e=>({...e,...n,fileSize:n.fileSize||e.fileSize}))},[n]),U.useEffect(()=>{o(e=>{if(e.isAudiobook){const t=mk.includes(e.format)?e.format:"MP3",n=vk.includes(e.quality)?e.quality:"320 kbps";return{...e,format:t,quality:n}}{const t=fk.includes(e.format)?e.format:"ePub",n=gk.includes(e.quality)?e.quality:"Original";return{...e,format:t,quality:n}}})},[s.isAudiobook]);const l=(e,t)=>{o(n=>({...n,[e]:t}))},c=(e,t)=>{o(n=>({...n,fileSize:{...n.fileSize,[e]:t}}))};return X.jsxs("div",{className:"max-w-4xl mx-auto bg-gray-800/60 backdrop-blur-sm rounded-2xl p-8 border border-gray-700/50",children:[X.jsx("div",{className:"flex items-center justify-between mb-8",children:X.jsxs("div",{className:"flex items-center",children:[X.jsxs("button",{onClick:t,className:"flex items-center space-x-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors mr-4",children:[X.jsx(Sx,{className:"w-4 h-4"}),X.jsx("span",{children:a("specs.back")})]}),X.jsx($x,{className:"w-6 h-6 text-violet-400 mr-3"}),X.jsx("h2",{className:"text-2xl font-bold text-white",children:a("ebook.specs.title")})]})}),X.jsxs("form",{onSubmit:t=>{var n,r,i,a,o,l;t.preventDefault(),e({...s,fileName:(null==(n=s.fileName)?void 0:n.trim())||"",source:(null==(r=s.source)?void 0:r.trim())||"",edition:(null==(i=s.edition)?void 0:i.trim())||void 0,notes:(null==(a=s.notes)?void 0:a.trim())||void 0,publisher:(null==(o=s.publisher)?void 0:o.trim())||void 0,isbn:(null==(l=s.isbn)?void 0:l.trim())||void 0})},className:"space-y-8",children:[X.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[X.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[X.jsx(Kx,{className:"w-5 h-5 mr-2 text-blue-400"}),a("ebook.fileInfo")]}),X.jsxs("div",{className:"mb-6 flex items-center justify-end space-x-3",children:[X.jsx("span",{className:"text-white font-medium",children:a("ebook.audiobook")}),X.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[X.jsx("input",{type:"checkbox",checked:s.isAudiobook,onChange:e=>l("isAudiobook",e.target.checked),className:"sr-only peer"}),X.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-violet-300/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-violet-600"})]})]}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:a("ebook.filename")}),X.jsx("input",{type:"text",value:s.fileName,onChange:e=>l("fileName",e.target.value),placeholder:a("ebook.fileNamePlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:a("ebook.size")}),X.jsxs("div",{className:"flex space-x-2",children:[X.jsx("input",{type:"number",value:s.fileSize.value,onChange:e=>c("value",parseFloat(e.target.value)||0),min:"0",step:"0.1",className:"w-24 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"}),X.jsx("select",{value:s.fileSize.unit,onChange:e=>c("unit",e.target.value),className:"w-20 bg-gray-700 border border-gray-600 rounded-lg px-2 py-2 text-white focus:outline-none focus:border-violet-500",children:bk.map(e=>X.jsx("option",{value:e,children:e},e))})]})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:a("ebook.format")}),X.jsx("select",{value:s.format,onChange:e=>l("format",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:s.isAudiobook?mk.map(e=>X.jsx("option",{value:e,children:e},e)):fk.map(e=>X.jsx("option",{value:e,children:e},e))})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:a("ebook.quality")}),X.jsx("select",{value:s.quality,onChange:e=>l("quality",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:s.isAudiobook?vk.map(e=>X.jsx("option",{value:e,children:e},e)):gk.map(e=>X.jsx("option",{value:e,children:e},e))})]})]})]}),X.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[X.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[X.jsx(Tx,{className:"w-5 h-5 mr-2 text-green-400"}),a("ebook.metadata")]}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[X.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:a("ebook.title")}),X.jsx("input",{type:"text",value:s.title||"",onChange:e=>l("title",e.target.value),placeholder:a("ebook.titlePlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),X.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:a("ebook.subtitle")}),X.jsx("input",{type:"text",value:s.subtitle||"",onChange:e=>l("subtitle",e.target.value),placeholder:a("ebook.subtitlePlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),X.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[X.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-300 mb-2",children:[X.jsx(b_,{className:"w-4 h-4"}),X.jsx("span",{children:a("ebook.authors")})]}),X.jsx("input",{type:"text",value:(null==(i=s.authors)?void 0:i.join(", "))||"",onChange:e=>l("authors",e.target.value.split(",").map(e=>e.trim())),placeholder:a("ebook.authorsPlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:a("ebook.publisher")}),X.jsx("input",{type:"text",value:s.publisher||"",onChange:e=>l("publisher",e.target.value),placeholder:a("ebook.publisherPlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),X.jsxs("div",{children:[X.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-300 mb-2",children:[X.jsx(Ix,{className:"w-4 h-4"}),X.jsx("span",{children:a("ebook.year")})]}),X.jsx("input",{type:"number",value:s.year||"",onChange:e=>l("year",e.target.value?parseInt(e.target.value):void 0),placeholder:a("ebook.yearPlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:a("ebook.isbnLabel")}),X.jsx("input",{type:"text",value:s.isbn||"",onChange:e=>l("isbn",e.target.value),placeholder:a("ebook.isbnPlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:a("ebook.tomeNumber")}),X.jsx("input",{type:"text",value:s.bookDisplayNumber||"",onChange:e=>l("bookDisplayNumber",e.target.value),placeholder:a("ebook.tomeNumberPlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:a("ebook.edition")}),X.jsx("input",{type:"text",value:s.edition||"",onChange:e=>l("edition",e.target.value),placeholder:a("ebook.editionPlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),X.jsxs("div",{children:[X.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[X.jsx(Xx,{className:"w-4 h-4 inline-block mr-1"}),a("ebook.language")]}),X.jsx("input",{type:"text",value:s.language,onChange:e=>l("language",e.target.value),placeholder:a("ebook.languagePlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),X.jsxs("div",{children:[X.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-300 mb-2",children:[X.jsx(Jx,{className:"w-4 h-4"}),X.jsx("span",{children:a("ebook.pagesLabel")})]}),X.jsx("input",{type:"number",value:s.pageCount||"",onChange:e=>l("pageCount",e.target.value?parseInt(e.target.value):void 0),placeholder:a("ebook.pagesPlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),X.jsxs("div",{children:[X.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-300 mb-2",children:[X.jsx(f_,{className:"w-4 h-4"}),X.jsx("span",{children:a("ebook.mainCategory")})]}),X.jsx("input",{type:"text",value:s.mainCategory||"",onChange:e=>l("mainCategory",e.target.value),placeholder:a("ebook.mainCategoryPlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:a("ebook.publicationDate")}),X.jsx("input",{type:"text",value:s.publishedDate||"",onChange:e=>l("publishedDate",e.target.value),placeholder:a("ebook.publicationDatePlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]})]}),X.jsxs("div",{className:"mt-6",children:[X.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[X.jsx(Px,{className:"w-4 h-4 inline-block mr-1"}),a("ebook.descriptionLabel")]}),X.jsx("textarea",{value:s.description||"",onChange:e=>l("description",e.target.value),placeholder:a("ebook.descriptionPlaceholder"),rows:5,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500"})]})]}),X.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[X.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[X.jsx(f_,{className:"w-5 h-5 mr-2 text-yellow-400"}),a("ebook.releaseInfo")]}),X.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:a("ebook.source")}),X.jsx("input",{type:"text",value:s.source||"",onChange:e=>l("source",e.target.value),placeholder:a("ebook.sourcePlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:a("ebook.filesCount")}),X.jsx("input",{type:"number",value:s.numberOfFiles||"",onChange:e=>l("numberOfFiles",e.target.value?parseInt(e.target.value):void 0),placeholder:a("ebook.filesCountPlaceholder"),min:"1",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]})]}),X.jsxs("div",{className:"mt-6",children:[X.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[X.jsx(o_,{className:"w-4 h-4 inline-block mr-1"}),a("specs.notes")]}),X.jsx("textarea",{value:s.notes||"",onChange:e=>l("notes",e.target.value),placeholder:a("specs.notes.placeholder"),rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500"})]})]}),X.jsxs("div",{className:"flex justify-end space-x-4",children:[X.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:a("ebook.cancel")}),X.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-6 py-3 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors",children:[X.jsx(c_,{className:"w-4 h-4"}),X.jsx("span",{children:a("ebook.generate.sheet")})]})]})]})]})}function xk({generatedNFO:e}={}){const{t:t}=yw(),[n,r]=U.useState(!1),[i,a]=U.useState(!1),[s,o]=U.useState(e||null),[l,c]=U.useState(null),[u,d]=U.useState({source:null,codec:null,resolution:null,audio:null}),[h,p]=U.useState(!1),[f,m]=U.useState("UNKNOWN");U.useEffect(()=>{(async()=>{if(e){o(e);const t=await ik.getNfoHistoryItemByContent(e);(null==t?void 0:t.fileName)&&c(t.fileName)}else o(null),c(null),p(!1),m("UNKNOWN")})()},[e]),U.useEffect(()=>{if(s){const e=Q_(s);if(e){const t=e.video,n=e.audio,r={source:e.source||null,codec:(null==t?void 0:t.codec)||null,resolution:(null==t?void 0:t.quality)||null,audio:(null==n?void 0:n.map(e=>e.codec).join(", "))||null};d(r);const i=s.split(/\r?\n\r?\n/).find(e=>e.startsWith("Video"))||s,a=i.toLowerCase();if(["nvenc","hevc_nvenc","qsv","quicksync","amf","avc coding"].some(e=>a.includes(e)))m("GPU");else{let e=0;[{pattern:/x264/i,weight:1},{pattern:/libx264/i,weight:1},{pattern:/x265/i,weight:1},{pattern:/libx265/i,weight:1},{pattern:/rc=crf\s*=\s*\d+/i,weight:2},{pattern:/psy-rd/i,weight:1},{pattern:/psy-rdoq/i,weight:1},{pattern:/bframes\s*=\s*\d+/i,weight:2},{pattern:/ref\s*=\s*\d+/i,weight:2},{pattern:/wpp/i,weight:1},{pattern:/numa-pools/i,weight:1}].forEach(t=>{t.pattern.test(a)&&(e+=t.weight)}),m(e>=3?"CPU":"UNKNOWN")}const o=i.match(/Bits\/\(Pixel\*Frame\)\s*:\s*([\d.]+)/);if(o&&(null==t?void 0:t.quality)){const e=parseFloat(o[1]);"2160p"===t.quality&&e<.035||("1080p"===t.quality||"720p"===t.quality)&&e<.1?p(!0):p(!1)}else p(!1)}else d({source:null,codec:null,resolution:null,audio:null}),p(!1),m("UNKNOWN")}else d({source:null,codec:null,resolution:null,audio:null}),p(!1),m("UNKNOWN")},[s,l]);const g=U.useRef(null),v=async e=>{a(!0),c(e.name);try{const t=await R_.analyzeFile(e);o(t),await ik.addItem({type:"nfo",title:e.name,year:(new Date).getFullYear(),poster:null,generatedNFO:t,fileName:e.name})}catch(n){console.error("Erreur lors de la gnration du NFO:",n),alert(t("nfo.generator.error"))}finally{a(!1)}};return X.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[X.jsxs("div",{className:"text-center mb-12",children:[X.jsxs("div",{className:"mb-6",children:[X.jsxs("h2",{className:"text-5xl md:text-6xl font-bold bg-clip-text text-transparent mb-6 leading-tight bg-gradient-to-r from-blue-400 via-cyan-400 to-sky-400",children:[t("nfo.generator.title"),X.jsx("br",{}),X.jsx("span",{className:"text-4xl md:text-5xl",children:t("nfo.generator.subtitle")})]}),X.jsx("div",{className:"w-24 h-1 mx-auto mb-6 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500"})]}),X.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:t("nfo.generator.description")})]}),s?X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between bg-gray-800/60 backdrop-blur-sm border border-gray-700/50 rounded-xl p-4 space-y-4 sm:space-y-0",children:[X.jsxs("div",{className:"flex items-center space-x-3",children:[X.jsx(Gx,{className:"w-5 h-5 text-blue-400"}),X.jsx("div",{children:X.jsx("p",{className:"text-white font-medium",children:t("nfo.generator.success")})})]}),X.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:[X.jsxs("button",{onClick:()=>{s&&(navigator.clipboard.writeText(s),alert(t("nfo.generator.copy.success")))},className:"px-4 py-2 bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 hover:text-white transition-colors rounded-lg border border-gray-600/50 hover:border-gray-500 flex items-center justify-center space-x-2",children:[X.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:X.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),X.jsx("span",{children:t("nfo.generator.copy")})]}),X.jsxs("button",{onClick:()=>{if(!s)return;const e=new Blob([s],{type:"text/plain"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=l?`${l.replace(/\.[^/.]+$/,"")}.nfo`:"mediainfo.nfo",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white transition-colors rounded-lg flex items-center justify-center space-x-2",children:[X.jsx(Hx,{className:"w-4 h-4"}),X.jsx("span",{children:t("nfo.generator.download")})]}),X.jsxs("button",{onClick:()=>{o(null),c(null),p(!1),m("UNKNOWN")},className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white transition-colors rounded-lg flex items-center justify-center space-x-2",children:[X.jsx(__,{className:"w-4 h-4"}),X.jsx("span",{children:t("nfo.generator.new")})]})]})]}),X.jsx("div",{className:"mt-2 p-3 border rounded-lg animate-in fade-in bg-green-500/10 border-green-500/20",children:X.jsxs("div",{className:"flex items-start gap-2",children:[X.jsx(Rx,{className:"h-4 w-4 shrink-0 mt-0.5 text-green-500","aria-hidden":"true"}),X.jsxs("div",{className:"flex-1 space-y-1",children:[X.jsx("p",{className:"text-xs font-semibold text-green-500",children:t("nfo.generator.summary.success")}),X.jsx("p",{className:"text-xs text-gray-300",children:t("nfo.generator.summary.description")}),u.source&&X.jsxs("p",{className:"text-xs text-gray-400",children:[" ",t("nfo.generator.summary.source"),": ",X.jsx("span",{className:"text-gray-300",children:u.source})]}),u.codec&&X.jsxs("p",{className:"text-xs text-gray-400",children:[" ",t("nfo.generator.summary.codec"),": ",X.jsx("span",{className:"text-gray-300",children:u.codec})]}),u.resolution&&X.jsxs("p",{className:"text-xs text-gray-400",children:[" ",t("nfo.generator.summary.resolution"),": ",X.jsx("span",{className:"text-gray-300",children:u.resolution})]}),u.audio&&X.jsxs("p",{className:"text-xs text-gray-400",children:[" ",t("nfo.generator.summary.audio"),": ",X.jsx("span",{className:"text-gray-300",children:u.audio})]})]})]})}),"GPU"===f&&X.jsx("div",{className:"mt-2 p-3 border rounded-lg animate-in fade-in bg-red-500/10 border-red-500/20",children:X.jsxs("div",{className:"flex items-start gap-2",children:[X.jsx(Ex,{className:"h-4 w-4 shrink-0 mt-0.5 text-red-500","aria-hidden":"true"}),X.jsxs("div",{className:"flex-1 space-y-1",children:[X.jsx("p",{className:"text-xs font-semibold text-red-400",children:t("nfo.generator.gpu.warning.title")}),X.jsx("p",{className:"text-xs text-gray-300",dangerouslySetInnerHTML:{__html:t("nfo.generator.gpu.warning.message")}})]})]})}),h&&"GPU"!==f&&X.jsx("div",{className:"mt-2 p-3 border rounded-lg animate-in fade-in bg-yellow-500/10 border-yellow-500/20",children:X.jsxs("div",{className:"flex items-start gap-2",children:[X.jsx(n_,{className:"h-4 w-4 shrink-0 mt-0.5 text-yellow-500","aria-hidden":"true"}),X.jsxs("div",{className:"flex-1 space-y-1",children:[X.jsx("p",{className:"text-xs font-semibold text-yellow-400",children:t("nfo.generator.hdlight.warning.title")}),X.jsx("p",{className:"text-xs text-gray-300",dangerouslySetInnerHTML:{__html:t("nfo.generator.hdlight.warning.message")}})]})]})}),X.jsxs("div",{className:"bg-gray-800/60 backdrop-blur-sm border border-gray-700/50 rounded-xl overflow-hidden",children:[X.jsxs("div",{className:"bg-gray-700/50 px-4 py-3 border-b border-gray-600/50",children:[X.jsx("h3",{className:"text-white font-medium",children:t("nfo.generator.content.title")})," ",X.jsx("p",{className:"text-gray-400 text-sm",children:l})]}),X.jsx("div",{className:"p-4 max-h-[600px] overflow-y-auto",children:X.jsx("pre",{className:"text-sm text-gray-300 font-mono whitespace-pre-wrap break-words",children:s})})]})]}):X.jsx("div",{onDragOver:e=>{e.preventDefault(),r(!0)},onDragLeave:e=>{e.preventDefault(),r(!1)},onDrop:async e=>{e.preventDefault(),r(!1);const t=Array.from(e.dataTransfer.files)[0];t&&(t.type.startsWith("video/")||t.name.match(/\.(mkv|avi|mp4|mov|wmv|flv|webm|m4v|3gp|ogv|iso|ts|m2ts)$/i))&&await v(t)},className:"relative transition-all duration-300",children:X.jsx("div",{className:"relative bg-gradient-to-br from-gray-800/80 to-gray-900/80 backdrop-blur-sm border-2 border-dashed rounded-2xl px-6 sm:px-12 lg:px-48 py-12 transition-all duration-300 "+(n?"border-blue-400 bg-blue-500/10 shadow-lg shadow-blue-500/20":"border-gray-600/50 hover:border-gray-500/70"),children:i?X.jsxs("div",{className:"text-center",children:[X.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-blue-500/20 rounded-full mb-4",children:X.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-blue-500 border-t-transparent"})}),X.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:t("nfo.generator.analyzing.title")}),X.jsx("p",{className:"text-gray-400",children:t("nfo.generator.analyzing.desc")})]}):X.jsxs("div",{className:"text-center",children:[X.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-500/20 to-cyan-500/20 rounded-full mb-6",children:X.jsx(Gx,{className:"w-10 h-10 text-blue-400"})}),X.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:t(n?"nfo.generator.drop.title":"nfo.generator.drop.subtitle")}),X.jsx("p",{className:"text-gray-400 mb-6",children:t(n?"nfo.generator.drop.analyzing":"nfo.generator.drop.desc")}),X.jsx("div",{className:"flex items-center justify-center space-x-4",children:X.jsxs("button",{onClick:()=>{var e;return null==(e=g.current)?void 0:e.click()},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-blue-500/25 flex items-center space-x-2",children:[X.jsx(v_,{className:"w-5 h-5"}),X.jsx("span",{children:t("nfo.generator.select.button")})]})}),X.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-2 text-xs text-gray-500",children:[X.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"MKV"}),X.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"ISO"}),X.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"MP4"}),X.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"AVI"}),X.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"MOV"}),X.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"TS"}),X.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"M2TS"})]})]})})}),X.jsx("input",{ref:g,type:"file",accept:"video/*,.mkv,.avi,.mp4,.mov,.wmv,.flv,.webm,.m4v,.3gp,.ogv,.iso,.ts,.m2ts",onChange:async e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];n&&await v(n),e.target.value=""},className:"hidden"})]})}const _k="fichegen_migration_v1_completed";function wk(){const{t:e,language:t}=yw(),n=Ay(),r=Ty(),i=U.useRef(null),a=r.pathname.includes("/nfo")?"nfo":r.pathname.includes("/books")?"books":"movies",[s,o]=U.useState(""),[l,c]=U.useState(!1),[u,d]=U.useState(!1),[h,p]=U.useState(!1),[f,m]=U.useState(!1),[g,v]=U.useState(!1),[b,y]=U.useState(!1),[x,_]=U.useState(null),[w,k]=U.useState(null),[N,j]=U.useState(null),[S,C]=U.useState(null),[E,P]=U.useState(null),[$,T]=U.useState(null),[D,I]=U.useState(null),[A,R]=U.useState(null),[F,O]=U.useState(null),[M,z]=U.useState(null),[L,B]=U.useState(null),[H,V]=U.useState(null);U.useEffect(()=>{(async()=>{const e=await mw.settings.get("tmdb_api_key");e&&(o(e.value),N_.setApiKey(e.value))})()},[]);const q=U.useCallback((e,t)=>x&&(w||N)&&S?{type:x.media_type,title:(null==w?void 0:w.title)||(null==N?void 0:N.name)||"",year:w?new Date(w.release_date).getFullYear():N?new Date(N.first_air_date).getFullYear():0,poster:t,movieData:w?{...w,poster_path:t}:void 0,tvShowData:N?{...N,poster_path:t}:void 0,credits:S,torrentSpecs:e,generatedNFO:A||void 0}:null,[x,w,N,S,A]),W=U.useCallback(()=>{_(null),k(null),j(null),C(null),P(null),m(!1),p(!1),T(null),I(null)},[]),K=e=>{if(I(e),x&&_({...x,poster_path:e}),E){const t=q(E,e);t&&ik.addItem(t)}};U.useCallback(()=>{p(!0)},[]);const G=e=>{V(e)},Y=e=>{Z(),"nfo"===e?(R(null),n("/nfo")):n("books"===e?"/books":"/")},Z=()=>{_(null),k(null),j(null),C(null),P(null),I(null),T(null),O(null),z(null),B(null),V(null),p(!1),m(!1),d(!1),R(null)},Q=()=>{var e;null==(e=i.current)||e.scrollIntoView({behavior:"smooth"})};return X.jsxs("div",{className:"min-h-screen relative overflow-hidden flex flex-col transition-all duration-500 "+("nfo"===a?"bg-gradient-to-br from-blue-900 via-cyan-900 to-sky-900":"books"===a?"bg-gradient-to-br from-emerald-900 via-green-900 to-teal-900":"bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900"),children:[X.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] via-transparent to-transparent pointer-events-none transition-colors duration-500 "+("nfo"===a?"from-blue-400/20":"books"===a?"from-emerald-400/20":"from-purple-400/20")}),X.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 rounded-full blur-3xl animate-pulse pointer-events-none transition-colors duration-500 "+("nfo"===a?"bg-blue-500/10":"books"===a?"bg-emerald-500/10":"bg-violet-500/10")}),X.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 rounded-full blur-3xl animate-pulse delay-1000 pointer-events-none transition-colors duration-500 "+("nfo"===a?"bg-cyan-500/10":"books"===a?"bg-green-500/10":"bg-blue-500/10")}),X.jsx("header",{className:"border-b border-white/10 bg-black/30 backdrop-blur-md sticky top-0 z-40",children:X.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsxs("button",{className:"flex items-center space-x-3 hover:opacity-80 transition-opacity cursor-pointer",onClick:()=>Y("movies"),children:[X.jsx("div",{className:"p-2 bg-violet-600 rounded-xl",children:X.jsx(Mx,{className:"w-6 h-6 md:w-8 md:h-8 text-white"})}),X.jsxs("div",{className:"hidden sm:block",children:[X.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:e("header.title")}),X.jsx("p",{className:"text-gray-400 text-xs md:text-sm",children:e("header.subtitle")})]})]}),X.jsx("div",{className:"hidden lg:flex absolute left-1/2 transform -translate-x-1/2",children:X.jsxs("div",{className:"flex items-center bg-gray-800/60 border border-gray-700/50 rounded-xl p-1",children:[X.jsxs("button",{onClick:()=>Y("movies"),className:"flex items-center space-x-2 px-3 md:px-4 py-2 rounded-lg transition-all duration-200 "+("movies"===a?"bg-violet-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/60"),children:[X.jsx(Mx,{className:"w-4 h-4"}),X.jsx("span",{className:"text-sm",children:e("nav.movies")})]}),X.jsxs("button",{onClick:()=>Y("books"),className:"flex items-center space-x-2 px-3 md:px-4 py-2 rounded-lg transition-all duration-200 "+("books"===a?"bg-emerald-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/60"),children:[X.jsx($x,{className:"w-4 h-4"}),X.jsx("span",{className:"text-sm",children:e("nav.books")})]}),X.jsxs("button",{onClick:()=>window.open("https://jukop22.github.io/ziknfo/","_blank"),className:"flex items-center space-x-2 px-3 md:px-4 py-2 rounded-lg transition-all duration-200 text-gray-300 hover:text-white hover:bg-gray-700/60",children:[X.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4 feather feather-music",children:[X.jsx("path",{d:"M9 18V5l12-2v13"}),X.jsx("circle",{cx:"6",cy:"18",r:"3"}),X.jsx("circle",{cx:"18",cy:"16",r:"3"})]}),X.jsx("span",{className:"text-sm",children:"Audio"})]})]})}),X.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3",children:[X.jsx(rk,{}),X.jsxs("div",{className:"hidden md:flex items-center space-x-3",children:[X.jsxs("button",{onClick:()=>v(!0),className:"flex items-center space-x-2 px-3 md:px-4 py-2 bg-gray-800/60 hover:bg-gray-700/60 border border-gray-700/50 rounded-xl text-gray-300 hover:text-white transition-colors",children:[X.jsx(e_,{className:"w-4 h-4"}),X.jsx("span",{className:"text-sm",children:e("history.button")})]}),X.jsxs("button",{onClick:()=>c(!0),className:"flex items-center space-x-2 px-3 md:px-4 py-2 bg-gray-800/60 hover:bg-gray-700/60 border border-gray-700/50 rounded-xl text-gray-300 hover:text-white transition-colors",children:[X.jsx(h_,{className:"w-4 h-4"}),X.jsx("span",{className:"text-sm",children:"API"})]}),X.jsxs("button",{onClick:()=>Y("nfo"),className:"flex items-center space-x-2 px-3 md:px-4 py-2 rounded-xl transition-colors "+("nfo"===a?"bg-blue-600 text-white shadow-lg":"bg-gray-800/60 hover:bg-gray-700/60 border border-gray-700/50 text-gray-300 hover:text-white"),children:[X.jsx(Gx,{className:"w-4 h-4"}),X.jsx("span",{className:"text-sm",children:"NFO"})]})]}),X.jsx("button",{className:"md:hidden p-2 text-white hover:bg-white/10 rounded-lg transition-colors",onClick:()=>y(!b),children:X.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[X.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),X.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),X.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]})]}),X.jsxs("div",{className:"lg:hidden mt-4 pt-4 border-t border-white/10",children:[X.jsx("div",{className:"flex items-center justify-center mb-4",children:X.jsxs("div",{className:"flex items-center bg-gray-800/60 border border-gray-700/50 rounded-xl p-1",children:[X.jsxs("button",{onClick:()=>Y("movies"),className:"flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 "+("movies"===a?"bg-violet-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/60"),children:[X.jsx(Mx,{className:"w-4 h-4"}),X.jsx("span",{className:"text-sm",children:e("nav.movies")})]}),X.jsxs("button",{onClick:()=>Y("books"),className:"flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 "+("books"===a?"bg-emerald-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/60"),children:[X.jsx($x,{className:"w-4 h-4"}),X.jsx("span",{className:"text-sm",children:e("nav.books")})]}),X.jsxs("button",{onClick:()=>window.open("https://jukop22.github.io/ziknfo/","_blank"),className:"flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 text-gray-300 hover:text-white hover:bg-gray-700/60",children:[X.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4 feather feather-music",children:[X.jsx("path",{d:"M9 18V5l12-2v13"}),X.jsx("circle",{cx:"6",cy:"18",r:"3"}),X.jsx("circle",{cx:"18",cy:"16",r:"3"})]}),X.jsx("span",{className:"text-sm",children:"Audio"})]})]})}),b&&X.jsxs("div",{className:"grid grid-cols-3 gap-2 md:hidden",children:[X.jsxs("button",{onClick:()=>{v(!0),y(!1)},className:"flex flex-col items-center px-2 py-2 bg-gray-800/60 hover:bg-gray-700/60 border border-gray-700/50 rounded-xl text-gray-300 hover:text-white transition-colors text-xs",children:[X.jsx(e_,{className:"w-4 h-4 mb-1"}),X.jsx("span",{children:e("history.button")})]}),X.jsxs("button",{onClick:()=>{c(!0),y(!1)},className:"flex flex-col items-center px-2 py-2 bg-gray-800/60 hover:bg-gray-700/60 border border-gray-700/50 rounded-xl text-gray-300 hover:text-white transition-colors text-xs",children:[X.jsx(h_,{className:"w-4 h-4 mb-1"}),X.jsx("span",{children:"API"})]}),X.jsxs("button",{onClick:()=>{Y("nfo"),y(!1)},className:"flex flex-col items-center px-2 py-2 bg-gray-800/60 hover:bg-gray-700/60 border border-gray-700/50 rounded-xl text-gray-300 hover:text-white transition-colors text-xs",children:[X.jsx(Gx,{className:"w-4 h-4 mb-1"}),X.jsx("span",{children:"NFO"})]})]})]})]})}),X.jsxs("main",{className:"max-w-6xl mx-auto px-2 sm:px-4 py-4 sm:py-8 relative z-10 flex-1",children:["nfo"===a&&X.jsx("div",{className:"mb-12",children:X.jsx(xk,{generatedNFO:A})}),"nfo"!==a&&!h&&!f&&!x&&!F&&X.jsxs("div",{className:"mb-12",ref:i,children:[X.jsxs("div",{className:"text-center mb-12",children:[X.jsxs("div",{className:"mb-6",children:[X.jsxs("h2",{className:"text-5xl md:text-6xl font-bold bg-clip-text text-transparent mb-6 leading-tight "+("books"===a?"bg-gradient-to-r from-emerald-400 via-green-400 to-teal-400":"bg-gradient-to-r from-violet-400 via-purple-400 to-blue-400"),children:[e("books"===a?"ebook.create":"app.create"),X.jsx("br",{}),X.jsx("span",{className:"text-4xl md:text-5xl",children:e("books"===a?"ebook.professional":"app.professional")})]}),X.jsx("div",{className:"w-24 h-1 mx-auto mb-6 rounded-full "+("books"===a?"bg-gradient-to-r from-emerald-500 to-teal-500":"bg-gradient-to-r from-violet-500 to-blue-500")})]}),X.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:e("books"===a?"ebook.description":"app.description")})]}),"movies"===a?X.jsx(xw,{onResultSelect:async e=>{_(e),k(null),j(null),C(null),I((null==e?void 0:e.poster_path)||null),d(!0);try{if("movie"===e.media_type){const[n,r]=await Promise.all([N_.getMovie(e.id,t),N_.getMovieCredits(e.id,t)]);k(n),C(r)}else if("tv"===e.media_type){const[n,r]=await Promise.all([N_.getTVShow(e.id,t),N_.getTVCredits(e.id,t)]);j(n),C(r)}p(!0)}catch(n){console.error("Erreur lors du chargement des dtails:",n)}d(!1)},onTechnicalSpecsFound:e=>{T(e)},onNFOGenerated:e=>{R(e)},apiKey:s,language:t}):X.jsx(ok,{onBookSelect:async e=>{O(e),d(!0);try{const t=await sk.getVolumeDetails(e.id);z(t),V(sk.getHighQualityImage(t.volumeInfo.imageLinks));const n=await mw.ebookSpecs.get(t.id);B(n?n.specs:null),p(!0)}catch(t){console.error("Error fetching book details:",t),z(e),V(sk.getHighQualityImage(e.volumeInfo.imageLinks));const n=await mw.ebookSpecs.get(e.id);B(n?n.specs:null),p(!0)}d(!1)},language:t})]}),u&&"nfo"!==a&&X.jsx("div",{className:"text-center py-12",children:X.jsxs("div",{className:"inline-flex items-center space-x-3",children:[X.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-violet-500"}),X.jsx("span",{className:"text-white text-lg",children:e("app.loading")})]})}),f&&(x||F)&&!h&&"nfo"!==a&&X.jsxs("div",{className:"mb-8",children:[$&&"movies"===a&&X.jsx("div",{className:"mb-6 bg-green-500/10 border border-green-500/30 rounded-xl p-4",children:X.jsxs("p",{className:"text-green-300",children:[X.jsx("strong",{children:e("app.specs.detected")})," ",e("app.specs.message")]})}),"movies"===a?X.jsx(tk,{onSave:e=>{P(e),m(!1),T(null);const t=q(e,D);t&&ik.addItem(t),window.scrollTo({top:0,behavior:"smooth"})},onCancel:()=>{m(!1),p(!0)},initialSpecs:$||(E?{video:E.video,audio:E.audio,subtitles:E.subtitles,source:E.source,releaseGroup:E.releaseGroup,notes:E.notes,numberOfFiles:E.numberOfFiles}:void 0)}):X.jsx(yk,{onSave:async e=>{if(B(e),m(!1),M&&await mw.ebookSpecs.put({id:M.id,specs:e}),M){const t={type:"book",title:M.volumeInfo.title,year:M.volumeInfo.publishedDate?new Date(M.volumeInfo.publishedDate).getFullYear():0,poster:H,bookData:M,ebookSpecs:e};await ik.addItem(t)}window.scrollTo({top:0,behavior:"smooth"})},onCancel:()=>{m(!1),p(!0)},bookData:M,initialSpecs:L})]}),h&&(x||F)&&!u&&!f&&"nfo"!==a&&X.jsxs("div",{className:"mb-8",children:[X.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mb-6 gap-4 sm:gap-0",children:[X.jsxs("div",{className:"flex items-center space-x-3",children:["books"===a?X.jsx($x,{className:"w-6 h-6 text-emerald-400"}):"movie"===(null==x?void 0:x.media_type)?X.jsx(Zx,{className:"w-6 h-6 text-violet-400"}):X.jsx(g_,{className:"w-6 h-6 text-violet-400"}),X.jsx("h3",{className:"text-2xl font-bold text-white",children:e("app.preview.title")})]}),X.jsxs("div",{className:"flex space-x-3",children:[X.jsx("button",{onClick:()=>{p(!1),"movies"===a?W():Z()},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:e("app.preview.change")}),X.jsx("button",{onClick:()=>{p(!1),m(!0)},className:"px-6 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors",children:e("app.preview.continue")})]})]}),X.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-4 mb-6",children:X.jsxs("p",{className:"text-blue-300",children:[X.jsx("strong",{children:e("app.preview.check")})," ",e("app.preview.verify")]})}),w&&S&&X.jsx(Ww,{movie:w,credits:S,isPreview:!0,selectedPoster:D,onPosterChange:K}),N&&S&&"movies"===a&&X.jsx(Kw,{tvShow:N,credits:S,isPreview:!0,selectedPoster:D,onPosterChange:K,onSeasonSelect:e=>{if(N){const t=N.seasons.find(t=>t.season_number===e);if(t){const e={...N,name:`${N.name} - ${t.name}`,overview:t.overview||N.overview,poster_path:t.poster_path||N.poster_path,first_air_date:t.air_date||N.first_air_date,number_of_episodes:t.episode_count,selectedSeason:t};j(e),I(t.poster_path||N.poster_path),p(!1),m(!0)}}}}),"books"===a&&F&&M&&X.jsx(pk,{book:M,isPreview:!0,selectedCover:H,onCoverChange:G})]}),x&&!u&&!f&&!h&&E&&"movies"===a&&"nfo"!==a&&X.jsxs("div",{className:"mb-8",children:[X.jsxs("div",{className:"flex items-center justify-between mb-6",children:[X.jsxs("div",{className:"flex items-center space-x-3",children:["movie"===x.media_type?X.jsx(Zx,{className:"w-6 h-6 text-violet-400"}):X.jsx(g_,{className:"w-6 h-6 text-violet-400"}),X.jsx("h3",{className:"text-2xl font-bold text-white",children:e("app.sheet.generated")})]}),X.jsxs("div",{className:"flex space-x-3",children:[X.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg transition-colors",children:e("app.sheet.edit.specs")}),X.jsx("button",{onClick:W,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:e("app.sheet.new")})]})]}),w&&S&&X.jsx(Ww,{movie:w,credits:S,torrentSpecs:E,selectedPoster:D,onPosterChange:K,generatedNFO:A}),N&&S&&X.jsx(Kw,{tvShow:N,credits:S,torrentSpecs:E,selectedPoster:D,onPosterChange:K,generatedNFO:A})]}),M&&!u&&!f&&!h&&L&&"books"===a&&"nfo"!==a&&X.jsxs("div",{className:"mb-8",children:[X.jsxs("div",{className:"flex items-center justify-between mb-6",children:[X.jsxs("div",{className:"flex items-center space-x-3",children:[X.jsx($x,{className:"w-6 h-6 text-emerald-400"}),X.jsx("h3",{className:"text-2xl font-bold text-white",children:e("ebook.sheet.generated")})]}),X.jsxs("div",{className:"flex space-x-3",children:[X.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg transition-colors",children:e("app.sheet.edit.specs")}),X.jsx("button",{onClick:Z,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:e("app.sheet.new")})]})]}),X.jsx(pk,{book:M,ebookSpecs:L,selectedCover:H,onCoverChange:G})]}),!x&&!M&&!u&&!f&&!h&&"nfo"!==a&&X.jsxs("div",{className:"text-center py-20",children:[X.jsxs("div",{className:"mb-12",children:["movies"===a?X.jsxs("div",{className:"flex justify-center space-x-6 mb-8",children:[X.jsx("div",{className:"p-6 bg-gradient-to-br from-violet-500/20 to-purple-600/20 rounded-3xl backdrop-blur-sm border border-violet-400/20 shadow-2xl",children:X.jsx(Zx,{className:"w-16 h-16 text-violet-400"})}),X.jsx("div",{className:"p-6 bg-gradient-to-br from-blue-500/20 to-cyan-600/20 rounded-3xl backdrop-blur-sm border border-blue-400/20 shadow-2xl",children:X.jsx(g_,{className:"w-16 h-16 text-blue-400"})})]}):X.jsx("div",{className:"flex justify-center mb-8",children:X.jsx("div",{className:"p-6 bg-gradient-to-br from-emerald-500/20 to-teal-600/20 rounded-3xl backdrop-blur-sm border border-emerald-400/20 shadow-2xl",children:X.jsx($x,{className:"w-16 h-16 text-emerald-400"})})}),X.jsx("h3",{className:"text-3xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent mb-4",children:e("books"===a?"ebook.ready.title":"app.ready.title")}),X.jsx("p",{className:"text-gray-300 text-lg max-w-lg mx-auto",children:e("books"===a?"ebook.ready.description":"app.ready.description")})]}),X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:"movies"===a?X.jsxs(X.Fragment,{children:[X.jsxs("div",{onClick:Q,className:"bg-gradient-to-br from-green-500/10 to-emerald-600/10 backdrop-blur-sm border border-green-400/20 rounded-2xl p-8 text-center hover:scale-105 transition-transform duration-300 shadow-xl cursor-pointer",children:[X.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400/20 to-emerald-500/20 rounded-2xl mx-auto mb-6 flex items-center justify-center border border-green-400/30",children:X.jsx("span",{className:"text-green-400 text-3xl font-bold",children:"1"})}),X.jsx("h4",{className:"text-white font-bold text-lg mb-3",children:e("app.step1")}),X.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e("app.step1.desc")})]}),X.jsxs("div",{onClick:Q,className:"bg-gradient-to-br from-blue-500/10 to-cyan-600/10 backdrop-blur-sm border border-blue-400/20 rounded-2xl p-8 text-center hover:scale-105 transition-transform duration-300 shadow-xl cursor-pointer",children:[X.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-400/20 to-cyan-500/20 rounded-2xl mx-auto mb-6 flex items-center justify-center border border-blue-400/30",children:X.jsx("span",{className:"text-blue-400 text-3xl font-bold",children:"2"})}),X.jsx("h4",{className:"text-white font-bold text-lg mb-3",children:e("app.step2")}),X.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e("app.step2.desc")})]}),X.jsxs("div",{onClick:Q,className:"bg-gradient-to-br from-violet-500/10 to-purple-600/10 backdrop-blur-sm border border-violet-400/20 rounded-2xl p-8 text-center hover:scale-105 transition-transform duration-300 shadow-xl cursor-pointer",children:[X.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-violet-400/20 to-purple-500/20 rounded-2xl mx-auto mb-6 flex items-center justify-center border border-violet-400/30",children:X.jsx("span",{className:"text-violet-400 text-3xl font-bold",children:"3"})}),X.jsx("h4",{className:"text-white font-bold text-lg mb-3",children:e("app.step3")}),X.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e("app.step3.desc")})]})]}):X.jsxs(X.Fragment,{children:[X.jsxs("div",{onClick:Q,className:"bg-gradient-to-br from-emerald-500/10 to-green-600/10 backdrop-blur-sm border border-emerald-400/20 rounded-2xl p-8 text-center hover:scale-105 transition-transform duration-300 shadow-xl cursor-pointer",children:[X.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-400/20 to-green-500/20 rounded-2xl mx-auto mb-6 flex items-center justify-center border border-emerald-400/30",children:X.jsx("span",{className:"text-emerald-400 text-3xl font-bold",children:"1"})}),X.jsx("h4",{className:"text-white font-bold text-lg mb-3",children:e("ebook.step1")}),X.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e("ebook.step1.desc")})]}),X.jsxs("div",{onClick:Q,className:"bg-gradient-to-br from-teal-500/10 to-cyan-600/10 backdrop-blur-sm border border-teal-400/20 rounded-2xl p-8 text-center hover:scale-105 transition-transform duration-300 shadow-xl cursor-pointer",children:[X.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-400/20 to-cyan-500/20 rounded-2xl mx-auto mb-6 flex items-center justify-center border border-teal-400/30",children:X.jsx("span",{className:"text-teal-400 text-3xl font-bold",children:"2"})}),X.jsx("h4",{className:"text-white font-bold text-lg mb-3",children:e("ebook.step2")}),X.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e("ebook.step2.desc")})]}),X.jsxs("div",{onClick:Q,className:"bg-gradient-to-br from-green-500/10 to-emerald-600/10 backdrop-blur-sm border border-green-400/20 rounded-2xl p-8 text-center hover:scale-105 transition-transform duration-300 shadow-xl cursor-pointer",children:[X.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400/20 to-emerald-500/20 rounded-2xl mx-auto mb-6 flex items-center justify-center border border-green-400/30",children:X.jsx("span",{className:"text-green-400 text-3xl font-bold",children:"3"})}),X.jsx("h4",{className:"text-white font-bold text-lg mb-3",children:e("ebook.step3")}),X.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e("ebook.step3.desc")})]})]})})]})]}),X.jsx("footer",{className:"border-t border-white/10 bg-black/30 backdrop-blur-md mt-auto relative",children:X.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:X.jsx("div",{className:"text-center",children:X.jsx("p",{className:"text-gray-300 text-sm font-medium",children:e("footer.version")})})})}),X.jsx(nk,{isOpen:l,onClose:()=>c(!1),onSave:async e=>{o(e),await mw.settings.put({key:"tmdb_api_key",value:e}),N_.setApiKey(e)},currentApiKey:s}),X.jsx(ak,{isOpen:g,onClose:()=>v(!1),currentMode:a,onSelectItem:e=>{var t,n,r,i,s,o,l,c,u,d,h,f;if("nfo"===e.type)R(e.generatedNFO||null);else if("book"===e.type)Y("books"),O(e.bookData||null),z(e.bookData||null),B(e.ebookSpecs||null),V(e.poster),p(!1),m(!1),T(null),R(null);else{const g={id:(null==(t=e.movieData)?void 0:t.id)||(null==(n=e.tvShowData)?void 0:n.id)||0,title:null==(r=e.movieData)?void 0:r.title,name:null==(i=e.tvShowData)?void 0:i.name,media_type:e.type,poster_path:(null==e?void 0:e.poster)||null,backdrop_path:(null==(s=null==e?void 0:e.movieData)?void 0:s.backdrop_path)||(null==(o=null==e?void 0:e.tvShowData)?void 0:o.backdrop_path)||null,release_date:null==(l=null==e?void 0:e.movieData)?void 0:l.release_date,first_air_date:null==(c=null==e?void 0:e.tvShowData)?void 0:c.first_air_date,vote_average:(null==(u=null==e?void 0:e.movieData)?void 0:u.vote_average)||(null==(d=null==e?void 0:e.tvShowData)?void 0:d.vote_average)||0,overview:(null==(h=null==e?void 0:e.movieData)?void 0:h.overview)||(null==(f=null==e?void 0:e.tvShowData)?void 0:f.overview)||""};"nfo"===a&&Y("movies"),_(g),k(e.movieData||null),j(e.tvShowData||null),C(e.credits||null),P(e.torrentSpecs||null),I(e.poster),R(e.generatedNFO||null),m(!1),p(!1),T(null)}}})]})}function kk(){const[e,t]=U.useState(!0);return U.useEffect(()=>{(async()=>{await(async()=>{if(!localStorage.getItem(_k)){console.log("Running data migration from localStorage to IndexedDB...");try{const e=localStorage.getItem("language");e&&(await mw.settings.put({key:"language",value:e}),localStorage.removeItem("language"));const t=localStorage.getItem("tmdb_api_key");t&&(await mw.settings.put({key:"tmdb_api_key",value:t}),localStorage.removeItem("tmdb_api_key"));const n="fichegen_history",r=localStorage.getItem(n);if(r){const e=JSON.parse(r);if(Array.isArray(e)){const t=e.map(({id:e,...t})=>t);await mw.searchHistory.bulkAdd(t),localStorage.removeItem(n)}}const i=[];for(let a=0;a<localStorage.length;a++){const e=localStorage.key(a);if(e&&e.startsWith("ebook_specs_")){const t=e.replace("ebook_specs_",""),n=localStorage.getItem(e);n&&i.push({id:t,specs:JSON.parse(n)})}}i.length>0&&(await mw.ebookSpecs.bulkAdd(i),i.forEach(e=>localStorage.removeItem(`ebook_specs_${e.id}`))),localStorage.setItem(_k,"true"),console.log("Data migration completed successfully.")}catch(e){console.error("Error during data migration:",e)}}})(),t(!1)})()},[]),e?X.jsx("div",{className:"bg-gray-900 min-h-screen flex items-center justify-center text-white",children:X.jsx("p",{children:"Migrating data..."})}):X.jsx(bw,{children:X.jsx(vx,{basename:"/fichegen",children:X.jsxs(Yy,{children:[X.jsx(Ky,{path:"/",element:X.jsx(wk,{})}),X.jsx(Ky,{path:"/books",element:X.jsx(wk,{})}),X.jsx(Ky,{path:"/nfo",element:X.jsx(wk,{})})]})})})}Eb.init("phc_vGaBRZRBuU7CRUv59CvqDtRYIleL5kqSSup7qiZnAGo",{api_host:"https://eu.i.posthog.com",person_profiles:"identified_only",capture_pageview:!0,capture_exceptions:!0,debug:!1,enable_recording_console_log:!1}),window.posthog=Eb,id(document.getElementById("root")).render(X.jsx(U.StrictMode,{children:X.jsx(Tb,{client:Eb,children:X.jsx(kk,{})})}));
