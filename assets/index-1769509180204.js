var e=Object.defineProperty,t=(t,r,n)=>((t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n)(t,"symbol"!=typeof r?r+"":r,n);import{g as r,c as n,J as i}from"./jszip-1769509180204.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var a={exports:{}},s={},o={exports:{}},l={},c=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.iterator;var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,k={};function N(e,t,r){this.props=e,this.context=t,this.refs=k,this.updater=r||w}function j(){}function S(e,t,r){this.props=e,this.context=t,this.refs=k,this.updater=r||w}N.prototype.isReactComponent={},N.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},N.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},j.prototype=N.prototype;var C=S.prototype=new j;C.constructor=S,_(C,N.prototype),C.isPureReactComponent=!0;var E=Array.isArray,$=Object.prototype.hasOwnProperty,D={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var n,i={},a=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)$.call(t,n)&&!P.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(1===o)i.children=r;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===i[n]&&(i[n]=o[n]);return{$$typeof:c,type:e,key:a,ref:s,props:i,_owner:D.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===c}var F=/\/+/g;function R(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,r,n,i){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var s=!1;if(null===e)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case c:case u:s=!0}}if(s)return i=i(s=e),e=""===n?"."+R(s,0):n,E(i)?(r="",null!=e&&(r=e.replace(F,"$&/")+"/"),I(i,t,r,"",function(e){return e})):null!=i&&(A(i)&&(i=function(e,t){return{$$typeof:c,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(F,"$&/")+"/")+e)),t.push(i)),1;if(s=0,n=""===n?".":n+":",E(e))for(var o=0;o<e.length;o++){var l=n+R(a=e[o],o);s+=I(a,t,r,l,i)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=y&&e[y]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),o=0;!(a=e.next()).done;)s+=I(a=a.value,t,r,l=n+R(a,o++),i);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function M(e,t,r){if(null==e)return e;var n=[],i=0;return I(e,n,"","",function(e){return t.call(r,e,i++)}),n}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},z={transition:null},B={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:z,ReactCurrentOwner:D};function H(){throw Error("act(...) is not supported in production builds of React.")}l.Children={map:M,forEach:function(e,t,r){M(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return M(e,function(){t++}),t},toArray:function(e){return M(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},l.Component=N,l.Fragment=d,l.Profiler=p,l.PureComponent=S,l.StrictMode=h,l.Suspense=v,l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,l.act=H,l.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=_({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=D.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)$.call(t,l)&&!P.hasOwnProperty(l)&&(n[l]=void 0===t[l]&&void 0!==o?o[l]:t[l])}var l=arguments.length-2;if(1===l)n.children=r;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:c,type:e.type,key:i,ref:a,props:n,_owner:s}},l.createContext=function(e){return(e={$$typeof:m,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:f,_context:e},e.Consumer=e},l.createElement=T,l.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},l.createRef=function(){return{current:null}},l.forwardRef=function(e){return{$$typeof:g,render:e}},l.isValidElement=A,l.lazy=function(e){return{$$typeof:x,_payload:{_status:-1,_result:e},_init:O}},l.memo=function(e,t){return{$$typeof:b,type:e,compare:void 0===t?null:t}},l.startTransition=function(e){var t=z.transition;z.transition={};try{e()}finally{z.transition=t}},l.unstable_act=H,l.useCallback=function(e,t){return L.current.useCallback(e,t)},l.useContext=function(e){return L.current.useContext(e)},l.useDebugValue=function(){},l.useDeferredValue=function(e){return L.current.useDeferredValue(e)},l.useEffect=function(e,t){return L.current.useEffect(e,t)},l.useId=function(){return L.current.useId()},l.useImperativeHandle=function(e,t,r){return L.current.useImperativeHandle(e,t,r)},l.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},l.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},l.useMemo=function(e,t){return L.current.useMemo(e,t)},l.useReducer=function(e,t,r){return L.current.useReducer(e,t,r)},l.useRef=function(e){return L.current.useRef(e)},l.useState=function(e){return L.current.useState(e)},l.useSyncExternalStore=function(e,t,r){return L.current.useSyncExternalStore(e,t,r)},l.useTransition=function(){return L.current.useTransition()},l.version="18.3.1",o.exports=l;var U=o.exports;const q=r(U);
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V=U,K=Symbol.for("react.element"),W=Symbol.for("react.fragment"),G=Object.prototype.hasOwnProperty,Y=V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Q={key:!0,ref:!0,__self:!0,__source:!0};function X(e,t,r){var n,i={},a=null,s=null;for(n in void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(s=t.ref),t)G.call(t,n)&&!Q.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:K,type:e,key:a,ref:s,props:i,_owner:Y.current}}s.Fragment=W,s.jsx=X,s.jsxs=X,a.exports=s;var J=a.exports,Z={exports:{}},ee={},te={exports:{}},re={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<i(a,t)))break e;e[n]=t,e[r]=a,r=n}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,s=a>>>1;n<s;){var o=2*(n+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,r))c<a&&0>i(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<a&&0>i(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],c=[],u=1,d=null,h=3,p=!1,f=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var i=r(c);null!==i;){if(null===i.callback)n(c);else{if(!(i.startTime<=e))break;n(c),i.sortIndex=i.expirationTime,t(l,i)}i=r(c)}}function y(e){if(m=!1,x(e),!f)if(null!==r(l))f=!0,T(w);else{var t=r(c);null!==t&&A(y,t.startTime-e)}}function w(t,i){f=!1,m&&(m=!1,v(j),j=-1),p=!0;var a=h;try{for(x(i),d=r(l);null!==d&&(!(d.expirationTime>i)||t&&!E());){var s=d.callback;if("function"==typeof s){d.callback=null,h=d.priorityLevel;var o=s(d.expirationTime<=i);i=e.unstable_now(),"function"==typeof o?d.callback=o:d===r(l)&&n(l),x(i)}else n(l);d=r(l)}if(null!==d)var u=!0;else{var g=r(c);null!==g&&A(y,g.startTime-i),u=!1}return u}finally{d=null,h=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,k=!1,N=null,j=-1,S=5,C=-1;function E(){return!(e.unstable_now()-C<S)}function $(){if(null!==N){var t=e.unstable_now();C=t;var r=!0;try{r=N(!0,t)}finally{r?_():(k=!1,N=null)}}else k=!1}if("function"==typeof b)_=function(){b($)};else if("undefined"!=typeof MessageChannel){var D=new MessageChannel,P=D.port2;D.port1.onmessage=$,_=function(){P.postMessage(null)}}else _=function(){g($,0)};function T(e){N=e,k||(k=!0,_())}function A(t,r){j=g(function(){t(e.unstable_now())},r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,T(w))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},e.unstable_scheduleCallback=function(n,i,a){var s=e.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?s+a:s:a=s,n){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return n={id:u++,callback:i,priorityLevel:n,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(n.sortIndex=a,t(c,n),null===r(l)&&n===r(c)&&(m?(v(j),j=-1):m=!0,A(y,a-s))):(n.sortIndex=o,t(l,n),f||p||(f=!0,T(w))),n},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}}(re),te.exports=re;var ne=te.exports,ie=U,ae=ne;
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oe=new Set,le={};function ce(e,t){ue(e,t),ue(e+"Capture",t)}function ue(e,t){for(le[e]=t,e=0;e<t.length;e++)oe.add(t[e])}var de=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),he=Object.prototype.hasOwnProperty,pe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fe={},me={};function ge(e,t,r,n,i,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ve[e]=new ge(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ve[t]=new ge(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ve[e]=new ge(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ve[e]=new ge(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ve[e]=new ge(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){ve[e]=new ge(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){ve[e]=new ge(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){ve[e]=new ge(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){ve[e]=new ge(e,5,!1,e.toLowerCase(),null,!1,!1)});var be=/[\-:]([a-z])/g;function xe(e){return e[1].toUpperCase()}function ye(e,t,r,n){var i=ve.hasOwnProperty(t)?ve[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!he.call(me,e)||!he.call(fe,e)&&(pe.test(e)?me[e]=!0:(fe[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(be,xe);ve[t]=new ge(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(be,xe);ve[t]=new ge(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(be,xe);ve[t]=new ge(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){ve[e]=new ge(e,1,!1,e.toLowerCase(),null,!1,!1)}),ve.xlinkHref=new ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){ve[e]=new ge(e,1,!1,e.toLowerCase(),null,!0,!0)});var we=ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_e=Symbol.for("react.element"),ke=Symbol.for("react.portal"),Ne=Symbol.for("react.fragment"),je=Symbol.for("react.strict_mode"),Se=Symbol.for("react.profiler"),Ce=Symbol.for("react.provider"),Ee=Symbol.for("react.context"),$e=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),Te=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),Fe=Symbol.for("react.offscreen"),Re=Symbol.iterator;function Ie(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Re&&e[Re]||e["@@iterator"])?e:null}var Me,Oe=Object.assign;function Le(e){if(void 0===Me)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Me=t&&t[1]||""}return"\n"+Me+e}var ze=!1;function Be(e,t){if(!e||ze)return"";ze=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),a=n.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{ze=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Le(e):""}function He(e){switch(e.tag){case 5:return Le(e.type);case 16:return Le("Lazy");case 13:return Le("Suspense");case 19:return Le("SuspenseList");case 0:case 2:case 15:return e=Be(e.type,!1);case 11:return e=Be(e.type.render,!1);case 1:return e=Be(e.type,!0);default:return""}}function Ue(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Ne:return"Fragment";case ke:return"Portal";case Se:return"Profiler";case je:return"StrictMode";case De:return"Suspense";case Pe:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Ee:return(e.displayName||"Context")+".Consumer";case Ce:return(e._context.displayName||"Context")+".Provider";case $e:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Te:return null!==(t=e.displayName||null)?t:Ue(e.type)||"Memo";case Ae:t=e._payload,e=e._init;try{return Ue(e(t))}catch(r){}}return null}function qe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ue(t);case 8:return t===je?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Ve(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Ke(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function We(e){e._valueTracker||(e._valueTracker=function(e){var t=Ke(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ge(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Ke(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Ye(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Qe(e,t){var r=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Xe(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=Ve(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Je(e,t){null!=(t=t.checked)&&ye(e,"checked",t,!1)}function Ze(e,t){Je(e,t);var r=Ve(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?tt(e,t.type,r):t.hasOwnProperty("defaultValue")&&tt(e,t.type,Ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function et(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function tt(e,t,r){"number"===t&&Ye(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var rt=Array.isArray;function nt(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ve(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function it(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(se(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function at(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(se(92));if(rt(r)){if(1<r.length)throw Error(se(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:Ve(r)}}function st(e,t){var r=Ve(t.value),n=Ve(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ot(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function lt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?lt(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ut,dt,ht=(dt=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ut=ut||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ut.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return dt(e,t)})}:dt);function pt(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mt=["Webkit","ms","Moz","O"];function gt(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||ft.hasOwnProperty(e)&&ft[e]?(""+t).trim():t+"px"}function vt(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=gt(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(ft).forEach(function(e){mt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ft[t]=ft[e]})});var bt=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xt(e,t){if(t){if(bt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(se(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(se(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(se(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(se(62))}}function yt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wt=null;function _t(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var kt=null,Nt=null,jt=null;function St(e){if(e=ya(e)){if("function"!=typeof kt)throw Error(se(280));var t=e.stateNode;t&&(t=_a(t),kt(e.stateNode,e.type,t))}}function Ct(e){Nt?jt?jt.push(e):jt=[e]:Nt=e}function Et(){if(Nt){var e=Nt,t=jt;if(jt=Nt=null,St(e),t)for(e=0;e<t.length;e++)St(t[e])}}function $t(e,t){return e(t)}function Dt(){}var Pt=!1;function Tt(e,t,r){if(Pt)return e(t,r);Pt=!0;try{return $t(e,t,r)}finally{Pt=!1,(null!==Nt||null!==jt)&&(Dt(),Et())}}function At(e,t){var r=e.stateNode;if(null===r)return null;var n=_a(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(se(231,t,typeof r));return r}var Ft=!1;if(de)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch(dt){Ft=!1}function It(e,t,r,n,i,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var Mt=!1,Ot=null,Lt=!1,zt=null,Bt={onError:function(e){Mt=!0,Ot=e}};function Ht(e,t,r,n,i,a,s,o,l){Mt=!1,Ot=null,It.apply(Bt,arguments)}function Ut(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function qt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Vt(e){if(Ut(e)!==e)throw Error(se(188))}function Kt(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ut(e)))throw Error(se(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(n=i.return)){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Vt(i),e;if(a===n)return Vt(i),t;a=a.sibling}throw Error(se(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s)throw Error(se(189))}}if(r.alternate!==n)throw Error(se(190))}if(3!==r.tag)throw Error(se(188));return r.stateNode.current===r?e:t}(e))?Wt(e):null}function Wt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Wt(e);if(null!==t)return t;e=e.sibling}return null}var Gt=ae.unstable_scheduleCallback,Yt=ae.unstable_cancelCallback,Qt=ae.unstable_shouldYield,Xt=ae.unstable_requestPaint,Jt=ae.unstable_now,Zt=ae.unstable_getCurrentPriorityLevel,er=ae.unstable_ImmediatePriority,tr=ae.unstable_UserBlockingPriority,rr=ae.unstable_NormalPriority,nr=ae.unstable_LowPriority,ir=ae.unstable_IdlePriority,ar=null,sr=null;var or=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lr(e)/cr|0)|0},lr=Math.log,cr=Math.LN2;var ur=64,dr=4194304;function hr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pr(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,s=268435455&r;if(0!==s){var o=s&~i;0!==o?n=hr(o):0!==(a&=s)&&(n=hr(a))}else 0!==(s=r&~i)?n=hr(s):0!==a&&(n=hr(a));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&i)&&((i=n&-n)>=(a=t&-t)||16===i&&4194240&a))return t;if(4&n&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-or(t)),n|=e[r],t&=~i;return n}function fr(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mr(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gr(){var e=ur;return!(4194240&(ur<<=1))&&(ur=64),e}function vr(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function br(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-or(t)]=r}function xr(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-or(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var yr=0;function wr(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var _r,kr,Nr,jr,Sr,Cr=!1,Er=[],$r=null,Dr=null,Pr=null,Tr=new Map,Ar=new Map,Fr=[],Rr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ir(e,t){switch(e){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":Tr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ar.delete(t.pointerId)}}function Mr(e,t,r,n,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ya(t))&&kr(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Or(e){var t=xa(e.target);if(null!==t){var r=Ut(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=qt(r)))return e.blockedOn=t,void Sr(e.priority,function(){Nr(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Lr(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qr(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ya(r))&&kr(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);wt=n,r.target.dispatchEvent(n),wt=null,t.shift()}return!0}function zr(e,t,r){Lr(e)&&r.delete(t)}function Br(){Cr=!1,null!==$r&&Lr($r)&&($r=null),null!==Dr&&Lr(Dr)&&(Dr=null),null!==Pr&&Lr(Pr)&&(Pr=null),Tr.forEach(zr),Ar.forEach(zr)}function Hr(e,t){e.blockedOn===t&&(e.blockedOn=null,Cr||(Cr=!0,ae.unstable_scheduleCallback(ae.unstable_NormalPriority,Br)))}function Ur(e){function t(t){return Hr(t,e)}if(0<Er.length){Hr(Er[0],e);for(var r=1;r<Er.length;r++){var n=Er[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==$r&&Hr($r,e),null!==Dr&&Hr(Dr,e),null!==Pr&&Hr(Pr,e),Tr.forEach(t),Ar.forEach(t),r=0;r<Fr.length;r++)(n=Fr[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Fr.length&&null===(r=Fr[0]).blockedOn;)Or(r),null===r.blockedOn&&Fr.shift()}var qr=we.ReactCurrentBatchConfig,Vr=!0;function Kr(e,t,r,n){var i=yr,a=qr.transition;qr.transition=null;try{yr=1,Gr(e,t,r,n)}finally{yr=i,qr.transition=a}}function Wr(e,t,r,n){var i=yr,a=qr.transition;qr.transition=null;try{yr=4,Gr(e,t,r,n)}finally{yr=i,qr.transition=a}}function Gr(e,t,r,n){if(Vr){var i=Qr(e,t,r,n);if(null===i)Vi(e,t,n,Yr,r),Ir(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return $r=Mr($r,e,t,r,n,i),!0;case"dragenter":return Dr=Mr(Dr,e,t,r,n,i),!0;case"mouseover":return Pr=Mr(Pr,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return Tr.set(a,Mr(Tr.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Ar.set(a,Mr(Ar.get(a)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Ir(e,n),4&t&&-1<Rr.indexOf(e)){for(;null!==i;){var a=ya(i);if(null!==a&&_r(a),null===(a=Qr(e,t,r,n))&&Vi(e,t,n,Yr,r),a===i)break;i=a}null!==i&&n.stopPropagation()}else Vi(e,t,n,null,r)}}var Yr=null;function Qr(e,t,r,n){if(Yr=null,null!==(e=xa(e=_t(n))))if(null===(t=Ut(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=qt(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yr=e,null}function Xr(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zt()){case er:return 1;case tr:return 4;case rr:case nr:return 16;case ir:return 536870912;default:return 16}default:return 16}}var Jr=null,Zr=null,en=null;function tn(){if(en)return en;var e,t,r=Zr,n=r.length,i="value"in Jr?Jr.value:Jr.textContent,a=i.length;for(e=0;e<n&&r[e]===i[e];e++);var s=n-e;for(t=1;t<=s&&r[n-t]===i[a-t];t++);return en=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function an(){return!1}function sn(e){function t(t,r,n,i,a){for(var s in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:an,this.isPropagationStopped=an,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,ln,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(un),hn=Oe({},un,{view:0,detail:0}),pn=sn(hn),fn=Oe({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,ln=e.screenY-cn.screenY):ln=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=sn(fn),gn=sn(Oe({},fn,{dataTransfer:0})),vn=sn(Oe({},hn,{relatedTarget:0})),bn=sn(Oe({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=Oe({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=sn(xn),wn=sn(Oe({},un,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function Sn(){return jn}var Cn=Oe({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=sn(Cn),$n=sn(Oe({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=sn(Oe({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Pn=sn(Oe({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=Oe({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=sn(Tn),Fn=[9,13,27,32],Rn=de&&"CompositionEvent"in window,In=null;de&&"documentMode"in document&&(In=document.documentMode);var Mn=de&&"TextEvent"in window&&!In,On=de&&(!Rn||In&&8<In&&11>=In),Ln=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Fn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,r,n){Ct(n),0<(t=Wi(t,"onChange")).length&&(r=new dn("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Wn=null,Gn=null;function Yn(e){Li(e,0)}function Qn(e){if(Ge(wa(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(de){var Zn;if(de){var ei="oninput"in document;if(!ei){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),ei="function"==typeof ti.oninput}Zn=ei}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function ri(){Wn&&(Wn.detachEvent("onpropertychange",ni),Gn=Wn=null)}function ni(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];Kn(t,Gn,e,_t(e)),Tt(Yn,t)}}function ii(e,t,r){"focusin"===e?(ri(),Gn=r,(Wn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ri()}function ai(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function si(e,t){if("click"===e)return Qn(t)}function oi(e,t){if("input"===e||"change"===e)return Qn(t)}var li="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ci(e,t){if(li(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!he.call(t,i)||!li(e[i],t[i]))return!1}return!0}function ui(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function di(e,t){var r,n=ui(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ui(n)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pi(){for(var e=window,t=Ye();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=Ye((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mi(e){var t=pi(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&hi(r.ownerDocument.documentElement,r)){if(null!==n&&fi(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=void 0===n.end?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=di(r,a);var s=di(r,n);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gi=de&&"documentMode"in document&&11>=document.documentMode,vi=null,bi=null,xi=null,yi=!1;function wi(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;yi||null==vi||vi!==Ye(n)||("selectionStart"in(n=vi)&&fi(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},xi&&ci(xi,n)||(xi=n,0<(n=Wi(bi,"onSelect")).length&&(t=new dn("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=vi)))}function _i(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ki={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},Ni={},ji={};function Si(e){if(Ni[e])return Ni[e];if(!ki[e])return e;var t,r=ki[e];for(t in r)if(r.hasOwnProperty(t)&&t in ji)return Ni[e]=r[t];return e}de&&(ji=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);var Ci=Si("animationend"),Ei=Si("animationiteration"),$i=Si("animationstart"),Di=Si("transitionend"),Pi=new Map,Ti="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(e,t){Pi.set(e,t),ce(t,[e])}for(var Fi=0;Fi<Ti.length;Fi++){var Ri=Ti[Fi];Ai(Ri.toLowerCase(),"on"+(Ri[0].toUpperCase()+Ri.slice(1)))}Ai(Ci,"onAnimationEnd"),Ai(Ei,"onAnimationIteration"),Ai($i,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(Di,"onTransitionEnd"),ue("onMouseEnter",["mouseout","mouseover"]),ue("onMouseLeave",["mouseout","mouseover"]),ue("onPointerEnter",["pointerout","pointerover"]),ue("onPointerLeave",["pointerout","pointerover"]),ce("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ce("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ce("onBeforeInput",["compositionend","keypress","textInput","paste"]),ce("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ce("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ce("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ii));function Oi(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,a,s,o,l){if(Ht.apply(this,arguments),Mt){if(!Mt)throw Error(se(198));var c=Ot;Mt=!1,Ot=null,Lt||(Lt=!0,zt=c)}}(n,t,void 0,e),e.currentTarget=null}function Li(e,t){t=!!(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;Oi(i,o,c),a=l}else for(s=0;s<n.length;s++){if(l=(o=n[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;Oi(i,o,c),a=l}}}if(Lt)throw e=zt,Lt=!1,zt=null,e}function zi(e,t){var r=t[ga];void 0===r&&(r=t[ga]=new Set);var n=e+"__bubble";r.has(n)||(qi(t,e,2,!1),r.add(n))}function Bi(e,t,r){var n=0;t&&(n|=4),qi(r,e,n,t)}var Hi="_reactListening"+Math.random().toString(36).slice(2);function Ui(e){if(!e[Hi]){e[Hi]=!0,oe.forEach(function(t){"selectionchange"!==t&&(Mi.has(t)||Bi(t,!1,e),Bi(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hi]||(t[Hi]=!0,Bi("selectionchange",!1,t))}}function qi(e,t,r,n){switch(Xr(t)){case 1:var i=Kr;break;case 4:i=Wr;break;default:i=Gr}r=i.bind(null,t,r,e),i=void 0,!Ft||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Vi(e,t,r,n,i){var a=n;if(!(1&t||2&t||null===n))e:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var o=n.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===s)for(s=n.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==o;){if(null===(s=xa(o)))return;if(5===(l=s.tag)||6===l){n=a=s;continue e}o=o.parentNode}}n=n.return}Tt(function(){var n=a,i=_t(r),s=[];e:{var o=Pi.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===rn(r))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=vn;break;case"focusout":c="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Dn;break;case Ci:case Ei:case $i:l=bn;break;case Di:l=Pn;break;case"scroll":l=pn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=$n}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=n;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=At(f,h))&&u.push(Ki(f,m,p)))),d)break;f=f.return}0<u.length&&(o=new l(o,c,null,r,i),s.push({event:o,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===wt||!(c=r.relatedTarget||r.fromElement)||!xa(c)&&!c[ma])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?xa(c):null)&&(c!==(d=Ut(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=mn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=$n,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?o:wa(l),p=null==c?o:wa(c),(o=new u(m,f+"leave",l,r,i)).target=d,o.relatedTarget=p,m=null,xa(i)===n&&((u=new u(h,f+"enter",c,r,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Gi(p))f++;for(p=0,m=h;m;m=Gi(m))p++;for(;0<f-p;)u=Gi(u),f--;for(;0<p-f;)h=Gi(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gi(u),h=Gi(h)}u=null}else u=null;null!==l&&Yi(s,o,l,u,!1),null!==c&&null!==d&&Yi(s,d,c,u,!0)}if("select"===(l=(o=n?wa(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(Vn(o))if(Jn)g=oi;else{g=ai;var v=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=si);switch(g&&(g=g(e,n))?Kn(s,g,r,i):(v&&v(e,o,n),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&tt(o,"number",o.value)),v=n?wa(n):window,e){case"focusin":(Vn(v)||"true"===v.contentEditable)&&(vi=v,bi=n,xi=null);break;case"focusout":xi=bi=vi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,wi(s,r,i);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":wi(s,r,i)}var b;if(Rn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Un?Bn(e,r)&&(x="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(x="onCompositionStart");x&&(On&&"ko"!==r.locale&&(Un||"onCompositionStart"!==x?"onCompositionEnd"===x&&Un&&(b=tn()):(Zr="value"in(Jr=i)?Jr.value:Jr.textContent,Un=!0)),0<(v=Wi(n,x)).length&&(x=new wn(x,e,null,r,i),s.push({event:x,listeners:v}),b?x.data=b:null!==(b=Hn(r))&&(x.data=b))),(b=Mn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(zn=!0,Ln);case"textInput":return(e=t.data)===Ln&&zn?null:e;default:return null}}(e,r):function(e,t){if(Un)return"compositionend"===e||!Rn&&Bn(e,t)?(e=tn(),en=Zr=Jr=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Wi(n,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,r,i),s.push({event:i,listeners:n}),i.data=b))}Li(s,t)})}function Ki(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Wi(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=At(e,r))&&n.unshift(Ki(e,a,i)),null!=(a=At(e,t))&&n.push(Ki(e,a,i))),e=e.return}return n}function Gi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yi(e,t,r,n,i){for(var a=t._reactName,s=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=At(r,a))&&s.unshift(Ki(r,l,o)):i||null!=(l=At(r,a))&&s.push(Ki(r,l,o))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}var Qi=/\r\n?/g,Xi=/\u0000|\uFFFD/g;function Ji(e){return("string"==typeof e?e:""+e).replace(Qi,"\n").replace(Xi,"")}function Zi(e,t,r){if(t=Ji(t),Ji(e)!==t&&r)throw Error(se(425))}function ea(){}var ta=null,ra=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ia="function"==typeof setTimeout?setTimeout:void 0,aa="function"==typeof clearTimeout?clearTimeout:void 0,sa="function"==typeof Promise?Promise:void 0,oa="function"==typeof queueMicrotask?queueMicrotask:void 0!==sa?function(e){return sa.resolve(null).then(e).catch(la)}:ia;function la(e){setTimeout(function(){throw e})}function ca(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void Ur(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);Ur(t)}function ua(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var ha=Math.random().toString(36).slice(2),pa="__reactFiber$"+ha,fa="__reactProps$"+ha,ma="__reactContainer$"+ha,ga="__reactEvents$"+ha,va="__reactListeners$"+ha,ba="__reactHandles$"+ha;function xa(e){var t=e[pa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ma]||r[pa]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=da(e);null!==e;){if(r=e[pa])return r;e=da(e)}return t}r=(e=r).parentNode}return null}function ya(e){return!(e=e[pa]||e[ma])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(se(33))}function _a(e){return e[fa]||null}var ka=[],Na=-1;function ja(e){return{current:e}}function Sa(e){0>Na||(e.current=ka[Na],ka[Na]=null,Na--)}function Ca(e,t){Na++,ka[Na]=e.current,e.current=t}var Ea={},$a=ja(Ea),Da=ja(!1),Pa=Ea;function Ta(e,t){var r=e.type.contextTypes;if(!r)return Ea;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in r)a[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Aa(e){return null!=(e=e.childContextTypes)}function Fa(){Sa(Da),Sa($a)}function Ra(e,t,r){if($a.current!==Ea)throw Error(se(168));Ca($a,t),Ca(Da,r)}function Ia(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in t))throw Error(se(108,qe(e)||"Unknown",i));return Oe({},r,n)}function Ma(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ea,Pa=$a.current,Ca($a,e),Ca(Da,Da.current),!0}function Oa(e,t,r){var n=e.stateNode;if(!n)throw Error(se(169));r?(e=Ia(e,t,Pa),n.__reactInternalMemoizedMergedChildContext=e,Sa(Da),Sa($a),Ca($a,e)):Sa(Da),Ca(Da,r)}var La=null,za=!1,Ba=!1;function Ha(e){null===La?La=[e]:La.push(e)}function Ua(){if(!Ba&&null!==La){Ba=!0;var e=0,t=yr;try{var r=La;for(yr=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}La=null,za=!1}catch(i){throw null!==La&&(La=La.slice(e+1)),Gt(er,Ua),i}finally{yr=t,Ba=!1}}return null}var qa=[],Va=0,Ka=null,Wa=0,Ga=[],Ya=0,Qa=null,Xa=1,Ja="";function Za(e,t){qa[Va++]=Wa,qa[Va++]=Ka,Ka=e,Wa=t}function es(e,t,r){Ga[Ya++]=Xa,Ga[Ya++]=Ja,Ga[Ya++]=Qa,Qa=e;var n=Xa;e=Ja;var i=32-or(n)-1;n&=~(1<<i),r+=1;var a=32-or(t)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Xa=1<<32-or(t)+i|r<<i|n,Ja=a+e}else Xa=1<<a|r<<i|n,Ja=e}function ts(e){null!==e.return&&(Za(e,1),es(e,1,0))}function rs(e){for(;e===Ka;)Ka=qa[--Va],qa[Va]=null,Wa=qa[--Va],qa[Va]=null;for(;e===Qa;)Qa=Ga[--Ya],Ga[Ya]=null,Ja=Ga[--Ya],Ga[Ya]=null,Xa=Ga[--Ya],Ga[Ya]=null}var ns=null,is=null,as=!1,ss=null;function os(e,t){var r=Tu(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function ls(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=ua(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Qa?{id:Xa,overflow:Ja}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Tu(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ns=e,is=null,!0);default:return!1}}function cs(e){return!(!(1&e.mode)||128&e.flags)}function us(e){if(as){var t=is;if(t){var r=t;if(!ls(e,t)){if(cs(e))throw Error(se(418));t=ua(r.nextSibling);var n=ns;t&&ls(e,t)?os(n,r):(e.flags=-4097&e.flags|2,as=!1,ns=e)}}else{if(cs(e))throw Error(se(418));e.flags=-4097&e.flags|2,as=!1,ns=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!as)return ds(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=is)){if(cs(e))throw ps(),Error(se(418));for(;t;)os(e,t),t=ua(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(se(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){is=ua(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}is=null}}else is=ns?ua(e.stateNode.nextSibling):null;return!0}function ps(){for(var e=is;e;)e=ua(e.nextSibling)}function fs(){is=ns=null,as=!1}function ms(e){null===ss?ss=[e]:ss.push(e)}var gs=we.ReactCurrentBatchConfig;function vs(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(se(309));var n=r.stateNode}if(!n)throw Error(se(147,e));var i=n,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(se(284));if(!r._owner)throw Error(se(290,e))}return e}function bs(e,t){throw e=Object.prototype.toString.call(t),Error(se(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xs(e){return(0,e._init)(e._payload)}function ys(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Fu(e,t)).index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,r,n){return null===t||6!==t.tag?((t=Ou(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function l(e,t,r,n){var a=r.type;return a===Ne?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===Ae&&xs(a)===t.type)?((n=i(t,r.props)).ref=vs(e,t,r),n.return=e,n):((n=Ru(r.type,r.key,r.props,null,e.mode,n)).ref=vs(e,t,r),n.return=e,n)}function c(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Lu(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function u(e,t,r,n,a){return null===t||7!==t.tag?((t=Iu(r,e.mode,n,a)).return=e,t):((t=i(t,r)).return=e,t)}function d(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Ou(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case _e:return(r=Ru(t.type,t.key,t.props,null,e.mode,r)).ref=vs(e,null,t),r.return=e,r;case ke:return(t=Lu(t,e.mode,r)).return=e,t;case Ae:return d(e,(0,t._init)(t._payload),r)}if(rt(t)||Ie(t))return(t=Iu(t,e.mode,r,null)).return=e,t;bs(e,t)}return null}function h(e,t,r,n){var i=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==i?null:o(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case _e:return r.key===i?l(e,t,r,n):null;case ke:return r.key===i?c(e,t,r,n):null;case Ae:return h(e,t,(i=r._init)(r._payload),n)}if(rt(r)||Ie(r))return null!==i?null:u(e,t,r,n,null);bs(e,r)}return null}function p(e,t,r,n,i){if("string"==typeof n&&""!==n||"number"==typeof n)return o(t,e=e.get(r)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case _e:return l(t,e=e.get(null===n.key?r:n.key)||null,n,i);case ke:return c(t,e=e.get(null===n.key?r:n.key)||null,n,i);case Ae:return p(e,t,r,(0,n._init)(n._payload),i)}if(rt(n)||Ie(n))return u(t,e=e.get(r)||null,n,i,null);bs(t,n)}return null}return function o(l,c,u,f){if("object"==typeof u&&null!==u&&u.type===Ne&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case _e:e:{for(var m=u.key,g=c;null!==g;){if(g.key===m){if((m=u.type)===Ne){if(7===g.tag){r(l,g.sibling),(c=i(g,u.props.children)).return=l,l=c;break e}}else if(g.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===Ae&&xs(m)===g.type){r(l,g.sibling),(c=i(g,u.props)).ref=vs(l,g,u),c.return=l,l=c;break e}r(l,g);break}t(l,g),g=g.sibling}u.type===Ne?((c=Iu(u.props.children,l.mode,f,u.key)).return=l,l=c):((f=Ru(u.type,u.key,u.props,null,l.mode,f)).ref=vs(l,c,u),f.return=l,l=f)}return s(l);case ke:e:{for(g=u.key;null!==c;){if(c.key===g){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){r(l,c.sibling),(c=i(c,u.children||[])).return=l,l=c;break e}r(l,c);break}t(l,c),c=c.sibling}(c=Lu(u,l.mode,f)).return=l,l=c}return s(l);case Ae:return o(l,c,(g=u._init)(u._payload),f)}if(rt(u))return function(i,s,o,l){for(var c=null,u=null,f=s,m=s=0,g=null;null!==f&&m<o.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var v=h(i,f,o[m],l);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(i,f),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,f=g}if(m===o.length)return r(i,f),as&&Za(i,m),c;if(null===f){for(;m<o.length;m++)null!==(f=d(i,o[m],l))&&(s=a(f,s,m),null===u?c=f:u.sibling=f,u=f);return as&&Za(i,m),c}for(f=n(i,f);m<o.length;m++)null!==(g=p(f,i,m,o[m],l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&f.forEach(function(e){return t(i,e)}),as&&Za(i,m),c}(l,c,u,f);if(Ie(u))return function(i,s,o,l){var c=Ie(o);if("function"!=typeof c)throw Error(se(150));if(null==(o=c.call(o)))throw Error(se(151));for(var u=c=null,f=s,m=s=0,g=null,v=o.next();null!==f&&!v.done;m++,v=o.next()){f.index>m?(g=f,f=null):g=f.sibling;var b=h(i,f,v.value,l);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&t(i,f),s=a(b,s,m),null===u?c=b:u.sibling=b,u=b,f=g}if(v.done)return r(i,f),as&&Za(i,m),c;if(null===f){for(;!v.done;m++,v=o.next())null!==(v=d(i,v.value,l))&&(s=a(v,s,m),null===u?c=v:u.sibling=v,u=v);return as&&Za(i,m),c}for(f=n(i,f);!v.done;m++,v=o.next())null!==(v=p(f,i,m,v.value,l))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v);return e&&f.forEach(function(e){return t(i,e)}),as&&Za(i,m),c}(l,c,u,f);bs(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==c&&6===c.tag?(r(l,c.sibling),(c=i(c,u)).return=l,l=c):(r(l,c),(c=Ou(u,l.mode,f)).return=l,l=c),s(l)):r(l,c)}}var ws=ys(!0),_s=ys(!1),ks=ja(null),Ns=null,js=null,Ss=null;function Cs(){Ss=js=Ns=null}function Es(e){var t=ks.current;Sa(ks),e._currentValue=t}function $s(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ds(e,t){Ns=e,Ss=js=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yl=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Ss!==e)if(e={context:e,memoizedValue:t,next:null},null===js){if(null===Ns)throw Error(se(308));js=e,Ns.dependencies={lanes:0,firstContext:e}}else js=js.next=e;return t}var Ts=null;function As(e){null===Ts?Ts=[e]:Ts.push(e)}function Fs(e,t,r,n){var i=t.interleaved;return null===i?(r.next=r,As(t)):(r.next=i.next,i.next=r),t.interleaved=r,Rs(e,n)}function Rs(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Is=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Os(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,2&$c){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Rs(e,r)}return null===(i=n.interleaved)?(t.next=t,As(n)):(t.next=i.next,i.next=t),n.interleaved=t,Rs(e,r)}function Bs(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,xr(e,r)}}function Hs(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?i=a=s:a=a.next=s,r=r.next}while(null!==r);null===a?i=a=t:a=a.next=t}else i=a=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Us(e,t,r,n){var i=e.updateQueue;Is=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(s=0,u=c=l=null,o=a;;){var h=o.lane,p=o.eventTime;if((n&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=r,m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(h="function"==typeof(f=m.payload)?f.call(p,d,h):f))break e;d=Oe({},d,h);break e;case 2:Is=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Mc|=s,e.lanes=s,e.memoizedState=d}}function qs(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!=typeof i)throw Error(se(191,i));i.call(n)}}}var Vs={},Ks=ja(Vs),Ws=ja(Vs),Gs=ja(Vs);function Ys(e){if(e===Vs)throw Error(se(174));return e}function Qs(e,t){switch(Ca(Gs,t),Ca(Ws,e),Ca(Ks,Vs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ct(null,"");break;default:t=ct(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sa(Ks),Ca(Ks,t)}function Xs(){Sa(Ks),Sa(Ws),Sa(Gs)}function Js(e){Ys(Gs.current);var t=Ys(Ks.current),r=ct(t,e.type);t!==r&&(Ca(Ws,e),Ca(Ks,r))}function Zs(e){Ws.current===e&&(Sa(Ks),Sa(Ws))}var eo=ja(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ro=[];function no(){for(var e=0;e<ro.length;e++)ro[e]._workInProgressVersionPrimary=null;ro.length=0}var io=we.ReactCurrentDispatcher,ao=we.ReactCurrentBatchConfig,so=0,oo=null,lo=null,co=null,uo=!1,ho=!1,po=0,fo=0;function mo(){throw Error(se(321))}function go(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!li(e[r],t[r]))return!1;return!0}function vo(e,t,r,n,i,a){if(so=a,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?el:tl,e=r(n,i),ho){a=0;do{if(ho=!1,po=0,25<=a)throw Error(se(301));a+=1,co=lo=null,t.updateQueue=null,io.current=rl,e=r(n,i)}while(ho)}if(io.current=Zo,t=null!==lo&&null!==lo.next,so=0,co=lo=oo=null,uo=!1,t)throw Error(se(300));return e}function bo(){var e=0!==po;return po=0,e}function xo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?oo.memoizedState=co=e:co=co.next=e,co}function yo(){if(null===lo){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=lo.next;var t=null===co?oo.memoizedState:co.next;if(null!==t)co=t,lo=e;else{if(null===e)throw Error(se(310));e={memoizedState:(lo=e).memoizedState,baseState:lo.baseState,baseQueue:lo.baseQueue,queue:lo.queue,next:null},null===co?oo.memoizedState=co=e:co=co.next=e}return co}function wo(e,t){return"function"==typeof t?t(e):t}function _o(e){var t=yo(),r=t.queue;if(null===r)throw Error(se(311));r.lastRenderedReducer=e;var n=lo,i=n.baseQueue,a=r.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(null!==i){a=i.next,n=n.baseState;var o=s=null,l=null,c=a;do{var u=c.lane;if((so&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(o=l=d,s=n):l=l.next=d,oo.lanes|=u,Mc|=u}c=c.next}while(null!==c&&c!==a);null===l?s=n:l.next=o,li(n,t.memoizedState)||(yl=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=l,r.lastRenderedState=n}if(null!==(e=r.interleaved)){i=e;do{a=i.lane,oo.lanes|=a,Mc|=a,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ko(e){var t=yo(),r=t.queue;if(null===r)throw Error(se(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(null!==i){r.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);li(a,t.memoizedState)||(yl=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function No(){}function jo(e,t){var r=oo,n=yo(),i=t(),a=!li(n.memoizedState,i);if(a&&(n.memoizedState=i,yl=!0),n=n.queue,Mo(Eo.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||null!==co&&1&co.memoizedState.tag){if(r.flags|=2048,To(9,Co.bind(null,r,n,i,t),void 0,null),null===Dc)throw Error(se(349));30&so||So(r,t,i)}return i}function So(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Co(e,t,r,n){t.value=r,t.getSnapshot=n,$o(t)&&Do(e)}function Eo(e,t,r){return r(function(){$o(t)&&Do(e)})}function $o(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!li(e,r)}catch(n){return!0}}function Do(e){var t=Rs(e,1);null!==t&&nu(t,e,1,-1)}function Po(e){var t=xo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Yo.bind(null,oo,e),[t.memoizedState,e]}function To(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Ao(){return yo().memoizedState}function Fo(e,t,r,n){var i=xo();oo.flags|=e,i.memoizedState=To(1|t,r,void 0,void 0===n?null:n)}function Ro(e,t,r,n){var i=yo();n=void 0===n?null:n;var a=void 0;if(null!==lo){var s=lo.memoizedState;if(a=s.destroy,null!==n&&go(n,s.deps))return void(i.memoizedState=To(t,r,a,n))}oo.flags|=e,i.memoizedState=To(1|t,r,a,n)}function Io(e,t){return Fo(8390656,8,e,t)}function Mo(e,t){return Ro(2048,8,e,t)}function Oo(e,t){return Ro(4,2,e,t)}function Lo(e,t){return Ro(4,4,e,t)}function zo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bo(e,t,r){return r=null!=r?r.concat([e]):null,Ro(4,4,zo.bind(null,t,e),r)}function Ho(){}function Uo(e,t){var r=yo();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&go(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function qo(e,t){var r=yo();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&go(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Vo(e,t,r){return 21&so?(li(r,t)||(r=gr(),oo.lanes|=r,Mc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yl=!0),e.memoizedState=r)}function Ko(e,t){var r=yr;yr=0!==r&&4>r?r:4,e(!0);var n=ao.transition;ao.transition={};try{e(!1),t()}finally{yr=r,ao.transition=n}}function Wo(){return yo().memoizedState}function Go(e,t,r){var n=ru(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Qo(e))Xo(t,r);else if(null!==(r=Fs(e,t,r,n))){nu(r,e,n,tu()),Jo(r,t,n)}}function Yo(e,t,r){var n=ru(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Xo(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,r);if(i.hasEagerState=!0,i.eagerState=o,li(o,s)){var l=t.interleaved;return null===l?(i.next=i,As(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(r=Fs(e,t,i,n))&&(nu(r,e,n,i=tu()),Jo(r,t,n))}}function Qo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Xo(e,t){ho=uo=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Jo(e,t,r){if(4194240&r){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,xr(e,r)}}var Zo={readContext:Ps,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useInsertionEffect:mo,useLayoutEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useMutableSource:mo,useSyncExternalStore:mo,useId:mo,unstable_isNewReconciler:!1},el={readContext:Ps,useCallback:function(e,t){return xo().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Io,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,Fo(4194308,4,zo.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Fo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fo(4,2,e,t)},useMemo:function(e,t){var r=xo();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=xo();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Go.bind(null,oo,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},xo().memoizedState=e},useState:Po,useDebugValue:Ho,useDeferredValue:function(e){return xo().memoizedState=e},useTransition:function(){var e=Po(!1),t=e[0];return e=Ko.bind(null,e[1]),xo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=oo,i=xo();if(as){if(void 0===r)throw Error(se(407));r=r()}else{if(r=t(),null===Dc)throw Error(se(349));30&so||So(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,Io(Eo.bind(null,n,a,e),[e]),n.flags|=2048,To(9,Co.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=xo(),t=Dc.identifierPrefix;if(as){var r=Ja;t=":"+t+"R"+(r=(Xa&~(1<<32-or(Xa)-1)).toString(32)+r),0<(r=po++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},tl={readContext:Ps,useCallback:Uo,useContext:Ps,useEffect:Mo,useImperativeHandle:Bo,useInsertionEffect:Oo,useLayoutEffect:Lo,useMemo:qo,useReducer:_o,useRef:Ao,useState:function(){return _o(wo)},useDebugValue:Ho,useDeferredValue:function(e){return Vo(yo(),lo.memoizedState,e)},useTransition:function(){return[_o(wo)[0],yo().memoizedState]},useMutableSource:No,useSyncExternalStore:jo,useId:Wo,unstable_isNewReconciler:!1},rl={readContext:Ps,useCallback:Uo,useContext:Ps,useEffect:Mo,useImperativeHandle:Bo,useInsertionEffect:Oo,useLayoutEffect:Lo,useMemo:qo,useReducer:ko,useRef:Ao,useState:function(){return ko(wo)},useDebugValue:Ho,useDeferredValue:function(e){var t=yo();return null===lo?t.memoizedState=e:Vo(t,lo.memoizedState,e)},useTransition:function(){return[ko(wo)[0],yo().memoizedState]},useMutableSource:No,useSyncExternalStore:jo,useId:Wo,unstable_isNewReconciler:!1};function nl(e,t){if(e&&e.defaultProps){for(var r in t=Oe({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function il(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:Oe({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var al={isMounted:function(e){return!!(e=e._reactInternals)&&Ut(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=tu(),i=ru(e),a=Ls(n,i);a.payload=t,null!=r&&(a.callback=r),null!==(t=zs(e,a,i))&&(nu(t,e,i,n),Bs(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=tu(),i=ru(e),a=Ls(n,i);a.tag=1,a.payload=t,null!=r&&(a.callback=r),null!==(t=zs(e,a,i))&&(nu(t,e,i,n),Bs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=tu(),n=ru(e),i=Ls(r,n);i.tag=2,null!=t&&(i.callback=t),null!==(t=zs(e,i,n))&&(nu(t,e,n,r),Bs(t,e,n))}};function sl(e,t,r,n,i,a,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!ci(r,n)||!ci(i,a))}function ol(e,t,r){var n=!1,i=Ea,a=t.contextType;return"object"==typeof a&&null!==a?a=Ps(a):(i=Aa(t)?Pa:$a.current,a=(n=null!=(n=t.contextTypes))?Ta(e,i):Ea),t=new t(r,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=al,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ll(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&al.enqueueReplaceState(t,t.state,null)}function cl(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Ms(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=Ps(a):(a=Aa(t)?Pa:$a.current,i.context=Ta(e,a)),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(il(e,t,a,r),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&al.enqueueReplaceState(i,i.state,null),Us(e,r,i,n),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function ul(e,t){try{var r="",n=t;do{r+=He(n),n=n.return}while(n);var i=r}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function dl(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function hl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var pl="function"==typeof WeakMap?WeakMap:Map;function fl(e,t,r){(r=Ls(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Vc||(Vc=!0,Kc=n),hl(0,t)},r}function ml(e,t,r){(r=Ls(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){hl(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(r.callback=function(){hl(0,t),"function"!=typeof n&&(null===Wc?Wc=new Set([this]):Wc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function gl(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new pl;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Su.bind(null,e,t,r),t.then(e,e))}function vl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bl(e,t,r,n,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ls(-1,1)).tag=2,zs(r,t,1))),r.lanes|=1),e)}var xl=we.ReactCurrentOwner,yl=!1;function wl(e,t,r,n){t.child=null===e?_s(t,null,r,n):ws(t,e.child,r,n)}function _l(e,t,r,n,i){r=r.render;var a=t.ref;return Ds(t,i),n=vo(e,t,r,n,a,i),r=bo(),null===e||yl?(as&&r&&ts(t),t.flags|=1,wl(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vl(e,t,i))}function kl(e,t,r,n,i){if(null===e){var a=r.type;return"function"!=typeof a||Au(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Ru(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Nl(e,t,a,n,i))}if(a=e.child,0===(e.lanes&i)){var s=a.memoizedProps;if((r=null!==(r=r.compare)?r:ci)(s,n)&&e.ref===t.ref)return Vl(e,t,i)}return t.flags|=1,(e=Fu(a,n)).ref=t.ref,e.return=t,t.child=e}function Nl(e,t,r,n,i){if(null!==e){var a=e.memoizedProps;if(ci(a,n)&&e.ref===t.ref){if(yl=!1,t.pendingProps=n=a,0===(e.lanes&i))return t.lanes=e.lanes,Vl(e,t,i);131072&e.flags&&(yl=!0)}}return Cl(e,t,r,n,i)}function jl(e,t,r){var n=t.pendingProps,i=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(1&t.mode){if(!(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ca(Fc,Ac),Ac|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==a?a.baseLanes:r,Ca(Fc,Ac),Ac|=n}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ca(Fc,Ac),Ac|=r;else null!==a?(n=a.baseLanes|r,t.memoizedState=null):n=r,Ca(Fc,Ac),Ac|=n;return wl(e,t,i,r),t.child}function Sl(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Cl(e,t,r,n,i){var a=Aa(r)?Pa:$a.current;return a=Ta(t,a),Ds(t,i),r=vo(e,t,r,n,a,i),n=bo(),null===e||yl?(as&&n&&ts(t),t.flags|=1,wl(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vl(e,t,i))}function El(e,t,r,n,i){if(Aa(r)){var a=!0;Ma(t)}else a=!1;if(Ds(t,i),null===t.stateNode)ql(e,t),ol(t,r,n),cl(t,r,n,i),n=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=r.contextType;"object"==typeof c&&null!==c?c=Ps(c):c=Ta(t,c=Aa(r)?Pa:$a.current);var u=r.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;d||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==n||l!==c)&&ll(t,s,n,c),Is=!1;var h=t.memoizedState;s.state=h,Us(t,n,s,i),l=t.memoizedState,o!==n||h!==l||Da.current||Is?("function"==typeof u&&(il(t,r,u,n),l=t.memoizedState),(o=Is||sl(t,r,o,n,h,l,c))?(d||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=c,n=o):("function"==typeof s.componentDidMount&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Os(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:nl(t.type,o),s.props=c,d=t.pendingProps,h=s.context,"object"==typeof(l=r.contextType)&&null!==l?l=Ps(l):l=Ta(t,l=Aa(r)?Pa:$a.current);var p=r.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==d||h!==l)&&ll(t,s,n,l),Is=!1,h=t.memoizedState,s.state=h,Us(t,n,s,i);var f=t.memoizedState;o!==d||h!==f||Da.current||Is?("function"==typeof p&&(il(t,r,p,n),f=t.memoizedState),(c=Is||sl(t,r,c,n,h,f,l)||!1)?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(n,f,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,f,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),s.props=n,s.state=f,s.context=l,n=c):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return $l(e,t,r,n,a,i)}function $l(e,t,r,n,i,a){Sl(e,t);var s=!!(128&t.flags);if(!n&&!s)return i&&Oa(t,r,!1),Vl(e,t,a);n=t.stateNode,xl.current=t;var o=s&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&s?(t.child=ws(t,e.child,null,a),t.child=ws(t,null,o,a)):wl(e,t,o,a),t.memoizedState=n.state,i&&Oa(t,r,!0),t.child}function Dl(e){var t=e.stateNode;t.pendingContext?Ra(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ra(0,t.context,!1),Qs(e,t.containerInfo)}function Pl(e,t,r,n,i){return fs(),ms(i),t.flags|=256,wl(e,t,r,n),t.child}var Tl,Al,Fl,Rl,Il={dehydrated:null,treeContext:null,retryLane:0};function Ml(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ol(e,t,r){var n,i=t.pendingProps,a=eo.current,s=!1,o=!!(128&t.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&!!(2&a)),n?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ca(eo,1&a),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},1&i||null===s?s=Mu(o,i,0,null):(s.childLanes=0,s.pendingProps=o),e=Iu(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ml(r),t.memoizedState=Il,e):Ll(t,o));if(null!==(a=e.memoizedState)&&null!==(n=a.dehydrated))return function(e,t,r,n,i,a,s){if(r)return 256&t.flags?(t.flags&=-257,zl(e,t,s,n=dl(Error(se(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=Mu({mode:"visible",children:n.children},i,0,null),(a=Iu(a,i,s,null)).flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,1&t.mode&&ws(t,e.child,null,s),t.child.memoizedState=Ml(s),t.memoizedState=Il,a);if(!(1&t.mode))return zl(e,t,s,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var o=n.dgst;return n=o,zl(e,t,s,n=dl(a=Error(se(419)),n,void 0))}if(o=0!==(s&e.childLanes),yl||o){if(null!==(n=Dc)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(n.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Rs(e,i),nu(n,e,i,-1))}return gu(),zl(e,t,s,n=dl(Error(se(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Eu.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,is=ua(i.nextSibling),ns=t,as=!0,ss=null,null!==e&&(Ga[Ya++]=Xa,Ga[Ya++]=Ja,Ga[Ya++]=Qa,Xa=e.id,Ja=e.overflow,Qa=t),t=Ll(t,n.children),t.flags|=4096,t)}(e,t,o,i,n,a,r);if(s){s=i.fallback,o=t.mode,n=(a=e.child).sibling;var l={mode:"hidden",children:i.children};return 1&o||t.child===a?(i=Fu(a,l)).subtreeFlags=14680064&a.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null),null!==n?s=Fu(n,s):(s=Iu(s,o,r,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=null===(o=e.child.memoizedState)?Ml(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=Il,i}return e=(s=e.child).sibling,i=Fu(s,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Ll(e,t){return(t=Mu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zl(e,t,r,n){return null!==n&&ms(n),ws(t,e.child,null,r),(e=Ll(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bl(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),$s(e.return,t,r)}function Hl(e,t,r,n,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function Ul(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(wl(e,t,n.children,r),2&(n=eo.current))n=1&n|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bl(e,r,t);else if(19===e.tag)Bl(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ca(eo,n),1&t.mode)switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===to(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Hl(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===to(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Hl(t,!0,r,null,a);break;case"together":Hl(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function ql(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vl(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Mc|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(se(153));if(null!==t.child){for(r=Fu(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Fu(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Kl(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Wl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Gl(e,t,r){var n=t.pendingProps;switch(rs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wl(t),null;case 1:case 17:return Aa(t.type)&&Fa(),Wl(t),null;case 3:return n=t.stateNode,Xs(),Sa(Da),Sa($a),no(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==ss&&(ou(ss),ss=null))),Al(e,t),Wl(t),null;case 5:Zs(t);var i=Ys(Gs.current);if(r=t.type,null!==e&&null!=t.stateNode)Fl(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(se(166));return Wl(t),null}if(e=Ys(Ks.current),hs(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[pa]=t,n[fa]=a,e=!!(1&t.mode),r){case"dialog":zi("cancel",n),zi("close",n);break;case"iframe":case"object":case"embed":zi("load",n);break;case"video":case"audio":for(i=0;i<Ii.length;i++)zi(Ii[i],n);break;case"source":zi("error",n);break;case"img":case"image":case"link":zi("error",n),zi("load",n);break;case"details":zi("toggle",n);break;case"input":Xe(n,a),zi("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},zi("invalid",n);break;case"textarea":at(n,a),zi("invalid",n)}for(var s in xt(r,a),i=null,a)if(a.hasOwnProperty(s)){var o=a[s];"children"===s?"string"==typeof o?n.textContent!==o&&(!0!==a.suppressHydrationWarning&&Zi(n.textContent,o,e),i=["children",o]):"number"==typeof o&&n.textContent!==""+o&&(!0!==a.suppressHydrationWarning&&Zi(n.textContent,o,e),i=["children",""+o]):le.hasOwnProperty(s)&&null!=o&&"onScroll"===s&&zi("scroll",n)}switch(r){case"input":We(n),et(n,a,!0);break;case"textarea":We(n),ot(n);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(n.onclick=ea)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=lt(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),"select"===r&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[pa]=t,e[fa]=n,Tl(e,t,!1,!1),t.stateNode=e;e:{switch(s=yt(r,n),r){case"dialog":zi("cancel",e),zi("close",e),i=n;break;case"iframe":case"object":case"embed":zi("load",e),i=n;break;case"video":case"audio":for(i=0;i<Ii.length;i++)zi(Ii[i],e);i=n;break;case"source":zi("error",e),i=n;break;case"img":case"image":case"link":zi("error",e),zi("load",e),i=n;break;case"details":zi("toggle",e),i=n;break;case"input":Xe(e,n),i=Qe(e,n),zi("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Oe({},n,{value:void 0}),zi("invalid",e);break;case"textarea":at(e,n),i=it(e,n),zi("invalid",e)}for(a in xt(r,i),o=i)if(o.hasOwnProperty(a)){var l=o[a];"style"===a?vt(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&ht(e,l):"children"===a?"string"==typeof l?("textarea"!==r||""!==l)&&pt(e,l):"number"==typeof l&&pt(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(le.hasOwnProperty(a)?null!=l&&"onScroll"===a&&zi("scroll",e):null!=l&&ye(e,a,l,s))}switch(r){case"input":We(e),et(e,n,!1);break;case"textarea":We(e),ot(e);break;case"option":null!=n.value&&e.setAttribute("value",""+Ve(n.value));break;case"select":e.multiple=!!n.multiple,null!=(a=n.value)?nt(e,!!n.multiple,a,!1):null!=n.defaultValue&&nt(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=ea)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wl(t),null;case 6:if(e&&null!=t.stateNode)Rl(e,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(se(166));if(r=Ys(Gs.current),Ys(Ks.current),hs(t)){if(n=t.stateNode,r=t.memoizedProps,n[pa]=t,(a=n.nodeValue!==r)&&null!==(e=ns))switch(e.tag){case 3:Zi(n.nodeValue,r,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zi(n.nodeValue,r,!!(1&e.mode))}a&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[pa]=t,t.stateNode=n}return Wl(t),null;case 13:if(Sa(eo),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==is&&1&t.mode&&!(128&t.flags))ps(),fs(),t.flags|=98560,a=!1;else if(a=hs(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(se(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(se(317));a[pa]=t}else fs(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wl(t),a=!1}else null!==ss&&(ou(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,1&t.mode&&(null===e||1&eo.current?0===Rc&&(Rc=3):gu())),null!==t.updateQueue&&(t.flags|=4),Wl(t),null);case 4:return Xs(),Al(e,t),null===e&&Ui(t.stateNode.containerInfo),Wl(t),null;case 10:return Es(t.type._context),Wl(t),null;case 19:if(Sa(eo),null===(a=t.memoizedState))return Wl(t),null;if(n=!!(128&t.flags),null===(s=a.rendering))if(n)Kl(a,!1);else{if(0!==Rc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(s=to(e))){for(t.flags|=128,Kl(a,!1),null!==(n=s.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(a=r).flags&=14680066,null===(s=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ca(eo,1&eo.current|2),t.child}e=e.sibling}null!==a.tail&&Jt()>Uc&&(t.flags|=128,n=!0,Kl(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=to(s))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Kl(a,!0),null===a.tail&&"hidden"===a.tailMode&&!s.alternate&&!as)return Wl(t),null}else 2*Jt()-a.renderingStartTime>Uc&&1073741824!==r&&(t.flags|=128,n=!0,Kl(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(null!==(r=a.last)?r.sibling=s:t.child=s,a.last=s)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Jt(),t.sibling=null,r=eo.current,Ca(eo,n?1&r|2:1&r),t):(Wl(t),null);case 22:case 23:return hu(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&1&t.mode?!!(1073741824&Ac)&&(Wl(t),6&t.subtreeFlags&&(t.flags|=8192)):Wl(t),null;case 24:case 25:return null}throw Error(se(156,t.tag))}function Yl(e,t){switch(rs(t),t.tag){case 1:return Aa(t.type)&&Fa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Sa(Da),Sa($a),no(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Sa(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(se(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sa(eo),null;case 4:return Xs(),null;case 10:return Es(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Tl=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Al=function(){},Fl=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Ys(Ks.current);var a,s=null;switch(r){case"input":i=Qe(e,i),n=Qe(e,n),s=[];break;case"select":i=Oe({},i,{value:void 0}),n=Oe({},n,{value:void 0}),s=[];break;case"textarea":i=it(e,i),n=it(e,n),s=[];break;default:"function"!=typeof i.onClick&&"function"==typeof n.onClick&&(e.onclick=ea)}for(c in xt(r,n),r=null,i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(le.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(o=null!=i?i[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(null!=l||null!=o))if("style"===c)if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(s||(s=[]),s.push(c,r)),r=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(s=s||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(s=s||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(le.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&zi("scroll",e),s||o===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},Rl=function(e,t,r,n){r!==n&&(t.flags|=4)};var Ql=!1,Xl=!1,Jl="function"==typeof WeakSet?WeakSet:Set,Zl=null;function ec(e,t){var r=e.ref;if(null!==r)if("function"==typeof r)try{r(null)}catch(n){ju(e,t,n)}else r.current=null}function tc(e,t,r){try{r()}catch(n){ju(e,t,n)}}var rc=!1;function nc(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tc(t,r,a)}i=i.next}while(i!==n)}}function ic(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ac(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"==typeof t?t(e):t.current=e}}function sc(e){var t=e.alternate;null!==t&&(e.alternate=null,sc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pa],delete t[fa],delete t[ga],delete t[va],delete t[ba])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function oc(e){return 5===e.tag||3===e.tag||4===e.tag}function lc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||oc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=ea));else if(4!==n&&null!==(e=e.child))for(cc(e,t,r),e=e.sibling;null!==e;)cc(e,t,r),e=e.sibling}function uc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(uc(e,t,r),e=e.sibling;null!==e;)uc(e,t,r),e=e.sibling}var dc=null,hc=!1;function pc(e,t,r){for(r=r.child;null!==r;)fc(e,t,r),r=r.sibling}function fc(e,t,r){if(sr&&"function"==typeof sr.onCommitFiberUnmount)try{sr.onCommitFiberUnmount(ar,r)}catch(o){}switch(r.tag){case 5:Xl||ec(r,t);case 6:var n=dc,i=hc;dc=null,pc(e,t,r),hc=i,null!==(dc=n)&&(hc?(e=dc,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dc.removeChild(r.stateNode));break;case 18:null!==dc&&(hc?(e=dc,r=r.stateNode,8===e.nodeType?ca(e.parentNode,r):1===e.nodeType&&ca(e,r),Ur(e)):ca(dc,r.stateNode));break;case 4:n=dc,i=hc,dc=r.stateNode.containerInfo,hc=!0,pc(e,t,r),dc=n,hc=i;break;case 0:case 11:case 14:case 15:if(!Xl&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,void 0!==s&&(2&a||4&a)&&tc(r,t,s),i=i.next}while(i!==n)}pc(e,t,r);break;case 1:if(!Xl&&(ec(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){ju(r,t,o)}pc(e,t,r);break;case 21:pc(e,t,r);break;case 22:1&r.mode?(Xl=(n=Xl)||null!==r.memoizedState,pc(e,t,r),Xl=n):pc(e,t,r);break;default:pc(e,t,r)}}function mc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Jl),t.forEach(function(t){var n=$u.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function gc(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,s=t,o=s;e:for(;null!==o;){switch(o.tag){case 5:dc=o.stateNode,hc=!1;break e;case 3:case 4:dc=o.stateNode.containerInfo,hc=!0;break e}o=o.return}if(null===dc)throw Error(se(160));fc(a,s,i),dc=null,hc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){ju(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vc(t,e),t=t.sibling}function vc(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(t,e),bc(e),4&n){try{nc(3,e,e.return),ic(3,e)}catch(ym){ju(e,e.return,ym)}try{nc(5,e,e.return)}catch(ym){ju(e,e.return,ym)}}break;case 1:gc(t,e),bc(e),512&n&&null!==r&&ec(r,r.return);break;case 5:if(gc(t,e),bc(e),512&n&&null!==r&&ec(r,r.return),32&e.flags){var i=e.stateNode;try{pt(i,"")}catch(ym){ju(e,e.return,ym)}}if(4&n&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==r?r.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===a.type&&null!=a.name&&Je(i,a),yt(o,s);var c=yt(o,a);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];"style"===u?vt(i,d):"dangerouslySetInnerHTML"===u?ht(i,d):"children"===u?pt(i,d):ye(i,u,d,c)}switch(o){case"input":Ze(i,a);break;case"textarea":st(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?nt(i,!!a.multiple,p,!1):h!==!!a.multiple&&(null!=a.defaultValue?nt(i,!!a.multiple,a.defaultValue,!0):nt(i,!!a.multiple,a.multiple?[]:"",!1))}i[fa]=a}catch(ym){ju(e,e.return,ym)}}break;case 6:if(gc(t,e),bc(e),4&n){if(null===e.stateNode)throw Error(se(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(ym){ju(e,e.return,ym)}}break;case 3:if(gc(t,e),bc(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Ur(t.containerInfo)}catch(ym){ju(e,e.return,ym)}break;case 4:default:gc(t,e),bc(e);break;case 13:gc(t,e),bc(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Hc=Jt())),4&n&&mc(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Xl=(c=Xl)||u,gc(t,e),Xl=c):gc(t,e),bc(e),8192&n){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&1&e.mode)for(Zl=e,u=e.child;null!==u;){for(d=Zl=u;null!==Zl;){switch(p=(h=Zl).child,h.tag){case 0:case 11:case 14:case 15:nc(4,h,h.return);break;case 1:ec(h,h.return);var f=h.stateNode;if("function"==typeof f.componentWillUnmount){n=h,r=h.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(ym){ju(n,r,ym)}}break;case 5:ec(h,h.return);break;case 22:if(null!==h.memoizedState){_c(d);continue}}null!==p?(p.return=h,Zl=p):_c(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{i=d.stateNode,c?"function"==typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(o=d.stateNode,s=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=gt("display",s))}catch(ym){ju(e,e.return,ym)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(ym){ju(e,e.return,ym)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gc(t,e),bc(e),4&n&&mc(e);case 21:}}function bc(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(oc(r)){var n=r;break e}r=r.return}throw Error(se(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(pt(i,""),n.flags&=-33),uc(e,lc(e),i);break;case 3:case 4:var a=n.stateNode.containerInfo;cc(e,lc(e),a);break;default:throw Error(se(161))}}catch(s){ju(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xc(e,t,r){Zl=e,yc(e)}function yc(e,t,r){for(var n=!!(1&e.mode);null!==Zl;){var i=Zl,a=i.child;if(22===i.tag&&n){var s=null!==i.memoizedState||Ql;if(!s){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Xl;o=Ql;var c=Xl;if(Ql=s,(Xl=l)&&!c)for(Zl=i;null!==Zl;)l=(s=Zl).child,22===s.tag&&null!==s.memoizedState?kc(i):null!==l?(l.return=s,Zl=l):kc(i);for(;null!==a;)Zl=a,yc(a),a=a.sibling;Zl=i,Ql=o,Xl=c}wc(e)}else 8772&i.subtreeFlags&&null!==a?(a.return=i,Zl=a):wc(e)}}function wc(e){for(;null!==Zl;){var t=Zl;if(8772&t.flags){var r=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Xl||ic(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Xl)if(null===r)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:nl(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qs(t,a,n);break;case 3:var s=t.updateQueue;if(null!==s){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}qs(t,s,r)}break;case 5:var o=t.stateNode;if(null===r&&4&t.flags){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Ur(d)}}}break;default:throw Error(se(163))}Xl||512&t.flags&&ac(t)}catch(h){ju(t,t.return,h)}}if(t===e){Zl=null;break}if(null!==(r=t.sibling)){r.return=t.return,Zl=r;break}Zl=t.return}}function _c(e){for(;null!==Zl;){var t=Zl;if(t===e){Zl=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Zl=r;break}Zl=t.return}}function kc(e){for(;null!==Zl;){var t=Zl;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ic(4,t)}catch(l){ju(t,r,l)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(l){ju(t,i,l)}}var a=t.return;try{ac(t)}catch(l){ju(t,a,l)}break;case 5:var s=t.return;try{ac(t)}catch(l){ju(t,s,l)}}}catch(l){ju(t,t.return,l)}if(t===e){Zl=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zl=o;break}Zl=t.return}}var Nc,jc=Math.ceil,Sc=we.ReactCurrentDispatcher,Cc=we.ReactCurrentOwner,Ec=we.ReactCurrentBatchConfig,$c=0,Dc=null,Pc=null,Tc=0,Ac=0,Fc=ja(0),Rc=0,Ic=null,Mc=0,Oc=0,Lc=0,zc=null,Bc=null,Hc=0,Uc=1/0,qc=null,Vc=!1,Kc=null,Wc=null,Gc=!1,Yc=null,Qc=0,Xc=0,Jc=null,Zc=-1,eu=0;function tu(){return 6&$c?Jt():-1!==Zc?Zc:Zc=Jt()}function ru(e){return 1&e.mode?2&$c&&0!==Tc?Tc&-Tc:null!==gs.transition?(0===eu&&(eu=gr()),eu):0!==(e=yr)?e:e=void 0===(e=window.event)?16:Xr(e.type):1}function nu(e,t,r,n){if(50<Xc)throw Xc=0,Jc=null,Error(se(185));br(e,r,n),2&$c&&e===Dc||(e===Dc&&(!(2&$c)&&(Oc|=r),4===Rc&&lu(e,Tc)),iu(e,n),1===r&&0===$c&&!(1&t.mode)&&(Uc=Jt()+500,za&&Ua()))}function iu(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-or(a),o=1<<s,l=i[s];-1===l?0!==(o&r)&&0===(o&n)||(i[s]=fr(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var n=pr(e,e===Dc?Tc:0);if(0===n)null!==r&&Yt(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Yt(r),1===t)0===e.tag?function(e){za=!0,Ha(e)}(cu.bind(null,e)):Ha(cu.bind(null,e)),oa(function(){!(6&$c)&&Ua()}),r=null;else{switch(wr(n)){case 1:r=er;break;case 4:r=tr;break;case 16:default:r=rr;break;case 536870912:r=ir}r=Du(r,au.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function au(e,t){if(Zc=-1,eu=0,6&$c)throw Error(se(327));var r=e.callbackNode;if(ku()&&e.callbackNode!==r)return null;var n=pr(e,e===Dc?Tc:0);if(0===n)return null;if(30&n||0!==(n&e.expiredLanes)||t)t=vu(e,n);else{t=n;var i=$c;$c|=2;var a=mu();for(Dc===e&&Tc===t||(qc=null,Uc=Jt()+500,pu(e,t));;)try{xu();break}catch(o){fu(e,o)}Cs(),Sc.current=a,$c=i,null!==Pc?t=0:(Dc=null,Tc=0,t=Rc)}if(0!==t){if(2===t&&(0!==(i=mr(e))&&(n=i,t=su(e,i))),1===t)throw r=Ic,pu(e,0),lu(e,n),iu(e,Jt()),r;if(6===t)lu(e,n);else{if(i=e.current.alternate,!(30&n||function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!li(a(),i))return!1}catch(s){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=vu(e,n),2===t&&(a=mr(e),0!==a&&(n=a,t=su(e,a))),1!==t)))throw r=Ic,pu(e,0),lu(e,n),iu(e,Jt()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(se(345));case 2:case 5:_u(e,Bc,qc);break;case 3:if(lu(e,n),(130023424&n)===n&&10<(t=Hc+500-Jt())){if(0!==pr(e,0))break;if(((i=e.suspendedLanes)&n)!==n){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ia(_u.bind(null,e,Bc,qc),t);break}_u(e,Bc,qc);break;case 4:if(lu(e,n),(4194240&n)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-or(n);a=1<<s,(s=t[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=Jt()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*jc(n/1960))-n)){e.timeoutHandle=ia(_u.bind(null,e,Bc,qc),n);break}_u(e,Bc,qc);break;default:throw Error(se(329))}}}return iu(e,Jt()),e.callbackNode===r?au.bind(null,e):null}function su(e,t){var r=zc;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=vu(e,t))&&(t=Bc,Bc=r,null!==t&&ou(t)),e}function ou(e){null===Bc?Bc=e:Bc.push.apply(Bc,e)}function lu(e,t){for(t&=~Lc,t&=~Oc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-or(t),n=1<<r;e[r]=-1,t&=~n}}function cu(e){if(6&$c)throw Error(se(327));ku();var t=pr(e,0);if(!(1&t))return iu(e,Jt()),null;var r=vu(e,t);if(0!==e.tag&&2===r){var n=mr(e);0!==n&&(t=n,r=su(e,n))}if(1===r)throw r=Ic,pu(e,0),lu(e,t),iu(e,Jt()),r;if(6===r)throw Error(se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_u(e,Bc,qc),iu(e,Jt()),null}function uu(e,t){var r=$c;$c|=1;try{return e(t)}finally{0===($c=r)&&(Uc=Jt()+500,za&&Ua())}}function du(e){null!==Yc&&0===Yc.tag&&!(6&$c)&&ku();var t=$c;$c|=1;var r=Ec.transition,n=yr;try{if(Ec.transition=null,yr=1,e)return e()}finally{yr=n,Ec.transition=r,!(6&($c=t))&&Ua()}}function hu(){Ac=Fc.current,Sa(Fc)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==Pc)for(r=Pc.return;null!==r;){var n=r;switch(rs(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&Fa();break;case 3:Xs(),Sa(Da),Sa($a),no();break;case 5:Zs(n);break;case 4:Xs();break;case 13:case 19:Sa(eo);break;case 10:Es(n.type._context);break;case 22:case 23:hu()}r=r.return}if(Dc=e,Pc=e=Fu(e.current,null),Tc=Ac=t,Rc=0,Ic=null,Lc=Oc=Mc=0,Bc=zc=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(n=(r=Ts[t]).interleaved)){r.interleaved=null;var i=n.next,a=r.pending;if(null!==a){var s=a.next;a.next=i,n.next=s}r.pending=n}Ts=null}return e}function fu(e,t){for(;;){var r=Pc;try{if(Cs(),io.current=Zo,uo){for(var n=oo.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}uo=!1}if(so=0,co=lo=oo=null,ho=!1,po=0,Cc.current=null,null===r||null===r.return){Rc=1,Ic=t,Pc=null;break}e:{var a=e,s=r.return,o=r,l=t;if(t=Tc,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,u=o,d=u.tag;if(!(1&u.mode||0!==d&&11!==d&&15!==d)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=vl(s);if(null!==p){p.flags&=-257,bl(p,s,o,0,t),1&p.mode&&gl(a,c,t),l=c;var f=(t=p).updateQueue;if(null===f){var m=new Set;m.add(l),t.updateQueue=m}else f.add(l);break e}if(!(1&t)){gl(a,c,t),gu();break e}l=Error(se(426))}else if(as&&1&o.mode){var g=vl(s);if(null!==g){!(65536&g.flags)&&(g.flags|=256),bl(g,s,o,0,t),ms(ul(l,o));break e}}a=l=ul(l,o),4!==Rc&&(Rc=2),null===zc?zc=[a]:zc.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Hs(a,fl(0,l,t));break e;case 1:o=l;var v=a.type,b=a.stateNode;if(!(128&a.flags||"function"!=typeof v.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==Wc&&Wc.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Hs(a,ml(a,o,t));break e}}a=a.return}while(null!==a)}wu(r)}catch(x){t=x,Pc===r&&null!==r&&(Pc=r=r.return);continue}break}}function mu(){var e=Sc.current;return Sc.current=Zo,null===e?Zo:e}function gu(){0!==Rc&&3!==Rc&&2!==Rc||(Rc=4),null===Dc||!(268435455&Mc)&&!(268435455&Oc)||lu(Dc,Tc)}function vu(e,t){var r=$c;$c|=2;var n=mu();for(Dc===e&&Tc===t||(qc=null,pu(e,t));;)try{bu();break}catch(i){fu(e,i)}if(Cs(),$c=r,Sc.current=n,null!==Pc)throw Error(se(261));return Dc=null,Tc=0,Rc}function bu(){for(;null!==Pc;)yu(Pc)}function xu(){for(;null!==Pc&&!Qt();)yu(Pc)}function yu(e){var t=Nc(e.alternate,e,Ac);e.memoizedProps=e.pendingProps,null===t?wu(e):Pc=t,Cc.current=null}function wu(e){var t=e;do{var r=t.alternate;if(e=t.return,32768&t.flags){if(null!==(r=Yl(r,t)))return r.flags&=32767,void(Pc=r);if(null===e)return Rc=6,void(Pc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(r=Gl(r,t,Ac)))return void(Pc=r);if(null!==(t=t.sibling))return void(Pc=t);Pc=t=e}while(null!==t);0===Rc&&(Rc=5)}function _u(e,t,r){var n=yr,i=Ec.transition;try{Ec.transition=null,yr=1,function(e,t,r,n){do{ku()}while(null!==Yc);if(6&$c)throw Error(se(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(se(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-or(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}(e,a),e===Dc&&(Pc=Dc=null,Tc=0),!(2064&r.subtreeFlags)&&!(2064&r.flags)||Gc||(Gc=!0,Du(rr,function(){return ku(),null})),a=!!(15990&r.flags),!!(15990&r.subtreeFlags)||a){a=Ec.transition,Ec.transition=null;var s=yr;yr=1;var o=$c;$c|=4,Cc.current=null,function(e,t){if(ta=Vr,fi(e=pi())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch(y){r=null;break e}var s=0,o=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var p;d!==r||0!==i&&3!==d.nodeType||(o=s+i),d!==a||0!==n&&3!==d.nodeType||(l=s+n),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===e)break t;if(h===r&&++c===i&&(o=s),h===a&&++u===n&&(l=s),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}r=-1===o||-1===l?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ra={focusedElem:e,selectionRange:r},Vr=!1,Zl=t;null!==Zl;)if(e=(t=Zl).child,1028&t.subtreeFlags&&null!==e)e.return=t,Zl=e;else for(;null!==Zl;){t=Zl;try{var f=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,g=f.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:nl(t.type,m),g);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(se(163))}}catch(y){ju(t,t.return,y)}if(null!==(e=t.sibling)){e.return=t.return,Zl=e;break}Zl=t.return}f=rc,rc=!1}(e,r),vc(r,e),mi(ra),Vr=!!ta,ra=ta=null,e.current=r,xc(r),Xt(),$c=o,yr=s,Ec.transition=a}else e.current=r;if(Gc&&(Gc=!1,Yc=e,Qc=i),a=e.pendingLanes,0===a&&(Wc=null),function(e){if(sr&&"function"==typeof sr.onCommitFiberRoot)try{sr.onCommitFiberRoot(ar,e,void 0,!(128&~e.current.flags))}catch(t){}}(r.stateNode),iu(e,Jt()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Vc)throw Vc=!1,e=Kc,Kc=null,e;!!(1&Qc)&&0!==e.tag&&ku(),a=e.pendingLanes,1&a?e===Jc?Xc++:(Xc=0,Jc=e):Xc=0,Ua()}(e,t,r,n)}finally{Ec.transition=i,yr=n}return null}function ku(){if(null!==Yc){var e=wr(Qc),t=Ec.transition,r=yr;try{if(Ec.transition=null,yr=16>e?16:e,null===Yc)var n=!1;else{if(e=Yc,Yc=null,Qc=0,6&$c)throw Error(se(331));var i=$c;for($c|=4,Zl=e.current;null!==Zl;){var a=Zl,s=a.child;if(16&Zl.flags){var o=a.deletions;if(null!==o){for(var l=0;l<o.length;l++){var c=o[l];for(Zl=c;null!==Zl;){var u=Zl;switch(u.tag){case 0:case 11:case 15:nc(8,u,a)}var d=u.child;if(null!==d)d.return=u,Zl=d;else for(;null!==Zl;){var h=(u=Zl).sibling,p=u.return;if(sc(u),u===c){Zl=null;break}if(null!==h){h.return=p,Zl=h;break}Zl=p}}}var f=a.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Zl=a}}if(2064&a.subtreeFlags&&null!==s)s.return=a,Zl=s;else e:for(;null!==Zl;){if(2048&(a=Zl).flags)switch(a.tag){case 0:case 11:case 15:nc(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Zl=v;break e}Zl=a.return}}var b=e.current;for(Zl=b;null!==Zl;){var x=(s=Zl).child;if(2064&s.subtreeFlags&&null!==x)x.return=s,Zl=x;else e:for(s=b;null!==Zl;){if(2048&(o=Zl).flags)try{switch(o.tag){case 0:case 11:case 15:ic(9,o)}}catch(w){ju(o,o.return,w)}if(o===s){Zl=null;break e}var y=o.sibling;if(null!==y){y.return=o.return,Zl=y;break e}Zl=o.return}}if($c=i,Ua(),sr&&"function"==typeof sr.onPostCommitFiberRoot)try{sr.onPostCommitFiberRoot(ar,e)}catch(w){}n=!0}return n}finally{yr=r,Ec.transition=t}}return!1}function Nu(e,t,r){e=zs(e,t=fl(0,t=ul(r,t),1),1),t=tu(),null!==e&&(br(e,1,t),iu(e,t))}function ju(e,t,r){if(3===e.tag)Nu(e,e,r);else for(;null!==t;){if(3===t.tag){Nu(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Wc||!Wc.has(n))){t=zs(t,e=ml(t,e=ul(r,e),1),1),e=tu(),null!==t&&(br(t,1,e),iu(t,e));break}}t=t.return}}function Su(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&r,Dc===e&&(Tc&r)===r&&(4===Rc||3===Rc&&(130023424&Tc)===Tc&&500>Jt()-Hc?pu(e,0):Lc|=r),iu(e,t)}function Cu(e,t){0===t&&(1&e.mode?(t=dr,!(130023424&(dr<<=1))&&(dr=4194304)):t=1);var r=tu();null!==(e=Rs(e,t))&&(br(e,t,r),iu(e,r))}function Eu(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Cu(e,r)}function $u(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(se(314))}null!==n&&n.delete(t),Cu(e,r)}function Du(e,t){return Gt(e,t)}function Pu(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tu(e,t,r,n){return new Pu(e,t,r,n)}function Au(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fu(e,t){var r=e.alternate;return null===r?((r=Tu(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ru(e,t,r,n,i,a){var s=2;if(n=e,"function"==typeof e)Au(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case Ne:return Iu(r.children,i,a,t);case je:s=8,i|=8;break;case Se:return(e=Tu(12,r,t,2|i)).elementType=Se,e.lanes=a,e;case De:return(e=Tu(13,r,t,i)).elementType=De,e.lanes=a,e;case Pe:return(e=Tu(19,r,t,i)).elementType=Pe,e.lanes=a,e;case Fe:return Mu(r,i,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Ce:s=10;break e;case Ee:s=9;break e;case $e:s=11;break e;case Te:s=14;break e;case Ae:s=16,n=null;break e}throw Error(se(130,null==e?e:typeof e,""))}return(t=Tu(s,r,t,i)).elementType=e,t.type=n,t.lanes=a,t}function Iu(e,t,r,n){return(e=Tu(7,e,n,t)).lanes=r,e}function Mu(e,t,r,n){return(e=Tu(22,e,n,t)).elementType=Fe,e.lanes=r,e.stateNode={isHidden:!1},e}function Ou(e,t,r){return(e=Tu(6,e,null,t)).lanes=r,e}function Lu(e,t,r){return(t=Tu(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zu(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vr(0),this.expirationTimes=vr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vr(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bu(e,t,r,n,i,a,s,o,l){return e=new zu(e,t,r,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Tu(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(a),e}function Hu(e){if(!e)return Ea;e:{if(Ut(e=e._reactInternals)!==e||1!==e.tag)throw Error(se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Aa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(se(171))}if(1===e.tag){var r=e.type;if(Aa(r))return Ia(e,r,t)}return t}function Uu(e,t,r,n,i,a,s,o,l){return(e=Bu(r,n,!0,e,0,a,0,o,l)).context=Hu(null),r=e.current,(a=Ls(n=tu(),i=ru(r))).callback=null!=t?t:null,zs(r,a,i),e.current.lanes=i,br(e,i,n),iu(e,n),e}function qu(e,t,r,n){var i=t.current,a=tu(),s=ru(i);return r=Hu(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ls(a,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=zs(i,t,s))&&(nu(e,i,s,a),Bs(e,i,s)),s}function Vu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ku(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Wu(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}Nc=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Da.current)yl=!0;else{if(0===(e.lanes&r)&&!(128&t.flags))return yl=!1,function(e,t,r){switch(t.tag){case 3:Dl(t),fs();break;case 5:Js(t);break;case 1:Aa(t.type)&&Ma(t);break;case 4:Qs(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Ca(ks,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ca(eo,1&eo.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Ol(e,t,r):(Ca(eo,1&eo.current),null!==(e=Vl(e,t,r))?e.sibling:null);Ca(eo,1&eo.current);break;case 19:if(n=0!==(r&t.childLanes),128&e.flags){if(n)return Ul(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ca(eo,eo.current),n)break;return null;case 22:case 23:return t.lanes=0,jl(e,t,r)}return Vl(e,t,r)}(e,t,r);yl=!!(131072&e.flags)}else yl=!1,as&&1048576&t.flags&&es(t,Wa,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ql(e,t),e=t.pendingProps;var i=Ta(t,$a.current);Ds(t,r),i=vo(null,t,n,e,i,r);var a=bo();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Aa(n)?(a=!0,Ma(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=al,t.stateNode=i,i._reactInternals=t,cl(t,n,e,r),t=$l(null,t,n,!0,a,r)):(t.tag=0,as&&a&&ts(t),wl(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ql(e,t),e=t.pendingProps,n=(i=n._init)(n._payload),t.type=n,i=t.tag=function(e){if("function"==typeof e)return Au(e)?1:0;if(null!=e){if((e=e.$$typeof)===$e)return 11;if(e===Te)return 14}return 2}(n),e=nl(n,e),i){case 0:t=Cl(null,t,n,e,r);break e;case 1:t=El(null,t,n,e,r);break e;case 11:t=_l(null,t,n,e,r);break e;case 14:t=kl(null,t,n,nl(n.type,e),r);break e}throw Error(se(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,Cl(e,t,n,i=t.elementType===n?i:nl(n,i),r);case 1:return n=t.type,i=t.pendingProps,El(e,t,n,i=t.elementType===n?i:nl(n,i),r);case 3:e:{if(Dl(t),null===e)throw Error(se(387));n=t.pendingProps,i=(a=t.memoizedState).element,Os(e,t),Us(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Pl(e,t,n,r,i=ul(Error(se(423)),t));break e}if(n!==i){t=Pl(e,t,n,r,i=ul(Error(se(424)),t));break e}for(is=ua(t.stateNode.containerInfo.firstChild),ns=t,as=!0,ss=null,r=_s(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fs(),n===i){t=Vl(e,t,r);break e}wl(e,t,n,r)}t=t.child}return t;case 5:return Js(t),null===e&&us(t),n=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,na(n,i)?s=null:null!==a&&na(n,a)&&(t.flags|=32),Sl(e,t),wl(e,t,s,r),t.child;case 6:return null===e&&us(t),null;case 13:return Ol(e,t,r);case 4:return Qs(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=ws(t,null,n,r):wl(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,_l(e,t,n,i=t.elementType===n?i:nl(n,i),r);case 7:return wl(e,t,t.pendingProps,r),t.child;case 8:case 12:return wl(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ca(ks,n._currentValue),n._currentValue=s,null!==a)if(li(a.value,s)){if(a.children===i.children&&!Da.current){t=Vl(e,t,r);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var o=a.dependencies;if(null!==o){s=a.child;for(var l=o.firstContext;null!==l;){if(l.context===n){if(1===a.tag){(l=Ls(-1,r&-r)).tag=2;var c=a.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}a.lanes|=r,null!==(l=a.alternate)&&(l.lanes|=r),$s(a.return,r,t),o.lanes|=r;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(se(341));s.lanes|=r,null!==(o=s.alternate)&&(o.lanes|=r),$s(s,r,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}wl(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Ds(t,r),n=n(i=Ps(i)),t.flags|=1,wl(e,t,n,r),t.child;case 14:return i=nl(n=t.type,t.pendingProps),kl(e,t,n,i=nl(n.type,i),r);case 15:return Nl(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:nl(n,i),ql(e,t),t.tag=1,Aa(n)?(e=!0,Ma(t)):e=!1,Ds(t,r),ol(t,n,i),cl(t,n,i,r),$l(null,t,n,!0,e,r);case 19:return Ul(e,t,r);case 22:return jl(e,t,r)}throw Error(se(156,t.tag))};var Gu="function"==typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function Qu(e){this._internalRoot=e}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function ed(e,t,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if("function"==typeof i){var o=i;i=function(){var e=Vu(s);o.call(e)}}qu(t,s,e,i)}else s=function(e,t,r,n,i){if(i){if("function"==typeof n){var a=n;n=function(){var e=Vu(s);a.call(e)}}var s=Uu(t,n,e,0,null,!1,0,"",Zu);return e._reactRootContainer=s,e[ma]=s.current,Ui(8===e.nodeType?e.parentNode:e),du(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof n){var o=n;n=function(){var e=Vu(l);o.call(e)}}var l=Bu(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=l,e[ma]=l.current,Ui(8===e.nodeType?e.parentNode:e),du(function(){qu(t,l,r,n)}),l}(r,t,e,i,n);return Vu(s)}Qu.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(se(409));qu(e,t,null,null)},Qu.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;du(function(){qu(null,e,null,null)}),t[ma]=null}},Qu.prototype.unstable_scheduleHydration=function(e){if(e){var t=jr();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Fr.length&&0!==t&&t<Fr[r].priority;r++);Fr.splice(r,0,e),0===r&&Or(e)}},_r=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=hr(t.pendingLanes);0!==r&&(xr(t,1|r),iu(t,Jt()),!(6&$c)&&(Uc=Jt()+500,Ua()))}break;case 13:du(function(){var t=Rs(e,1);if(null!==t){var r=tu();nu(t,e,1,r)}}),Wu(e,1)}},kr=function(e){if(13===e.tag){var t=Rs(e,134217728);if(null!==t)nu(t,e,134217728,tu());Wu(e,134217728)}},Nr=function(e){if(13===e.tag){var t=ru(e),r=Rs(e,t);if(null!==r)nu(r,e,t,tu());Wu(e,t)}},jr=function(){return yr},Sr=function(e,t){var r=yr;try{return yr=e,t()}finally{yr=r}},kt=function(e,t,r){switch(t){case"input":if(Ze(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=_a(n);if(!i)throw Error(se(90));Ge(n),Ze(n,i)}}}break;case"textarea":st(e,r);break;case"select":null!=(t=r.value)&&nt(e,!!r.multiple,t,!1)}},$t=uu,Dt=du;var td={usingClientEntryPoint:!1,Events:[ya,wa,_a,Ct,Et,uu]},rd={findFiberByHostInstance:xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:rd.bundleType,version:rd.version,rendererPackageName:rd.rendererPackageName,rendererConfig:rd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:we.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Kt(e))?null:e.stateNode},findFiberByHostInstance:rd.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!id.isDisabled&&id.supportsFiber)try{ar=id.inject(nd),sr=id}catch(dt){}}ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=td,ee.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xu(t))throw Error(se(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ke,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},ee.createRoot=function(e,t){if(!Xu(e))throw Error(se(299));var r=!1,n="",i=Gu;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bu(e,1,!1,null,0,r,0,n,i),e[ma]=t.current,Ui(8===e.nodeType?e.parentNode:e),new Yu(t)},ee.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(se(188));throw e=Object.keys(e).join(","),Error(se(268,e))}return e=null===(e=Kt(t))?null:e.stateNode},ee.flushSync=function(e){return du(e)},ee.hydrate=function(e,t,r){if(!Ju(t))throw Error(se(200));return ed(null,e,t,!0,r)},ee.hydrateRoot=function(e,t,r){if(!Xu(e))throw Error(se(405));var n=null!=r&&r.hydratedSources||null,i=!1,a="",s=Gu;if(null!=r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),t=Uu(t,null,e,1,null!=r?r:null,i,0,a,s),e[ma]=t.current,Ui(e),n)for(e=0;e<n.length;e++)i=(i=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Qu(t)},ee.render=function(e,t,r){if(!Ju(t))throw Error(se(200));return ed(null,e,t,!1,r)},ee.unmountComponentAtNode=function(e){if(!Ju(e))throw Error(se(40));return!!e._reactRootContainer&&(du(function(){ed(null,null,e,!1,function(){e._reactRootContainer=null,e[ma]=null})}),!0)},ee.unstable_batchedUpdates=uu,ee.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ju(r))throw Error(se(200));if(null==e||void 0===e._reactInternals)throw Error(se(38));return ed(e,t,r,!1,n)},ee.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),Z.exports=ee;var ad,sd=Z.exports;ad=sd.createRoot,sd.hydrateRoot;var od="undefined"!=typeof window?window:void 0,ld="undefined"!=typeof globalThis?globalThis:od;"undefined"==typeof self&&(ld.self=ld),"undefined"==typeof File&&(ld.File=function(){});var cd=Array.prototype,ud=cd.forEach,dd=cd.indexOf,hd=null==ld?void 0:ld.navigator,pd=null==ld?void 0:ld.document,fd=null==ld?void 0:ld.location,md=null==ld?void 0:ld.fetch,gd=null!=ld&&ld.XMLHttpRequest&&"withCredentials"in new ld.XMLHttpRequest?ld.XMLHttpRequest:void 0,vd=null==ld?void 0:ld.AbortController,bd=null==hd?void 0:hd.userAgent,xd=null!=od?od:{},yd={DEBUG:!1,LIB_VERSION:"1.335.3"};function wd(e,t,r,n,i,a,s){try{var o=e[a](s),l=o.value}catch(c){return void r(c)}o.done?t(l):Promise.resolve(l).then(n,i)}function _d(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function s(e){wd(a,n,i,s,o,"next",e)}function o(e){wd(a,n,i,s,o,"throw",e)}s(void 0)})}}function kd(){return kd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kd.apply(null,arguments)}function Nd(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}var jd=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],Sd=function(e,t){if(void 0===t&&(t=[]),!e)return!1;var r=e.toLowerCase();return jd.concat(t).some(e=>{var t=e.toLowerCase();return-1!==r.indexOf(t)})},Cd=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function Ed(e,t){return-1!==e.indexOf(t)}var $d=function(e){return e.trim()},Dd=function(e){return e.replace(/^\$/,"")},Pd=Array.isArray,Td=Object.prototype,Ad=Td.hasOwnProperty,Fd=Td.toString,Rd=Pd||function(e){return"[object Array]"===Fd.call(e)},Id=e=>"function"==typeof e,Md=e=>e===Object(e)&&!Rd(e),Od=e=>{if(Md(e)){for(var t in e)if(Ad.call(e,t))return!1;return!0}return!1},Ld=e=>void 0===e,zd=e=>"[object String]"==Fd.call(e),Bd=e=>zd(e)&&0===e.trim().length,Hd=e=>null===e,Ud=e=>Ld(e)||Hd(e),qd=e=>"[object Number]"==Fd.call(e)&&e==e,Vd=e=>qd(e)&&e>0,Kd=e=>"[object Boolean]"===Fd.call(e),Wd=e=>Ed(Cd,e);function Gd(e){return null===e||"object"!=typeof e}function Yd(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function Qd(e){return!Ld(Event)&&function(e,t){try{return e instanceof t}catch(r){return!1}}(e,Event)}var Xd=[!0,"true",1,"1","yes"],Jd=e=>Ed(Xd,e),Zd=[!1,"false",0,"0","no"];function eh(e,t,r,n,i){return t>r&&(n.warn("min cannot be greater than max."),t=r),qd(e)?e>r?(n.warn(" cannot be  greater than max: "+r+". Using max value instead."),r):e<t?(n.warn(" cannot be less than min: "+t+". Using min value instead."),t):e:(n.warn(" must be a number. using max or fallback. max: "+r+", fallback: "+i),eh(i||r,t,r,n))}class th{constructor(e){this.t={},this.i=e.i,this.o=eh(e.bucketSize,0,100,e.h),this.m=eh(e.refillRate,0,this.o,e.h),this.$=eh(e.refillInterval,0,864e5,e.h)}S(e,t){var r=t-e.lastAccess,n=Math.floor(r/this.$);if(n>0){var i=n*this.m;e.tokens=Math.min(e.tokens+i,this.o),e.lastAccess=e.lastAccess+n*this.$}}consumeRateLimit(e){var t,r=Date.now(),n=String(e),i=this.t[n];return i?this.S(i,r):(i={tokens:this.o,lastAccess:r},this.t[n]=i),0===i.tokens||(i.tokens--,0===i.tokens&&(null==(t=this.i)||t.call(this,e)),0===i.tokens)}stop(){this.t={}}}var rh,nh,ih,ah="Mobile",sh="iOS",oh="Android",lh="Tablet",ch=oh+" "+lh,uh="iPad",dh="Apple",hh=dh+" Watch",ph="Safari",fh="BlackBerry",mh="Samsung",gh=mh+"Browser",vh=mh+" Internet",bh="Chrome",xh=bh+" OS",yh=bh+" "+sh,wh="Internet Explorer",_h=wh+" "+ah,kh="Opera",Nh=kh+" Mini",jh="Edge",Sh="Microsoft "+jh,Ch="Firefox",Eh=Ch+" "+sh,$h="Nintendo",Dh="PlayStation",Ph="Xbox",Th=oh+" "+ah,Ah=ah+" "+ph,Fh="Windows",Rh=Fh+" Phone",Ih="Nokia",Mh="Ouya",Oh="Generic",Lh=Oh+" "+ah.toLowerCase(),zh=Oh+" "+lh.toLowerCase(),Bh="Konqueror",Hh="(\\d+(\\.\\d+)?)",Uh=new RegExp("Version/"+Hh),qh=new RegExp(Ph,"i"),Vh=new RegExp(Dh+" \\w+","i"),Kh=new RegExp($h+" \\w+","i"),Wh=new RegExp(fh+"|PlayBook|BB10","i"),Gh={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},Yh=function(e,t){return t=t||"",Ed(e," OPR/")&&Ed(e,"Mini")?Nh:Ed(e," OPR/")?kh:Wh.test(e)?fh:Ed(e,"IE"+ah)||Ed(e,"WPDesktop")?_h:Ed(e,gh)?vh:Ed(e,jh)||Ed(e,"Edg/")?Sh:Ed(e,"FBIOS")?"Facebook "+ah:Ed(e,"UCWEB")||Ed(e,"UCBrowser")?"UC Browser":Ed(e,"CriOS")?yh:Ed(e,"CrMo")||Ed(e,bh)?bh:Ed(e,oh)&&Ed(e,ph)?Th:Ed(e,"FxiOS")?Eh:Ed(e.toLowerCase(),Bh.toLowerCase())?Bh:((e,t)=>{return t&&Ed(t,dh)||Ed(r=e,ph)&&!Ed(r,bh)&&!Ed(r,oh);var r})(e,t)?Ed(e,ah)?Ah:ph:Ed(e,Ch)?Ch:Ed(e,"MSIE")||Ed(e,"Trident/")?wh:Ed(e,"Gecko")?Ch:""},Qh={[_h]:[new RegExp("rv:"+Hh)],[Sh]:[new RegExp(jh+"?\\/"+Hh)],[bh]:[new RegExp("("+bh+"|CrMo)\\/"+Hh)],[yh]:[new RegExp("CriOS\\/"+Hh)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+Hh)],[ph]:[Uh],[Ah]:[Uh],[kh]:[new RegExp("(Opera|OPR)\\/"+Hh)],[Ch]:[new RegExp(Ch+"\\/"+Hh)],[Eh]:[new RegExp("FxiOS\\/"+Hh)],[Bh]:[new RegExp("Konqueror[:/]?"+Hh,"i")],[fh]:[new RegExp(fh+" "+Hh),Uh],[Th]:[new RegExp("android\\s"+Hh,"i")],[vh]:[new RegExp(gh+"\\/"+Hh)],[wh]:[new RegExp("(rv:|MSIE )"+Hh)],Mozilla:[new RegExp("rv:"+Hh)]},Xh=function(e,t){var r=Yh(e,t),n=Qh[r];if(Ld(n))return null;for(var i=0;i<n.length;i++){var a=n[i],s=e.match(a);if(s)return parseFloat(s[s.length-2])}return null},Jh=[[new RegExp(Ph+"; "+Ph+" (.*?)[);]","i"),e=>[Ph,e&&e[1]||""]],[new RegExp($h,"i"),[$h,""]],[new RegExp(Dh,"i"),[Dh,""]],[Wh,[fh,""]],[new RegExp(Fh,"i"),(e,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[Rh,""];if(new RegExp(ah).test(t)&&!/IEMobile\b/.test(t))return[Fh+" "+ah,""];var r=/Windows NT ([0-9.]+)/i.exec(t);if(r&&r[1]){var n=r[1],i=Gh[n]||"";return/arm/i.test(t)&&(i="RT"),[Fh,i]}return[Fh,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,e=>{if(e&&e[3]){var t=[e[3],e[4],e[5]||"0"];return[sh,t.join(".")]}return[sh,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,e=>{var t="";return e&&e.length>=3&&(t=Ld(e[2])?e[3]:e[2]),["watchOS",t]}],[new RegExp("("+oh+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+oh+")","i"),e=>{if(e&&e[2]){var t=[e[2],e[3],e[4]||"0"];return[oh,t.join(".")]}return[oh,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,e=>{var t=["Mac OS X",""];if(e&&e[1]){var r=[e[1],e[2],e[3]||"0"];t[1]=r.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[xh,""]],[/Linux|debian/i,["Linux",""]]],Zh=function(e){return Kh.test(e)?$h:Vh.test(e)?Dh:qh.test(e)?Ph:new RegExp(Mh,"i").test(e)?Mh:new RegExp("("+Rh+"|WPDesktop)","i").test(e)?Rh:/iPad/.test(e)?uh:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?hh:Wh.test(e)?fh:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":new RegExp(Ih,"i").test(e)?Ih:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?new RegExp(ah).test(e)&&!/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)||/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?oh:ch:new RegExp("(pda|"+ah+")","i").test(e)?Lh:new RegExp(lh,"i").test(e)&&!new RegExp(lh+" pc","i").test(e)?zh:""},ep=e=>e instanceof Error;function tp(e){var t=globalThis._posthogChunkIds;if(t){var r=Object.keys(t);return ih&&r.length===nh||(nh=r.length,ih=r.reduce((r,n)=>{rh||(rh={});var i=rh[n];if(i)r[i[0]]=i[1];else for(var a=e(n),s=a.length-1;s>=0;s--){var o=a[s],l=null==o?void 0:o.filename,c=t[n];if(l&&c){r[l]=c,rh[n]=[l,c];break}}return r},{})),ih}}class rp{constructor(e,t,r){void 0===r&&(r=[]),this.coercers=e,this.stackParser=t,this.modifiers=r}buildFromUnknown(e,t){void 0===t&&(t={});var r=t&&t.mechanism||{handled:!0,type:"generic"},n=this.buildCoercingContext(r,t,0).apply(e),i=this.buildParsingContext(),a=this.parseStacktrace(n,i);return{$exception_list:this.convertToExceptionList(a,r),$exception_level:"error"}}modifyFrames(e){var t=this;return _d(function*(){for(var r of e)r.stacktrace&&r.stacktrace.frames&&Rd(r.stacktrace.frames)&&(r.stacktrace.frames=yield t.applyModifiers(r.stacktrace.frames));return e})()}coerceFallback(e){var t;return{type:"Error",value:"Unknown error",stack:null==(t=e.syntheticException)?void 0:t.stack,synthetic:!0}}parseStacktrace(e,t){var r,n;return null!=e.cause&&(r=this.parseStacktrace(e.cause,t)),""!=e.stack&&null!=e.stack&&(n=this.applyChunkIds(this.stackParser(e.stack,e.synthetic?1:0),t.chunkIdMap)),kd({},e,{cause:r,stack:n})}applyChunkIds(e,t){return e.map(e=>(e.filename&&t&&(e.chunk_id=t[e.filename]),e))}applyCoercers(e,t){for(var r of this.coercers)if(r.match(e))return r.coerce(e,t);return this.coerceFallback(t)}applyModifiers(e){var t=this;return _d(function*(){var r=e;for(var n of t.modifiers)r=yield n(r);return r})()}convertToExceptionList(e,t){var r,n,i,a={type:e.type,value:e.value,mechanism:{type:null!==(r=t.type)&&void 0!==r?r:"generic",handled:null===(n=t.handled)||void 0===n||n,synthetic:null!==(i=e.synthetic)&&void 0!==i&&i}};e.stack&&(a.stacktrace={type:"raw",frames:e.stack});var s=[a];return null!=e.cause&&s.push(...this.convertToExceptionList(e.cause,kd({},t,{handled:!0}))),s}buildParsingContext(){return{chunkIdMap:tp(this.stackParser)}}buildCoercingContext(e,t,r){void 0===r&&(r=0);var n=(r,n)=>{if(n<=4){var i=this.buildCoercingContext(e,t,n);return this.applyCoercers(r,i)}};return kd({},t,{syntheticException:0==r?t.syntheticException:void 0,mechanism:e,apply:e=>n(e,r),next:e=>n(e,r+1)})}}var np="?";function ip(e,t,r,n,i){var a={platform:e,filename:t,function:"<anonymous>"===r?np:r,in_app:!0};return Ld(n)||(a.lineno=n),Ld(i)||(a.colno=i),a}var ap=(e,t)=>{var r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:np,r?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]},sp=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,op=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,lp=/\((\S*)(?::(\d+))(?::(\d+))\)/,cp=(e,t)=>{var r=sp.exec(e);if(r){var[,n,i,a]=r;return ip(t,n,np,+i,+a)}var s=op.exec(e);if(s){if(s[2]&&0===s[2].indexOf("eval")){var o=lp.exec(s[2]);o&&(s[2]=o[1],s[3]=o[2],s[4]=o[3])}var[l,c]=ap(s[1]||np,s[2]);return ip(t,c,l,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}},up=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,dp=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,hp=(e,t)=>{var r=up.exec(e);if(r){if(r[3]&&r[3].indexOf(" > eval")>-1){var n=dp.exec(r[3]);n&&(r[1]=r[1]||"eval",r[3]=n[1],r[4]=n[2],r[5]="")}var i=r[3],a=r[1]||np;return[a,i]=ap(a,i),ip(t,i,a,r[4]?+r[4]:void 0,r[5]?+r[5]:void 0)}},pp=/\(error: (.*)\)/;class fp{match(e){return this.isDOMException(e)||this.isDOMError(e)}coerce(e,t){var r=zd(e.stack);return{type:this.getType(e),value:this.getValue(e),stack:r?e.stack:void 0,cause:e.cause?t.next(e.cause):void 0,synthetic:!1}}getType(e){return this.isDOMError(e)?"DOMError":"DOMException"}getValue(e){var t=e.name||(this.isDOMError(e)?"DOMError":"DOMException");return e.message?t+": "+e.message:t}isDOMException(e){return Yd(e,"DOMException")}isDOMError(e){return Yd(e,"DOMError")}}class mp{match(e){return e instanceof Error}coerce(e,t){return{type:this.getType(e),value:this.getMessage(e,t),stack:this.getStack(e),cause:e.cause?t.next(e.cause):void 0,synthetic:!1}}getType(e){return e.name||e.constructor.name}getMessage(e,t){var r=e.message;return r.error&&"string"==typeof r.error.message?String(r.error.message):String(r)}getStack(e){return e.stacktrace||e.stack||void 0}}class gp{constructor(){}match(e){return Yd(e,"ErrorEvent")&&null!=e.error}coerce(e,t){var r;return t.apply(e.error)||{type:"ErrorEvent",value:e.message,stack:null==(r=t.syntheticException)?void 0:r.stack,synthetic:!0}}}var vp=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;class bp{match(e){return"string"==typeof e}coerce(e,t){var r,[n,i]=this.getInfos(e);return{type:null!=n?n:"Error",value:null!=i?i:e,stack:null==(r=t.syntheticException)?void 0:r.stack,synthetic:!0}}getInfos(e){var t="Error",r=e,n=e.match(vp);return n&&(t=n[1],r=n[2]),[t,r]}}var xp=["fatal","error","warning","log","info","debug"];function yp(e,t){void 0===t&&(t=40);var r=Object.keys(e);if(r.sort(),!r.length)return"[object has no keys]";for(var n=r.length;n>0;n--){var i=r.slice(0,n).join(", ");if(!(i.length>t))return n===r.length||i.length<=t?i:i.slice(0,t)+"..."}return""}class wp{match(e){return"object"==typeof e&&null!==e}coerce(e,t){var r,n=this.getErrorPropertyFromObject(e);return n?t.apply(n):{type:this.getType(e),value:this.getValue(e),stack:null==(r=t.syntheticException)?void 0:r.stack,level:this.isSeverityLevel(e.level)?e.level:"error",synthetic:!0}}getType(e){return Qd(e)?e.constructor.name:"Error"}getValue(e){if("name"in e&&"string"==typeof e.name){var t="'"+e.name+"' captured as exception";return"message"in e&&"string"==typeof e.message&&(t+=" with message: '"+e.message+"'"),t}if("message"in e&&"string"==typeof e.message)return e.message;var r=this.getObjectClassName(e);return(r&&"Object"!==r?"'"+r+"'":"Object")+" captured as exception with keys: "+yp(e)}isSeverityLevel(e){return zd(e)&&!Bd(e)&&xp.indexOf(e)>=0}getErrorPropertyFromObject(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var r=e[t];if(ep(r))return r}}getObjectClassName(e){try{var t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(r){return}}}class _p{match(e){return Qd(e)}coerce(e,t){var r,n=e.constructor.name;return{type:n,value:n+" captured as exception with keys: "+yp(e),stack:null==(r=t.syntheticException)?void 0:r.stack,synthetic:!0}}}class kp{match(e){return Gd(e)}coerce(e,t){var r;return{type:"Error",value:"Primitive value captured as exception: "+String(e),stack:null==(r=t.syntheticException)?void 0:r.stack,synthetic:!0}}}class Np{match(e){return Yd(e,"PromiseRejectionEvent")}coerce(e,t){var r,n=this.getUnhandledRejectionReason(e);return Gd(n)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(n),stack:null==(r=t.syntheticException)?void 0:r.stack,synthetic:!0}:t.apply(n)}getUnhandledRejectionReason(e){if(Gd(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(t){}return e}}var jp=function(e,t){var{debugEnabled:r}=void 0===t?{}:t,n={k:function(t){if(od&&(yd.DEBUG||xd.POSTHOG_DEBUG||r)&&!Ld(od.console)&&od.console){for(var n=("__rrweb_original__"in od.console[t]?od.console[t].__rrweb_original__:od.console[t]),i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];n(e,...a)}},info:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.k("log",...t)},warn:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.k("warn",...t)},error:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.k("error",...t)},critical:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];console.error(e,...r)},uninitializedWarning:e=>{n.error("You must initialize PostHog before calling "+e)},createLogger:(t,r)=>jp(e+" "+t,r)};return n},Sp=jp("[PostHog.js]"),Cp=Sp.createLogger,Ep=Cp("[ExternalScriptsLoader]"),$p=(e,t,r)=>{if(e.config.disable_external_dependency_loading)return Ep.warn(t+" was requested but loading of external scripts is disabled."),r("Loading of external scripts is disabled");var n=null==pd?void 0:pd.querySelectorAll("script");if(n)for(var i,a=function(){if(n[s].src===t){var e=n[s];return e.__posthog_loading_callback_fired?{v:r()}:(e.addEventListener("load",t=>{e.__posthog_loading_callback_fired=!0,r(void 0,t)}),e.onerror=e=>r(e),{v:void 0})}},s=0;s<n.length;s++)if(i=a())return i.v;var o=()=>{if(!pd)return r("document not found");var n=pd.createElement("script");if(n.type="text/javascript",n.crossOrigin="anonymous",n.src=t,n.onload=e=>{n.__posthog_loading_callback_fired=!0,r(void 0,e)},n.onerror=e=>r(e),e.config.prepare_external_dependency_script&&(n=e.config.prepare_external_dependency_script(n)),!n)return r("prepare_external_dependency_script returned null");if("head"===e.config.external_scripts_inject_target)pd.head.appendChild(n);else{var i,a=pd.querySelectorAll("body > script");a.length>0?null==(i=a[0].parentNode)||i.insertBefore(n,a[0]):pd.body.appendChild(n)}};null!=pd&&pd.body?o():null==pd||pd.addEventListener("DOMContentLoaded",o)};xd.__PosthogExtensions__=xd.__PosthogExtensions__||{},xd.__PosthogExtensions__.loadExternalDependency=(e,t,r)=>{var n="/static/"+t+".js?v="+e.version;if("remote-config"===t&&(n="/array/"+e.config.token+"/config.js"),"toolbar"===t){var i=3e5;n=n+"&t="+Math.floor(Date.now()/i)*i}var a=e.requestRouter.endpointFor("assets",n);$p(e,a,r)},xd.__PosthogExtensions__.loadSiteApp=(e,t,r)=>{var n=e.requestRouter.endpointFor("api",t);$p(e,n,r)};var Dp={};function Pp(e,t,r){if(Rd(e))if(ud&&e.forEach===ud)e.forEach(t,r);else if("length"in e&&e.length===+e.length)for(var n=0,i=e.length;n<i;n++)if(n in e&&t.call(r,e[n],n)===Dp)return}function Tp(e,t,r){if(!Ud(e)){if(Rd(e))return Pp(e,t,r);if((e=>e instanceof FormData)(e)){for(var n of e.entries())if(t.call(r,n[1],n[0])===Dp)return}else for(var i in e)if(Ad.call(e,i)&&t.call(r,e[i],i)===Dp)return}}var Ap=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Pp(r,function(t){for(var r in t)void 0!==t[r]&&(e[r]=t[r])}),e},Fp=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Pp(r,function(t){Pp(t,function(t){e.push(t)})}),e};function Rp(e){for(var t=Object.keys(e),r=t.length,n=new Array(r);r--;)n[r]=[t[r],e[t[r]]];return n}var Ip=function(e){try{return e()}catch(t){return}},Mp=function(e){return function(){try{for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(this,r)}catch(i){Sp.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Sp.critical(i)}}},Op=function(e){var t={};return Tp(e,function(e,r){(zd(e)&&e.length>0||qd(e))&&(t[r]=e)}),t};var Lp=["herokuapp.com","vercel.app","netlify.app"];function zp(e){var t=null==e?void 0:e.hostname;if(!zd(t))return!1;var r=t.split(".").slice(-2).join(".");for(var n of Lp)if(r===n)return!1;return!0}function Bp(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return e[r]}function Hp(e,t,r,n){var{capture:i=!1,passive:a=!0}=null!=n?n:{};null==e||e.addEventListener(t,r,{capture:i,passive:a})}var Up="$people_distinct_id",qp="__alias",Vp="__timers",Kp="$autocapture_disabled_server_side",Wp="$heatmaps_enabled_server_side",Gp="$exception_capture_enabled_server_side",Yp="$error_tracking_suppression_rules",Qp="$error_tracking_capture_extension_exceptions",Xp="$web_vitals_enabled_server_side",Jp="$dead_clicks_enabled_server_side",Zp="$product_tours_enabled_server_side",ef="$web_vitals_allowed_metrics",tf="$session_recording_remote_config",rf="$sesid",nf="$session_is_sampled",af="$enabled_feature_flags",sf="$early_access_features",of="$feature_flag_details",lf="$stored_person_properties",cf="$stored_group_properties",uf="$surveys",df="$flag_call_reported",hf="$user_state",pf="$client_session_props",ff="$capture_rate_limit",mf="$initial_campaign_params",gf="$initial_referrer_info",vf="$initial_person_info",bf="$epp",xf="__POSTHOG_TOOLBAR__",yf="$posthog_cookieless",wf=[Up,qp,"__cmpns",Vp,"$session_recording_enabled_server_side",Wp,rf,af,Yp,hf,sf,of,cf,lf,uf,df,pf,ff,mf,gf,bf,vf,"$conversations_widget_session_id","$conversations_ticket_id","$conversations_widget_state","$conversations_user_traits"];function _f(e){return e instanceof Element&&(e.id===xf||!(null==e.closest||!e.closest(".toolbar-global-fade-container")))}function kf(e){return!!e&&1===e.nodeType}function Nf(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function jf(e){return!!e&&3===e.nodeType}function Sf(e){return!!e&&11===e.nodeType}function Cf(e){return e?$d(e).split(/\s+/):[]}function Ef(e){var t=null==od?void 0:od.location.href;return!!(t&&e&&e.some(e=>t.match(e)))}function $f(e){var t="";switch(typeof e.className){case"string":t=e.className;break;case"object":t=(e.className&&"baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return Cf(t)}function Df(e){return Ud(e)?null:$d(e).split(/(\s+)/).filter(e=>Gf(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Pf(e){var t="";return zf(e)&&!Bf(e)&&e.childNodes&&e.childNodes.length&&Tp(e.childNodes,function(e){var r;jf(e)&&e.textContent&&(t+=null!==(r=Df(e.textContent))&&void 0!==r?r:"")}),$d(t)}function Tf(e){return Ld(e.target)?e.srcElement||null:null!=(t=e.target)&&t.shadowRoot?e.composedPath()[0]||null:e.target||null;var t}var Af=["a","button","form","input","select","textarea","label"];function Ff(e,t){if(Ld(t))return!0;var r,n=function(e){if(t.some(t=>e.matches(t)))return{v:!0}};for(var i of e)if(r=n(i))return r.v;return!1}function Rf(e){var t=e.parentNode;return!(!t||!kf(t))&&t}var If=["next","previous","prev",">","<"],Mf=[".ph-no-rageclick",".ph-no-capture"];var Of=e=>!e||Nf(e,"html")||!kf(e),Lf=(e,t)=>{if(!od||Of(e))return{parentIsUsefulElement:!1,targetElementList:[]};for(var r=!1,n=[e],i=e;i.parentNode&&!Nf(i,"body");)if(Sf(i.parentNode))n.push(i.parentNode.host),i=i.parentNode.host;else{var a=Rf(i);if(!a)break;if(t||Af.indexOf(a.tagName.toLowerCase())>-1)r=!0;else{var s=od.getComputedStyle(a);s&&"pointer"===s.getPropertyValue("cursor")&&(r=!0)}n.push(a),i=a}return{parentIsUsefulElement:r,targetElementList:n}};function zf(e){for(var t=e;t.parentNode&&!Nf(t,"body");t=t.parentNode){var r=$f(t);if(Ed(r,"ph-sensitive")||Ed(r,"ph-no-capture"))return!1}if(Ed($f(e),"ph-include"))return!0;var n=e.type||"";if(zd(n))switch(n.toLowerCase()){case"hidden":case"password":return!1}var i=e.name||e.id||"";return!zd(i)||!/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,""))}function Bf(e){return!!(Nf(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||Nf(e,"select")||Nf(e,"textarea")||"true"===e.getAttribute("contenteditable"))}var Hf="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",Uf=new RegExp("^(?:"+Hf+")$"),qf=new RegExp(Hf),Vf="\\d{3}-?\\d{2}-?\\d{4}",Kf=new RegExp("^("+Vf+")$"),Wf=new RegExp("("+Vf+")");function Gf(e,t){if(void 0===t&&(t=!0),Ud(e))return!1;if(zd(e)){if(e=$d(e),(t?Uf:qf).test((e||"").replace(/[- ]/g,"")))return!1;if((t?Kf:Wf).test(e))return!1}return!0}function Yf(e){var t=Pf(e);return Gf(t=(t+" "+Qf(e)).trim())?t:""}function Qf(e){var t="";return e&&e.childNodes&&e.childNodes.length&&Tp(e.childNodes,function(e){var r;if(e&&"span"===(null==(r=e.tagName)?void 0:r.toLowerCase()))try{var n=Pf(e);t=(t+" "+n).trim(),e.childNodes&&e.childNodes.length&&(t=(t+" "+Qf(e)).trim())}catch(i){Sp.error("[AutoCapture]",i)}}),t}function Xf(e){return e.replace(/"|\\"/g,'\\"')}function Jf(e){var t=e.attr__class;return t?Rd(t)?t:Cf(t):void 0}class Zf{constructor(e){this.disabled=!1===e;var t=Md(e)?e:{};this.thresholdPx=t.threshold_px||30,this.timeoutMs=t.timeout_ms||1e3,this.clickCount=t.click_count||3,this.clicks=[]}isRageClick(e,t,r){if(this.disabled)return!1;var n=this.clicks[this.clicks.length-1];if(n&&Math.abs(e-n.x)+Math.abs(t-n.y)<this.thresholdPx&&r-n.timestamp<this.timeoutMs){if(this.clicks.push({x:e,y:t,timestamp:r}),this.clicks.length===this.clickCount)return!0}else this.clicks=[{x:e,y:t,timestamp:r}];return!1}}var em=e=>{var t=null==pd?void 0:pd.createElement("a");return Ld(t)?null:(t.href=e,t)},tm=function(e,t){for(var r,n=((e.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),i=0;i<n.length;i++){var a=n[i].split("=");if(a[0]===t){r=a;break}}if(!Rd(r)||r.length<2)return"";var s=r[1];try{s=decodeURIComponent(s)}catch(o){Sp.error("Skipping decoding for malformed query param: "+s)}return s.replace(/\+/g," ")},rm=function(e,t,r){if(!e||!t||!t.length)return e;for(var n=e.split("#"),i=n[0]||"",a=n[1],s=i.split("?"),o=s[1],l=s[0],c=(o||"").split("&"),u=[],d=0;d<c.length;d++){var h=c[d].split("=");Rd(h)&&(t.includes(h[0])?u.push(h[0]+"="+r):u.push(c[d]))}var p=l;return null!=o&&(p+="?"+u.join("&")),null!=a&&(p+="#"+a),p},nm=function(e,t){var r=e.match(new RegExp(t+"=([^&]*)"));return r?r[1]:null},im="$copy_autocapture",am=Cp("[AutoCapture]");function sm(e,t){return t.length>e?t.slice(0,e)+"...":t}function om(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do{t=t.previousSibling}while(t&&!kf(t));return t}function lm(e,t){for(var r,n,{e:i,maskAllElementAttributes:a,maskAllText:s,elementAttributeIgnoreList:o,elementsChainAsString:l}=t,c=[e],u=e;u.parentNode&&!Nf(u,"body");)Sf(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,h,p,f=[],m={},g=!1,v=!1;if(Tp(c,e=>{var t=zf(e);"a"===e.tagName.toLowerCase()&&(g=e.getAttribute("href"),g=t&&g&&Gf(g)&&g),Ed($f(e),"ph-no-capture")&&(v=!0),f.push(function(e,t,r,n){var i=e.tagName.toLowerCase(),a={tag_name:i};Af.indexOf(i)>-1&&!r&&("a"===i.toLowerCase()||"button"===i.toLowerCase()?a.$el_text=sm(1024,Yf(e)):a.$el_text=sm(1024,Pf(e)));var s=$f(e);s.length>0&&(a.classes=s.filter(function(e){return""!==e})),Tp(e.attributes,function(r){var i;if((!Bf(e)||-1!==["name","id","class","aria-label"].indexOf(r.name))&&(null==n||!n.includes(r.name))&&!t&&Gf(r.value)&&(i=r.name,!zd(i)||"_ngcontent"!==i.substring(0,10)&&"_nghost"!==i.substring(0,7))){var s=r.value;"class"===r.name&&(s=Cf(s).join(" ")),a["attr__"+r.name]=sm(1024,s)}});for(var o=1,l=1,c=e;c=om(c);)o++,c.tagName===e.tagName&&l++;return a.nth_child=o,a.nth_of_type=l,a}(e,a,s,o));var r=function(e){if(!zf(e))return{};var t={};return Tp(e.attributes,function(e){if(e.name&&0===e.name.indexOf("data-ph-capture-attribute")){var r=e.name.replace("data-ph-capture-attribute-",""),n=e.value;r&&n&&Gf(n)&&(t[r]=n)}}),t}(e);Ap(m,r)}),v)return{props:{},explicitNoCapture:v};if(s||("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase()?f[0].$el_text=Yf(e):f[0].$el_text=Pf(e)),g){var b,x;f[0].attr__href=g;var y=null==(b=em(g))?void 0:b.host,w=null==od||null==(x=od.location)?void 0:x.host;y&&w&&y!==w&&(d=g)}return{props:Ap({$event_type:i.type,$ce_version:1},l?{}:{$elements:f},{$elements_chain:(p=f,h=p.map(e=>{var t,r,n={text:null==(t=e.$el_text)?void 0:t.slice(0,400),tag_name:e.tag_name,href:null==(r=e.attr__href)?void 0:r.slice(0,2048),attr_class:Jf(e),attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return Rp(e).filter(e=>{var[t]=e;return 0===t.indexOf("attr__")}).forEach(e=>{var[t,r]=e;return n.attributes[t]=r}),n}),h.map(e=>{var t,r,n="";if(e.tag_name&&(n+=e.tag_name),e.attr_class)for(var i of(e.attr_class.sort(),e.attr_class))n+="."+i.replace(/"/g,"");var a=kd({},e.text?{text:e.text}:{},{"nth-child":null!==(t=e.nth_child)&&void 0!==t?t:0,"nth-of-type":null!==(r=e.nth_of_type)&&void 0!==r?r:0},e.href?{href:e.href}:{},e.attr_id?{attr_id:e.attr_id}:{},e.attributes),s={};return Rp(a).sort((e,t)=>{var[r]=e,[n]=t;return r.localeCompare(n)}).forEach(e=>{var[t,r]=e;return s[Xf(t.toString())]=Xf(r.toString())}),(n+=":")+Rp(s).map(e=>{var[t,r]=e;return t+'="'+r+'"'}).join("")}).join(";"))},null!=(r=f[0])&&r.$el_text?{$el_text:null==(n=f[0])?void 0:n.$el_text}:{},d&&"click"===i.type?{$external_click_url:d}:{},m)}}class cm{constructor(e){this.P=!1,this.T=null,this.I=!1,this.instance=e,this.rageclicks=new Zf(e.config.rageclick),this.C=null}get R(){var e,t,r=Md(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=null==(e=r.url_allowlist)?void 0:e.map(e=>new RegExp(e)),r.url_ignorelist=null==(t=r.url_ignorelist)?void 0:t.map(e=>new RegExp(e)),r}F(){if(this.isBrowserSupported()){if(od&&pd){var e=e=>{e=e||(null==od?void 0:od.event);try{this.M(e)}catch(ym){am.error("Failed to capture event",ym)}};if(Hp(pd,"submit",e,{capture:!0}),Hp(pd,"change",e,{capture:!0}),Hp(pd,"click",e,{capture:!0}),this.R.capture_copied_text){var t=e=>{e=e||(null==od?void 0:od.event),this.M(e,im)};Hp(pd,"copy",t,{capture:!0}),Hp(pd,"cut",t,{capture:!0})}}}else am.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.P&&(this.F(),this.P=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.I=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[Kp]:!!e.autocapture_opt_out}),this.T=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.C=e}getElementSelectors(e){var t,r=[];return null==(t=this.C)||t.forEach(t=>{var n=null==pd?void 0:pd.querySelectorAll(t);null==n||n.forEach(n=>{e===n&&r.push(t)})}),r}get isEnabled(){var e,t,r=null==(e=this.instance.persistence)?void 0:e.props[Kp],n=this.T;if(Hd(n)&&!Kd(r)&&!this.instance.O())return!1;var i=null!==(t=this.T)&&void 0!==t?t:!!r;return!!this.instance.config.autocapture&&!i}M(e,t){if(void 0===t&&(t="$autocapture"),this.isEnabled){var r,n=Tf(e);jf(n)&&(n=n.parentNode||null),"$autocapture"===t&&"click"===e.type&&e instanceof MouseEvent&&this.instance.config.rageclick&&null!=(r=this.rageclicks)&&r.isRageClick(e.clientX,e.clientY,e.timeStamp||(new Date).getTime())&&function(e,t){if(!od||Of(e))return!1;var r,n,i;if(Kd(t)?(r=!!t&&Mf,n=void 0):(r=null!==(i=null==t?void 0:t.css_selector_ignorelist)&&void 0!==i?i:Mf,n=null==t?void 0:t.content_ignorelist),!1===r)return!1;var{targetElementList:a}=Lf(e,!1);return!function(e,t){if(!1===e||Ld(e))return!1;var r;if(!0===e)r=If;else{if(!Rd(e))return!1;if(e.length>10)return Sp.error("[PostHog] content_ignorelist array cannot exceed 10 items. Use css_selector_ignorelist for more complex matching."),!1;r=e.map(e=>e.toLowerCase())}return t.some(e=>{var{safeText:t,ariaLabel:n}=e;return r.some(e=>t.includes(e)||n.includes(e))})}(n,a.map(e=>{var t;return{safeText:Pf(e).toLowerCase(),ariaLabel:(null==(t=e.getAttribute("aria-label"))?void 0:t.toLowerCase().trim())||""}}))&&!Ff(a,r)}(n,this.instance.config.rageclick)&&this.M(e,"$rageclick");var i=t===im;if(n&&function(e,t,r,n,i){var a,s,o,l;if(void 0===r&&(r=void 0),!od||Of(e))return!1;if(null!=(a=r)&&a.url_allowlist&&!Ef(r.url_allowlist))return!1;if(null!=(s=r)&&s.url_ignorelist&&Ef(r.url_ignorelist))return!1;if(null!=(o=r)&&o.dom_event_allowlist){var c=r.dom_event_allowlist;if(c&&!c.some(e=>t.type===e))return!1}var{parentIsUsefulElement:u,targetElementList:d}=Lf(e,n);if(!function(e,t){var r=null==t?void 0:t.element_allowlist;if(Ld(r))return!0;var n,i=function(e){if(r.some(t=>e.tagName.toLowerCase()===t))return{v:!0}};for(var a of e)if(n=i(a))return n.v;return!1}(d,r))return!1;if(!Ff(d,null==(l=r)?void 0:l.css_selector_allowlist))return!1;var h=od.getComputedStyle(e);if(h&&"pointer"===h.getPropertyValue("cursor")&&"click"===t.type)return!0;var p=e.tagName.toLowerCase();switch(p){case"html":return!1;case"form":return(i||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(t.type)>=0;default:return u?(i||["click"]).indexOf(t.type)>=0:(i||["click"]).indexOf(t.type)>=0&&(Af.indexOf(p)>-1||"true"===e.getAttribute("contenteditable"))}}(n,e,this.R,i,i?["copy","cut"]:void 0)){var{props:a,explicitNoCapture:s}=lm(n,{e:e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.R.element_attribute_ignorelist,elementsChainAsString:this.I});if(s)return!1;var o=this.getElementSelectors(n);if(o&&o.length>0&&(a.$element_selectors=o),t===im){var l,c=Df(null==od||null==(l=od.getSelection())?void 0:l.toString()),u=e.type||"clipboard";if(!c)return!1;a.$selected_content=c,a.$copy_type=u}return this.instance.capture(t,a),!0}}}isBrowserSupported(){return Id(null==pd?void 0:pd.querySelectorAll)}}Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return qd(e)&&isFinite(e)&&Math.floor(e)===e});var um="0123456789abcdef";class dm{constructor(e){if(this.bytes=e,16!==e.length)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,t,r,n){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(r)||!Number.isInteger(n)||e<0||t<0||r<0||n<0||e>0xffffffffffff||t>4095||r>1073741823||n>4294967295)throw new RangeError("invalid field value");var i=new Uint8Array(16);return i[0]=e/Math.pow(2,40),i[1]=e/Math.pow(2,32),i[2]=e/Math.pow(2,24),i[3]=e/Math.pow(2,16),i[4]=e/Math.pow(2,8),i[5]=e,i[6]=112|t>>>8,i[7]=t,i[8]=128|r>>>24,i[9]=r>>>16,i[10]=r>>>8,i[11]=r,i[12]=n>>>24,i[13]=n>>>16,i[14]=n>>>8,i[15]=n,new dm(i)}toString(){for(var e="",t=0;t<this.bytes.length;t++)e=e+um.charAt(this.bytes[t]>>>4)+um.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");if(36!==e.length)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new dm(this.bytes.slice(0))}equals(e){return 0===this.compareTo(e)}compareTo(e){for(var t=0;t<16;t++){var r=this.bytes[t]-e.bytes[t];if(0!==r)return Math.sign(r)}return 0}}class hm{constructor(){this.A=0,this.D=0,this.j=new mm}generate(){var e=this.generateOrAbort();if(Ld(e)){this.A=0;var t=this.generateOrAbort();if(Ld(t))throw new Error("Could not generate UUID after timestamp reset");return t}return e}generateOrAbort(){var e=Date.now();if(e>this.A)this.A=e,this.L();else{if(!(e+1e4>this.A))return;this.D++,this.D>4398046511103&&(this.A++,this.L())}return dm.fromFieldsV7(this.A,Math.trunc(this.D/Math.pow(2,30)),this.D&Math.pow(2,30)-1,this.j.nextUint32())}L(){this.D=1024*this.j.nextUint32()+(1023&this.j.nextUint32())}}var pm,fm=e=>{if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};od&&!Ld(od.crypto)&&crypto.getRandomValues&&(fm=e=>crypto.getRandomValues(e));class mm{constructor(){this.N=new Uint32Array(8),this.U=1/0}nextUint32(){return this.U>=this.N.length&&(fm(this.N),this.U=0),this.N[this.U++]}}var gm=()=>vm().toString(),vm=()=>(pm||(pm=new hm)).generate(),bm="",xm=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;var ym,wm={H:()=>!!pd,B:function(e){Sp.error("cookieStore error: "+e)},q:function(e){if(pd){try{for(var t=e+"=",r=pd.cookie.split(";").filter(e=>e.length),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}}catch(a){}return null}},W:function(e){var t;try{t=JSON.parse(wm.q(e))||{}}catch(r){}return t},G:function(e,t,r,n,i){if(pd)try{var a="",s="",o=function(e,t){if(t){var r=function(e,t){if(void 0===t&&(t=pd),bm)return bm;if(!t)return"";if(["localhost","127.0.0.1"].includes(e))return"";for(var r=e.split("."),n=Math.min(r.length,8),i="dmn_chk_"+gm();!bm&&n--;){var a=r.slice(n).join("."),s=i+"=1;domain=."+a+";path=/";t.cookie=s+";max-age=3",t.cookie.includes(i)&&(t.cookie=s+";max-age=0",bm=a)}return bm}(e);if(!r){var n=(i=e.match(xm))?i[0]:"";n!==r&&Sp.info("Warning: cookie subdomain discovery mismatch",n,r),r=n}return r?"; domain=."+r:""}var i;return""}(pd.location.hostname,n);if(r){var l=new Date;l.setTime(l.getTime()+24*r*60*60*1e3),a="; expires="+l.toUTCString()}i&&(s="; secure");var c=e+"="+encodeURIComponent(JSON.stringify(t))+a+"; SameSite=Lax; path=/"+o+s;return c.length>3686.4&&Sp.warn("cookieStore warning: large cookie, len="+c.length),pd.cookie=c,c}catch(u){return}},V:function(e,t){if(null!=pd&&pd.cookie)try{wm.G(e,"",-1,t)}catch(r){return}}},_m=null,km={H:function(){if(!Hd(_m))return _m;var e=!0;if(Ld(od))e=!1;else try{var t="__mplssupport__";km.G(t,"xyz"),'"xyz"'!==km.q(t)&&(e=!1),km.V(t)}catch(ym){e=!1}return e||Sp.error("localStorage unsupported; falling back to cookie store"),_m=e,e},B:function(e){Sp.error("localStorage error: "+e)},q:function(e){try{return null==od?void 0:od.localStorage.getItem(e)}catch(ym){km.B(ym)}return null},W:function(e){try{return JSON.parse(km.q(e))||{}}catch(t){}return null},G:function(e,t){try{null==od||od.localStorage.setItem(e,JSON.stringify(t))}catch(ym){km.B(ym)}},V:function(e){try{null==od||od.localStorage.removeItem(e)}catch(ym){km.B(ym)}}},Nm=["$device_id","distinct_id",rf,nf,bf,vf],jm={},Sm={H:function(){return!0},B:function(e){Sp.error("memoryStorage error: "+e)},q:function(e){return jm[e]||null},W:function(e){return jm[e]||null},G:function(e,t){jm[e]=t},V:function(e){delete jm[e]}},Cm=null,Em={H:function(){if(!Hd(Cm))return Cm;if(Cm=!0,Ld(od))Cm=!1;else try{var e="__support__";Em.G(e,"xyz"),'"xyz"'!==Em.q(e)&&(Cm=!1),Em.V(e)}catch(ym){Cm=!1}return Cm},B:function(e){Sp.error("sessionStorage error: ",e)},q:function(e){try{return null==od?void 0:od.sessionStorage.getItem(e)}catch(ym){Em.B(ym)}return null},W:function(e){try{return JSON.parse(Em.q(e))||null}catch(t){}return null},G:function(e,t){try{null==od||od.sessionStorage.setItem(e,JSON.stringify(t))}catch(ym){Em.B(ym)}},V:function(e){try{null==od||od.sessionStorage.removeItem(e)}catch(ym){Em.B(ym)}}},$m=((ym={})[ym.PENDING=-1]="PENDING",ym[ym.DENIED=0]="DENIED",ym[ym.GRANTED=1]="GRANTED",ym);class Dm{constructor(e){this._instance=e}get R(){return this._instance.config}get consent(){return this.J()?$m.DENIED:this.K}isOptedOut(){return"always"===this.R.cookieless_mode||this.consent===$m.DENIED||this.consent===$m.PENDING&&(this.R.opt_out_capturing_by_default||"on_reject"===this.R.cookieless_mode)}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===$m.DENIED}optInOut(e){this.Y.G(this.X,e?1:0,this.R.cookie_expiration,this.R.cross_subdomain_cookie,this.R.secure_cookie)}reset(){this.Y.V(this.X,this.R.cross_subdomain_cookie)}get X(){var{token:e,opt_out_capturing_cookie_prefix:t,consent_persistence_name:r}=this._instance.config;return r||(t?t+e:"__ph_opt_in_out_"+e)}get K(){var e=this.Y.q(this.X);return Jd(e)?$m.GRANTED:Ed(Zd,e)?$m.DENIED:$m.PENDING}get Y(){if(!this.Z){var e=this.R.opt_out_capturing_persistence_type;this.Z="localStorage"===e?km:wm;var t="localStorage"===e?wm:km;t.q(this.X)&&(this.Z.q(this.X)||this.optInOut(Jd(t.q(this.X))),t.V(this.X,this.R.cross_subdomain_cookie))}return this.Z}J(){return!!this.R.respect_dnt&&!!Bp([null==hd?void 0:hd.doNotTrack,null==hd?void 0:hd.msDoNotTrack,xd.doNotTrack],e=>Jd(e))}}var Pm=Cp("[Dead Clicks]"),Tm=()=>!0,Am=e=>{var t,r=!(null==(t=e.instance.persistence)||!t.get_property(Jp)),n=e.instance.config.capture_dead_clicks;return Kd(n)?n:!!Md(n)||r};class Fm{get lazyLoadedDeadClicksAutocapture(){return this.tt}constructor(e,t,r){this.instance=e,this.isEnabled=t,this.onCapture=r,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[Jp]:null==e?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.it(()=>{this.et()})}it(e){var t,r;null!=(t=xd.__PosthogExtensions__)&&t.initDeadClicksAutocapture&&e(),null==(r=xd.__PosthogExtensions__)||null==r.loadExternalDependency||r.loadExternalDependency(this.instance,"dead-clicks-autocapture",t=>{t?Pm.error("failed to load script",t):e()})}et(){var e;if(pd){if(!this.tt&&null!=(e=xd.__PosthogExtensions__)&&e.initDeadClicksAutocapture){var t=Md(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};t.__onCapture=this.onCapture,this.tt=xd.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,t),this.tt.start(pd),Pm.info("starting...")}}else Pm.error("`document` not found. Cannot start.")}stop(){this.tt&&(this.tt.stop(),this.tt=void 0,Pm.info("stopping..."))}}var Rm=Cp("[ExceptionAutocapture]");class Im{constructor(e){var t,r,n;this.rt=()=>{var e;if(od&&this.isEnabled&&null!=(e=xd.__PosthogExtensions__)&&e.errorWrappingFunctions){var t=xd.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,r=xd.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,n=xd.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.st&&this.R.capture_unhandled_errors&&(this.st=t(this.captureException.bind(this))),!this.nt&&this.R.capture_unhandled_rejections&&(this.nt=r(this.captureException.bind(this))),!this.ot&&this.R.capture_console_errors&&(this.ot=n(this.captureException.bind(this)))}catch(ym){Rm.error("failed to start",ym),this.ut()}}},this._instance=e,this.ht=!(null==(t=this._instance.persistence)||!t.props[Gp]),this.dt=new th({refillRate:null!==(r=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)&&void 0!==r?r:1,bucketSize:null!==(n=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)&&void 0!==n?n:10,refillInterval:1e4,h:Rm}),this.R=this.vt(),this.startIfEnabledOrStop()}vt(){var e=this._instance.config.capture_exceptions,t={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return Md(e)?t=kd({},t,e):(Ld(e)?this.ht:e)&&(t=kd({},t,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),t}get isEnabled(){return this.R.capture_console_errors||this.R.capture_unhandled_errors||this.R.capture_unhandled_rejections}startIfEnabledOrStop(){this.isEnabled?(Rm.info("enabled"),this.ut(),this.it(this.rt)):this.ut()}it(e){var t,r;null!=(t=xd.__PosthogExtensions__)&&t.errorWrappingFunctions&&e(),null==(r=xd.__PosthogExtensions__)||null==r.loadExternalDependency||r.loadExternalDependency(this._instance,"exception-autocapture",t=>{if(t)return Rm.error("failed to load script",t);e()})}ut(){var e,t,r;null==(e=this.st)||e.call(this),this.st=void 0,null==(t=this.nt)||t.call(this),this.nt=void 0,null==(r=this.ot)||r.call(this),this.ot=void 0}onRemoteConfig(e){var t=e.autocaptureExceptions;this.ht=!!t||!1,this._instance.persistence&&this._instance.persistence.register({[Gp]:this.ht}),this.R=this.vt(),this.startIfEnabledOrStop()}onConfigChange(){this.R=this.vt()}captureException(e){var t,r,n=null!==(t=null==e||null==(r=e.$exception_list)||null==(r=r[0])?void 0:r.type)&&void 0!==t?t:"Exception";this.dt.consumeRateLimit(n)?Rm.info("Skipping exception capture because of client rate limiting.",{exception:n}):this._instance.exceptions.sendExceptionEvent(e)}}function Mm(e,t,r){try{if(!(t in e))return()=>{};var n=e[t],i=r(n);return Id(i)&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__posthog_wrapped__:{enumerable:!1,value:!0}})),e[t]=i,()=>{e[t]=n}}catch(a){return()=>{}}}class Om{constructor(e){var t;this._instance=e,this.ct=(null==od||null==(t=od.location)?void 0:t.pathname)||""}get isEnabled(){return"history_change"===this._instance.config.capture_pageview}startIfEnabled(){this.isEnabled&&(Sp.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.ft&&this.ft(),this.ft=void 0,Sp.info("History API monitoring stopped")}monitorHistoryChanges(){var e,t;if(od&&od.history){var r=this;null!=(e=od.history.pushState)&&e.__posthog_wrapped__||Mm(od.history,"pushState",e=>function(t,n,i){e.call(this,t,n,i),r._t("pushState")}),null!=(t=od.history.replaceState)&&t.__posthog_wrapped__||Mm(od.history,"replaceState",e=>function(t,n,i){e.call(this,t,n,i),r._t("replaceState")}),this.yt()}}_t(e){try{var t,r=null==od||null==(t=od.location)?void 0:t.pathname;if(!r)return;r!==this.ct&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ct=r}catch(ym){Sp.error("Error capturing "+e+" pageview",ym)}}yt(){if(!this.ft){var e=()=>{this._t("popstate")};Hp(od,"popstate",e),this.ft=()=>{od&&od.removeEventListener("popstate",e)}}}}var Lm=Cp("[SegmentIntegration]");var zm="posthog-js";function Bm(e,t){var{organization:r,projectId:n,prefix:i,severityAllowList:a=["error"],sendExceptionsToPostHog:s=!0}=void 0===t?{}:t;return t=>{var o,l,c,u,d;if("*"!==a&&!a.includes(t.level)||!e.__loaded)return t;t.tags||(t.tags={});var h=e.requestRouter.endpointFor("ui","/project/"+e.config.token+"/person/"+e.get_distinct_id());t.tags["PostHog Person URL"]=h,e.sessionRecordingStarted()&&(t.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var p=(null==(o=t.exception)?void 0:o.values)||[],f=p.map(e=>kd({},e,{stacktrace:e.stacktrace?kd({},e.stacktrace,{type:"raw",frames:(e.stacktrace.frames||[]).map(e=>kd({},e,{platform:"web:javascript"}))}):void 0})),m={$exception_message:(null==(l=p[0])?void 0:l.value)||t.message,$exception_type:null==(c=p[0])?void 0:c.type,$exception_level:t.level,$exception_list:f,$sentry_event_id:t.event_id,$sentry_exception:t.exception,$sentry_exception_message:(null==(u=p[0])?void 0:u.value)||t.message,$sentry_exception_type:null==(d=p[0])?void 0:d.type,$sentry_tags:t.tags};return r&&n&&(m.$sentry_url=(i||"https://sentry.io/organizations/")+r+"/issues/?project="+n+"&query="+t.event_id),s&&e.exceptions.sendExceptionEvent(m),t}}class Hm{constructor(e,t,r,n,i,a){this.name=zm,this.setupOnce=function(s){s(Bm(e,{organization:t,projectId:r,prefix:n,severityAllowList:i,sendExceptionsToPostHog:null==a||a}))}}}var Um=null!=od&&od.location?nm(od.location.hash,"__posthog")||nm(location.hash,"state"):null,qm="_postHogToolbarParams",Vm=Cp("[Toolbar]"),Km=function(e){return e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e}(Km||{});class Wm{constructor(e){this.instance=e}bt(e){xd.ph_toolbar_state=e}wt(){var e;return null!==(e=xd.ph_toolbar_state)&&void 0!==e?e:Km.UNINITIALIZED}maybeLoadToolbar(e,t,r){if(void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===r&&(r=void 0),!od||!pd)return!1;e=null!=e?e:od.location,r=null!=r?r:od.history;try{if(!t){try{od.localStorage.setItem("test","test"),od.localStorage.removeItem("test")}catch(ym){return!1}t=null==od?void 0:od.localStorage}var n,i=Um||nm(e.hash,"__posthog")||nm(e.hash,"state"),a=i?Ip(()=>JSON.parse(atob(decodeURIComponent(i))))||Ip(()=>JSON.parse(decodeURIComponent(i))):null;return a&&"ph_authorize"===a.action?((n=a).source="url",n&&Object.keys(n).length>0&&(a.desiredHash?e.hash=a.desiredHash:r?r.replaceState(r.state,"",e.pathname+e.search):e.hash="")):((n=JSON.parse(t.getItem(qm)||"{}")).source="localstorage",delete n.userIntent),!(!n.token||this.instance.config.token!==n.token||(this.loadToolbar(n),0))}catch(ym){return!1}}xt(e){var t=xd.ph_load_toolbar||xd.ph_load_editor;!Ud(t)&&Id(t)?t(e,this.instance):Vm.warn("No toolbar load function found")}loadToolbar(e){var t=!(null==pd||!pd.getElementById(xf));if(!od||t)return!1;var r="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,n=kd({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(od.localStorage.setItem(qm,JSON.stringify(kd({},n,{source:void 0}))),this.wt()===Km.LOADED)this.xt(n);else if(this.wt()===Km.UNINITIALIZED){var i;this.bt(Km.LOADING),null==(i=xd.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this.instance,"toolbar",e=>{if(e)return Vm.error("[Toolbar] Failed to load",e),void this.bt(Km.UNINITIALIZED);this.bt(Km.LOADED),this.xt(n)}),Hp(od,"turbolinks:load",()=>{this.bt(Km.UNINITIALIZED),this.loadToolbar(n)})}return!0}Et(e){return this.loadToolbar(e)}maybeLoadEditor(e,t,r){return void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===r&&(r=void 0),this.maybeLoadToolbar(e,t,r)}}var Gm=Cp("[TracingHeaders]");class Ym{constructor(e){this.$t=void 0,this.St=void 0,this.rt=()=>{var e,t;Ld(this.$t)&&(null==(e=xd.__PosthogExtensions__)||null==(e=e.tracingHeadersPatchFns)||e._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),Ld(this.St)&&(null==(t=xd.__PosthogExtensions__)||null==(t=t.tracingHeadersPatchFns)||t._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}it(e){var t,r;null!=(t=xd.__PosthogExtensions__)&&t.tracingHeadersPatchFns&&e(),null==(r=xd.__PosthogExtensions__)||null==r.loadExternalDependency||r.loadExternalDependency(this._instance,"tracing-headers",t=>{if(t)return Gm.error("failed to load script",t);e()})}startIfEnabledOrStop(){var e,t;this._instance.config.__add_tracing_headers?this.it(this.rt):(null==(e=this.$t)||e.call(this),null==(t=this.St)||t.call(this),this.$t=void 0,this.St=void 0)}}var Qm="https?://(.*)",Xm=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],Jm=Fp(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],Xm),Zm="<masked>",eg=["li_fat_id"];function tg(e,t,r){if(!pd)return{};var n,i=t?Fp([],Xm,r||[]):[],a=rg(rm(pd.URL,i,Zm),e),s=(n={},Tp(eg,function(e){var t=wm.q(e);n[e]=t||null}),n);return Ap(s,a)}function rg(e,t){var r=Jm.concat(t||[]),n={};return Tp(r,function(t){var r=tm(e,t);n[t]=r||null}),n}function ng(e){var t,r=(t=e)?0===t.search(Qm+"google.([^/?]*)")?"google":0===t.search(Qm+"bing.com")?"bing":0===t.search(Qm+"yahoo.com")?"yahoo":0===t.search(Qm+"duckduckgo.com")?"duckduckgo":null:null,n="yahoo"!=r?"q":"p",i={};if(!Hd(r)){i.$search_engine=r;var a=pd?tm(pd.referrer,n):"";a.length&&(i.ph_keyword=a)}return i}function ig(){return navigator.language||navigator.userLanguage}function ag(){return(null==pd?void 0:pd.referrer)||"$direct"}function sg(e,t){var r=e?Fp([],Xm,t||[]):[],n=null==fd?void 0:fd.href.substring(0,1e3);return{r:ag().substring(0,1e3),u:n?rm(n,r,Zm):void 0}}function og(e){var t,{r:r,u:n}=e,i={$referrer:r,$referring_domain:null==r?void 0:"$direct"==r?"$direct":null==(t=em(r))?void 0:t.host};if(n){i.$current_url=n;var a=em(n);i.$host=null==a?void 0:a.host,i.$pathname=null==a?void 0:a.pathname;var s=rg(n);Ap(i,s)}if(r){var o=ng(r);Ap(i,o)}return i}function lg(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(ym){return}}function cg(){try{return(new Date).getTimezoneOffset()}catch(ym){return}}var ug=Cp("[Web Vitals]"),dg=9e5;class hg{constructor(e){var t;this.kt=!1,this.P=!1,this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Pt=()=>{clearTimeout(this.Tt),0!==this.N.metrics.length&&(this._instance.capture("$web_vitals",this.N.metrics.reduce((e,t)=>kd({},e,{["$web_vitals_"+t.name+"_event"]:kd({},t),["$web_vitals_"+t.name+"_value"]:t.value}),{})),this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.It=e=>{var t,r=null==(t=this._instance.sessionManager)?void 0:t.checkAndGetSessionAndWindowId(!0);if(Ld(r))ug.error("Could not read session ID. Dropping metrics!");else{this.N=this.N||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var n=this.Ct();Ld(n)||(Ud(null==e?void 0:e.name)||Ud(null==e?void 0:e.value)?ug.error("Invalid metric received",e):this.Rt&&e.value>=this.Rt?ug.error("Ignoring metric with value >= "+this.Rt,e):(this.N.url!==n&&(this.Pt(),this.Tt=setTimeout(this.Pt,this.flushToCaptureTimeoutMs)),Ld(this.N.url)&&(this.N.url=n),this.N.firstMetricTimestamp=Ld(this.N.firstMetricTimestamp)?Date.now():this.N.firstMetricTimestamp,e.attribution&&e.attribution.interactionTargetElement&&(e.attribution.interactionTargetElement=void 0),this.N.metrics.push(kd({},e,{$current_url:n,$session_id:r.sessionId,$window_id:r.windowId,timestamp:Date.now()})),this.N.metrics.length===this.allowedMetrics.length&&this.Pt()))}},this.rt=()=>{if(!this.P){var e,t,r,n,i=xd.__PosthogExtensions__;Ld(i)||Ld(i.postHogWebVitalsCallbacks)||({onLCP:e,onCLS:t,onFCP:r,onINP:n}=i.postHogWebVitalsCallbacks),e&&t&&r&&n?(this.allowedMetrics.indexOf("LCP")>-1&&e(this.It.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&t(this.It.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&r(this.It.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&n(this.It.bind(this)),this.P=!0):ug.error("web vitals callbacks not loaded - not starting")}},this._instance=e,this.kt=!(null==(t=this._instance.persistence)||!t.props[Xp]),this.startIfEnabled()}get allowedMetrics(){var e,t,r=Md(this._instance.config.capture_performance)?null==(e=this._instance.config.capture_performance)?void 0:e.web_vitals_allowed_metrics:void 0;return Ld(r)?(null==(t=this._instance.persistence)?void 0:t.props[ef])||["CLS","FCP","INP","LCP"]:r}get flushToCaptureTimeoutMs(){return(Md(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get useAttribution(){var e=Md(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_attribution:void 0;return null==e||e}get Rt(){var e=Md(this._instance.config.capture_performance)&&qd(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:dg;return 0<e&&e<=6e4?dg:e}get isEnabled(){var e=null==fd?void 0:fd.protocol;if("http:"!==e&&"https:"!==e)return ug.info("Web Vitals are disabled on non-http/https protocols"),!1;var t=Md(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:Kd(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return Kd(t)?t:this.kt}startIfEnabled(){this.isEnabled&&!this.P&&(ug.info("enabled, starting..."),this.it(this.rt))}onRemoteConfig(e){var t=Md(e.capturePerformance)&&!!e.capturePerformance.web_vitals,r=Md(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[Xp]:t}),this._instance.persistence.register({[ef]:r})),this.kt=t,this.startIfEnabled()}it(e){var t,r;null!=(t=xd.__PosthogExtensions__)&&t.postHogWebVitalsCallbacks?e():null==(r=xd.__PosthogExtensions__)||null==r.loadExternalDependency||r.loadExternalDependency(this._instance,"web-vitals",t=>{var r;if(t)ug.error("failed to load script",t);else{var n=null==(r=xd.__PosthogExtensions__)?void 0:r.loadWebVitalsCallbacks;n?(n(this.useAttribution),e()):e()}})}Ct(){var e=od?od.location.href:void 0;if(e){var t=this._instance.config.mask_personal_data_properties,r=this._instance.config.custom_personal_data_properties,n=t?Fp([],Xm,r||[]):[];return rm(e,n,Zm)}ug.error("Could not determine current URL")}}var pg=Cp("[Heatmaps]");function fg(e){return Md(e)&&"clientX"in e&&"clientY"in e&&qd(e.clientX)&&qd(e.clientY)}class mg{constructor(e){var t;this.kt=!1,this.P=!1,this.Ft=null,this.instance=e,this.kt=!(null==(t=this.instance.persistence)||!t.props[Wp]),this.rageclicks=new Zf(e.config.rageclick)}get flushIntervalMilliseconds(){var e=5e3;return Md(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return Ld(this.instance.config.capture_heatmaps)?Ld(this.instance.config.enable_heatmaps)?this.kt:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}startIfEnabled(){if(this.isEnabled){if(this.P)return;pg.info("starting..."),this.Mt(),this.Ot()}else{var e;clearInterval(null!==(e=this.Ft)&&void 0!==e?e:void 0),this.At(),this.getAndClearBuffer()}}onRemoteConfig(e){var t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[Wp]:t}),this.kt=t,this.startIfEnabled()}getAndClearBuffer(){var e=this.N;return this.N=void 0,e}Dt(e){this.jt(e.originalEvent,"deadclick")}Ot(){this.Ft&&clearInterval(this.Ft),this.Ft="visible"===(null==pd?void 0:pd.visibilityState)?setInterval(this.Lt.bind(this),this.flushIntervalMilliseconds):null}Mt(){od&&pd&&(this.Nt=this.Lt.bind(this),Hp(od,"beforeunload",this.Nt),this.Ut=e=>this.jt(e||(null==od?void 0:od.event)),Hp(pd,"click",this.Ut,{capture:!0}),this.zt=e=>this.Ht(e||(null==od?void 0:od.event)),Hp(pd,"mousemove",this.zt,{capture:!0}),this.Bt=new Fm(this.instance,Tm,this.Dt.bind(this)),this.Bt.startIfEnabled(),this.qt=this.Ot.bind(this),Hp(pd,"visibilitychange",this.qt),this.P=!0)}At(){var e;od&&pd&&(this.Nt&&od.removeEventListener("beforeunload",this.Nt),this.Ut&&pd.removeEventListener("click",this.Ut,{capture:!0}),this.zt&&pd.removeEventListener("mousemove",this.zt,{capture:!0}),this.qt&&pd.removeEventListener("visibilitychange",this.qt),clearTimeout(this.Wt),null==(e=this.Bt)||e.stop(),this.P=!1)}Gt(e,t){var r=this.instance.scrollManager.scrollY(),n=this.instance.scrollManager.scrollX(),i=this.instance.scrollManager.scrollElement(),a=function(e,t,r){for(var n=e;n&&kf(n)&&!Nf(n,"body");){if(n===r)return!1;if(Ed(t,null==od?void 0:od.getComputedStyle(n).position))return!0;n=Rf(n)}return!1}(Tf(e),["fixed","sticky"],i);return{x:e.clientX+(a?0:n),y:e.clientY+(a?0:r),target_fixed:a,type:t}}jt(e,t){var r;if(void 0===t&&(t="click"),!_f(e.target)&&fg(e)){var n=this.Gt(e,t);null!=(r=this.rageclicks)&&r.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this.Vt(kd({},n,{type:"rageclick"})),this.Vt(n)}}Ht(e){!_f(e.target)&&fg(e)&&(clearTimeout(this.Wt),this.Wt=setTimeout(()=>{this.Vt(this.Gt(e,"mousemove"))},500))}Vt(e){if(od){var t=od.location.href,r=this.instance.config.mask_personal_data_properties,n=this.instance.config.custom_personal_data_properties,i=r?Fp([],Xm,n||[]):[],a=rm(t,i,Zm);this.N=this.N||{},this.N[a]||(this.N[a]=[]),this.N[a].push(e)}}Lt(){this.N&&!Od(this.N)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class gg{constructor(e){this.Jt=(e,t,r)=>{r&&(r.noSessionId||r.activityTimeout||r.sessionPastMaximumLength)&&(Sp.info("[PageViewManager] Session rotated, clearing pageview state",{sessionId:e,changeReason:r}),this.Kt=void 0,this._instance.scrollManager.resetContext())},this._instance=e,this.Yt()}Yt(){var e;this.Xt=null==(e=this._instance.sessionManager)?void 0:e.onSessionId(this.Jt)}destroy(){var e;null==(e=this.Xt)||e.call(this),this.Xt=void 0}doPageView(e,t){var r,n=this.Qt(e,t);return this.Kt={pathname:null!==(r=null==od?void 0:od.location.pathname)&&void 0!==r?r:"",pageViewId:t,timestamp:e},this._instance.scrollManager.resetContext(),n}doPageLeave(e){var t;return this.Qt(e,null==(t=this.Kt)?void 0:t.pageViewId)}doEvent(){var e;return{$pageview_id:null==(e=this.Kt)?void 0:e.pageViewId}}Qt(e,t){var r=this.Kt;if(!r)return{$pageview_id:t};var n={$pageview_id:t,$prev_pageview_id:r.pageViewId},i=this._instance.scrollManager.getContext();if(i&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:a,lastScrollY:s,maxScrollY:o,maxContentHeight:l,lastContentY:c,maxContentY:u}=i;if(!(Ld(a)||Ld(s)||Ld(o)||Ld(l)||Ld(c)||Ld(u))){a=Math.ceil(a),s=Math.ceil(s),o=Math.ceil(o),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u);var d=a<=1?1:eh(s/a,0,1,Sp),h=a<=1?1:eh(o/a,0,1,Sp),p=l<=1?1:eh(c/l,0,1,Sp),f=l<=1?1:eh(u/l,0,1,Sp);n=Ap(n,{$prev_pageview_last_scroll:s,$prev_pageview_last_scroll_percentage:d,$prev_pageview_max_scroll:o,$prev_pageview_max_scroll_percentage:h,$prev_pageview_last_content:c,$prev_pageview_last_content_percentage:p,$prev_pageview_max_content:u,$prev_pageview_max_content_percentage:f})}}return r.pathname&&(n.$prev_pageview_pathname=r.pathname),r.timestamp&&(n.$prev_pageview_duration=(e.getTime()-r.timestamp.getTime())/1e3),n}}var vg=function(e){return e.GZipJS="gzip-js",e.Base64="base64",e}({}),bg=Uint8Array,xg=Uint16Array,yg=Uint32Array,wg=new bg([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_g=new bg([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),kg=new bg([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ng=function(e,t){for(var r=new xg(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];var i=new yg(r[30]);for(n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)i[a]=a-r[n]<<5|n;return[r,i]},jg=Ng(wg,2),Sg=jg[0],Cg=jg[1];Sg[28]=258,Cg[258]=28;for(var Eg=Ng(_g,0)[1],$g=new xg(32768),Dg=0;Dg<32768;++Dg){var Pg=(43690&Dg)>>>1|(21845&Dg)<<1;Pg=(61680&(Pg=(52428&Pg)>>>2|(13107&Pg)<<2))>>>4|(3855&Pg)<<4,$g[Dg]=((65280&Pg)>>>8|(255&Pg)<<8)>>>1}var Tg=function(e,t,r){for(var n=e.length,i=0,a=new xg(t);i<n;++i)++a[e[i]-1];var s,o=new xg(t);for(i=0;i<t;++i)o[i]=o[i-1]+a[i-1]<<1;for(s=new xg(n),i=0;i<n;++i)s[i]=$g[o[e[i]-1]++]>>>15-e[i];return s},Ag=new bg(288);for(Dg=0;Dg<144;++Dg)Ag[Dg]=8;for(Dg=144;Dg<256;++Dg)Ag[Dg]=9;for(Dg=256;Dg<280;++Dg)Ag[Dg]=7;for(Dg=280;Dg<288;++Dg)Ag[Dg]=8;var Fg=new bg(32);for(Dg=0;Dg<32;++Dg)Fg[Dg]=5;var Rg=Tg(Ag,9),Ig=Tg(Fg,5),Mg=function(e){return(e/8|0)+(7&e&&1)},Og=function(e,t,r){(null==r||r>e.length)&&(r=e.length);var n=new(e instanceof xg?xg:e instanceof yg?yg:bg)(r-t);return n.set(e.subarray(t,r)),n},Lg=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8},zg=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},Bg=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,a=r.slice();if(!i)return[new bg(0),0];if(1==i){var s=new bg(r[0].s+1);return s[r[0].s]=1,[s,1]}r.sort(function(e,t){return e.f-t.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],c=0,u=1,d=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=i-1;)o=r[r[c].f<r[d].f?c++:d++],l=r[c!=u&&r[c].f<r[d].f?c++:d++],r[u++]={s:-1,f:o.f+l.f,l:o,r:l};var h=a[0].s;for(n=1;n<i;++n)a[n].s>h&&(h=a[n].s);var p=new xg(h+1),f=Hg(r[u-1],p,0);if(f>t){n=0;var m=0,g=f-t,v=1<<g;for(a.sort(function(e,t){return p[t.s]-p[e.s]||e.f-t.f});n<i;++n){var b=a[n].s;if(!(p[b]>t))break;m+=v-(1<<f-p[b]),p[b]=t}for(m>>>=g;m>0;){var x=a[n].s;p[x]<t?m-=1<<t-p[x]++-1:++n}for(;n>=0&&m;--n){var y=a[n].s;p[y]==t&&(--p[y],++m)}f=t}return[new bg(p),f]},Hg=function(e,t,r){return-1==e.s?Math.max(Hg(e.l,t,r+1),Hg(e.r,t,r+1)):t[e.s]=r},Ug=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new xg(++t),n=0,i=e[0],a=1,s=function(e){r[n++]=e},o=1;o<=t;++o)if(e[o]==i&&o!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=e[o]}return[r.subarray(0,n),t]},qg=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},Vg=function(e,t,r){var n=r.length,i=Mg(t+2);e[i]=255&n,e[i+1]=n>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var a=0;a<n;++a)e[i+a+4]=r[a];return 8*(i+4+n)},Kg=function(e,t,r,n,i,a,s,o,l,c,u){Lg(t,u++,r),++i[256];for(var d=Bg(i,15),h=d[0],p=d[1],f=Bg(a,15),m=f[0],g=f[1],v=Ug(h),b=v[0],x=v[1],y=Ug(m),w=y[0],_=y[1],k=new xg(19),N=0;N<b.length;++N)k[31&b[N]]++;for(N=0;N<w.length;++N)k[31&w[N]]++;for(var j=Bg(k,7),S=j[0],C=j[1],E=19;E>4&&!S[kg[E-1]];--E);var $,D,P,T,A=c+5<<3,F=qg(i,Ag)+qg(a,Fg)+s,R=qg(i,h)+qg(a,m)+s+14+3*E+qg(k,S)+(2*k[16]+3*k[17]+7*k[18]);if(A<=F&&A<=R)return Vg(t,u,e.subarray(l,l+c));if(Lg(t,u,1+(R<F)),u+=2,R<F){$=Tg(h,p),D=h,P=Tg(m,g),T=m;var I=Tg(S,C);for(Lg(t,u,x-257),Lg(t,u+5,_-1),Lg(t,u+10,E-4),u+=14,N=0;N<E;++N)Lg(t,u+3*N,S[kg[N]]);u+=3*E;for(var M=[b,w],O=0;O<2;++O){var L=M[O];for(N=0;N<L.length;++N){var z=31&L[N];Lg(t,u,I[z]),u+=S[z],z>15&&(Lg(t,u,L[N]>>>5&127),u+=L[N]>>>12)}}}else $=Rg,D=Ag,P=Ig,T=Fg;for(N=0;N<o;++N)if(n[N]>255){z=n[N]>>>18&31,zg(t,u,$[z+257]),u+=D[z+257],z>7&&(Lg(t,u,n[N]>>>23&31),u+=wg[z]);var B=31&n[N];zg(t,u,P[B]),u+=T[B],B>3&&(zg(t,u,n[N]>>>5&8191),u+=_g[B])}else zg(t,u,$[n[N]]),u+=D[n[N]];return zg(t,u,$[256]),u+D[256]},Wg=new yg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Gg=function(){for(var e=new yg(256),t=0;t<256;++t){for(var r=t,n=9;--n;)r=(1&r&&3988292384)^r>>>1;e[t]=r}return e}(),Yg=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8};function Qg(e,t){void 0===t&&(t={});var r=function(){var e=4294967295;return{p:function(t){for(var r=e,n=0;n<t.length;++n)r=Gg[255&r^t[n]]^r>>>8;e=r},d:function(){return 4294967295^e}}}(),n=e.length;r.p(e);var i,a=function(e,t,r,n){return function(e,t,r,n,i){var a=e.length,s=new bg(n+a+5*(1+Math.floor(a/7e3))+i),o=s.subarray(n,s.length-i),l=0;if(!t||a<8)for(var c=0;c<=a;c+=65535){var u=c+65535;u<a?l=Vg(o,l,e.subarray(c,u)):(o[c]=!0,l=Vg(o,l,e.subarray(c,a)))}else{for(var d=Wg[t-1],h=d>>>13,p=8191&d,f=(1<<r)-1,m=new xg(32768),g=new xg(f+1),v=Math.ceil(r/3),b=2*v,x=function(t){return(e[t]^e[t+1]<<v^e[t+2]<<b)&f},y=new yg(25e3),w=new xg(288),_=new xg(32),k=0,N=0,j=(c=0,0),S=0,C=0;c<a;++c){var E=x(c),$=32767&c,D=g[E];if(m[$]=D,g[E]=$,S<=c){var P=a-c;if((k>7e3||j>24576)&&P>423){l=Kg(e,o,0,y,w,_,N,j,C,c-C,l),j=k=N=0,C=c;for(var T=0;T<286;++T)w[T]=0;for(T=0;T<30;++T)_[T]=0}var A=2,F=0,R=p,I=$-D&32767;if(P>2&&E==x(c-I))for(var M=Math.min(h,P)-1,O=Math.min(32767,c),L=Math.min(258,P);I<=O&&--R&&$!=D;){if(e[c+A]==e[c+A-I]){for(var z=0;z<L&&e[c+z]==e[c+z-I];++z);if(z>A){if(A=z,F=I,z>M)break;var B=Math.min(I,z-2),H=0;for(T=0;T<B;++T){var U=c-I+T+32768&32767,q=U-m[U]+32768&32767;q>H&&(H=q,D=U)}}}I+=($=D)-(D=m[$])+32768&32767}if(F){y[j++]=268435456|Cg[A]<<18|Eg[F];var V=31&Cg[A],K=31&Eg[F];N+=wg[V]+_g[K],++w[257+V],++_[K],S=c+A,++k}else y[j++]=e[c],++w[e[c]]}}l=Kg(e,o,!0,y,w,_,N,j,C,c-C,l)}return Og(s,0,n+Mg(l)+i)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,r,n)}(e,t,10+((i=t).filename&&i.filename.length+1||0),8),s=a.length;return function(e,t){var r=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&Yg(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){e[3]=8;for(var n=0;n<=r.length;++n)e[n+10]=r.charCodeAt(n)}}(a,t),Yg(a,s-8,r.d()),Yg(a,s-4,n),a}var Xg=!!gd||!!md,Jg="text/plain",Zg=function(e,t,r){var n;void 0===r&&(r=!0);var[i,a]=e.split("?"),s=kd({},t),o=null!==(n=null==a?void 0:a.split("&").map(e=>{var t,[n,i]=e.split("="),a=r&&null!==(t=s[n])&&void 0!==t?t:i;return delete s[n],n+"="+a}))&&void 0!==n?n:[],l=function(e,t){var r,n;void 0===t&&(t="&");var i=[];return Tp(e,function(e,t){Ld(e)||Ld(t)||"undefined"===t||(r=encodeURIComponent(e instanceof File?e.name:e.toString()),n=encodeURIComponent(t),i[i.length]=n+"="+r)}),i.join(t)}(s);return l&&o.push(l),i+"?"+o.join("&")},ev=(e,t)=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString():t,t),tv=e=>{var t,{data:r,compression:n}=e;if(r){if(n===vg.GZipJS){var i=Qg(function(e){var t=e.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var r=new bg(e.length+(e.length>>>1)),n=0,i=function(e){r[n++]=e},a=0;a<t;++a){if(n+5>r.length){var s=new bg(n+8+(t-a<<1));s.set(r),r=s}var o=e.charCodeAt(a);o<128?i(o):o<2048?(i(192|o>>>6),i(128|63&o)):o>55295&&o<57344?(i(240|(o=65536+(1047552&o)|1023&e.charCodeAt(++a))>>>18),i(128|o>>>12&63),i(128|o>>>6&63),i(128|63&o)):(i(224|o>>>12),i(128|o>>>6&63),i(128|63&o))}return Og(r,0,n)}(ev(r)),{mtime:0}),a=new Blob([i],{type:Jg});return{contentType:Jg,body:a,estimatedSize:a.size}}if(n===vg.Base64){var s=function(e){var t,r,n,i,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=0,l=0,c="",u=[];if(!e)return e;e=function(e){var t,r,n,i,a="";for(t=r=0,n=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<n;i++){var s=e.charCodeAt(i),o=null;s<128?r++:o=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),Hd(o)||(r>t&&(a+=e.substring(t,r)),a+=o,t=r=i+1)}return r>t&&(a+=e.substring(t,e.length)),a}(e);do{t=(a=e.charCodeAt(o++)<<16|e.charCodeAt(o++)<<8|e.charCodeAt(o++))>>18&63,r=a>>12&63,n=a>>6&63,i=63&a,u[l++]=s.charAt(t)+s.charAt(r)+s.charAt(n)+s.charAt(i)}while(o<e.length);switch(c=u.join(""),e.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c}(ev(r)),o=(t=s,"data="+encodeURIComponent("string"==typeof t?t:ev(t)));return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var l=ev(r);return{contentType:"application/json",body:l,estimatedSize:new Blob([l]).size}}},rv=[];md&&rv.push({transport:"fetch",method:e=>{var t,r,{contentType:n,body:i,estimatedSize:a}=null!==(t=tv(e))&&void 0!==t?t:{},s=new Headers;Tp(e.headers,function(e,t){s.append(t,e)}),n&&s.append("Content-Type",n);var o=e.url,l=null;if(vd){var c=new vd;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),e.timeout)}}md(o,kd({method:(null==e?void 0:e.method)||"GET",headers:s,keepalive:"POST"===e.method&&(a||0)<52428.8,body:i,signal:null==(r=l)?void 0:r.signal},e.fetchOptions)).then(t=>t.text().then(r=>{var n={statusCode:t.status,text:r};if(200===t.status)try{n.json=JSON.parse(r)}catch(i){Sp.error(i)}null==e.callback||e.callback(n)})).catch(t=>{Sp.error(t),null==e.callback||e.callback({statusCode:0,text:t})}).finally(()=>l?clearTimeout(l.timeout):null)}}),gd&&rv.push({transport:"XHR",method:e=>{var t,r=new gd;r.open(e.method||"GET",e.url,!0);var{contentType:n,body:i}=null!==(t=tv(e))&&void 0!==t?t:{};Tp(e.headers,function(e,t){r.setRequestHeader(t,e)}),n&&r.setRequestHeader("Content-Type",n),e.timeout&&(r.timeout=e.timeout),e.disableXHRCredentials||(r.withCredentials=!0),r.onreadystatechange=()=>{if(4===r.readyState){var t={statusCode:r.status,text:r.responseText};if(200===r.status)try{t.json=JSON.parse(r.responseText)}catch(n){}null==e.callback||e.callback(t)}},r.send(i)}}),null!=hd&&hd.sendBeacon&&rv.push({transport:"sendBeacon",method:e=>{var t=Zg(e.url,{beacon:"1"});try{var r,{contentType:n,body:i}=null!==(r=tv(e))&&void 0!==r?r:{},a="string"==typeof i?new Blob([i],{type:n}):i;hd.sendBeacon(t,a)}catch(s){}}});var nv=function(e,t){if(!function(e){try{new RegExp(e)}catch(t){return!1}return!0}(t))return!1;try{return new RegExp(t).test(e)}catch(r){return!1}};function iv(e,t,r){return ev({distinct_id:e,userPropertiesToSet:t,userPropertiesToSetOnce:r})}var av={exact:(e,t)=>t.some(t=>e.some(e=>t===e)),is_not:(e,t)=>t.every(t=>e.every(e=>t!==e)),regex:(e,t)=>t.some(t=>e.some(e=>nv(t,e))),not_regex:(e,t)=>t.every(t=>e.every(e=>!nv(t,e))),icontains:(e,t)=>t.map(sv).some(t=>e.map(sv).some(e=>t.includes(e))),not_icontains:(e,t)=>t.map(sv).every(t=>e.map(sv).every(e=>!t.includes(e))),gt:(e,t)=>t.some(t=>{var r=parseFloat(t);return!isNaN(r)&&e.some(e=>r>parseFloat(e))}),lt:(e,t)=>t.some(t=>{var r=parseFloat(t);return!isNaN(r)&&e.some(e=>r<parseFloat(e))})},sv=e=>e.toLowerCase();function ov(e,t){return!e||Object.entries(e).every(e=>{var[r,n]=e,i=null==t?void 0:t[r];if(Ld(i)||Hd(i))return!1;var a=[String(i)],s=av[n.operator];return!!s&&s(n.values,a)})}var lv=Cp("[Error tracking]");class cv{constructor(e){var t,r;this.Zt=[],this.ti=new rp([new fp,new Np,new gp,new mp,new _p,new wp,new bp,new kp],function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(t,n){void 0===n&&(n=0);for(var i=[],a=t.split("\n"),s=n;s<a.length;s++){var o=a[s];if(!(o.length>1024)){var l=pp.test(o)?o.replace(pp,"$1"):o;if(!l.match(/\S*Error: /)){for(var c of r){var u=c(l,e);if(u){i.push(u);break}}if(i.length>=50)break}}}return function(e){if(!e.length)return[];var t=Array.from(e);return t.reverse(),t.slice(0,50).map(e=>{return kd({},e,{filename:e.filename||(r=t,r[r.length-1]||{}).filename,function:e.function||np});var r})}(i)}}("web:javascript",cp,hp)),this._instance=e,this.Zt=null!==(t=null==(r=this._instance.persistence)?void 0:r.get_property(Yp))&&void 0!==t?t:[]}onRemoteConfig(e){var t,r,n,i=null!==(t=null==(r=e.errorTracking)?void 0:r.suppressionRules)&&void 0!==t?t:[],a=null==(n=e.errorTracking)?void 0:n.captureExtensionExceptions;this.Zt=i,this._instance.persistence&&this._instance.persistence.register({[Yp]:this.Zt,[Qp]:a})}get ii(){var e,t=!!this._instance.get_property(Qp),r=this._instance.config.error_tracking.captureExtensionExceptions;return null!==(e=null!=r?r:t)&&void 0!==e&&e}buildProperties(e,t){return this.ti.buildFromUnknown(e,{syntheticException:null==t?void 0:t.syntheticException,mechanism:{handled:null==t?void 0:t.handled}})}sendExceptionEvent(e){var t=e.$exception_list;if(this.ei(t)){if(this.ri(t))return void lv.info("Skipping exception capture because a suppression rule matched");if(!this.ii&&this.si(t))return void lv.info("Skipping exception capture because it was thrown by an extension");if(!this._instance.config.error_tracking.__capturePostHogExceptions&&this.ni(t))return void lv.info("Skipping exception capture because it was thrown by the PostHog SDK")}return this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}ri(e){if(0===e.length)return!1;var t=e.reduce((e,t)=>{var{type:r,value:n}=t;return zd(r)&&r.length>0&&e.$exception_types.push(r),zd(n)&&n.length>0&&e.$exception_values.push(n),e},{$exception_types:[],$exception_values:[]});return this.Zt.some(e=>{var r=e.values.map(e=>{var r,n=av[e.operator],i=Rd(e.value)?e.value:[e.value],a=null!==(r=t[e.key])&&void 0!==r?r:[];return i.length>0&&n(i,a)});return"OR"===e.type?r.some(Boolean):r.every(Boolean)})}si(e){return e.flatMap(e=>{var t,r;return null!==(t=null==(r=e.stacktrace)?void 0:r.frames)&&void 0!==t?t:[]}).some(e=>e.filename&&e.filename.startsWith("chrome-extension://"))}ni(e){if(e.length>0){var t,r,n,i,a=null!==(t=null==(r=e[0].stacktrace)?void 0:r.frames)&&void 0!==t?t:[],s=a[a.length-1];return null!==(n=null==s||null==(i=s.filename)?void 0:i.includes("posthog.com/static"))&&void 0!==n&&n}return!1}ei(e){return!Ud(e)&&Rd(e)}}var uv=Cp("[FeatureFlags]"),dv=Cp("[FeatureFlags]",{debugEnabled:!0}),hv="$active_feature_flags",pv="$override_feature_flags",fv="$feature_flag_payloads",mv="$override_feature_flag_payloads",gv="$feature_flag_request_id",vv="$feature_flag_evaluated_at",bv=e=>{var t={};for(var[r,n]of Rp(e||{}))n&&(t[r]=n);return t},xv=function(e){return e.FeatureFlags="feature_flags",e.Recordings="recordings",e}({});class yv{constructor(e){this.oi=!1,this.ai=!1,this.li=!1,this.ui=!1,this.hi=!1,this.di=!1,this.vi=!1,this.ci=!1,this._instance=e,this.featureFlagEventHandlers=[]}fi(){var e,t=null!==(e=this._instance.config.evaluation_contexts)&&void 0!==e?e:this._instance.config.evaluation_environments;return!this._instance.config.evaluation_environments||this._instance.config.evaluation_contexts||this.ci||(uv.warn("evaluation_environments is deprecated. Use evaluation_contexts instead. evaluation_environments will be removed in a future version."),this.ci=!0),null!=t&&t.length?t.filter(e=>{var t=e&&"string"==typeof e&&e.trim().length>0;return t||uv.error("Invalid evaluation context found:",e,"Expected non-empty string"),t}):[]}pi(){return this.fi().length>0}flags(){if(this._instance.config.__preview_remote_config)this.di=!0;else{var e=!this.gi&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.mi({disableFlags:e})}}get hasLoadedFlags(){return this.ai}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(of),t=this._instance.get_property(pv),r=this._instance.get_property(mv);if(!r&&!t)return e||{};var n=Ap({},e||{}),i=[...new Set([...Object.keys(r||{}),...Object.keys(t||{})])];for(var a of i){var s,o,l=n[a],c=null==t?void 0:t[a],u=Ld(c)?null!==(s=null==l?void 0:l.enabled)&&void 0!==s&&s:!!c,d=Ld(c)?l.variant:"string"==typeof c?c:void 0,h=null==r?void 0:r[a],p=kd({},l,{enabled:u,variant:u?null!=d?d:null==l?void 0:l.variant:void 0});u!==(null==l?void 0:l.enabled)&&(p.original_enabled=null==l?void 0:l.enabled),d!==(null==l?void 0:l.variant)&&(p.original_variant=null==l?void 0:l.variant),h&&(p.metadata=kd({},null==l?void 0:l.metadata,{payload:h,original_payload:null==l||null==(o=l.metadata)?void 0:o.payload})),n[a]=p}return this.oi||(uv.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:r,finalDetails:n}),this.oi=!0),n}getFlagVariants(){var e=this._instance.get_property(af),t=this._instance.get_property(pv);if(!t)return e||{};for(var r=Ap({},e),n=Object.keys(t),i=0;i<n.length;i++)r[n[i]]=t[n[i]];return this.oi||(uv.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:r}),this.oi=!0),r}getFlagPayloads(){var e=this._instance.get_property(fv),t=this._instance.get_property(mv);if(!t)return e||{};for(var r=Ap({},e||{}),n=Object.keys(t),i=0;i<n.length;i++)r[n[i]]=t[n[i]];return this.oi||(uv.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:t,finalPayloads:r}),this.oi=!0),r}reloadFeatureFlags(){this.ui||this._instance.config.advanced_disable_feature_flags||this.gi||(this.gi=setTimeout(()=>{this.mi()},5))}yi(){clearTimeout(this.gi),this.gi=void 0}ensureFlagsLoaded(){this.ai||this.li||this.gi||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.ui=e}mi(e){var t;if(this.yi(),!this._instance.O())if(this.li)this.hi=!0;else{var r=this._instance.config.token,n=this._instance.get_property("$device_id"),i={token:r,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:kd({},(null==(t=this._instance.persistence)?void 0:t.get_initial_props())||{},this._instance.get_property(lf)||{}),group_properties:this._instance.get_property(cf)};Hd(n)||Ld(n)||(i.$device_id=n),(null!=e&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(i.disable_flags=!0),this.pi()&&(i.evaluation_contexts=this.fi());var a=this._instance.config.__preview_remote_config,s=a?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",l=this._instance.requestRouter.endpointFor("flags",s+o);a&&(i.timezone=lg()),this.li=!0,this._instance._send_request({method:"POST",url:l,data:i,compression:this._instance.config.disable_compression?void 0:vg.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:e=>{var t,r,n=!0;if(200===e.statusCode&&(this.hi||(this.$anon_distinct_id=void 0),n=!1),this.li=!1,this.di||(this.di=!0,this._instance.bi(null!==(r=e.json)&&void 0!==r?r:{})),!i.disable_flags||this.hi)if(this.vi=!n,e.json&&null!=(t=e.json.quotaLimited)&&t.includes(xv.FeatureFlags))uv.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var a;i.disable_flags||this.receivedFeatureFlags(null!==(a=e.json)&&void 0!==a?a:{},n),this.hi&&(this.hi=!1,this.mi())}}})}}getFeatureFlag(e,t){if(void 0===t&&(t={}),this.ai||this.getFlags()&&this.getFlags().length>0){var r=this.getFlagVariants()[e],n=""+r,i=this._instance.get_property(gv)||void 0,a=this._instance.get_property(vv)||void 0,s=this._instance.get_property(df)||{};if((t.send_event||!("send_event"in t))&&(!(e in s)||!s[e].includes(n))){var o,l,c,u,d,h,p,f,m;Rd(s[e])?s[e].push(n):s[e]=[n],null==(o=this._instance.persistence)||o.register({[df]:s});var g=this.getFeatureFlagDetails(e),v={$feature_flag:e,$feature_flag_response:r,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:i,$feature_flag_evaluated_at:a,$feature_flag_bootstrapped_response:(null==(l=this._instance.config.bootstrap)||null==(l=l.featureFlags)?void 0:l[e])||null,$feature_flag_bootstrapped_payload:(null==(c=this._instance.config.bootstrap)||null==(c=c.featureFlagPayloads)?void 0:c[e])||null,$used_bootstrap_value:!this.vi};Ld(null==g||null==(u=g.metadata)?void 0:u.version)||(v.$feature_flag_version=g.metadata.version);var b,x=null!==(d=null==g||null==(h=g.reason)?void 0:h.description)&&void 0!==d?d:null==g||null==(p=g.reason)?void 0:p.code;x&&(v.$feature_flag_reason=x),null!=g&&null!=(f=g.metadata)&&f.id&&(v.$feature_flag_id=g.metadata.id),Ld(null==g?void 0:g.original_variant)&&Ld(null==g?void 0:g.original_enabled)||(v.$feature_flag_original_response=Ld(g.original_variant)?g.original_enabled:g.original_variant),null!=g&&null!=(m=g.metadata)&&m.original_payload&&(v.$feature_flag_original_payload=null==g||null==(b=g.metadata)?void 0:b.original_payload),this._instance.capture("$feature_flag_called",v)}return r}uv.warn('getFeatureFlag for key "'+e+"\" failed. Feature flags didn't load in time.")}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,t){var r=this._instance.config.token,n={distinct_id:this._instance.get_distinct_id(),token:r};this.pi()&&(n.evaluation_contexts=this.fi()),this._instance._send_request({method:"POST",url:this._instance.requestRouter.endpointFor("flags","/flags/?v=2&config=true"),data:n,compression:this._instance.config.disable_compression?void 0:vg.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:r=>{var n,i=null==(n=r.json)?void 0:n.featureFlagPayloads;t((null==i?void 0:i[e])||void 0)}})}isFeatureEnabled(e,t){if(void 0===t&&(t={}),this.ai||this.getFlags()&&this.getFlags().length>0){var r=this.getFeatureFlag(e,t);return Ld(r)?void 0:!!r}uv.warn('isFeatureEnabled for key "'+e+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(t=>t!==e)}receivedFeatureFlags(e,t){if(this._instance.persistence){this.ai=!0;var r=this.getFlagVariants(),n=this.getFlagPayloads(),i=this.getFlagsWithDetails();!function(e,t,r,n,i){void 0===r&&(r={}),void 0===n&&(n={}),void 0===i&&(i={});var a=(e=>{var t=e.flags;return t?(e.featureFlags=Object.fromEntries(Object.keys(t).map(e=>{var r;return[e,null!==(r=t[e].variant)&&void 0!==r?r:t[e].enabled]})),e.featureFlagPayloads=Object.fromEntries(Object.keys(t).filter(e=>t[e].enabled).filter(e=>{var r;return null==(r=t[e].metadata)?void 0:r.payload}).map(e=>{var r;return[e,null==(r=t[e].metadata)?void 0:r.payload]}))):uv.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),e})(e),s=a.flags,o=a.featureFlags,l=a.featureFlagPayloads;if(o){var c=e.requestId,u=e.evaluatedAt;if(Rd(o)){uv.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var d={};if(o)for(var h=0;h<o.length;h++)d[o[h]]=!0;t&&t.register({[hv]:o,[af]:d})}else{var p=o,f=l,m=s;e.errorsWhileComputingFlags&&(p=kd({},r,p),f=kd({},n,f),m=kd({},i,m)),t&&t.register(kd({[hv]:Object.keys(bv(p)),[af]:p||{},[fv]:f||{},[of]:m||{}},c?{[gv]:c}:{},u?{[vv]:u}:{}))}}}(e,this._instance.persistence,r,n,i),this.wi(t)}}override(e,t){void 0===t&&(t=!1),uv.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:t})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return uv.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(!1===e)return this._instance.persistence.unregister(pv),this._instance.persistence.unregister(mv),this.wi(),dv.info("All overrides cleared");if(e&&"object"==typeof e&&("flags"in e||"payloads"in e)){var t,r=e;if(this.oi=Boolean(null!==(t=r.suppressWarning)&&void 0!==t&&t),"flags"in r)if(!1===r.flags)this._instance.persistence.unregister(pv),dv.info("Flag overrides cleared");else if(r.flags){if(Rd(r.flags)){for(var n={},i=0;i<r.flags.length;i++)n[r.flags[i]]=!0;this._instance.persistence.register({[pv]:n})}else this._instance.persistence.register({[pv]:r.flags});dv.info("Flag overrides set",{flags:r.flags})}return"payloads"in r&&(!1===r.payloads?(this._instance.persistence.unregister(mv),dv.info("Payload overrides cleared")):r.payloads&&(this._instance.persistence.register({[mv]:r.payloads}),dv.info("Payload overrides set",{payloads:r.payloads}))),void this.wi()}this.wi()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.ai){var{flags:t,flagVariants:r}=this.xi();e(t,r)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,t,r){var n,i=(this._instance.get_property(sf)||[]).find(t=>t.flagKey===e),a={["$feature_enrollment/"+e]:t},s={$feature_flag:e,$feature_enrollment:t,$set:a};i&&(s.$early_access_feature_name=i.name),r&&(s.$feature_enrollment_stage=r),this._instance.capture("$feature_enrollment_update",s),this.setPersonPropertiesForFlags(a,!1);var o=kd({},this.getFlagVariants(),{[e]:t});null==(n=this._instance.persistence)||n.register({[hv]:Object.keys(bv(o)),[af]:o}),this.wi()}getEarlyAccessFeatures(e,t,r){void 0===t&&(t=!1);var n=this._instance.get_property(sf),i=r?"&"+r.map(e=>"stage="+e).join("&"):"";if(n&&!t)return e(n);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+i),method:"GET",callback:t=>{var r,n;if(t.json){var i=t.json.earlyAccessFeatures;return null==(r=this._instance.persistence)||r.unregister(sf),null==(n=this._instance.persistence)||n.register({[sf]:i}),e(i)}}})}xi(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter(e=>t[e]),flagVariants:Object.keys(t).filter(e=>t[e]).reduce((e,r)=>(e[r]=t[r],e),{})}}wi(e){var{flags:t,flagVariants:r}=this.xi();this.featureFlagEventHandlers.forEach(n=>n(t,r,{errorsLoading:e}))}setPersonPropertiesForFlags(e,t){void 0===t&&(t=!0);var r=this._instance.get_property(lf)||{};this._instance.register({[lf]:kd({},r,e)}),t&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(lf)}setGroupPropertiesForFlags(e,t){void 0===t&&(t=!0);var r=this._instance.get_property(cf)||{};0!==Object.keys(r).length&&Object.keys(r).forEach(t=>{r[t]=kd({},r[t],e[t]),delete e[t]}),this._instance.register({[cf]:kd({},r,e)}),t&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var t=this._instance.get_property(cf)||{};this._instance.register({[cf]:kd({},t,{[e]:{}})})}else this._instance.unregister(cf)}reset(){this.ai=!1,this.li=!1,this.ui=!1,this.hi=!1,this.di=!1,this.vi=!1,this.$anon_distinct_id=void 0,this.yi(),this.oi=!1}}var wv=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class _v{constructor(e,t){var r,n;this.R=e,this.props={},this.Ei=!1,this.$i=(n="",(r=e).token&&(n=r.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),r.persistence_name?"ph_"+r.persistence_name:"ph_"+n+"_posthog"),this.Y=this.Si(e),this.load(),e.debug&&Sp.info("Persistence loaded",e.persistence,kd({},this.props)),this.update_config(e,e,t),this.save()}isDisabled(){return!!this.ki}Si(e){-1===wv.indexOf(e.persistence.toLowerCase())&&(Sp.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t=function(e){void 0===e&&(e=[]);var t=[...Nm,...e];return kd({},km,{W:function(e){try{var t={};try{t=wm.W(e)||{}}catch(n){}var r=Ap(t,JSON.parse(km.q(e)||"{}"));return km.G(e,r),r}catch(n){}return null},G:function(e,r,n,i,a,s){try{km.G(e,r,void 0,void 0,s);var o={};t.forEach(e=>{r[e]&&(o[e]=r[e])}),Object.keys(o).length&&wm.G(e,o,n,i,a,s)}catch(l){km.B(l)}},V:function(e,t){try{null==od||od.localStorage.removeItem(e),wm.V(e,t)}catch(ym){km.B(ym)}}})}(e.cookie_persisted_properties||[]),r=e.persistence.toLowerCase();return"localstorage"===r&&km.H()?km:"localstorage+cookie"===r&&t.H()?t:"sessionstorage"===r&&Em.H()?Em:"memory"===r?Sm:"cookie"===r?wm:t.H()?t:wm}properties(){var e={};return Tp(this.props,function(t,r){if(r===af&&Md(t))for(var n=Object.keys(t),i=0;i<n.length;i++)e["$feature/"+n[i]]=t[n[i]];else s=r,o=!1,(Hd(a=wf)?o:dd&&a.indexOf===dd?-1!=a.indexOf(s):(Tp(a,function(e){if(o||(o=e===s))return Dp}),o))||(e[r]=t);var a,s,o}),e}load(){if(!this.ki){var e=this.Y.W(this.$i);e&&(this.props=Ap({},e))}}save(){this.ki||this.Y.G(this.$i,this.props,this.Pi,this.Ti,this.Ii,this.R.debug)}remove(){this.Y.V(this.$i,!1),this.Y.V(this.$i,!0)}clear(){this.remove(),this.props={}}register_once(e,t,r){if(Md(e)){Ld(t)&&(t="None"),this.Pi=Ld(r)?this.Ci:r;var n=!1;if(Tp(e,(e,r)=>{this.props.hasOwnProperty(r)&&this.props[r]!==t||(this.props[r]=e,n=!0)}),n)return this.save(),!0}return!1}register(e,t){if(Md(e)){this.Pi=Ld(t)?this.Ci:t;var r=!1;if(Tp(e,(t,n)=>{e.hasOwnProperty(n)&&this.props[n]!==t&&(this.props[n]=t,r=!0)}),r)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Ei){var e=tg(this.R.custom_campaign_params,this.R.mask_personal_data_properties,this.R.custom_personal_data_properties);Od(Op(e))||this.register(e),this.Ei=!0}}update_search_keyword(){var e;this.register((e=null==pd?void 0:pd.referrer)?ng(e):{})}update_referrer_info(){var e;this.register_once({$referrer:ag(),$referring_domain:null!=pd&&pd.referrer&&(null==(e=em(pd.referrer))?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[mf]||this.props[gf]||this.register_once({[vf]:sg(this.R.mask_personal_data_properties,this.R.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};Tp([gf,mf],t=>{var r=this.props[t];r&&Tp(r,function(t,r){e["$initial_"+Dd(r)]=t})});var t,r,n=this.props[vf];if(n){var i=(t=og(n),r={},Tp(t,function(e,t){r["$initial_"+Dd(t)]=e}),r);Ap(e,i)}return e}safe_merge(e){return Tp(this.props,function(t,r){r in e||(e[r]=t)}),e}update_config(e,t,r){if(this.Ci=this.Pi=e.cookie_expiration,this.set_disabled(e.disable_persistence||!!r),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence||!((e,t)=>{if(e.length!==t.length)return!1;var r=[...e].sort(),n=[...t].sort();return r.every((e,t)=>e===n[t])})(e.cookie_persisted_properties||[],t.cookie_persisted_properties||[])){var n=this.Si(e),i=this.props;this.clear(),this.Y=n,this.props=i,this.save()}}set_disabled(e){this.ki=e,this.ki?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ti&&(this.Ti=e,this.remove(),this.save())}set_secure(e){e!==this.Ii&&(this.Ii=e,this.remove(),this.save())}set_event_timer(e,t){var r=this.props[Vp]||{};r[e]=t,this.props[Vp]=r,this.save()}remove_event_timer(e){var t=(this.props[Vp]||{})[e];return Ld(t)||(delete this.props[Vp][e],this.save()),t}get_property(e){return this.props[e]}set_property(e,t){this.props[e]=t,this.save()}}var kv=Cp("[Product Tours]"),Nv="ph_product_tours";class jv{constructor(e){this.Ri=null,this.Fi=null,this._instance=e}onRemoteConfig(e){this._instance.persistence&&this._instance.persistence.register({[Zp]:!(null==e||!e.productTours)}),this.loadIfEnabled()}loadIfEnabled(){var e,t;this.Ri||(e=this._instance).config.disable_product_tours||null==(t=e.persistence)||!t.get_property(Zp)||this.it(()=>this.Mi())}it(e){var t,r;null!=(t=xd.__PosthogExtensions__)&&t.generateProductTours?e():null==(r=xd.__PosthogExtensions__)||null==r.loadExternalDependency||r.loadExternalDependency(this._instance,"product-tours",t=>{t?kv.error("Could not load product tours script",t):e()})}Mi(){var e;!this.Ri&&null!=(e=xd.__PosthogExtensions__)&&e.generateProductTours&&(this.Ri=xd.__PosthogExtensions__.generateProductTours(this._instance,!0))}getProductTours(e,t){if(void 0===t&&(t=!1),!Rd(this.Fi)||t){var r=this._instance.persistence;if(r){var n=r.props[Nv];if(Rd(n)&&!t)return this.Fi=n,void e(n,{isLoaded:!0})}this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/product_tours/?token="+this._instance.config.token),method:"GET",callback:t=>{var n=t.statusCode;if(200!==n||!t.json){var i="Product Tours API could not be loaded, status: "+n;return kv.error(i),void e([],{isLoaded:!1,error:i})}var a=Rd(t.json.product_tours)?t.json.product_tours:[];this.Fi=a,r&&r.register({[Nv]:a}),e(a,{isLoaded:!0})}})}else e(this.Fi,{isLoaded:!0})}getActiveProductTours(e){Ud(this.Ri)?e([],{isLoaded:!1,error:"Product tours not loaded"}):this.Ri.getActiveProductTours(e)}showProductTour(e){var t;null==(t=this.Ri)||t.showTourById(e)}previewTour(e){this.Ri?this.Ri.previewTour(e):this.it(()=>{var t;this.Mi(),null==(t=this.Ri)||t.previewTour(e)})}dismissProductTour(){var e;null==(e=this.Ri)||e.dismissTour("user_clicked_skip")}nextStep(){var e;null==(e=this.Ri)||e.nextStep()}previousStep(){var e;null==(e=this.Ri)||e.previousStep()}clearCache(){var e;this.Fi=null,null==(e=this._instance.persistence)||e.unregister(Nv)}resetTour(e){var t;null==(t=this.Ri)||t.resetTour(e)}resetAllTours(){var e;null==(e=this.Ri)||e.resetAllTours()}cancelPendingTour(e){var t;null==(t=this.Ri)||t.cancelPendingTour(e)}}var Sv=function(e){return e.Activation="events",e.Cancellation="cancelEvents",e}({});!function(e){e.Button="button",e.Tab="tab",e.Selector="selector"}({}),function(e){e.TopLeft="top_left",e.TopRight="top_right",e.TopCenter="top_center",e.MiddleLeft="middle_left",e.MiddleRight="middle_right",e.MiddleCenter="middle_center",e.Left="left",e.Center="center",e.Right="right",e.NextToTrigger="next_to_trigger"}({}),function(e){e.Top="top",e.Left="left",e.Right="right",e.Bottom="bottom"}({});var Cv=function(e){return e.Popover="popover",e.API="api",e.Widget="widget",e.ExternalSurvey="external_survey",e}({});!function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}({}),function(e){e.NextQuestion="next_question",e.End="end",e.ResponseBased="response_based",e.SpecificQuestion="specific_question"}({}),function(e){e.Once="once",e.Recurring="recurring",e.Always="always"}({});var Ev=function(e){return e.SHOWN="survey shown",e.DISMISSED="survey dismissed",e.SENT="survey sent",e.ABANDONED="survey abandoned",e}({}),$v=function(e){return e.SURVEY_ID="$survey_id",e.SURVEY_NAME="$survey_name",e.SURVEY_RESPONSE="$survey_response",e.SURVEY_ITERATION="$survey_iteration",e.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",e.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",e.SURVEY_SUBMISSION_ID="$survey_submission_id",e.SURVEY_QUESTIONS="$survey_questions",e.SURVEY_COMPLETED="$survey_completed",e.PRODUCT_TOUR_ID="$product_tour_id",e.SURVEY_LAST_SEEN_DATE="$survey_last_seen_date",e}({}),Dv=function(e){return e.Popover="popover",e.Inline="inline",e}({}),Pv=Cp("[Surveys]"),Tv="seenSurvey_",Av=(e,t)=>{var r="$survey_"+t+"/"+e.id;return e.current_iteration&&e.current_iteration>0&&(r="$survey_"+t+"/"+e.id+"/"+e.current_iteration),r},Fv=e=>{return n=""+(t=Tv)+(r=e).id,r.current_iteration&&r.current_iteration>0&&(n=""+t+r.id+"_"+r.current_iteration),n;var t,r,n},Rv=[Cv.Popover,Cv.Widget,Cv.API],Iv={ignoreConditions:!1,ignoreDelay:!1,displayType:Dv.Popover};class Mv{constructor(){this.Oi={},this.Oi={}}on(e,t){return this.Oi[e]||(this.Oi[e]=[]),this.Oi[e].push(t),()=>{this.Oi[e]=this.Oi[e].filter(e=>e!==t)}}emit(e,t){for(var r of this.Oi[e]||[])r(t);for(var n of this.Oi["*"]||[])n(e,t)}}function Ov(e,t,r){if(Ud(e))return!1;switch(r){case"exact":return e===t;case"contains":var n=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/_/g,".").replace(/%/g,".*");return new RegExp(n,"i").test(e);case"regex":try{return new RegExp(t).test(e)}catch(i){return!1}default:return!1}}class Lv{constructor(e){this.Ai=new Mv,this.Di=(e,t)=>this.ji(e,t)&&this.Li(e,t)&&this.Ni(e,t)&&this.Ui(e,t),this.ji=(e,t)=>null==t||!t.event||(null==e?void 0:e.event)===(null==t?void 0:t.event),this._instance=e,this.zi=new Set,this.Hi=new Set}init(){var e,t;Ld(null==(e=this._instance)?void 0:e.Bi)||(null==(t=this._instance)||t.Bi((e,t)=>{this.on(e,t)}))}register(e){var t,r;if(!Ld(null==(t=this._instance)?void 0:t.Bi)&&(e.forEach(e=>{var t,r;null==(t=this.Hi)||t.add(e),null==(r=e.steps)||r.forEach(e=>{var t;null==(t=this.zi)||t.add((null==e?void 0:e.event)||"")})}),null!=(r=this._instance)&&r.autocapture)){var n,i=new Set;e.forEach(e=>{var t;null==(t=e.steps)||t.forEach(e=>{null!=e&&e.selector&&i.add(null==e?void 0:e.selector)})}),null==(n=this._instance)||n.autocapture.setElementSelectors(i)}}on(e,t){var r;null!=t&&0!=e.length&&(this.zi.has(e)||this.zi.has(null==t?void 0:t.event))&&this.Hi&&(null==(r=this.Hi)?void 0:r.size)>0&&this.Hi.forEach(e=>{this.qi(t,e)&&this.Ai.emit("actionCaptured",e.name)})}Wi(e){this.onAction("actionCaptured",t=>e(t))}qi(e,t){if(null==(null==t?void 0:t.steps))return!1;for(var r of t.steps)if(this.Di(e,r))return!0;return!1}onAction(e,t){return this.Ai.on(e,t)}Li(e,t){if(null!=t&&t.url){var r,n=null==e||null==(r=e.properties)?void 0:r.$current_url;if(!n||"string"!=typeof n)return!1;if(!Ov(n,t.url,t.url_matching||"contains"))return!1}return!0}Ni(e,t){return!!this.Gi(e,t)&&!!this.Vi(e,t)&&!!this.Ji(e,t)}Gi(e,t){var r;if(null==t||!t.href)return!0;var n=this.Ki(e);if(n.length>0)return n.some(e=>Ov(e.href,t.href,t.href_matching||"exact"));var i,a=(null==e||null==(r=e.properties)?void 0:r.$elements_chain)||"";return!!a&&Ov((i=a.match(/(?::|")href="(.*?)"/))?i[1]:"",t.href,t.href_matching||"exact")}Vi(e,t){var r;if(null==t||!t.text)return!0;var n=this.Ki(e);if(n.length>0)return n.some(e=>Ov(e.text,t.text,t.text_matching||"exact")||Ov(e.$el_text,t.text,t.text_matching||"exact"));var i,a,s,o=(null==e||null==(r=e.properties)?void 0:r.$elements_chain)||"";return!!o&&(i=function(e){for(var t,r=[],n=/(?::|")text="(.*?)"/g;!Ud(t=n.exec(e));)r.includes(t[1])||r.push(t[1]);return r}(o),a=t.text,s=t.text_matching||"exact",i.some(e=>Ov(e,a,s)))}Ji(e,t){var r,n;if(null==t||!t.selector)return!0;var i=null==e||null==(r=e.properties)?void 0:r.$element_selectors;if(null!=i&&i.includes(t.selector))return!0;var a=(null==e||null==(n=e.properties)?void 0:n.$elements_chain)||"";if(t.selector_regex&&a)try{return new RegExp(t.selector_regex).test(a)}catch(s){return!1}return!1}Ki(e){var t;return null==(null==e||null==(t=e.properties)?void 0:t.$elements)?[]:null==e?void 0:e.properties.$elements}Ui(e,t){return null==t||!t.properties||0===t.properties.length||ov(t.properties.reduce((e,t)=>{var r=Rd(t.value)?t.value.map(String):null!=t.value?[String(t.value)]:[];return e[t.key]={values:r,operator:t.operator||"exact"},e},{}),null==e?void 0:e.properties)}}class zv{constructor(e){this._instance=e,this.Yi=new Map,this.Xi=new Map,this.Qi=new Map}Zi(e,t){return!!e&&ov(e.propertyFilters,null==t?void 0:t.properties)}te(e,t){var r=new Map;return e.forEach(e=>{var n;null==(n=e.conditions)||null==(n=n[t])||null==(n=n.values)||n.forEach(t=>{if(null!=t&&t.name){var n=r.get(t.name)||[];n.push(e.id),r.set(t.name,n)}})}),r}ie(e,t,r){var n=(r===Sv.Activation?this.Yi:this.Xi).get(e),i=[];return this.ee(e=>{i=e.filter(e=>null==n?void 0:n.includes(e.id))}),i.filter(n=>{var i,a=null==(i=n.conditions)||null==(i=i[r])||null==(i=i.values)?void 0:i.find(t=>t.name===e);return this.Zi(a,t)})}register(e){var t;Ld(null==(t=this._instance)?void 0:t.Bi)||(this.re(e),this.se(e))}se(e){var t=e.filter(e=>{var t,r;return(null==(t=e.conditions)?void 0:t.actions)&&(null==(r=e.conditions)||null==(r=r.actions)||null==(r=r.values)?void 0:r.length)>0});0!==t.length&&(null==this.ne&&(this.ne=new Lv(this._instance),this.ne.init(),this.ne.Wi(e=>{this.onAction(e)})),t.forEach(e=>{var t,r,n,i,a;e.conditions&&null!=(t=e.conditions)&&t.actions&&null!=(r=e.conditions)&&null!=(r=r.actions)&&r.values&&(null==(n=e.conditions)||null==(n=n.actions)||null==(n=n.values)?void 0:n.length)>0&&(null==(i=this.ne)||i.register(e.conditions.actions.values),null==(a=e.conditions)||null==(a=a.actions)||null==(a=a.values)||a.forEach(t=>{if(t&&t.name){var r=this.Qi.get(t.name);r&&r.push(e.id),this.Qi.set(t.name,r||[e.id])}}))}))}re(e){var t,r=e.filter(e=>{var t,r;return(null==(t=e.conditions)?void 0:t.events)&&(null==(r=e.conditions)||null==(r=r.events)||null==(r=r.values)?void 0:r.length)>0}),n=e.filter(e=>{var t,r;return(null==(t=e.conditions)?void 0:t.cancelEvents)&&(null==(r=e.conditions)||null==(r=r.cancelEvents)||null==(r=r.values)?void 0:r.length)>0});0===r.length&&0===n.length||(null==(t=this._instance)||t.Bi((e,t)=>{this.onEvent(e,t)}),this.Yi=this.te(e,Sv.Activation),this.Xi=this.te(e,Sv.Cancellation))}onEvent(e,t){var r,n=this.oe(),i=this.ae(),a=this.le(),s=(null==(r=this._instance)||null==(r=r.persistence)?void 0:r.props[i])||[];if(a===e&&t&&s.length>0){var o,l;n.info("event matched, removing item from activated items",{event:e,eventPayload:t,existingActivatedItems:s});var c=(null==t||null==(o=t.properties)?void 0:o.$survey_id)||(null==t||null==(l=t.properties)?void 0:l.$product_tour_id);if(c){var u=s.indexOf(c);u>=0&&(s.splice(u,1),this.ue(s))}}else{if(this.Xi.has(e)){var d=this.ie(e,t,Sv.Cancellation);d.length>0&&(n.info("cancel event matched, cancelling items",{event:e,itemsToCancel:d.map(e=>e.id)}),d.forEach(e=>{var t=s.indexOf(e.id);t>=0&&s.splice(t,1),this.he(e.id)}),this.ue(s))}if(this.Yi.has(e)){n.info("event name matched",{event:e,eventPayload:t,items:this.Yi.get(e)});var h=this.ie(e,t,Sv.Activation);this.ue(s.concat(h.map(e=>e.id)||[]))}}}onAction(e){var t,r=this.ae(),n=(null==(t=this._instance)||null==(t=t.persistence)?void 0:t.props[r])||[];this.Qi.has(e)&&this.ue(n.concat(this.Qi.get(e)||[]))}ue(e){var t,r=this.oe(),n=this.ae(),i=[...new Set(e)].filter(e=>!this.de(e));r.info("updating activated items",{activatedItems:i}),null==(t=this._instance)||null==(t=t.persistence)||t.register({[n]:i})}getActivatedIds(){var e,t=this.ae();return(null==(e=this._instance)||null==(e=e.persistence)?void 0:e.props[t])||[]}getEventToItemsMap(){return this.Yi}ve(){return this.ne}}class Bv extends zv{constructor(e){super(e)}ae(){return"$surveys_activated"}le(){return Ev.SHOWN}ee(e){var t;null==(t=this._instance)||t.getSurveys(e)}he(e){var t;null==(t=this._instance)||t.cancelPendingSurvey(e)}oe(){return Pv}de(){return!1}getSurveys(){return this.getActivatedIds()}getEventToSurveys(){return this.getEventToItemsMap()}}class Hv{constructor(e){this.ce=void 0,this._surveyManager=null,this.fe=!1,this.pe=[],this.ge=null,this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){if(!this._instance.config.disable_surveys){var t=e.surveys;if(Ud(t))return Pv.warn("Flags not loaded yet. Not loading surveys.");var r=Rd(t);this.ce=r?t.length>0:t,Pv.info("flags response received, isSurveysEnabled: "+this.ce),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],t=0;t<localStorage.length;t++){var r=localStorage.key(t);(null!=r&&r.startsWith(Tv)||null!=r&&r.startsWith("inProgressSurvey_"))&&e.push(r)}e.forEach(e=>localStorage.removeItem(e))}loadIfEnabled(){if(!this._surveyManager)if(this.fe)Pv.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)Pv.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())Pv.info("Not loading surveys in cookieless mode without consent.");else{var e=null==xd?void 0:xd.__PosthogExtensions__;if(e){if(!Ld(this.ce)||this._instance.config.advanced_enable_surveys){var t=this.ce||this._instance.config.advanced_enable_surveys;this.fe=!0;try{var r=e.generateSurveys;if(r)return void this._e(r,t);var n=e.loadExternalDependency;if(!n)return void this.me("PostHog loadExternalDependency extension not found.");n(this._instance,"surveys",r=>{r||!e.generateSurveys?this.me("Could not load surveys script",r):this._e(e.generateSurveys,t)})}catch(i){throw this.me("Error initializing surveys",i),i}finally{this.fe=!1}}}else Pv.error("PostHog Extensions not found.")}}_e(e,t){this._surveyManager=e(this._instance,t),this._surveyEventReceiver=new Bv(this._instance),Pv.info("Surveys loaded successfully"),this.ye({isLoaded:!0})}me(e,t){Pv.error(e,t),this.ye({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.pe.push(e),this._surveyManager&&this.ye({isLoaded:!0}),()=>{this.pe=this.pe.filter(t=>t!==e)}}getSurveys(e,t){if(void 0===t&&(t=!1),this._instance.config.disable_surveys)return Pv.info("Disabled. Not loading surveys."),e([]);var r,n=this._instance.get_property(uf);if(n&&!t)return e(n,{isLoaded:!0});"undefined"!=typeof Promise&&this.ge?this.ge.then(t=>{var{surveys:r,context:n}=t;return e(r,n)}):("undefined"!=typeof Promise&&(this.ge=new Promise(e=>{r=e})),this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:t=>{var n;this.ge=null;var i=t.statusCode;if(200!==i||!t.json){var a="Surveys API could not be loaded, status: "+i;Pv.error(a);var s={isLoaded:!1,error:a};return e([],s),void(null==r||r({surveys:[],context:s}))}var o,l=t.json.surveys||[],c=l.filter(e=>{return!(!(t=e).start_date||t.end_date)&&(function(e){var t;return!(null==(t=e.conditions)||null==(t=t.events)||null==(t=t.values)||!t.length)}(e)||function(e){var t;return!(null==(t=e.conditions)||null==(t=t.actions)||null==(t=t.values)||!t.length)}(e));var t});c.length>0&&(null==(o=this._surveyEventReceiver)||o.register(c)),null==(n=this._instance.persistence)||n.register({[uf]:l});var u={isLoaded:!0};e(l,u),null==r||r({surveys:l,context:u})}}))}ye(e){for(var t of this.pe)try{if(!e.isLoaded)return t([],e);this.getSurveys(t)}catch(r){Pv.error("Error in survey callback",r)}}getActiveMatchingSurveys(e,t){if(void 0===t&&(t=!1),!Ud(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(e,t);Pv.warn("init was not called")}be(e){var t=null;return this.getSurveys(r=>{var n;t=null!==(n=r.find(t=>t.id===e))&&void 0!==n?n:null}),t}we(e){if(Ud(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var t="string"==typeof e?this.be(e):e;return t?this._surveyManager.checkSurveyEligibility(t):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(Ud(this._surveyManager))return Pv.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var t=this.we(e);return{visible:t.eligible,disabledReason:t.reason}}canRenderSurveyAsync(e,t){return Ud(this._surveyManager)?(Pv.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(r=>{this.getSurveys(t=>{var n,i=null!==(n=t.find(t=>t.id===e))&&void 0!==n?n:null;if(i){var a=this.we(i);r({visible:a.eligible,disabledReason:a.reason})}else r({visible:!1,disabledReason:"Survey not found"})},t)})}renderSurvey(e,t,r){var n;if(Ud(this._surveyManager))Pv.warn("init was not called");else{var i="string"==typeof e?this.be(e):e;if(null!=i&&i.id)if(Rv.includes(i.type)){var a=null==pd?void 0:pd.querySelector(t);if(a)return null!=(n=i.appearance)&&n.surveyPopupDelaySeconds?(Pv.info("Rendering survey "+i.id+" with delay of "+i.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout(()=>{var e,t;Pv.info("Rendering survey "+i.id+" with delay of "+(null==(e=i.appearance)?void 0:e.surveyPopupDelaySeconds)+" seconds"),null==(t=this._surveyManager)||t.renderSurvey(i,a,r),Pv.info("Survey "+i.id+" rendered")},1e3*i.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(i,a,r);Pv.warn("Survey element not found")}else Pv.warn("Surveys of type "+i.type+" cannot be rendered in the app");else Pv.warn("Survey not found")}}displaySurvey(e,t){var r;if(Ud(this._surveyManager))Pv.warn("init was not called");else{var n=this.be(e);if(n){var i=n;if(null!=(r=n.appearance)&&r.surveyPopupDelaySeconds&&t.ignoreDelay&&(i=kd({},n,{appearance:kd({},n.appearance,{surveyPopupDelaySeconds:0})})),t.displayType!==Dv.Popover&&t.initialResponses&&Pv.warn("initialResponses is only supported for popover surveys. prefill will not be applied."),!1===t.ignoreConditions){var a=this.canRenderSurvey(n);if(!a.visible)return void Pv.warn("Survey is not eligible to be displayed: ",a.disabledReason)}t.displayType!==Dv.Inline?this._surveyManager.handlePopoverSurvey(i,t):this.renderSurvey(i,t.selector,t.properties)}else Pv.warn("Survey not found")}}cancelPendingSurvey(e){Ud(this._surveyManager)?Pv.warn("init was not called"):this._surveyManager.cancelSurvey(e)}handlePageUnload(){var e;null==(e=this._surveyManager)||e.handlePageUnload()}}var Uv=Cp("[Conversations]");class qv{constructor(e){this.xe=void 0,this._conversationsManager=null,this.Ee=!1,this.$e=null,this._instance=e}onRemoteConfig(e){if(!this._instance.config.disable_conversations){var t=e.conversations;Ud(t)||(Kd(t)?this.xe=t:(this.xe=t.enabled,this.$e=t),this.loadIfEnabled())}}reset(){var e;null==(e=this._conversationsManager)||e.reset(),this._conversationsManager=null,this.xe=void 0,this.$e=null}loadIfEnabled(){if(!this._conversationsManager&&!this.Ee&&!(this._instance.config.disable_conversations||this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())){var e=null==xd?void 0:xd.__PosthogExtensions__;if(e&&!Ld(this.xe)&&this.xe)if(this.$e&&this.$e.token){this.Ee=!0;try{var t=e.initConversations;if(t)return this.Se(t),void(this.Ee=!1);var r=e.loadExternalDependency;if(!r)return void this.ke("PostHog loadExternalDependency extension not found.");r(this._instance,"conversations",t=>{t||!e.initConversations?this.ke("Could not load conversations script",t):this.Se(e.initConversations),this.Ee=!1})}catch(n){this.ke("Error initializing conversations",n),this.Ee=!1}}else Uv.error("Conversations enabled but missing token in remote config.")}}Se(e){if(this.$e)try{this._conversationsManager=e(this.$e,this._instance),Uv.info("Conversations loaded successfully")}catch(t){this.ke("Error completing conversations initialization",t)}else Uv.error("Cannot complete initialization: remote config is null")}ke(e,t){Uv.error(e,t),this._conversationsManager=null,this.Ee=!1}show(){this._conversationsManager?this._conversationsManager.show():Uv.warn("Conversations not loaded yet.")}hide(){this._conversationsManager&&this._conversationsManager.hide()}isAvailable(){return!0===this.xe&&!Hd(this._conversationsManager)}isVisible(){var e,t;return null!==(e=null==(t=this._conversationsManager)?void 0:t.isVisible())&&void 0!==e&&e}sendMessage(e,t,r){var n=this;return _d(function*(){return n._conversationsManager?n._conversationsManager.sendMessage(e,t,r):(Uv.warn("Conversations not available yet."),null)})()}getMessages(e,t){var r=this;return _d(function*(){return r._conversationsManager?r._conversationsManager.getMessages(e,t):(Uv.warn("Conversations not available yet."),null)})()}markAsRead(e){var t=this;return _d(function*(){return t._conversationsManager?t._conversationsManager.markAsRead(e):(Uv.warn("Conversations not available yet."),null)})()}getTickets(e){var t=this;return _d(function*(){return t._conversationsManager?t._conversationsManager.getTickets(e):(Uv.warn("Conversations not available yet."),null)})()}getCurrentTicketId(){var e,t;return null!==(e=null==(t=this._conversationsManager)?void 0:t.getCurrentTicketId())&&void 0!==e?e:null}getWidgetSessionId(){var e,t;return null!==(e=null==(t=this._conversationsManager)?void 0:t.getWidgetSessionId())&&void 0!==e?e:null}}class Vv{constructor(e){var t;this.Pe=!1,this.Te=!1,this._instance=e,this._instance&&null!=(t=this._instance.config.logs)&&t.captureConsoleLogs&&(this.Pe=!0)}onRemoteConfig(e){var t,r=null==(t=e.logs)?void 0:t.captureConsoleLogs;!Ud(r)&&r&&(this.Pe=!0,this.loadIfEnabled())}reset(){}loadIfEnabled(){if(this.Pe&&!this.Te){var e=Cp("[logs]"),t=null==xd?void 0:xd.__PosthogExtensions__;if(t){var r=t.loadExternalDependency;r?r(this._instance,"logs",r=>{var n;r||null==(n=t.logs)||!n.initializeLogs?e.error("Could not load logs script",r):(t.logs.initializeLogs(this._instance),this.Te=!0)}):e.error("PostHog loadExternalDependency extension not found.")}else e.error("PostHog Extensions not found.")}}}var Kv=Cp("[RateLimiter]");class Wv{constructor(e){this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=e=>{var t=e.text;if(t&&t.length)try{(JSON.parse(t).quota_limited||[]).forEach(e=>{Kv.info((e||"events")+" is quota limited."),this.serverLimits[e]=(new Date).getTime()+6e4})}catch(r){return void Kv.warn('could not rate limit - continuing. Error: "'+(null==r?void 0:r.message)+'"',{text:t})}},this.instance=e,this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}get captureEventsPerSecond(){var e;return(null==(e=this.instance.config.rate_limiting)?void 0:e.events_per_second)||10}get captureEventsBurstLimit(){var e;return Math.max((null==(e=this.instance.config.rate_limiting)?void 0:e.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond)}clientRateLimitContext(e){var t,r,n;void 0===e&&(e=!1);var{captureEventsBurstLimit:i,captureEventsPerSecond:a}=this,s=(new Date).getTime(),o=null!==(t=null==(r=this.instance.persistence)?void 0:r.get_property(ff))&&void 0!==t?t:{tokens:i,last:s};o.tokens+=(s-o.last)/1e3*a,o.last=s,o.tokens>i&&(o.tokens=i);var l=o.tokens<1;return l||e||(o.tokens=Math.max(0,o.tokens-1)),!l||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+a+" events per second and "+i+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=l,null==(n=this.instance.persistence)||n.set_property(ff,o),{isRateLimited:l,remainingTokens:o.tokens}}isServerRateLimited(e){var t=this.serverLimits[e||"events"]||!1;return!1!==t&&(new Date).getTime()<t}}var Gv=Cp("[RemoteConfig]");class Yv{constructor(e){this._instance=e}get remoteConfig(){var e;return null==(e=xd._POSTHOG_REMOTE_CONFIG)||null==(e=e[this._instance.config.token])?void 0:e.config}Ie(e){var t,r;null!=(t=xd.__PosthogExtensions__)&&t.loadExternalDependency?null==(r=xd.__PosthogExtensions__)||null==r.loadExternalDependency||r.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(Gv.error("PostHog Extensions not found. Cannot load remote config."),e())}Ce(e){this._instance._send_request({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:t=>{e(t.json)}})}load(){try{if(this.remoteConfig)return Gv.info("Using preloaded remote config",this.remoteConfig),void this.bi(this.remoteConfig);if(this._instance.O())return void Gv.warn("Remote config is disabled. Falling back to local config.");this.Ie(e=>{if(!e)return Gv.info("No config found after loading remote JS config. Falling back to JSON."),void this.Ce(e=>{this.bi(e)});this.bi(e)})}catch(ym){Gv.error("Error loading remote config",ym)}}bi(e){e?this._instance.config.__preview_remote_config?(this._instance.bi(e),!1!==e.hasFeatureFlags&&this._instance.featureFlags.ensureFlagsLoaded()):Gv.info("__preview_remote_config is disabled. Logging config instead",e):Gv.error("Failed to fetch remote config from PostHog.")}}var Qv=3e3;class Xv{constructor(e,t){this.Re=!0,this.Fe=[],this.Me=eh((null==t?void 0:t.flush_interval_ms)||Qv,250,5e3,Sp.createLogger("flush interval"),Qv),this.Oe=e}enqueue(e){this.Fe.push(e),this.Ae||this.De()}unload(){this.je();var e=this.Fe.length>0?this.Le():{},t=Object.values(e);[...t.filter(e=>0===e.url.indexOf("/e")),...t.filter(e=>0!==e.url.indexOf("/e"))].map(e=>{this.Oe(kd({},e,{transport:"sendBeacon"}))})}enable(){this.Re=!1,this.De()}De(){var e=this;this.Re||(this.Ae=setTimeout(()=>{if(this.je(),this.Fe.length>0){var t=this.Le(),r=function(){var r=t[n],i=(new Date).getTime();r.data&&Rd(r.data)&&Tp(r.data,e=>{e.offset=Math.abs(e.timestamp-i),delete e.timestamp}),e.Oe(r)};for(var n in t)r()}},this.Me))}je(){clearTimeout(this.Ae),this.Ae=void 0}Le(){var e={};return Tp(this.Fe,t=>{var r,n=t,i=(n?n.batchKey:null)||n.url;Ld(e[i])&&(e[i]=kd({},n,{data:[]})),null==(r=e[i].data)||r.push(n.data)}),this.Fe=[],e}}var Jv=["retriesPerformedSoFar"];class Zv{constructor(e){this.Ne=!1,this.Ue=3e3,this.Fe=[],this._instance=e,this.Fe=[],this.ze=!0,!Ld(od)&&"onLine"in od.navigator&&(this.ze=od.navigator.onLine,this.He=()=>{this.ze=!0,this.Lt()},this.Be=()=>{this.ze=!1},Hp(od,"online",this.He),Hp(od,"offline",this.Be))}get length(){return this.Fe.length}retriableRequest(e){var{retriesPerformedSoFar:t}=e,r=Nd(e,Jv);Vd(t)&&(r.url=Zg(r.url,{retry_count:t})),this._instance._send_request(kd({},r,{callback:e=>{200!==e.statusCode&&(e.statusCode<400||e.statusCode>=500)&&(null!=t?t:0)<10?this.qe(kd({retriesPerformedSoFar:t},r)):null==r.callback||r.callback(e)}}))}qe(e){var t=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=t+1;var r,n,i,a,s,o=(r=t,n=3e3*Math.pow(2,r),i=n/2,a=Math.min(18e5,n),s=(Math.random()-.5)*(a-i),Math.ceil(a+s)),l=Date.now()+o;this.Fe.push({retryAt:l,requestOptions:e});var c="Enqueued failed request for retry in "+o;navigator.onLine||(c+=" (Browser is offline)"),Sp.warn(c),this.Ne||(this.Ne=!0,this.We())}We(){if(this.Ge&&clearTimeout(this.Ge),0===this.Fe.length)return this.Ne=!1,void(this.Ge=void 0);this.Ge=setTimeout(()=>{this.ze&&this.Fe.length>0&&this.Lt(),this.We()},this.Ue)}Lt(){var e=Date.now(),t=[],r=this.Fe.filter(r=>r.retryAt<e||(t.push(r),!1));if(this.Fe=t,r.length>0)for(var{requestOptions:n}of r)this.retriableRequest(n)}unload(){for(var{requestOptions:e}of(this.Ge&&(clearTimeout(this.Ge),this.Ge=void 0),this.Ne=!1,Ld(od)||(this.He&&(od.removeEventListener("online",this.He),this.He=void 0),this.Be&&(od.removeEventListener("offline",this.Be),this.Be=void 0)),this.Fe))try{this._instance._send_request(kd({},e,{transport:"sendBeacon"}))}catch(ym){Sp.error(ym)}this.Fe=[]}}class eb{constructor(e){this.Ve=()=>{var e,t,r,n;this.Je||(this.Je={});var i=this.scrollElement(),a=this.scrollY(),s=i?Math.max(0,i.scrollHeight-i.clientHeight):0,o=a+((null==i?void 0:i.clientHeight)||0),l=(null==i?void 0:i.scrollHeight)||0;this.Je.lastScrollY=Math.ceil(a),this.Je.maxScrollY=Math.max(a,null!==(e=this.Je.maxScrollY)&&void 0!==e?e:0),this.Je.maxScrollHeight=Math.max(s,null!==(t=this.Je.maxScrollHeight)&&void 0!==t?t:0),this.Je.lastContentY=o,this.Je.maxContentY=Math.max(o,null!==(r=this.Je.maxContentY)&&void 0!==r?r:0),this.Je.maxContentHeight=Math.max(l,null!==(n=this.Je.maxContentHeight)&&void 0!==n?n:0)},this._instance=e}getContext(){return this.Je}resetContext(){var e=this.Je;return setTimeout(this.Ve,0),e}startMeasuringScrollPosition(){Hp(od,"scroll",this.Ve,{capture:!0}),Hp(od,"scrollend",this.Ve,{capture:!0}),Hp(od,"resize",this.Ve)}scrollElement(){if(!this._instance.config.scroll_root_selector)return null==od?void 0:od.document.documentElement;var e=Rd(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var t of e){var r=null==od?void 0:od.document.querySelector(t);if(r)return r}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return od&&(od.scrollY||od.pageYOffset||od.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return od&&(od.scrollX||od.pageXOffset||od.document.documentElement.scrollLeft)||0}}var tb=e=>sg(null==e?void 0:e.config.mask_personal_data_properties,null==e?void 0:e.config.custom_personal_data_properties);class rb{constructor(e,t,r,n){this.Ke=e=>{var t=this.Ye();if(!t||t.sessionId!==e){var r={sessionId:e,props:this.Xe(this._instance)};this.Qe.register({[pf]:r})}},this._instance=e,this.Ze=t,this.Qe=r,this.Xe=n||tb,this.Ze.onSessionId(this.Ke)}Ye(){return this.Qe.props[pf]}getSetOnceProps(){var e,t=null==(e=this.Ye())?void 0:e.props;return t?"r"in t?og(t):{$referring_domain:t.referringDomain,$pathname:t.initialPathName,utm_source:t.utm_source,utm_campaign:t.utm_campaign,utm_medium:t.utm_medium,utm_content:t.utm_content,utm_term:t.utm_term}:{}}getSessionProps(){var e={};return Tp(Op(this.getSetOnceProps()),(t,r)=>{"$current_url"===r&&(r="url"),e["$session_entry_"+Dd(r)]=t}),e}}var nb=Cp("[SessionId]");class ib{on(e,t){return this.tr.on(e,t)}constructor(e,t,r){var n;if(this.ir=[],this.er=void 0,this.tr=new Mv,this.rr=(e,t)=>!(!Vd(e)||!Vd(t))&&Math.abs(e-t)>this.sessionTimeoutMs,!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if("always"===e.config.cookieless_mode)throw new Error('SessionIdManager cannot be used with cookieless_mode="always"');this.R=e.config,this.Qe=e.persistence,this.sr=void 0,this.nr=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.ar=t||gm,this.lr=r||gm;var i=this.R.persistence_name||this.R.token,a=this.R.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*eh(a,60,36e3,nb.createLogger("session_idle_timeout_seconds"),1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.ur(),this.hr="ph_"+i+"_window_id",this.dr="ph_"+i+"_primary_window_exists",this.vr()){var s=Em.W(this.hr),o=Em.W(this.dr);s&&!o?this.sr=s:Em.V(this.hr),Em.G(this.dr,!0)}if(null!=(n=this.R.bootstrap)&&n.sessionID)try{var l=(()=>{var e=this.R.bootstrap.sessionID.replace(/-/g,"");if(32!==e.length)throw new Error("Not a valid UUID");if("7"!==e[12])throw new Error("Not a UUIDv7");return parseInt(e.substring(0,12),16)})();this.cr(this.R.bootstrap.sessionID,(new Date).getTime(),l)}catch(c){nb.error("Invalid sessionID in bootstrap",c)}this.pr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return Ld(this.ir)&&(this.ir=[]),this.ir.push(e),this.nr&&e(this.nr,this.sr),()=>{this.ir=this.ir.filter(t=>t!==e)}}vr(){return"memory"!==this.R.persistence&&!this.Qe.ki&&Em.H()}gr(e){e!==this.sr&&(this.sr=e,this.vr()&&Em.G(this.hr,e))}_r(){return this.sr?this.sr:this.vr()?Em.W(this.hr):null}cr(e,t,r){e===this.nr&&t===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=t,this.nr=e,this.Qe.register({[rf]:[t,e,r]}))}mr(){var e=this.Qe.props[rf];return Rd(e)&&2===e.length&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.cr(null,null,null)}destroy(){clearTimeout(this.yr),this.yr=void 0,this.er&&od&&(od.removeEventListener("beforeunload",this.er,{capture:!1}),this.er=void 0),this.ir=[]}pr(){this.er=()=>{this.vr()&&Em.V(this.dr)},Hp(od,"beforeunload",this.er,{capture:!1})}checkAndGetSessionAndWindowId(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=null),"always"===this.R.cookieless_mode)throw new Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var r=t||(new Date).getTime(),[n,i,a]=this.mr(),s=this._r(),o=Vd(a)&&Math.abs(r-a)>864e5,l=!1,c=!i,u=!c&&!e&&this.rr(r,n);c||u||o?(i=this.ar(),s=this.lr(),nb.info("new session ID generated",{sessionId:i,windowId:s,changeReason:{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:o}}),a=r,l=!0):s||(s=this.lr(),l=!0);var d=Vd(n)&&e&&!o?n:r,h=Vd(a)?a:(new Date).getTime();return this.gr(s),this.cr(i,d,h),e||this.ur(),l&&this.ir.forEach(e=>e(i,s,l?{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:o}:void 0)),{sessionId:i,windowId:s,sessionStartTimestamp:h,changeReason:l?{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:o}:void 0,lastActivityTimestamp:n}}ur(){clearTimeout(this.yr),this.yr=setTimeout(()=>{var[e]=this.mr();if(this.rr((new Date).getTime(),e)){var t=this.nr;this.resetSessionId(),this.tr.emit("forcedIdleReset",{idleSessionId:t})}},1.1*this.sessionTimeoutMs)}}var ab=["$set_once","$set"],sb=Cp("[SiteApps]");class ob{constructor(e){this._instance=e,this.br=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}wr(e,t){if(t){var r=this.globalsForEvent(t);this.br.push(r),this.br.length>1e3&&(this.br=this.br.slice(10))}}get siteAppLoaders(){var e;return null==(e=xd._POSTHOG_REMOTE_CONFIG)||null==(e=e[this._instance.config.token])?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Bi(this.wr.bind(this));this.Er=()=>{e(),this.br=[],this.Er=void 0}}}globalsForEvent(e){var t,r,n,i,a,s,o;if(!e)throw new Error("Event payload is required");var l={},c=this._instance.get_property("$groups")||[],u=this._instance.get_property("$stored_group_properties")||{};for(var[d,h]of Object.entries(u))l[d]={id:c[d],type:d,properties:h};var{$set_once:p,$set:f}=e;return{event:kd({},Nd(e,ab),{properties:kd({},e.properties,f?{$set:kd({},null!==(t=null==(r=e.properties)?void 0:r.$set)&&void 0!==t?t:{},f)}:{},p?{$set_once:kd({},null!==(n=null==(i=e.properties)?void 0:i.$set_once)&&void 0!==n?n:{},p)}:{}),elements_chain:null!==(a=null==(s=e.properties)?void 0:s.$elements_chain)&&void 0!==a?a:"",distinct_id:null==(o=e.properties)?void 0:o.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:l}}setupSiteApp(e){var t=this.apps[e.id],r=()=>{var r;!t.errored&&this.br.length&&(sb.info("Processing "+this.br.length+" events for site app with id "+e.id),this.br.forEach(e=>null==t.processEvent?void 0:t.processEvent(e)),t.processedBuffer=!0),Object.values(this.apps).every(e=>e.processedBuffer||e.errored)&&(null==(r=this.Er)||r.call(this))},n=!1,i=i=>{t.errored=!i,t.loaded=!0,sb.info("Site app with id "+e.id+" "+(i?"loaded":"errored")),n&&r()};try{var{processEvent:a}=e.init({posthog:this._instance,callback:e=>{i(e)}});a&&(t.processEvent=a),n=!0}catch(s){sb.error("Error while initializing PostHog app with config id "+e.id,s),i(!1)}if(n&&t.loaded)try{r()}catch(o){sb.error("Error while processing buffered events PostHog app with config id "+e.id,o),t.errored=!0}}$r(){var e=this.siteAppLoaders||[];for(var t of e)this.apps[t.id]={id:t.id,loaded:!1,errored:!1,processedBuffer:!1};for(var r of e)this.setupSiteApp(r)}Sr(e){if(0!==Object.keys(this.apps).length){var t=this.globalsForEvent(e);for(var r of Object.values(this.apps))try{null==r.processEvent||r.processEvent(t)}catch(n){sb.error("Error while processing event "+e.event+" for site app "+r.id,n)}}}onRemoteConfig(e){var t,r,n,i=this;if(null!=(t=this.siteAppLoaders)&&t.length)return this.isEnabled?(this.$r(),void this._instance.on("eventCaptured",e=>this.Sr(e))):void sb.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if(null==(r=this.Er)||r.call(this),null!=(n=e.siteApps)&&n.length)if(this.isEnabled){var a=function(e){var t;xd["__$$ph_site_app_"+e]=i._instance,null==(t=xd.__PosthogExtensions__)||null==t.loadSiteApp||t.loadSiteApp(i._instance,o,t=>{if(t)return sb.error("Error while initializing PostHog app with config id "+e,t)})};for(var{id:s,url:o}of e.siteApps)a(s)}else sb.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var lb=function(e,t){if(!e)return!1;var r=e.userAgent;if(r&&Sd(r,t))return!0;try{var n=null==e?void 0:e.userAgentData;if(null!=n&&n.brands&&n.brands.some(e=>Sd(null==e?void 0:e.brand,t)))return!0}catch(i){}return!!e.webdriver},cb=function(e){return e.US="us",e.EU="eu",e.CUSTOM="custom",e}({}),ub="i.posthog.com";class db{constructor(e){this.kr={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===e?"https://us.i.posthog.com":e}get flagsApiHost(){var e=this.instance.config.flags_api_host;return e?e.trim().replace(/\/$/,""):this.apiHost}get uiHost(){var e,t=null==(e=this.instance.config.ui_host)?void 0:e.replace(/\/$/,"");return t||(t=this.apiHost.replace("."+ub,".posthog.com")),"https://app.posthog.com"===t?"https://us.posthog.com":t}get region(){return this.kr[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.kr[this.apiHost]=cb.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.kr[this.apiHost]=cb.EU:this.kr[this.apiHost]=cb.CUSTOM),this.kr[this.apiHost]}endpointFor(e,t){if(void 0===t&&(t=""),t&&(t="/"===t[0]?t:"/"+t),"ui"===e)return this.uiHost+t;if("flags"===e)return this.flagsApiHost+t;if(this.region===cb.CUSTOM)return this.apiHost+t;var r=ub+t;switch(e){case"assets":return"https://"+this.region+"-assets."+r;case"api":return"https://"+this.region+"."+r}}}var hb={icontains:(e,t)=>!!od&&t.href.toLowerCase().indexOf(e.toLowerCase())>-1,not_icontains:(e,t)=>!!od&&-1===t.href.toLowerCase().indexOf(e.toLowerCase()),regex:(e,t)=>!!od&&nv(t.href,e),not_regex:(e,t)=>!!od&&!nv(t.href,e),exact:(e,t)=>t.href===e,is_not:(e,t)=>t.href!==e};class pb{constructor(e){var t=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(e){void 0===e&&(e=!1),t.getWebExperiments(e=>{pb.Pr("retrieved web experiments from the server"),t.Tr=new Map,e.forEach(e=>{if(e.feature_flag_key){var r;t.Tr&&(pb.Pr("setting flag key ",e.feature_flag_key," to web experiment ",e),null==(r=t.Tr)||r.set(e.feature_flag_key,e));var n=t._instance.getFeatureFlag(e.feature_flag_key);zd(n)&&e.variants[n]&&t.Ir(e.name,n,e.variants[n].transforms)}else if(e.variants)for(var i in e.variants){var a=e.variants[i];pb.Cr(a)&&t.Ir(e.name,i,a.transforms)}})},e)},this._instance=e,this._instance.onFeatureFlags(e=>{this.onFeatureFlags(e)})}onFeatureFlags(e){if(this._is_bot())pb.Pr("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(Ud(this.Tr))return this.Tr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();pb.Pr("applying feature flags",e),e.forEach(e=>{var t;if(this.Tr&&null!=(t=this.Tr)&&t.has(e)){var r,n=this._instance.getFeatureFlag(e),i=null==(r=this.Tr)?void 0:r.get(e);n&&null!=i&&i.variants[n]&&this.Ir(i.name,n,i.variants[n].transforms)}})}}previewWebExperiment(){var e=pb.getWindowLocation();if(null!=e&&e.search){var t=tm(null==e?void 0:e.search,"__experiment_id"),r=tm(null==e?void 0:e.search,"__experiment_variant");t&&r&&(pb.Pr("previewing web experiments "+t+" && "+r),this.getWebExperiments(e=>{this.Rr(parseInt(t),r,e)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,t,r){if(this._instance.config.disable_web_experiments&&!r)return e([]);var n=this._instance.get_property("$web_experiments");if(n&&!t)return e(n);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:t=>{if(200!==t.statusCode||!t.json)return e([]);var r=t.json.experiments||[];return e(r)}})}Rr(e,t,r){var n=r.filter(t=>t.id===e);n&&n.length>0&&(pb.Pr("Previewing web experiment ["+n[0].name+"] with variant ["+t+"]"),this.Ir(n[0].name,t,n[0].variants[t].transforms))}static Cr(e){return!Ud(e.conditions)&&pb.Fr(e)&&pb.Mr(e)}static Fr(e){var t;if(Ud(e.conditions)||Ud(null==(t=e.conditions)?void 0:t.url))return!0;var r,n,i,a=pb.getWindowLocation();return!!a&&(null==(r=e.conditions)||!r.url||hb[null!==(n=null==(i=e.conditions)?void 0:i.urlMatchType)&&void 0!==n?n:"icontains"](e.conditions.url,a))}static getWindowLocation(){return null==od?void 0:od.location}static Mr(e){var t;if(Ud(e.conditions)||Ud(null==(t=e.conditions)?void 0:t.utm))return!0;var r=tg();if(r.utm_source){var n,i,a,s,o,l,c,u,d=null==(n=e.conditions)||null==(n=n.utm)||!n.utm_campaign||(null==(i=e.conditions)||null==(i=i.utm)?void 0:i.utm_campaign)==r.utm_campaign,h=null==(a=e.conditions)||null==(a=a.utm)||!a.utm_source||(null==(s=e.conditions)||null==(s=s.utm)?void 0:s.utm_source)==r.utm_source,p=null==(o=e.conditions)||null==(o=o.utm)||!o.utm_medium||(null==(l=e.conditions)||null==(l=l.utm)?void 0:l.utm_medium)==r.utm_medium,f=null==(c=e.conditions)||null==(c=c.utm)||!c.utm_term||(null==(u=e.conditions)||null==(u=u.utm)?void 0:u.utm_term)==r.utm_term;return d&&p&&f&&h}return!1}static Pr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Sp.info("[WebExperiments] "+e,r)}Ir(e,t,r){this._is_bot()?pb.Pr("Refusing to render web experiment since the viewer is a likely bot"):"control"!==t?r.forEach(r=>{if(r.selector){var n;pb.Pr("applying transform of variant "+t+" for experiment "+e+" ",r);var i=null==(n=document)?void 0:n.querySelectorAll(r.selector);null==i||i.forEach(e=>{var t=e;r.html&&(t.innerHTML=r.html),r.css&&t.setAttribute("style",r.css)})}}):pb.Pr("Control variants leave the page unmodified.")}_is_bot(){return hd&&this._instance?lb(hd,this._instance.config.custom_blocked_useragents):void 0}}var fb=Cp("[PostHog ExternalIntegrations]"),mb={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class gb{constructor(e){this._instance=e}it(e,t){var r;null==(r=xd.__PosthogExtensions__)||null==r.loadExternalDependency||r.loadExternalDependency(this._instance,e,e=>{if(e)return fb.error("failed to load script",e);t()})}startIfEnabledOrStop(){var e=this,t=function(t){var r,i,a;!n||null!=(r=xd.__PosthogExtensions__)&&null!=(r=r.integrations)&&r[t]||e.it(mb[t],()=>{var r;null==(r=xd.__PosthogExtensions__)||null==(r=r.integrations)||null==(r=r[t])||r.start(e._instance)}),!n&&null!=(i=xd.__PosthogExtensions__)&&null!=(i=i.integrations)&&i[t]&&(null==(a=xd.__PosthogExtensions__)||null==(a=a.integrations)||null==(a=a[t])||a.stop())};for(var[r,n]of Object.entries(null!==(i=this._instance.config.integrations)&&void 0!==i?i:{})){var i;t(r)}}}var vb="[SessionRecording]",bb=Cp(vb);class xb{get started(){var e;return!(null==(e=this.Or)||!e.isStarted)}get status(){return this.Or?this.Or.status:this.Ar&&!this.Dr?"disabled":"lazy_loading"}constructor(e){if(this._forceAllowLocalhostNetworkCapture=!1,this.Ar=!1,this.jr=void 0,this._instance=e,!this._instance.sessionManager)throw bb.error("started without valid sessionManager"),new Error(vb+" started without valid sessionManager. This is a bug.");if("always"===this._instance.config.cookieless_mode)throw new Error(vb+' cannot be used with cookieless_mode="always"')}get Dr(){var e,t=!(null==(e=this._instance.get_property(tf))||!e.enabled),r=!this._instance.config.disable_session_recording,n=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return od&&t&&r&&!n}startIfEnabledOrStop(e){var t;if(!this.Dr||null==(t=this.Or)||!t.isStarted){var r=!Ld(Object.assign)&&!Ld(Array.from);this.Dr&&r?(this.Lr(e),bb.info("starting")):this.stopRecording()}}Lr(e){var t,r,n;this.Dr&&(null!=xd&&null!=(t=xd.__PosthogExtensions__)&&null!=(t=t.rrweb)&&t.record&&null!=(r=xd.__PosthogExtensions__)&&r.initSessionRecording?this.Nr(e):null==(n=xd.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,this.Ur,t=>{if(t)return bb.error("could not load recorder",t);this.Nr(e)}))}stopRecording(){var e,t;null==(e=this.jr)||e.call(this),this.jr=void 0,null==(t=this.Or)||t.stop()}zr(){var e;null==(e=this._instance.persistence)||e.unregister(nf)}Hr(e){if(this._instance.persistence){var t,r,n=this._instance.persistence,i=()=>{var t=!1===e.sessionRecording?void 0:e.sessionRecording,r=null==t?void 0:t.sampleRate,i=Ud(r)?null:parseFloat(r);Ud(i)&&this.zr();var a=null==t?void 0:t.minimumDurationMilliseconds;n.register({[tf]:kd({enabled:!!t},t,{networkPayloadCapture:kd({capturePerformance:e.capturePerformance},null==t?void 0:t.networkPayloadCapture),canvasRecording:{enabled:null==t?void 0:t.recordCanvas,fps:null==t?void 0:t.canvasFps,quality:null==t?void 0:t.canvasQuality},sampleRate:i,minimumDurationMilliseconds:Ld(a)?null:a,endpoint:null==t?void 0:t.endpoint,triggerMatchType:null==t?void 0:t.triggerMatchType,masking:null==t?void 0:t.masking,urlTriggers:null==t?void 0:t.urlTriggers})})};i(),null==(t=this.jr)||t.call(this),this.jr=null==(r=this._instance.sessionManager)?void 0:r.onSessionId(i)}}onRemoteConfig(e){"sessionRecording"in e?!1!==e.sessionRecording?(this.Hr(e),this.Ar=!0,this.startIfEnabledOrStop()):this.Ar=!0:bb.info("skipping remote config with no sessionRecording",e)}log(e,t){var r;void 0===t&&(t="log"),null!=(r=this.Or)&&r.log?this.Or.log(e,t):bb.warn("log called before recorder was ready")}get Ur(){var e,t,r=null==(e=this._instance)||null==(e=e.persistence)?void 0:e.get_property(tf);return(null==r||null==(t=r.scriptConfig)?void 0:t.script)||"lazy-recorder"}Nr(e){var t,r;if(null==(t=xd.__PosthogExtensions__)||!t.initSessionRecording)throw Error("Called on script loaded before session recording is available");this.Or||(this.Or=null==(r=xd.__PosthogExtensions__)?void 0:r.initSessionRecording(this._instance),this.Or._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture),this.Or.start(e)}onRRwebEmit(e){var t;null==(t=this.Or)||null==t.onRRwebEmit||t.onRRwebEmit(e)}overrideLinkedFlag(){var e,t;this.Or||null==(t=this._instance.persistence)||t.register({$replay_override_linked_flag:!0}),null==(e=this.Or)||e.overrideLinkedFlag()}overrideSampling(){var e,t;this.Or||null==(t=this._instance.persistence)||t.register({$replay_override_sampling:!0}),null==(e=this.Or)||e.overrideSampling()}overrideTrigger(e){var t,r;this.Or||null==(r=this._instance.persistence)||r.register({["url"===e?"$replay_override_url_trigger":"$replay_override_event_trigger"]:!0}),null==(t=this.Or)||t.overrideTrigger(e)}get sdkDebugProperties(){var e;return(null==(e=this.Or)?void 0:e.sdkDebugProperties)||{$recording_status:this.status}}tryAddCustomEvent(e,t){var r;return!(null==(r=this.Or)||!r.tryAddCustomEvent(e,t))}}var yb={},wb=()=>{},_b="posthog",kb=!Xg&&-1===(null==bd?void 0:bd.indexOf("MSIE"))&&-1===(null==bd?void 0:bd.indexOf("Mozilla")),Nb=e=>{var t;return kd({api_host:"https://us.i.posthog.com",flags_api_host:null,ui_host:null,token:"",autocapture:!0,cross_subdomain_cookie:zp(null==pd?void 0:pd.location),persistence:"localStorage+cookie",persistence_name:"",cookie_persisted_properties:[],loaded:wb,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageleave:"if_capture_pageview",defaults:null!=e?e:"unset",__preview_deferred_init_extensions:!1,debug:fd&&zd(null==fd?void 0:fd.search)&&-1!==fd.search.indexOf("__posthog_debug=true")||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_conversations:!1,disable_product_tours:!0,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==od||null==(t=od.location)?void 0:t.protocol),ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:e=>{var t="Bad HTTP status: "+e.statusCode+" "+e.text;Sp.error(t)},get_device_id:e=>e,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:Qv},error_tracking:{},_onCapture:wb,__preview_eager_load_replay:!1},(e=>({rageclick:!(e&&e>="2025-11-30")||{content_ignorelist:!0},capture_pageview:!(e&&e>="2025-05-24")||"history_change",session_recording:e&&e>="2025-11-30"?{strictMinimumDuration:!0}:{},external_scripts_inject_target:e&&e>="2026-01-30"?"head":"body"}))(e))},jb=e=>{var t={};Ld(e.process_person)||(t.person_profiles=e.process_person),Ld(e.xhr_headers)||(t.request_headers=e.xhr_headers),Ld(e.cookie_name)||(t.persistence_name=e.cookie_name),Ld(e.disable_cookie)||(t.disable_persistence=e.disable_cookie),Ld(e.store_google)||(t.save_campaign_params=e.store_google),Ld(e.verbose)||(t.debug=e.verbose);var r=Ap({},t,e);return Rd(e.property_blacklist)&&(Ld(e.property_denylist)?r.property_denylist=e.property_blacklist:Rd(e.property_denylist)?r.property_denylist=[...e.property_blacklist,...e.property_denylist]:Sp.error("Invalid value for property_denylist config: "+e.property_denylist)),r};class Sb{constructor(){this.__forceAllowLocalhost=!1}get Br(){return this.__forceAllowLocalhost}set Br(e){Sp.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class Cb{get decideEndpointWasHit(){var e,t;return null!==(e=null==(t=this.featureFlags)?void 0:t.hasLoadedFlags)&&void 0!==e&&e}get flagsEndpointWasHit(){var e,t;return null!==(e=null==(t=this.featureFlags)?void 0:t.hasLoadedFlags)&&void 0!==e&&e}constructor(){this.webPerformance=new Sb,this.qr=!1,this.version=yd.LIB_VERSION,this.Wr=new Mv,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=Nb(),this.SentryIntegration=Hm,this.sentryIntegration=e=>{return t=Bm(this,e),{name:zm,processEvent:e=>t(e)};var t},this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.Gr=!1,this.Vr=null,this.Jr=null,this.Kr=null,this.featureFlags=new yv(this),this.toolbar=new Wm(this),this.scrollManager=new eb(this),this.pageViewManager=new gg(this),this.surveys=new Hv(this),this.conversations=new qv(this),this.logs=new Vv(this),this.experiments=new pb(this),this.exceptions=new cv(this),this.rateLimiter=new Wv(this),this.requestRouter=new db(this),this.consent=new Dm(this),this.externalIntegrations=new gb(this),this.people={set:(e,t,r)=>{var n=zd(e)?{[e]:t}:e;this.setPersonProperties(n),null==r||r({})},set_once:(e,t,r)=>{var n=zd(e)?{[e]:t}:e;this.setPersonProperties(void 0,n),null==r||r({})}},this.on("eventCaptured",e=>Sp.info('send "'+(null==e?void 0:e.event)+'"',e))}init(e,t,r){if(r&&r!==_b){var n,i=null!==(n=yb[r])&&void 0!==n?n:new Cb;return i._init(e,t,r),yb[r]=i,yb[_b][r]=i,i}return this._init(e,t,r)}_init(e,t,r){var n;if(void 0===t&&(t={}),Ld(e)||Bd(e))return Sp.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return console.warn("[PostHog.js]","You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},t.debug=this.Yr(t.debug),this.Xr=t,this.Qr=[],t.person_profiles&&(this.Jr=t.person_profiles),this.set_config(Ap({},Nb(t.defaults),jb(t),{name:r,token:e})),this.config.on_xhr_error&&Sp.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=t.disable_compression?void 0:vg.GZipJS;var i=this.Zr();this.persistence=new _v(this.config,i),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new _v(kd({},this.config,{persistence:"sessionStorage"}),i);var a=kd({},this.persistence.props),s=kd({},this.sessionPersistence.props);this.register({$initialization_time:(new Date).toISOString()}),this.ts=new Xv(e=>this.es(e),this.config.request_queue_config),this.rs=new Zv(this),this.__request_queue=[];var o="always"===this.config.cookieless_mode||"on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut();if(o||(this.sessionManager=new ib(this),this.sessionPropsManager=new rb(this,this.sessionManager,this.persistence)),this.config.__preview_deferred_init_extensions?(Sp.info("Deferring extension initialization to improve startup performance"),setTimeout(()=>{this.ss(o)},0)):(Sp.info("Initializing extensions synchronously"),this.ss(o)),yd.DEBUG=yd.DEBUG||this.config.debug,yd.DEBUG&&Sp.info("Starting in debug mode",{this:this,config:t,thisC:kd({},this.config),p:a,s:s}),void 0!==(null==(n=t.bootstrap)?void 0:n.distinctID)){var l,c,u=this.config.get_device_id(gm()),d=null!=(l=t.bootstrap)&&l.isIdentifiedID?u:t.bootstrap.distinctID;this.persistence.set_property(hf,null!=(c=t.bootstrap)&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:t.bootstrap.distinctID,$device_id:d})}if(this.ns()){var h,p,f=Object.keys((null==(h=t.bootstrap)?void 0:h.featureFlags)||{}).filter(e=>{var r;return!(null==(r=t.bootstrap)||null==(r=r.featureFlags)||!r[e])}).reduce((e,r)=>{var n;return e[r]=(null==(n=t.bootstrap)||null==(n=n.featureFlags)?void 0:n[r])||!1,e},{}),m=Object.keys((null==(p=t.bootstrap)?void 0:p.featureFlagPayloads)||{}).filter(e=>f[e]).reduce((e,r)=>{var n,i;return null!=(n=t.bootstrap)&&null!=(n=n.featureFlagPayloads)&&n[r]&&(e[r]=null==(i=t.bootstrap)||null==(i=i.featureFlagPayloads)?void 0:i[r]),e},{});this.featureFlags.receivedFeatureFlags({featureFlags:f,featureFlagPayloads:m})}if(o)this.register_once({distinct_id:yf,$device_id:null},"");else if(!this.get_distinct_id()){var g=this.config.get_device_id(gm());this.register_once({distinct_id:g,$device_id:g},""),this.persistence.set_property(hf,"anonymous")}return Hp(od,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),t.segment?function(e,t){var r=e.config.segment;if(!r)return t();!function(e,t){var r=e.config.segment;if(!r)return t();var n=r=>{var n=()=>r.anonymousId()||gm();e.config.get_device_id=n,r.id()&&(e.register({distinct_id:r.id(),$device_id:n()}),e.persistence.set_property(hf,"identified")),t()},i=r.user();"then"in i&&Id(i.then)?i.then(n):n(i)}(e,()=>{r.register((e=>{Promise&&Promise.resolve||Lm.warn("This browser does not have Promise support, and can not use the segment integration");var t=(t,r)=>{if(!r)return t;t.event.userId||t.event.anonymousId===e.get_distinct_id()||(Lm.info("No userId set, resetting PostHog"),e.reset()),t.event.userId&&t.event.userId!==e.get_distinct_id()&&(Lm.info("UserId set, identifying with PostHog"),e.identify(t.event.userId));var n=e.calculateEventProperties(r,t.event.properties);return t.event.properties=Object.assign({},n,t.event.properties),t};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:e=>t(e,e.event.event),page:e=>t(e,"$pageview"),identify:e=>t(e,"$identify"),screen:e=>t(e,"$screen")}})(e)).then(()=>{t()})})}(this,()=>this.os()):this.os(),Id(this.config._onCapture)&&this.config._onCapture!==wb&&(Sp.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",e=>this.config._onCapture(e.event,e))),this.config.ip&&Sp.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}ss(e){var t=performance.now();this.historyAutocapture=new Om(this),this.historyAutocapture.startIfEnabled();var r=[];r.push(()=>{new Ym(this).startIfEnabledOrStop()}),r.push(()=>{var e;this.siteApps=new ob(this),null==(e=this.siteApps)||e.init()}),e||r.push(()=>{this.sessionRecording=new xb(this),this.sessionRecording.startIfEnabledOrStop()}),this.config.disable_scroll_properties||r.push(()=>{this.scrollManager.startMeasuringScrollPosition()}),r.push(()=>{this.autocapture=new cm(this),this.autocapture.startIfEnabled()}),r.push(()=>{this.surveys.loadIfEnabled()}),r.push(()=>{this.logs.loadIfEnabled()}),r.push(()=>{this.conversations.loadIfEnabled()}),r.push(()=>{this.productTours=new jv(this),this.productTours.loadIfEnabled()}),r.push(()=>{this.heatmaps=new mg(this),this.heatmaps.startIfEnabled()}),r.push(()=>{this.webVitalsAutocapture=new hg(this)}),r.push(()=>{this.exceptionObserver=new Im(this),this.exceptionObserver.startIfEnabledOrStop()}),r.push(()=>{this.deadClicksAutocapture=new Fm(this,Am),this.deadClicksAutocapture.startIfEnabled()}),r.push(()=>{if(this.ls){var e=this.ls;this.ls=void 0,this.bi(e)}}),this.us(r,t)}us(e,t){for(;e.length>0;){if(this.config.__preview_deferred_init_extensions&&performance.now()-t>=30&&e.length>0)return void setTimeout(()=>{this.us(e,t)},0);var r=e.shift();if(r)try{r()}catch(i){Sp.error("Error initializing extension:",i)}}var n=Math.round(performance.now()-t);this.register_for_session({$sdk_debug_extensions_init_method:this.config.__preview_deferred_init_extensions?"deferred":"synchronous",$sdk_debug_extensions_init_time_ms:n}),this.config.__preview_deferred_init_extensions&&Sp.info("PostHog extensions initialized ("+n+"ms)")}bi(e){var t,r,n,i,a,s,o,l,c;if(!pd||!pd.body)return Sp.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.bi(e)},500);this.config.__preview_deferred_init_extensions&&(this.ls=e),this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=Ed(e.supportedCompression,vg.GZipJS)?vg.GZipJS:Ed(e.supportedCompression,vg.Base64)?vg.Base64:void 0),null!=(t=e.analytics)&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.Jr?this.Jr:"identified_only"}),null==(r=this.siteApps)||r.onRemoteConfig(e),null==(n=this.sessionRecording)||n.onRemoteConfig(e),null==(i=this.autocapture)||i.onRemoteConfig(e),null==(a=this.heatmaps)||a.onRemoteConfig(e),this.surveys.onRemoteConfig(e),this.logs.onRemoteConfig(e),this.conversations.onRemoteConfig(e),null==(s=this.productTours)||s.onRemoteConfig(e),null==(o=this.webVitalsAutocapture)||o.onRemoteConfig(e),null==(l=this.exceptionObserver)||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),null==(c=this.deadClicksAutocapture)||c.onRemoteConfig(e)}os(){try{this.config.loaded(this)}catch(ym){Sp.critical("`loaded` function failed",ym)}this.hs(),this.config.capture_pageview&&setTimeout(()=>{(this.consent.isOptedIn()||"always"===this.config.cookieless_mode)&&this.ds()},1),new Yv(this).load(),this.featureFlags.flags()}hs(){var e;this.is_capturing()&&this.config.request_batching&&(null==(e=this.ts)||e.enable())}_dom_loaded(){this.is_capturing()&&Pp(this.__request_queue,e=>this.es(e)),this.__request_queue=[],this.hs()}_handle_unload(){var e,t;this.surveys.handlePageUnload(),this.config.request_batching?(this.vs()&&this.capture("$pageleave"),null==(e=this.ts)||e.unload(),null==(t=this.rs)||t.unload()):this.vs()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(e){this.__loaded&&(kb?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=Zg(e.url,{ip:this.config.ip?1:0}),e.headers=kd({},this.config.request_headers,e.headers),e.compression="best-available"===e.compression?this.compression:e.compression,e.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(e.disableTransport=["sendBeacon"]),e.fetchOptions=e.fetchOptions||this.config.fetch_options,(e=>{var t,r,n,i=kd({},e);i.timeout=i.timeout||6e4,i.url=Zg(i.url,{_:(new Date).getTime().toString(),ver:yd.LIB_VERSION,compression:i.compression});var a=null!==(t=i.transport)&&void 0!==t?t:"fetch",s=rv.filter(e=>!i.disableTransport||!e.transport||!i.disableTransport.includes(e.transport)),o=null!==(r=null==(n=Bp(s,e=>e.transport===a))?void 0:n.method)&&void 0!==r?r:s[0].method;if(!o)throw new Error("No available transport method");o(i)})(kd({},e,{callback:t=>{var r,n;this.rateLimiter.checkForLimiting(t),t.statusCode>=400&&(null==(r=(n=this.config).on_request_error)||r.call(n,t)),null==e.callback||e.callback(t)}}))))}es(e){this.rs?this.rs.retriableRequest(e):this._send_request(e)}_execute_array(e){var t,r=[],n=[],i=[];Pp(e,e=>{e&&(t=e[0],Rd(t)?i.push(e):Id(e)?e.call(this):Rd(e)&&"alias"===t?r.push(e):Rd(e)&&-1!==t.indexOf("capture")&&Id(this[t])?i.push(e):n.push(e))});var a=function(e,t){Pp(e,function(e){if(Rd(e[0])){var r=t;Tp(e,function(e){r=r[e[0]].apply(r,e.slice(1))})}else this[e[0]].apply(this,e.slice(1))},t)};a(r,this),a(n,this),a(i,this)}ns(){var e,t;return(null==(e=this.config.bootstrap)?void 0:e.featureFlags)&&Object.keys(null==(t=this.config.bootstrap)?void 0:t.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,t,r){var n;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.ts){if(this.is_capturing())if(!Ld(e)&&zd(e)){var i=!this.config.opt_out_useragent_filter&&this._is_bot();if(!i||this.config.__preview_capture_bot_pageviews){var a=null!=r&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==a||!a.isRateLimited){null!=t&&t.$current_url&&!zd(null==t?void 0:t.$current_url)&&(Sp.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),null==t||delete t.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var s=new Date,o=(null==r?void 0:r.timestamp)||s,l=gm(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,t||{},o,l)};"$pageview"===e&&this.config.__preview_capture_bot_pageviews&&i&&(c.event="$bot_pageview",c.properties.$browser_type="bot"),a&&(c.properties.$lib_rate_limit_remaining_tokens=a.remainingTokens),(null==r?void 0:r.$set)&&(c.$set=null==r?void 0:r.$set);var u,d="$groupidentify"!==e,h=this.cs(null==r?void 0:r.$set_once,d);if(h&&(c.$set_once=h),(c=function(e,t){return r=e,n=e=>zd(e)&&!Hd(t)?e.slice(0,t):e,i=new Set,function e(t,r){return t!==Object(t)?n?n(t):t:i.has(t)?void 0:(i.add(t),Rd(t)?(a=[],Pp(t,t=>{a.push(e(t))})):(a={},Tp(t,(t,r)=>{i.has(t)||(a[r]=e(t,r))})),a);var a}(r);var r,n,i}(c,null!=r&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=o,Ld(null==r?void 0:r.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=s),e===Ev.DISMISSED||e===Ev.SENT){var p=null==t?void 0:t[$v.SURVEY_ID],f=null==t?void 0:t[$v.SURVEY_ITERATION];u={id:p,current_iteration:f},localStorage.getItem(Fv(u))||localStorage.setItem(Fv(u),"true"),c.$set=kd({},c.$set,{[Av({id:p,current_iteration:f},e===Ev.SENT?"responded":"dismissed")]:!0})}else e===Ev.SHOWN&&(c.$set=kd({},c.$set,{[$v.SURVEY_LAST_SEEN_DATE]:(new Date).toISOString()}));var m=kd({},c.properties.$set,c.$set);if(Od(m)||this.setPersonPropertiesForFlags(m),!Ud(this.config.before_send)){var g=this.fs(c);if(!g)return;c=g}this.Wr.emit("eventCaptured",c);var v={method:"POST",url:null!==(n=null==r?void 0:r._url)&&void 0!==n?n:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:null==r?void 0:r._batchKey};return!this.config.request_batching||r&&(null==r||!r._batchKey)||null!=r&&r.send_instantly?this.es(v):this.ts.enqueue(v),c}Sp.critical("This capture call is ignored due to client rate limiting.")}}else Sp.error("No event name provided to posthog.capture")}else Sp.uninitializedWarning("posthog.capture")}Bi(e){return this.on("eventCaptured",t=>e(t.event,t))}calculateEventProperties(e,t,r,n,i){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return t;var a=i?void 0:this.persistence.remove_event_timer(e),s=kd({},t);if(s.token=this.config.token,s.$config_defaults=this.config.defaults,("always"==this.config.cookieless_mode||"on_reject"==this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut())&&(s.$cookieless_mode=!0),"$snapshot"===e){var o=kd({},this.persistence.properties(),this.sessionPersistence.properties());return s.distinct_id=o.distinct_id,(!zd(s.distinct_id)&&!qd(s.distinct_id)||Bd(s.distinct_id))&&Sp.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),s}var l,c=function(e,t){if(!bd)return{};var r,n,i,a=e?Fp([],Xm,t||[]):[],[s,o]=function(e){for(var t=0;t<Jh.length;t++){var[r,n]=Jh[t],i=r.exec(e),a=i&&(Id(n)?n(i,e):n);if(a)return a}return["",""]}(bd);return Ap(Op({$os:s,$os_version:o,$browser:Yh(bd,navigator.vendor),$device:Zh(bd),$device_type:(n=bd,i=Zh(n),i===uh||i===ch||"Kobo"===i||"Kindle Fire"===i||i===zh?lh:i===$h||i===Ph||i===Dh||i===Mh?"Console":i===hh?"Wearable":i?ah:"Desktop"),$timezone:lg(),$timezone_offset:cg()}),{$current_url:rm(null==fd?void 0:fd.href,a,Zm),$host:null==fd?void 0:fd.host,$pathname:null==fd?void 0:fd.pathname,$raw_user_agent:bd.length>1e3?bd.substring(0,997)+"...":bd,$browser_version:Xh(bd,navigator.vendor),$browser_language:ig(),$browser_language_prefix:(r=ig(),"string"==typeof r?r.split("-")[0]:void 0),$screen_height:null==od?void 0:od.screen.height,$screen_width:null==od?void 0:od.screen.width,$viewport_height:null==od?void 0:od.innerHeight,$viewport_width:null==od?void 0:od.innerWidth,$lib:"web",$lib_version:yd.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:u,windowId:d}=this.sessionManager.checkAndGetSessionAndWindowId(i,r.getTime());s.$session_id=u,s.$window_id=d}this.sessionPropsManager&&Ap(s,this.sessionPropsManager.getSessionProps());try{var h;this.sessionRecording&&Ap(s,this.sessionRecording.sdkDebugProperties),s.$sdk_debug_retry_queue_size=null==(h=this.rs)?void 0:h.length}catch(g){s.$sdk_debug_error_capturing_properties=String(g)}if(this.requestRouter.region===cb.CUSTOM&&(s.$lib_custom_api_host=this.config.api_host),l="$pageview"!==e||i?"$pageleave"!==e||i?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(r):this.pageViewManager.doPageView(r,n),s=Ap(s,l),"$pageview"===e&&pd&&(s.title=pd.title),!Ld(a)){var p=r.getTime()-a;s.$duration=parseFloat((p/1e3).toFixed(3))}bd&&this.config.opt_out_useragent_filter&&(s.$browser_type=this._is_bot()?"bot":"browser"),(s=Ap({},c,this.persistence.properties(),this.sessionPersistence.properties(),s)).$is_identified=this._isIdentified(),Rd(this.config.property_denylist)?Tp(this.config.property_denylist,function(e){delete s[e]}):Sp.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var f=this.config.sanitize_properties;f&&(Sp.error("sanitize_properties is deprecated. Use before_send instead"),s=f(s,e));var m=this.ps();return s.$process_person_profile=m,m&&!i&&this.gs("_calculate_event_properties"),s}cs(e,t){var r;if(void 0===t&&(t=!0),!this.persistence||!this.ps())return e;if(this.qr)return e;var n=this.persistence.get_initial_props(),i=null==(r=this.sessionPropsManager)?void 0:r.getSetOnceProps(),a=Ap({},n,i||{},e||{}),s=this.config.sanitize_properties;return s&&(Sp.error("sanitize_properties is deprecated. Use before_send instead"),a=s(a,"$set_once")),t&&(this.qr=!0),Od(a)?void 0:a}register(e,t){var r;null==(r=this.persistence)||r.register(e,t)}register_once(e,t,r){var n;null==(n=this.persistence)||n.register_once(e,t,r)}register_for_session(e){var t;null==(t=this.sessionPersistence)||t.register(e)}unregister(e){var t;null==(t=this.persistence)||t.unregister(e)}unregister_for_session(e){var t;null==(t=this.sessionPersistence)||t.unregister(e)}_s(e,t){this.register({[e]:t})}getFeatureFlag(e,t){return this.featureFlags.getFeatureFlag(e,t)}getFeatureFlagPayload(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch(r){return t}}isFeatureEnabled(e,t){return this.featureFlags.isFeatureEnabled(e,t)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateFlags(e,t,r){var n=null!=r&&r.merge?this.featureFlags.getFlagVariants():{},i=null!=r&&r.merge?this.featureFlags.getFlagPayloads():{},a=kd({},n,e),s=kd({},i,t),o={};for(var[l,c]of Object.entries(a)){var u="string"==typeof c;o[l]={key:l,enabled:!!u||Boolean(c),variant:u?c:void 0,reason:void 0,metadata:Ld(null==s?void 0:s[l])?void 0:{id:0,version:void 0,description:void 0,payload:s[l]}}}this.featureFlags.receivedFeatureFlags({flags:o})}updateEarlyAccessFeatureEnrollment(e,t,r){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t,r)}getEarlyAccessFeatures(e,t,r){return void 0===t&&(t=!1),this.featureFlags.getEarlyAccessFeatures(e,t,r)}on(e,t){return this.Wr.on(e,t)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var t,r;return null!==(t=null==(r=this.sessionManager)?void 0:r.onSessionId(e))&&void 0!==t?t:()=>{}}getSurveys(e,t){void 0===t&&(t=!1),this.surveys.getSurveys(e,t)}getActiveMatchingSurveys(e,t){void 0===t&&(t=!1),this.surveys.getActiveMatchingSurveys(e,t)}renderSurvey(e,t){this.surveys.renderSurvey(e,t)}displaySurvey(e,t){void 0===t&&(t=Iv),this.surveys.displaySurvey(e,t)}cancelPendingSurvey(e){this.surveys.cancelPendingSurvey(e)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,t){return void 0===t&&(t=!1),this.surveys.canRenderSurveyAsync(e,t)}identify(e,t,r){if(!this.__loaded||!this.persistence)return Sp.uninitializedWarning("posthog.identify");if(qd(e)&&(e=e.toString(),Sp.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))Sp.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==yf){if(this.gs("posthog.identify")){var n=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var i=n;this.register_once({$had_persisted_distinct_id:!0,$device_id:i},"")}e!==n&&e!==this.get_property(qp)&&(this.unregister(qp),this.register({distinct_id:e}));var a="anonymous"===(this.persistence.get_property(hf)||"anonymous");e!==n&&a?(this.persistence.set_property(hf,"identified"),this.setPersonPropertiesForFlags(kd({},r||{},t||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:n},{$set:t||{},$set_once:r||{}}),this.Kr=iv(e,t,r),this.featureFlags.setAnonymousDistinctId(n)):(t||r)&&this.setPersonProperties(t,r),e!==n&&(this.reloadFeatureFlags(),this.unregister(df))}}else Sp.critical('The string "'+yf+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else Sp.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,t){if((e||t)&&this.gs("posthog.setPersonProperties")){var r=iv(this.get_distinct_id(),e,t);this.Kr!==r?(this.setPersonPropertiesForFlags(kd({},t||{},e||{})),this.capture("$set",{$set:e||{},$set_once:t||{}}),this.Kr=r):Sp.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,t,r){if(e&&t){var n=this.getGroups();n[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:kd({},n,{[e]:t})}),r&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:r}),this.setGroupPropertiesForFlags({[e]:r})),n[e]===t||r||this.reloadFeatureFlags()}else Sp.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,t){void 0===t&&(t=!0),this.featureFlags.setPersonPropertiesForFlags(e,t)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,t){void 0===t&&(t=!0),this.gs("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var t,r,n,i;if(Sp.info("reset"),!this.__loaded)return Sp.uninitializedWarning("posthog.reset");var a=this.get_property("$device_id");if(this.consent.reset(),null==(t=this.persistence)||t.clear(),null==(r=this.sessionPersistence)||r.clear(),this.surveys.reset(),this.featureFlags.reset(),null==(n=this.persistence)||n.set_property(hf,"anonymous"),null==(i=this.sessionManager)||i.resetSessionId(),this.Kr=null,"always"===this.config.cookieless_mode)this.register_once({distinct_id:yf,$device_id:null},"");else{var s=this.config.get_device_id(gm());this.register_once({distinct_id:s,$device_id:e?s:a},"")}this.register({$last_posthog_reset:(new Date).toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,t;return null!==(e=null==(t=this.sessionManager)?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==e?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:t,sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0),n=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+t);if(null!=e&&e.withTimestamp&&r){var i,a=null!==(i=e.timestampLookBack)&&void 0!==i?i:10;if(!r)return n;n+="?t="+Math.max(Math.floor(((new Date).getTime()-r)/1e3)-a,0)}return n}alias(e,t){return e===this.get_property(Up)?(Sp.critical("Attempting to create alias for existing People user - aborting."),-2):this.gs("posthog.alias")?(Ld(t)&&(t=this.get_distinct_id()),e!==t?(this._s(qp,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(Sp.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var t=kd({},this.config);if(Md(e)){var r,n,i,a,s,o,l;Ap(this.config,jb(e));var c=this.Zr();null==(r=this.persistence)||r.update_config(this.config,t,c),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new _v(kd({},this.config,{persistence:"sessionStorage"}),c);var u=this.Yr(this.config.debug);Kd(u)&&(this.config.debug=u),Kd(this.config.debug)&&(this.config.debug?(yd.DEBUG=!0,km.H()&&km.G("ph_debug","true"),Sp.info("set_config",{config:e,oldConfig:t,newConfig:kd({},this.config)})):(yd.DEBUG=!1,km.H()&&km.V("ph_debug"))),null==(n=this.exceptionObserver)||n.onConfigChange(),null==(i=this.sessionRecording)||i.startIfEnabledOrStop(),null==(a=this.autocapture)||a.startIfEnabled(),null==(s=this.heatmaps)||s.startIfEnabled(),null==(o=this.exceptionObserver)||o.startIfEnabledOrStop(),this.surveys.loadIfEnabled(),this.ys(),null==(l=this.externalIntegrations)||l.startIfEnabledOrStop()}}startSessionRecording(e){var t,r,n,i,a,s=!0===e,o={sampling:s||!(null==e||!e.sampling),linked_flag:s||!(null==e||!e.linked_flag),url_trigger:s||!(null==e||!e.url_trigger),event_trigger:s||!(null==e||!e.event_trigger)};Object.values(o).some(Boolean)&&(null==(t=this.sessionManager)||t.checkAndGetSessionAndWindowId(),o.sampling&&(null==(r=this.sessionRecording)||r.overrideSampling()),o.linked_flag&&(null==(n=this.sessionRecording)||n.overrideLinkedFlag()),o.url_trigger&&(null==(i=this.sessionRecording)||i.overrideTrigger("url")),o.event_trigger&&(null==(a=this.sessionRecording)||a.overrideTrigger("event")));this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!(null==(e=this.sessionRecording)||!e.started)}captureException(e,t){var r=new Error("PostHog syntheticException"),n=this.exceptions.buildProperties(e,{handled:!0,syntheticException:r});return this.exceptions.sendExceptionEvent(kd({},n,t))}startExceptionAutocapture(e){this.set_config({capture_exceptions:null==e||e})}stopExceptionAutocapture(){this.set_config({capture_exceptions:!1})}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var t;return null==(t=this.persistence)?void 0:t.props[e]}getSessionProperty(e){var t;return null==(t=this.sessionPersistence)?void 0:t.props[e]}toString(){var e,t=null!==(e=this.config.name)&&void 0!==e?e:_b;return t!==_b&&(t=_b+"."+t),t}_isIdentified(){var e,t;return"identified"===(null==(e=this.persistence)?void 0:e.get_property(hf))||"identified"===(null==(t=this.sessionPersistence)?void 0:t.get_property(hf))}ps(){var e,t;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&Od(this.getGroups())&&(null==(e=this.persistence)||null==(e=e.props)||!e[qp])&&(null==(t=this.persistence)||null==(t=t.props)||!t[bf]))}vs(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&(!0===this.config.capture_pageview||"history_change"===this.config.capture_pageview)}createPersonProfile(){this.ps()||this.gs("posthog.createPersonProfile")&&this.setPersonProperties({},{})}gs(e){return"never"===this.config.person_profiles?(Sp.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._s(bf,!0),!0)}Zr(){if("always"===this.config.cookieless_mode)return!0;var e=this.consent.isOptedOut(),t=this.config.opt_out_persistence_by_default||"on_reject"===this.config.cookieless_mode;return this.config.disable_persistence||e&&!!t}ys(){var e,t,r,n,i=this.Zr();return(null==(e=this.persistence)?void 0:e.ki)!==i&&(null==(r=this.persistence)||r.set_disabled(i)),(null==(t=this.sessionPersistence)?void 0:t.ki)!==i&&(null==(n=this.sessionPersistence)||n.set_disabled(i)),i}opt_in_capturing(e){var t,r,n,i;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),null==(r=this.sessionManager)||r.destroy(),null==(n=this.pageViewManager)||n.destroy(),this.sessionManager=new ib(this),this.pageViewManager=new gg(this),this.persistence&&(this.sessionPropsManager=new rb(this,this.sessionManager,this.persistence)),this.sessionRecording=new xb(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this.ys(),this.hs(),null==(t=this.sessionRecording)||t.startIfEnabledOrStop(),"on_reject"==this.config.cookieless_mode&&this.surveys.loadIfEnabled(),(Ld(null==e?void 0:e.captureEventName)||null!=e&&e.captureEventName)&&this.capture(null!==(i=null==e?void 0:e.captureEventName)&&void 0!==i?i:"$opt_in",null==e?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.ds()):Sp.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var e,t,r;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this.ys(),"on_reject"===this.config.cookieless_mode&&(this.register({distinct_id:yf,$device_id:null}),null==(e=this.sessionManager)||e.destroy(),null==(t=this.pageViewManager)||t.destroy(),this.sessionManager=void 0,this.sessionPropsManager=void 0,null==(r=this.sessionRecording)||r.stopRecording(),this.sessionRecording=void 0,this.ds())):Sp.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var e=this.consent.consent;return e===$m.GRANTED?"granted":e===$m.DENIED?"denied":"pending"}is_capturing(){return"always"===this.config.cookieless_mode||("on_reject"===this.config.cookieless_mode?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this.ys()}_is_bot(){return hd?lb(hd,this.config.custom_blocked_useragents):void 0}ds(){pd&&("visible"===pd.visibilityState?this.Gr||(this.Gr=!0,this.capture("$pageview",{title:pd.title},{send_instantly:!0}),this.Vr&&(pd.removeEventListener("visibilitychange",this.Vr),this.Vr=null)):this.Vr||(this.Vr=this.ds.bind(this),Hp(pd,"visibilitychange",this.Vr)))}debug(e){!1===e?(null==od||od.console.log("You've disabled debug mode."),this.set_config({debug:!1})):(null==od||od.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),this.set_config({debug:!0}))}O(){var e,t,r,n,i,a,s=this.Xr||{};return"advanced_disable_flags"in s?!!s.advanced_disable_flags:!1!==this.config.advanced_disable_flags?!!this.config.advanced_disable_flags:!0===this.config.advanced_disable_decide?(Sp.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(r="advanced_disable_decide",n=Sp,i=(t="advanced_disable_flags")in(e=s)&&!Ld(e[t]),a=r in e&&!Ld(e[r]),i?e[t]:!!a&&(n&&n.warn("Config field '"+r+"' is deprecated. Please use '"+t+"' instead. The old field will be removed in a future major version."),e[r]))}fs(e){if(Ud(this.config.before_send))return e;var t=Rd(this.config.before_send)?this.config.before_send:[this.config.before_send],r=e;for(var n of t){if(r=n(r),Ud(r)){var i="Event '"+e.event+"' was rejected in beforeSend function";return Wd(e.event)?Sp.warn(i+". This can cause unexpected behavior."):Sp.info(i),null}r.properties&&!Od(r.properties)||Sp.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return r}getPageViewId(){var e;return null==(e=this.pageViewManager.Kt)?void 0:e.pageViewId}captureTraceFeedback(e,t){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:t})}captureTraceMetric(e,t,r){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:t,$ai_metric_value:String(r)})}Yr(e){var t=Kd(e)&&!e,r=km.H()&&"true"===km.q("ph_debug");return!t&&(!!r||e)}}!function(e,t){for(var r=0;r<t.length;r++)e.prototype[t[r]]=Mp(e.prototype[t[r]])}(Cb,["identify"]);var Eb,$b=(Eb=yb[_b]=new Cb,function(){function e(){e.done||(e.done=!0,kb=!1,Tp(yb,function(e){e._dom_loaded()}))}null!=pd&&pd.addEventListener?"complete"===pd.readyState?e():Hp(pd,"DOMContentLoaded",e,{capture:!1}):od&&Sp.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),Eb),Db=U.createContext({client:$b,bootstrap:void 0});function Pb(e,t,r){if(void 0===r&&(r=new WeakMap),e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(r.has(e)&&r.get(e)===t)return!0;r.set(e,t);var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var a=0,s=n;a<s.length;a++){var o=s[a];if(!i.includes(o))return!1;if(!Pb(e[o],t[o],r))return!1}return!0}function Tb(e){var t,r,n=e.children,i=e.client,a=e.apiKey,s=e.options,o=U.useRef(null),l=U.useMemo(function(){return i?(a&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),s&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),i):(a||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),$b)},[i,a,JSON.stringify(s)]);return U.useEffect(function(){if(!i){var e=o.current;e?(a!==e.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),s&&!Pb(s,e.options)&&$b.set_config(s),o.current={apiKey:a,options:null!=s?s:{}}):($b.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),$b.init(a,s),o.current={apiKey:a,options:null!=s?s:{}})}},[i,a,JSON.stringify(s)]),q.createElement(Db.Provider,{value:{client:l,bootstrap:null!==(t=null==s?void 0:s.bootstrap)&&void 0!==t?t:null===(r=null==i?void 0:i.config)||void 0===r?void 0:r.bootstrap}},n)}var Ab=function(e){return"function"==typeof e},Fb=function(e,t){return(Fb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};"function"==typeof SuppressedError&&SuppressedError;var Rb={componentStack:null,exceptionEvent:null,error:null},Ib="[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element.";!function(e){function t(t){var r=e.call(this,t)||this;return r.state=Rb,r}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Fb(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(t,e),t.prototype.componentDidCatch=function(e,t){var r,n=this.props.additionalProperties;Ab(n)?r=n(e):"object"==typeof n&&(r=n);var i=this.context.client.captureException(e,r),a=t.componentStack;this.setState({error:e,componentStack:null!=a?a:null,exceptionEvent:i})},t.prototype.render=function(){var e=this.props,t=e.children,r=e.fallback,n=this.state;if(null==n.componentStack)return Ab(t)?t():t;var i=Ab(r)?q.createElement(r,{error:n.error,componentStack:n.componentStack,exceptionEvent:n.exceptionEvent}):r;return q.isValidElement(i)?i:(console.warn(Ib),q.createElement(q.Fragment,null))},t.contextType=Db}(q.Component);
/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
var Mb="popstate";function Ob(e={}){return function(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,o="POP",l=null,c=u();null==c&&(c=0,s.replaceState({...s.state,idx:c},""));function u(){return(s.state||{idx:null}).idx}function d(){o="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:m.location,delta:t})}function h(e,t){o="PUSH";let r=Hb(m.location,e,t);c=u()+1;let n=Bb(r,c),d=m.createHref(r);try{s.pushState(n,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;i.location.assign(d)}a&&l&&l({action:o,location:m.location,delta:1})}function p(e,t){o="REPLACE";let r=Hb(m.location,e,t);c=u();let n=Bb(r,c),i=m.createHref(r);s.replaceState(n,"",i),a&&l&&l({action:o,location:m.location,delta:0})}function f(e){return function(e,t=!1){let r="http://localhost";"undefined"!=typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href);Lb(r,"No window.location.(origin|href) available to create URL");let n="string"==typeof e?e:Ub(e);n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n);return new URL(n,r)}(e)}let m={get action(){return o},get location(){return e(i,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Mb,d),l=e,()=>{i.removeEventListener(Mb,d),l=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:p,go:e=>s.go(e)};return m}(function(e,t){let{pathname:r,search:n,hash:i}=e.location;return Hb("",{pathname:r,search:n,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:Ub(t)},0,e)}function Lb(e,t){if(!1===e||null==e)throw new Error(t)}function zb(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function Bb(e,t){return{usr:e.state,key:e.key,idx:t}}function Hb(e,t,r=null,n){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?qb(t):t,state:r,key:t&&t.key||n||Math.random().toString(36).substring(2,10)}}function Ub({pathname:e="/",search:t="",hash:r=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function qb(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Vb(e,t,r="/"){return function(e,t,r,n){let i="string"==typeof t?qb(t):t,a=ax(i.pathname||"/",r);if(null==a)return null;let s=Kb(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let l=0;null==o&&l<s.length;++l){let e=ix(a);o=rx(s[l],e,n)}return o}(e,t,r,!1)}function Kb(e,t=[],r=[],n="",i=!1){let a=(e,a,s=i,o)=>{let l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(n)&&s)return;Lb(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length)}let c=hx([n,l.relativePath]),u=r.concat(l);e.children&&e.children.length>0&&(Lb(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),Kb(e.children,t,u,c,s)),(null!=e.path||e.index)&&t.push({path:c,score:tx(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var r;if(""!==e.path&&(null==(r=e.path)?void 0:r.includes("?")))for(let n of Wb(e.path))a(e,t,!0,n);else a(e,t)}),t}function Wb(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===n.length)return i?[a,""]:[a];let s=Wb(n.join("/")),o=[];return o.push(...s.map(e=>""===e?a:[a,e].join("/"))),i&&o.push(...s),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var Gb=/^:[\w-]+$/,Yb=3,Qb=2,Xb=1,Jb=10,Zb=-2,ex=e=>"*"===e;function tx(e,t){let r=e.split("/"),n=r.length;return r.some(ex)&&(n+=Zb),t&&(n+=Qb),r.filter(e=>!ex(e)).reduce((e,t)=>e+(Gb.test(t)?Yb:""===t?Xb:Jb),n)}function rx(e,t,r=!1){let{routesMeta:n}=e,i={},a="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===a?t:t.slice(a.length)||"/",u=nx({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&r&&!n[n.length-1].route.index&&(u=nx({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:hx([a,u.pathname]),pathnameBase:px(hx([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=hx([a,u.pathnameBase]))}return s}function nx(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t=!1,r=!0){zb("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");e.endsWith("*")?(n.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let a=new RegExp(i,t?void 0:"i");return[a,n]}(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((e,{paramName:t,isOptional:r},n)=>{if("*"===t){let e=o[n]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const i=o[n];return e[t]=r&&!i?void 0:(i||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:s,pattern:e}}function ix(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return zb(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ax(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}var sx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function ox(e,t="/"){let r,{pathname:n,search:i="",hash:a=""}="string"==typeof e?qb(e):e;if(n)if(s=n,sx.test(s))r=n;else{if(n.includes("//")){let e=n;n=n.replace(/\/\/+/g,"/"),zb(!1,`Pathnames cannot have embedded double slashes - normalizing ${e} -> ${n}`)}r=n.startsWith("/")?lx(n.substring(1),"/"):lx(n,t)}else r=t;var s;return{pathname:r,search:fx(i),hash:mx(a)}}function lx(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}function cx(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ux(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function dx(e,t,r,n=!1){let i;"string"==typeof e?i=qb(e):(i={...e},Lb(!i.pathname||!i.pathname.includes("?"),cx("?","pathname","search",i)),Lb(!i.pathname||!i.pathname.includes("#"),cx("#","pathname","hash",i)),Lb(!i.search||!i.search.includes("#"),cx("#","search","hash",i)));let a,s=""===e||""===i.pathname,o=s?"/":i.pathname;if(null==o)a=r;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=ox(i,a),c=o&&"/"!==o&&o.endsWith("/"),u=(s||"."===o)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var hx=e=>e.join("/").replace(/\/\/+/g,"/"),px=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),fx=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",mx=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"",gx=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function vx(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var bx="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function xx(e,t){let r=e;if("string"!=typeof r||!sx.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,i=!1;if(bx)try{let e=new URL(window.location.href),n=r.startsWith("//")?new URL(e.protocol+r):new URL(r),a=ax(n.pathname,t);n.origin===e.origin&&null!=a?r=a+n.search+n.hash:i=!0}catch(a){zb(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yx=["POST","PUT","PATCH","DELETE"];new Set(yx);var wx=["GET",...yx];new Set(wx);var _x=U.createContext(null);_x.displayName="DataRouter";var kx=U.createContext(null);kx.displayName="DataRouterState";var Nx=U.createContext(!1),jx=U.createContext({isTransitioning:!1});jx.displayName="ViewTransition",U.createContext(new Map).displayName="Fetchers",U.createContext(null).displayName="Await";var Sx=U.createContext(null);Sx.displayName="Navigation";var Cx=U.createContext(null);Cx.displayName="Location";var Ex=U.createContext({outlet:null,matches:[],isDataRoute:!1});Ex.displayName="Route";var $x=U.createContext(null);$x.displayName="RouteError";var Dx="REACT_ROUTER_ERROR";function Px(){return null!=U.useContext(Cx)}function Tx(){return Lb(Px(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(Cx).location}var Ax="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Fx(e){U.useContext(Sx).static||U.useLayoutEffect(e)}function Rx(){let{isDataRoute:e}=U.useContext(Ex);return e?function(){let{router:e}=function(e){let t=U.useContext(_x);return Lb(t,qx(e)),t}("useNavigate"),t=Vx("useNavigate"),r=U.useRef(!1);return Fx(()=>{r.current=!0}),U.useCallback(async(n,i={})=>{zb(r.current,Ax),r.current&&("number"==typeof n?await e.navigate(n):await e.navigate(n,{fromRouteId:t,...i}))},[e,t])}():function(){Lb(Px(),"useNavigate() may be used only in the context of a <Router> component.");let e=U.useContext(_x),{basename:t,navigator:r}=U.useContext(Sx),{matches:n}=U.useContext(Ex),{pathname:i}=Tx(),a=JSON.stringify(ux(n)),s=U.useRef(!1);return Fx(()=>{s.current=!0}),U.useCallback((n,o={})=>{if(zb(s.current,Ax),!s.current)return;if("number"==typeof n)return void r.go(n);let l=dx(n,JSON.parse(a),i,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:hx([t,l.pathname])),(o.replace?r.replace:r.push)(l,o.state,o)},[t,r,a,i,e])}()}function Ix(e,{relative:t}={}){let{matches:r}=U.useContext(Ex),{pathname:n}=Tx(),i=JSON.stringify(ux(r));return U.useMemo(()=>dx(e,JSON.parse(i),n,"path"===t),[e,i,n,t])}function Mx(e,t,r,n,i){var a;Lb(Px(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=U.useContext(Sx),{matches:o}=U.useContext(Ex),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let e=h&&h.path||"";Wx(u,!h||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let p,f=Tx();if(t){let e="string"==typeof t?qb(t):t;Lb("/"===d||(null==(a=e.pathname)?void 0:a.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=f;let m=p.pathname||"/",g=m;if("/"!==d){let e=d.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=Vb(e,{pathname:g});zb(h||null!=v,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),zb(null==v||void 0!==v[v.length-1].route.element||void 0!==v[v.length-1].route.Component||void 0!==v[v.length-1].route.lazy,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=function(e,t=[],r=null,n=null){if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==t.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let i=e,a=null==r?void 0:r.errors;if(null!=a){let e=i.findIndex(e=>e.route.id&&void 0!==(null==a?void 0:a[e.route.id]));Lb(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,e+1))}let s=!1,o=-1;if(r)for(let c=0;c<i.length;c++){let e=i[c];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=c),e.route.id){let{loaderData:t,errors:n}=r,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){s=!0,i=o>=0?i.slice(0,o+1):[i[0]];break}}}let l=r&&n?(e,t)=>{var i,a;n(e,{location:r.location,params:(null==(a=null==(i=r.matches)?void 0:i[0])?void 0:a.params)??{},unstable_pattern:vx(r.matches),errorInfo:t})}:void 0;return i.reduceRight((e,n,c)=>{let u,d=!1,h=null,p=null;r&&(u=a&&n.route.id?a[n.route.id]:void 0,h=n.route.errorElement||Lx,s&&(o<0&&0===c?(Wx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):o===c&&(d=!0,p=n.route.hydrateFallbackElement||null)));let f=t.concat(i.slice(0,c+1)),m=()=>{let t;return t=u?h:d?p:n.route.Component?U.createElement(n.route.Component,null):n.route.element?n.route.element:e,U.createElement(Ux,{match:n,routeContext:{outlet:e,matches:f,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===c)?U.createElement(zx,{location:r.location,revalidation:r.revalidation,component:h,error:u,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0},onError:l}):m()},null)}(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:hx([d,s.encodeLocation?s.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:hx([d,s.encodeLocation?s.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,r,n,i);return t&&b?U.createElement(Cx.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},b):b}function Ox(){let e=function(){var e;let t=U.useContext($x),r=function(e){let t=U.useContext(kx);return Lb(t,qx(e)),t}("useRouteError"),n=Vx("useRouteError");if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:a},"ErrorBoundary")," or"," ",U.createElement("code",{style:a},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},t),r?U.createElement("pre",{style:i},r):null,s)}U.createContext(null);var Lx=U.createElement(Ox,null),zx=class extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&"object"==typeof e&&e&&"digest"in e&&"string"==typeof e.digest){const t=function(e){if(e.startsWith(`${Dx}:ROUTE_ERROR_RESPONSE:{`))try{let t=JSON.parse(e.slice(40));if("object"==typeof t&&t&&"number"==typeof t.status&&"string"==typeof t.statusText)return new gx(t.status,t.statusText,t.data)}catch{}}(e.digest);t&&(e=t)}let t=void 0!==e?U.createElement(Ex.Provider,{value:this.props.routeContext},U.createElement($x.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?U.createElement(Hx,{error:e},t):t}};zx.contextType=Nx;var Bx=new WeakMap;function Hx({children:e,error:t}){let{basename:r}=U.useContext(Sx);if("object"==typeof t&&t&&"digest"in t&&"string"==typeof t.digest){let e=function(e){if(e.startsWith(`${Dx}:REDIRECT:{`))try{let t=JSON.parse(e.slice(28));if("object"==typeof t&&t&&"number"==typeof t.status&&"string"==typeof t.statusText&&"string"==typeof t.location&&"boolean"==typeof t.reloadDocument&&"boolean"==typeof t.replace)return t}catch{}}(t.digest);if(e){let n=Bx.get(t);if(n)throw n;let i=xx(e.location,r);if(bx&&!Bx.get(t)){if(!i.isExternal&&!e.reloadDocument){const r=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:e.replace}));throw Bx.set(t,r),r}window.location.href=i.absoluteURL||i.to}return U.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function Ux({routeContext:e,match:t,children:r}){let n=U.useContext(_x);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),U.createElement(Ex.Provider,{value:e},r)}function qx(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Vx(e){let t=function(e){let t=U.useContext(Ex);return Lb(t,qx(e)),t}(e),r=t.matches[t.matches.length-1];return Lb(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}var Kx={};function Wx(e,t,r){t||Kx[e]||(Kx[e]=!0,zb(!1,r))}function Gx(e){Lb(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Yx({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){Lb(!Px(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=U.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);"string"==typeof r&&(r=qb(r));let{pathname:c="/",search:u="",hash:d="",state:h=null,key:p="default"}=r,f=U.useMemo(()=>{let e=ax(c,o);return null==e?null:{location:{pathname:e,search:u,hash:d,state:h,key:p},navigationType:n}},[o,c,u,d,h,p,n]);return zb(null!=f,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),null==f?null:U.createElement(Sx.Provider,{value:l},U.createElement(Cx.Provider,{children:t,value:f}))}function Qx({children:e,location:t}){return Mx(Xx(e),t)}function Xx(e,t=[]){let r=[];return U.Children.forEach(e,(e,n)=>{if(!U.isValidElement(e))return;let i=[...t,n];if(e.type===U.Fragment)return void r.push.apply(r,Xx(e.props.children,i));Lb(e.type===Gx,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Lb(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Xx(e.props.children,i)),r.push(a)}),r}U.memo(function({routes:e,future:t,state:r,onError:n}){return Mx(e,void 0,r,n,t)});var Jx="get",Zx="application/x-www-form-urlencoded";function ey(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}var ty=null;var ry=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ny(e){return null==e||ry.has(e)?e:(zb(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zx}"`),null)}function iy(e,t){let r,n,i,a,s;if(ey(o=e)&&"form"===o.tagName.toLowerCase()){let s=e.getAttribute("action");n=s?ax(s,t):null,r=e.getAttribute("method")||Jx,i=ny(e.getAttribute("enctype"))||Zx,a=new FormData(e)}else if(function(e){return ey(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return ey(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||s.getAttribute("action");if(n=o?ax(o,t):null,r=e.getAttribute("formmethod")||s.getAttribute("method")||Jx,i=ny(e.getAttribute("formenctype"))||ny(s.getAttribute("enctype"))||Zx,a=new FormData(s,e),!function(){if(null===ty)try{new FormData(document.createElement("form"),0),ty=!1}catch(e){ty=!0}return ty}()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,n)}}else{if(ey(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Jx,n=null,i=Zx,s=e}var o;return a&&"text/plain"===i&&(s=a,a=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:a,body:s}}function ay(e,t){if(!1===e||null==e)throw new Error(t)}function sy(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function oy(e,t,r){return function(e,t){let r=new Set;return new Set(t),e.reduce((e,t)=>{let n=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}(t));return r.has(n)||(r.add(n),e.push({key:n,link:t})),e},[])}((await Promise.all(e.map(async e=>{let n=t.routes[e.route.id];if(n){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(n,r);return e.links?e.links():[]}return[]}))).flat(1).filter(sy).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}function ly(e,t,r,n,i,a){let s=(e,t)=>!r[t]||e.route.id!==r[t].route.id,o=(e,t)=>{var n;return r[t].pathname!==e.pathname||(null==(n=r[t].route.path)?void 0:n.endsWith("*"))&&r[t].params["*"]!==e.params["*"]};return"assets"===a?t.filter((e,t)=>s(e,t)||o(e,t)):"data"===a?t.filter((t,a)=>{var l;let c=n.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(s(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null==(l=r[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof n)return n}return!0}):[]}function cy(e,t,{includeHydrateFallback:r}={}){return n=e.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i}).flat(1),[...new Set(n)];var n}function uy(){let e=U.useContext(_x);return ay(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var dy=U.createContext(void 0);function hy(){let e=U.useContext(dy);return ay(e,"You must render this element inside a <HydratedRouter> element"),e}function py(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function fy({page:e,...t}){let{router:r}=uy(),n=U.useMemo(()=>Vb(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?U.createElement(my,{page:e,matches:n,...t}):null}function my({page:e,matches:t,...r}){let n=Tx(),{manifest:i,routeModules:a}=hy(),{basename:s}=uy(),{loaderData:o,matches:l}=function(){let e=U.useContext(kx);return ay(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),c=U.useMemo(()=>ly(e,t,l,i,n,"data"),[e,t,l,i,n]),u=U.useMemo(()=>ly(e,t,l,i,n,"assets"),[e,t,l,i,n]),d=U.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let r=new Set,l=!1;if(t.forEach(e=>{var t;let n=i.routes[e.route.id];n&&n.hasLoader&&(!c.some(t=>t.route.id===e.route.id)&&e.route.id in o&&(null==(t=a[e.route.id])?void 0:t.shouldRevalidate)||n.hasClientLoader?l=!0:r.add(e.route.id))}),0===r.size)return[];let u=function(e,t,r){let n="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname=`_root.${r}`:t&&"/"===ax(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}(e,s,"data");return l&&r.size>0&&u.searchParams.set("_routes",t.filter(e=>r.has(e.route.id)).map(e=>e.route.id).join(",")),[u.pathname+u.search]},[s,o,n,i,c,t,e,a]),h=U.useMemo(()=>cy(u,i),[u,i]),p=function(e){let{manifest:t,routeModules:r}=hy(),[n,i]=U.useState([]);return U.useEffect(()=>{let n=!1;return oy(e,t,r).then(e=>{n||i(e)}),()=>{n=!0}},[e,t,r]),n}(u);return U.createElement(U.Fragment,null,d.map(e=>U.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...r})),h.map(e=>U.createElement("link",{key:e,rel:"modulepreload",href:e,...r})),p.map(({key:e,link:t})=>U.createElement("link",{key:e,nonce:r.nonce,...t})))}function gy(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}dy.displayName="FrameworkContext";var vy="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{vy&&(window.__reactRouterVersion="7.11.0")}catch(Ek){}function by({basename:e,children:t,unstable_useTransitions:r,window:n}){let i=U.useRef();null==i.current&&(i.current=Ob({window:n,v5Compat:!0}));let a=i.current,[s,o]=U.useState({action:a.action,location:a.location}),l=U.useCallback(e=>{!1===r?o(e):U.startTransition(()=>o(e))},[r]);return U.useLayoutEffect(()=>a.listen(l),[a,l]),U.createElement(Yx,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:r})}var xy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yy=U.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:n,reloadDocument:i,replace:a,state:s,target:o,to:l,preventScrollReset:c,viewTransition:u,unstable_defaultShouldRevalidate:d,...h},p){let{basename:f,unstable_useTransitions:m}=U.useContext(Sx),g="string"==typeof l&&xy.test(l),v=xx(l,f),b=function(e,{relative:t}={}){Lb(Px(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=U.useContext(Sx),{hash:i,pathname:a,search:s}=Ix(e,{relative:t}),o=a;return"/"!==r&&(o="/"===a?r:hx([r,a])),n.createHref({pathname:o,search:s,hash:i})}(l=v.to,{relative:n}),[x,y,w]=function(e,t){let r=U.useContext(dy),[n,i]=U.useState(!1),[a,s]=U.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=t,h=U.useRef(null);U.useEffect(()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{s(e.isIntersecting)})},{threshold:.5});return h.current&&e.observe(h.current),()=>{e.disconnect()}}},[e]),U.useEffect(()=>{if(n){let e=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(e)}}},[n]);let p=()=>{i(!0)},f=()=>{i(!1),s(!1)};return r?"intent"!==e?[a,h,{}]:[a,h,{onFocus:py(o,p),onBlur:py(l,f),onMouseEnter:py(c,p),onMouseLeave:py(u,f),onTouchStart:py(d,p)}]:[!1,h,{}]}(r,h),_=function(e,{target:t,replace:r,state:n,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:l}={}){let c=Rx(),u=Tx(),d=Ix(e,{relative:a});return U.useCallback(h=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(h,t)){h.preventDefault();let t=void 0!==r?r:Ub(u)===Ub(d),p=()=>c(e,{replace:t,state:n,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o});l?U.startTransition(()=>p()):p()}},[u,c,d,r,n,t,e,i,a,s,o,l])}(l,{replace:a,state:s,target:o,preventScrollReset:c,relative:n,viewTransition:u,unstable_defaultShouldRevalidate:d,unstable_useTransitions:m});let k=U.createElement("a",{...h,...w,href:v.absoluteURL||b,onClick:v.isExternal||i?e:function(t){e&&e(t),t.defaultPrevented||_(t)},ref:gy(p,y),target:o,"data-discover":g||"render"!==t?void 0:"true"});return x&&!g?U.createElement(U.Fragment,null,k,U.createElement(fy,{page:b})):k});function wy(e){let t=U.useContext(_x);return Lb(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}yy.displayName="Link",U.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:n=!1,style:i,to:a,viewTransition:s,children:o,...l},c){let u=Ix(a,{relative:l.relative}),d=Tx(),h=U.useContext(kx),{navigator:p,basename:f}=U.useContext(Sx),m=null!=h&&function(e,{relative:t}={}){let r=U.useContext(jx);Lb(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=wy("useViewTransitionState"),i=Ix(e,{relative:t});if(!r.isTransitioning)return!1;let a=ax(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=ax(r.nextLocation.pathname,n)||r.nextLocation.pathname;return null!=nx(i.pathname,s)||null!=nx(i.pathname,a)}
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */(u)&&!0===s,g=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,v=d.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;t||(v=v.toLowerCase(),b=b?b.toLowerCase():null,g=g.toLowerCase()),b&&f&&(b=ax(b,f)||b);const x="/"!==g&&g.endsWith("/")?g.length-1:g.length;let y,w=v===g||!n&&v.startsWith(g)&&"/"===v.charAt(x),_=null!=b&&(b===g||!n&&b.startsWith(g)&&"/"===b.charAt(g.length)),k={isActive:w,isPending:_,isTransitioning:m},N=w?e:void 0;y="function"==typeof r?r(k):[r,w?"active":null,_?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let j="function"==typeof i?i(k):i;return U.createElement(yy,{...l,"aria-current":N,className:y,ref:c,style:j,to:a,viewTransition:s},"function"==typeof o?o(k):o)}).displayName="NavLink",U.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:a,method:s=Jx,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:h,...p},f)=>{let{unstable_useTransitions:m}=U.useContext(Sx),g=function(){let{router:e}=wy("useSubmit"),{basename:t}=U.useContext(Sx),r=Vx("useRouteId"),n=e.fetch,i=e.navigate;return U.useCallback(async(e,a={})=>{let{action:s,method:o,encType:l,formData:c,body:u}=iy(e,t);if(!1===a.navigate){let e=a.fetcherKey||ky();await n(e,r,a.action||s,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await i(a.action||s,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,i,t,r])}(),v=function(e,{relative:t}={}){let{basename:r}=U.useContext(Sx),n=U.useContext(Ex);Lb(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...Ix(e||".",{relative:t})},s=Tx();if(null==e){a.search=s.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();a.search=r?`?${r}`:""}}e&&"."!==e||!i.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(a.pathname="/"===a.pathname?r:hx([r,a.pathname]));return Ub(a)}(o,{relative:c}),b="get"===s.toLowerCase()?"get":"post",x="string"==typeof o&&xy.test(o);return U.createElement("form",{ref:f,method:b,action:v,onSubmit:n?l:e=>{if(l&&l(e),e.defaultPrevented)return;e.preventDefault();let n=e.nativeEvent.submitter,o=(null==n?void 0:n.getAttribute("formmethod"))||s,p=()=>g(n||e.currentTarget,{fetcherKey:t,method:o,navigate:r,replace:i,state:a,relative:c,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:h});m&&!1!==r?U.startTransition(()=>p()):p()},...p,"data-discover":x||"render"!==e?void 0:"true"})}).displayName="Form";var _y=0,ky=()=>`__${String(++_y)}__`;var Ny={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=(e,t)=>{const r=U.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:s="",children:o,...l},c)=>{return U.createElement("svg",{ref:c,...Ny,width:n,height:n,stroke:r,strokeWidth:a?24*Number(i)/Number(n):i,className:["lucide",`lucide-${u=e,u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,s].join(" "),...l},[...t.map(([e,t])=>U.createElement(e,t)),...Array.isArray(o)?o:[o]]);var u});return r.displayName=`${e}`,r},Sy=jy("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Cy=jy("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Ey=jy("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),$y=jy("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),Dy=jy("BookCopy",[["path",{d:"M2 16V4a2 2 0 0 1 2-2h11",key:"spzkk5"}],["path",{d:"M5 14H4a2 2 0 1 0 0 4h1",key:"16gqf9"}],["path",{d:"M22 18H11a2 2 0 1 0 0 4h11V6H11a2 2 0 0 0-2 2v12",key:"1owzki"}]]),Py=jy("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Ty=jy("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),Ay=jy("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Fy=jy("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Ry=jy("Captions",[["rect",{width:"18",height:"14",x:"3",y:"5",rx:"2",ry:"2",key:"12ruh7"}],["path",{d:"M7 15h4M15 15h2M7 11h2M13 11h4",key:"1ueiar"}]]),Iy=jy("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),My=jy("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Oy=jy("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Ly=jy("Clapperboard",[["path",{d:"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",key:"1tn4o7"}],["path",{d:"m6.2 5.3 3.1 3.9",key:"iuk76l"}],["path",{d:"m12.4 3.4 3.1 4",key:"6hsd6n"}],["path",{d:"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",key:"ltgou9"}]]),zy=jy("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),By=jy("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Hy=jy("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Uy=jy("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),qy=jy("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Vy=jy("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Ky=jy("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Wy=jy("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Gy=jy("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Yy=jy("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]),Qy=jy("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),Xy=jy("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),Jy=jy("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),Zy=jy("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),ew=jy("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),tw=jy("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),rw=jy("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),nw=jy("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),iw=jy("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),aw=jy("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),sw=jy("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ow=jy("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),lw=jy("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),cw=jy("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),uw=jy("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),dw=jy("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),hw=jy("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]),pw=jy("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),fw=jy("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),mw=jy("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]),gw=jy("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),vw=jy("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),bw=jy("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),xw=jy("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]),yw=jy("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ww=jy("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),_w=jy("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),kw=jy("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),Nw=jy("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),jw="72b4987f77607964f64d1fd5a4935f81",Sw="https://image.tmdb.org/t/p/";const Cw=new class{constructor(e=jw){t(this,"apiKey"),this.apiKey=e}setApiKey(e){this.apiKey=e}async makeRequest(e,t={},r="fr"){const n=this.apiKey||jw;if(n.length<32)throw new Error("Cl API TMDB invalide - vrifiez que vous avez saisi la bonne cl");const i=new URL(`https://api.themoviedb.org/3${e}`);i.searchParams.append("api_key",n),i.searchParams.append("language","fr"===r?"fr-FR":"en-US"),Object.entries(t).forEach(([e,t])=>{i.searchParams.append(e,t)});const a=await fetch(i.toString());if(!a.ok){if(401===a.status)throw new Error("Cl API TMDB invalide ou expire - vrifiez votre cl dans les paramtres");if(400===a.status)throw new Error("Requte invalide - vrifiez votre cl API TMDB dans les paramtres");throw new Error(`Erreur TMDB: ${a.status} ${a.statusText}`)}return a.json()}async searchMulti(e,t=1,r="fr",n){if(e.match(/^\d+$/)&&!n){const t=parseInt(e);try{const e=await this.getMovie(t,r);return{results:[{id:e.id,title:e.title,name:void 0,media_type:"movie",poster_path:e.poster_path,backdrop_path:e.backdrop_path,release_date:e.release_date,first_air_date:void 0,vote_average:e.vote_average,overview:e.overview}],total_pages:1}}catch(i){}try{const e=await this.getTVShow(t,r);return{results:[{id:e.id,title:void 0,name:e.name,media_type:"tv",poster_path:e.poster_path,backdrop_path:e.backdrop_path,release_date:void 0,first_air_date:e.first_air_date,vote_average:e.vote_average,overview:e.overview}],total_pages:1}}catch(i){return{results:[],total_pages:0}}}if(n){const[i,a]=await Promise.all([this.searchMovies(e,t,r,n).catch(()=>({results:[],total_pages:0})),this.searchTV(e,t,r,n).catch(()=>({results:[],total_pages:0}))]);return{results:[...i.results.map(e=>({...e,media_type:"movie"})),...a.results.map(e=>({...e,media_type:"tv"}))],total_pages:Math.max(i.total_pages,a.total_pages)}}return this.makeRequest("/search/multi",{query:encodeURIComponent(e),page:t.toString()},r)}async searchMovies(e,t=1,r="fr",n){const i={query:encodeURIComponent(e),page:t.toString()};return n&&(i.year=n.toString()),this.makeRequest("/search/movie",i,r)}async searchTV(e,t=1,r="fr",n){const i={query:encodeURIComponent(e),page:t.toString()};return n&&(i.first_air_date_year=n.toString()),this.makeRequest("/search/tv",i,r)}async getMovie(e,t="fr"){return this.makeRequest(`/movie/${e}`,{append_to_response:"videos"},t)}async getTVShow(e,t="fr"){return this.makeRequest(`/tv/${e}`,{append_to_response:"videos"},t)}async getMovieCredits(e,t="fr"){return this.makeRequest(`/movie/${e}/credits`,{},t)}async getTVCredits(e,t="fr"){return this.makeRequest(`/tv/${e}/credits`,{},t)}getImageUrl(e,t="w500"){return e?`${Sw}${t}${e}`:"/placeholder-poster.jpg"}getActorImageUrl(e){return e?`${Sw}w138_and_h175_face${e}`:"/placeholder-actor.jpg"}getBackdropUrl(e,t="w1280"){return e?`${Sw}${t}${e}`:"/placeholder-backdrop.jpg"}async getMovieVideos(e){return this.makeRequest(`/movie/${e}/videos`)}async getTVVideos(e){return this.makeRequest(`/tv/${e}/videos`)}async getMovieImages(e){return this.makeRequest(`/movie/${e}/images`,{include_image_language:"en,fr,null"})}async getTVImages(e){return this.makeRequest(`/tv/${e}/images`,{include_image_language:"en,fr,null"})}async getTrailerUrl(e,t){var r,n,i;try{const a="movie"===t?await this.getMovieVideos(e):await this.getTVVideos(e);let s=null==(r=a.results)?void 0:r.find(e=>"Trailer"===e.type&&"YouTube"===e.site&&"fr"===e.iso_639_1);return s||(s=null==(n=a.results)?void 0:n.find(e=>"Trailer"===e.type&&"YouTube"===e.site&&"en"===e.iso_639_1)),s||(s=null==(i=a.results)?void 0:i.find(e=>"YouTube"===e.site)),s?`https://www.youtube.com/watch?v=${s.key}`:null}catch(a){return console.error("Erreur lors de la rcupration de la bande-annonce:",a),null}}};function Ew(e){return function(e){return null!==e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"message")}(e)?e:new Error("string"==typeof e?e:"Unknown error")}const $w=["Active_Height","Active_Width","AudioCount","Audio_Channels_Total","BitDepth_Detected","BitDepth","BitDepth_Stored","Channels","Channels_Original","Chapters_Pos_Begin","Chapters_Pos_End","Comic_Position_Total","Count","DataSize","ElementCount","EPG_Positions_Begin","EPG_Positions_End","FirstPacketOrder","FooterSize","Format_Settings_GMC","Format_Settings_RefFrames","Format_Settings_SliceCount","FrameCount","FrameRate_Den","FrameRate_Num","GeneralCount","HeaderSize","Height_CleanAperture","Height","Height_Offset","Height_Original","ImageCount","Lines_MaxCharacterCount","Lines_MaxCountPerEvent","Matrix_Channels","MenuCount","OtherCount","Part_Position","Part_Position_Total","Played_Count","Reel_Position","Reel_Position_Total","Resolution","Sampled_Height","Sampled_Width","SamplingCount","Season_Position","Season_Position_Total","Source_FrameCount","Source_SamplingCount","Source_StreamSize_Encoded","Source_StreamSize","Status","Stored_Height","Stored_Width","StreamCount","StreamKindID","StreamKindPos","StreamSize_Demuxed","StreamSize_Encoded","StreamSize","TextCount","Track_Position","Track_Position_Total","Video0_Delay","VideoCount","Width_CleanAperture","Width","Width_Offset","Width_Original"],Dw=["Active_DisplayAspectRatio","BitRate_Encoded","BitRate_Maximum","BitRate_Minimum","BitRate","BitRate_Nominal","Bits-Pixel_Frame","BitsPixel_Frame","Compression_Ratio","Delay","Delay_Original","DisplayAspectRatio_CleanAperture","DisplayAspectRatio","DisplayAspectRatio_Original","Duration_End_Command","Duration_End","Duration_FirstFrame","Duration_LastFrame","Duration","Duration_Start2End","Duration_Start_Command","Duration_Start","Events_MinDuration","FrameRate_Maximum","FrameRate_Minimum","FrameRate","FrameRate_Nominal","FrameRate_Original_Den","FrameRate_Original","FrameRate_Original_Num","FrameRate_Real","Interleave_Duration","Interleave_Preload","Interleave_VideoFrames","OverallBitRate_Maximum","OverallBitRate_Minimum","OverallBitRate","OverallBitRate_Nominal","PixelAspectRatio_CleanAperture","PixelAspectRatio","PixelAspectRatio_Original","SamplesPerFrame","SamplingRate","Source_Duration_FirstFrame","Source_Duration_LastFrame","Source_Duration","TimeStamp_FirstFrame","Video_Delay"],Pw=2**32,Tw={coverData:!1,chunkSize:262144,format:"object",full:!1};class Aw{constructor(e,r){t(this,"isAnalyzing",!1),this.mediainfoModule=e,this.options=r,this.mediainfoModuleInstance=this.instantiateModuleInstance()}analyzeData(e,t,r){if(void 0===r)return new Promise((r,n)=>{this.analyzeData(e,t,(e,t)=>{this.isAnalyzing=!1,t||!e?n(Ew(t)):r(e)})});if(this.isAnalyzing)return void r("",new Error("cannot start a new analysis while another is in progress"));this.reset(),this.isAnalyzing=!0;const n=()=>{try{this.openBufferFinalize();const e=this.inform();"object"===this.options.format?r(this.parseResultJson(e)):r(e)}finally{this.isAnalyzing=!1}};let i=0;const a=e=>{const a=e=>{o(e)?s():n()},s=()=>{let n;try{const r=Math.min(this.options.chunkSize,e-i);n=t(r,i)}catch(s){return this.isAnalyzing=!1,void r("",Ew(s))}n instanceof Promise?n.then(a).catch(e=>{this.isAnalyzing=!1,r("",Ew(e))}):a(n)},o=t=>{if(0===t.length||this.openBufferContinue(t,t.length))return!1;const r=this.openBufferContinueGotoGet();return-1===r?i+=t.length:(i=r,this.openBufferInit(e,r)),!0};this.openBufferInit(e,i),s()},s="function"==typeof e?e():e;s instanceof Promise?s.then(a).catch(e=>{r(null,Ew(e))}):a(s)}close(){"function"==typeof this.mediainfoModuleInstance.close&&this.mediainfoModuleInstance.close()}reset(){this.mediainfoModuleInstance.delete(),this.mediainfoModuleInstance=this.instantiateModuleInstance()}inform(){return this.mediainfoModuleInstance.inform()}openBufferContinue(e,t){return!!(8&this.mediainfoModuleInstance.open_buffer_continue(e,t))}openBufferContinueGotoGet(){let e=-1;const t=this.mediainfoModuleInstance.open_buffer_continue_goto_get_lower(),r=this.mediainfoModuleInstance.open_buffer_continue_goto_get_upper();return e=-1==t&&-1==r?-1:t<0?t+Pw+r*Pw:t+r*Pw,e}openBufferFinalize(){this.mediainfoModuleInstance.open_buffer_finalize()}openBufferInit(e,t){this.mediainfoModuleInstance.open_buffer_init(e,t)}parseResultJson(e){const t=$w,r=Dw,n=JSON.parse(e);if(n.media){const e={...n.media,track:[]};if(Array.isArray(n.media.track))for(const i of n.media.track){let n={"@type":i["@type"]};for(const[e,a]of Object.entries(i))"@type"!==e&&(n="string"==typeof a&&t.includes(e)?{...n,[e]:Number.parseInt(a,10)}:"string"==typeof a&&r.includes(e)?{...n,[e]:Number.parseFloat(a)}:{...n,[e]:a});e.track.push(n)}return{...n,media:e}}return n}instantiateModuleInstance(){return new this.mediainfoModule.MediaInfo("object"===this.options.format?"JSON":this.options.format,this.options.coverData,this.options.full)}}async function Fw(e={}){var t,r=e,n=import.meta.url,i="";try{i=new URL(".",n).href}catch{}t=async e=>{var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw new Error(t.status+" : "+t.url)};var a,s,o,l,c,u,d,h,p,f,m,g,v,b=console.log.bind(console),x=console.error.bind(console),y=!1,w=!1;function _(){var e=o.buffer;l=new Int8Array(e),u=new Int16Array(e),c=new Uint8Array(e),d=new Uint16Array(e),h=new Int32Array(e),p=new Uint32Array(e),f=new Float32Array(e),m=new Float64Array(e),g=new BigInt64Array(e),v=new BigUint64Array(e)}var k,N=0,j=null;function S(e){x(e="Aborted("+e+")"),y=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw null==s||s(t),t}function C(){return r.locateFile?(e="MediaInfoModule.wasm",r.locateFile?r.locateFile(e,i):i+e):new URL("MediaInfoModule.wasm",import.meta.url).href;var e}async function E(e,r){try{var n=await async function(e){try{var r=await t(e);return new Uint8Array(r)}catch{}return function(){throw"both async and sync fetching of the wasm failed"}()}(e);return await WebAssembly.instantiate(n,r)}catch(i){x(`failed to asynchronously prepare wasm: ${i}`),S(i)}}var $=e=>{for(var t="";;){var r=c[e++];if(!r)return t;t+=String.fromCharCode(r)}},D={},P={},T={},A=class extends Error{constructor(e){super(e),this.name="BindingError"}},F=e=>{throw new A(e)};function R(e,t,r={}){return function(e,t,r={}){var n=t.name;if(e||F(`type "${n}" must have a positive integer typeid pointer`),P.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;F(`Cannot register type '${n}' twice`)}if(P[e]=t,delete T[e],D.hasOwnProperty(e)){var i=D[e];delete D[e],i.forEach(e=>e())}}(e,t,r)}var I=(e,t,r)=>{switch(t){case 1:return r?e=>l[e]:e=>c[e];case 2:return r?e=>u[e>>1]:e=>d[e>>1];case 4:return r?e=>h[e>>2]:e=>p[e>>2];case 8:return r?e=>g[e>>3]:e=>v[e>>3];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},M=e=>{F(e.$$.ptrType.registeredClass.name+" instance already deleted")},O=!1,L=e=>{},z=e=>{e.count.value-=1,0===e.count.value&&(e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)})(e)},B=e=>"undefined"==typeof FinalizationRegistry?(B=e=>e,e):(O=new FinalizationRegistry(e=>{z(e.$$)}),L=e=>O.unregister(e),(B=e=>{var t=e.$$;if(!!t.smartPtr){var r={$$:t};O.register(e,r,e)}return e})(e));function H(){}var U=(e,t)=>Object.defineProperty(t,"name",{value:e}),q={},V=(e,t,r)=>{if(void 0===e[t].overloadTable){var n=e[t];e[t]=function(...n){return e[t].overloadTable.hasOwnProperty(n.length)||F(`Function '${r}' called with an invalid number of arguments (${n.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[n.length].apply(this,n)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}};function K(e,t,r,n,i,a,s,o){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=i,this.getActualType=a,this.upcast=s,this.downcast=o,this.pureVirtualFunctions=[]}var W=(e,t,r)=>{for(;t!==r;)t.upcast||F(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e},G=e=>{if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e};function Y(e,t){if(null===t)return this.isReference&&F(`null is not a valid ${this.name}`),0;t.$$||F(`Cannot pass "${G(t)}" as a ${this.name}`),t.$$.ptr||F(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass;return W(t.$$.ptr,r,this.registeredClass)}function Q(e,t){var r;if(null===t)return this.isReference&&F(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;t&&t.$$||F(`Cannot pass "${G(t)}" as a ${this.name}`),t.$$.ptr||F(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&F(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass;if(r=W(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&F("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:F(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var i=t.clone();r=this.rawShare(r,we.toHandle(()=>i.delete())),null!==e&&e.push(this.rawDestructor,r)}break;default:F("Unsupporting sharing policy")}return r}function X(e,t){if(null===t)return this.isReference&&F(`null is not a valid ${this.name}`),0;t.$$||F(`Cannot pass "${G(t)}" as a ${this.name}`),t.$$.ptr||F(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&F(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass;return W(t.$$.ptr,r,this.registeredClass)}function J(e){return this.fromWireType(p[e>>2])}var Z=(e,t,r)=>{if(t===r)return e;if(void 0===r.baseClass)return null;var n=Z(e,t,r.baseClass);return null===n?null:r.downcast(n)},ee={},te=(e,t)=>(t=((e,t)=>{for(void 0===t&&F("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t})(e,t),ee[t]),re=class extends Error{constructor(e){super(e),this.name="InternalError"}},ne=e=>{throw new re(e)},ie=(e,t)=>(t.ptrType&&t.ptr||ne("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!==!!t.smartPtr&&ne("Both smartPtrType and smartPtr must be specified"),t.count={value:1},B(Object.create(e,{$$:{value:t,writable:!0}})));function ae(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=te(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function i(){return this.isSmartPointer?ie(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):ie(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var a,s=this.registeredClass.getActualType(t),o=q[s];if(!o)return i.call(this);a=this.isConst?o.constPointerType:o.pointerType;var l=Z(t,this.registeredClass,a.registeredClass);return null===l?i.call(this):this.isSmartPointer?ie(a.registeredClass.instancePrototype,{ptrType:a,ptr:l,smartPtrType:this,smartPtr:e}):ie(a.registeredClass.instancePrototype,{ptrType:a,ptr:l})}function se(e,t,r,n,i,a,s,o,l,c,u){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=i,this.pointeeType=a,this.sharingPolicy=s,this.rawGetPointee=o,this.rawConstructor=l,this.rawShare=c,this.rawDestructor=u,i||void 0!==t.baseClass?this.toWireType=Q:n?(this.toWireType=Y,this.destructorFunction=null):(this.toWireType=X,this.destructorFunction=null)}var oe,le=[],ce=(e,t,r=!1)=>{e=$(e);var n,i,a=((i=le[n=t])||(le[n]=i=oe.get(n)),i);return"function"!=typeof a&&F(`unknown function pointer with signature ${e}: ${t}`),a};class ue extends Error{}var de=e=>{var t=Ve(e),r=$(t);return We(t),r},he=(e,t)=>{var r=[],n={};throw t.forEach(function e(t){n[t]||P[t]||(T[t]?T[t].forEach(e):(r.push(t),n[t]=!0))}),new ue(`${e}: `+r.map(de).join([", "]))},pe=(e,t,r)=>{function n(t){var n=r(t);n.length!==e.length&&ne("Mismatched type converter count");for(var i=0;i<e.length;++i)R(e[i],n[i])}e.forEach(e=>T[e]=t);var i=new Array(t.length),a=[],s=0;t.forEach((e,t)=>{P.hasOwnProperty(e)?i[t]=P[e]:(a.push(e),D.hasOwnProperty(e)||(D[e]=[]),D[e].push(()=>{i[t]=P[e],++s===a.length&&n(i)}))}),0===a.length&&n(i)},fe=(e,t)=>{for(var r=[],n=0;n<e;n++)r.push(p[t+4*n>>2]);return r},me=e=>{for(;e.length;){var t=e.pop();e.pop()(t)}};function ge(e){for(var t=1;t<e.length;++t)if(null!==e[t]&&void 0===e[t].destructorFunction)return!0;return!1}function ve(e,t,r,n,i,a){var s=t.length;s<2&&F("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==t[1]&&null!==r,l=ge(t),c=!t[0].isVoid,u=t[0],d=t[1],h=[e,F,n,i,me,u.fromWireType.bind(u),null==d?void 0:d.toWireType.bind(d)],p=2;p<s;++p){var f=t[p];h.push(f.toWireType.bind(f))}if(!l)for(p=o?1:2;p<t.length;++p)null!==t[p].destructorFunction&&h.push(t[p].destructorFunction);let m=function(e,t,r,n){var i=ge(e),a=e.length-2,s=[],o=["fn"];t&&o.push("thisWired");for(var l=0;l<a;++l)s.push(`arg${l}`),o.push(`arg${l}Wired`);s=s.join(","),o=o.join(",");var c=`return function (${s}) {\n`;i&&(c+="var destructors = [];\n");var u=i?"destructors":"null",d=["humanName","throwBindingError","invoker","fn","runDestructors","fromRetWire","toClassParamWire"];for(t&&(c+=`var thisWired = toClassParamWire(${u}, this);\n`),l=0;l<a;++l){var h=`toArg${l}Wire`;c+=`var arg${l}Wired = ${h}(${u}, arg${l});\n`,d.push(h)}if(c+=(r||n?"var rv = ":"")+`invoker(${o});\n`,i)c+="runDestructors(destructors);\n";else for(l=t?1:2;l<e.length;++l){var p=1===l?"thisWired":"arg"+(l-2)+"Wired";null!==e[l].destructorFunction&&(c+=`${p}_dtor(${p});\n`,d.push(`${p}_dtor`))}return r&&(c+="var ret = fromRetWire(rv);\nreturn ret;\n"),c+="}\n",new Function(d,c)}(t,o,c,a);var g=m(...h);return U(e,g)}var be=[],xe=[0,1,,1,null,1,!0,1,!1,1],ye=e=>{e>9&&0===--xe[e+1]&&(xe[e]=void 0,be.push(e))},we={toValue:e=>(e||F(`Cannot use deleted val. handle = ${e}`),xe[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=be.pop()||xe.length;return xe[t]=e,xe[t+1]=1,t}}}},_e={name:"emscripten::val",fromWireType:e=>{var t=we.toValue(e);return ye(e),t},toWireType:(e,t)=>we.toHandle(t),readValueFromPointer:J,destructorFunction:null},ke=(e,t)=>{switch(t){case 4:return function(e){return this.fromWireType(f[e>>2])};case 8:return function(e){return this.fromWireType(m[e>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},Ne=(e,t,r)=>((e,t,r,n)=>{if(!(n>0))return 0;for(var i=r,a=r+n-1,s=0;s<e.length;++s){var o=e.codePointAt(s);if(o<=127){if(r>=a)break;t[r++]=o}else if(o<=2047){if(r+1>=a)break;t[r++]=192|o>>6,t[r++]=128|63&o}else if(o<=65535){if(r+2>=a)break;t[r++]=224|o>>12,t[r++]=128|o>>6&63,t[r++]=128|63&o}else{if(r+3>=a)break;t[r++]=240|o>>18,t[r++]=128|o>>12&63,t[r++]=128|o>>6&63,t[r++]=128|63&o,s++}}return t[r]=0,r-i})(e,c,t,r),je=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t},Se="undefined"!=typeof TextDecoder?new TextDecoder:void 0,Ce=(e,t,r,n)=>{var i=t+r;if(n)return i;for(;e[t]&&!(t>=i);)++t;return t},Ee=(e,t=0,r,n)=>{var i=Ce(e,t,r,n);if(i-t>16&&e.buffer&&Se)return Se.decode(e.subarray(t,i));for(var a="";t<i;){var s=e[t++];if(128&s){var o=63&e[t++];if(192!=(224&s)){var l=63&e[t++];if((s=224==(240&s)?(15&s)<<12|o<<6|l:(7&s)<<18|o<<12|l<<6|63&e[t++])<65536)a+=String.fromCharCode(s);else{var c=s-65536;a+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else a+=String.fromCharCode((31&s)<<6|o)}else a+=String.fromCharCode(s)}return a},$e="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,De=(e,t,r)=>{var n=e>>1,i=Ce(d,n,t/2,r);if(i-n>16&&$e)return $e.decode(d.subarray(n,i));for(var a="",s=n;s<i;++s){var o=d[s];a+=String.fromCharCode(o)}return a},Pe=(e,t,r)=>{if(r??(r=2147483647),r<2)return 0;for(var n=t,i=(r-=2)<2*e.length?r/2:e.length,a=0;a<i;++a){var s=e.charCodeAt(a);u[t>>1]=s,t+=2}return u[t>>1]=0,t-n},Te=e=>2*e.length,Ae=(e,t,r)=>{for(var n="",i=e>>2,a=0;!(a>=t/4);a++){var s=p[i+a];if(!s&&!r)break;n+=String.fromCodePoint(s)}return n},Fe=(e,t,r)=>{if(r??(r=2147483647),r<4)return 0;for(var n=t,i=n+r-4,a=0;a<e.length;++a){var s=e.codePointAt(a);if(s>65535&&a++,h[t>>2]=s,(t+=4)+4>i)break}return h[t>>2]=0,t-n},Re=e=>{for(var t=0,r=0;r<e.length;++r){e.codePointAt(r)>65535&&r++,t+=4}return t},Ie=[],Me=(e,t)=>{var r=P[e];return void 0===r&&F(`${t} has unknown type ${de(e)}`),r},Oe=(e,t,r)=>{var n=[],i=e(n,r);return n.length&&(p[t>>2]=we.toHandle(n)),i},Le={},ze=e=>{var t=Le[e];return void 0===t?$(e):t};var Be=(e,t)=>Math.ceil(e/t)*t,He=e=>{var t=(e-o.buffer.byteLength+65535)/65536|0;try{return o.grow(t),_(),1}catch(Ek){}},Ue={},qe=()=>{if(!qe.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.language||"C").replace("-","_")+".UTF-8",_:"./this.program"};for(var t in Ue)void 0===Ue[t]?delete e[t]:e[t]=Ue[t];var r=[];for(var t in e)r.push(`${t}=${e[t]}`);qe.strings=r}return qe.strings};var Ve,Ke,We,Ge=[null,[],[]],Ye=(e,t)=>{var r=Ge[e];0===t||10===t?((1===e?b:x)(Ee(r)),r.length=0):r.push(t)};(()=>{let e=H.prototype;Object.assign(e,{isAliasOf(e){if(!(this instanceof H))return!1;if(!(e instanceof H))return!1;var t=this.$$.ptrType.registeredClass,r=this.$$.ptr;e.$$=e.$$;for(var n=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)i=n.upcast(i),n=n.baseClass;return t===n&&r===i},clone(){if(this.$$.ptr||M(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e,t=B(Object.create(Object.getPrototypeOf(this),{$$:{value:(e=this.$$,{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType})}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t},delete(){this.$$.ptr||M(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&F("Object already scheduled for deletion"),L(this),z(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||M(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&F("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const t=Symbol.dispose;t&&(e[t]=e.delete)})(),Object.assign(se.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;null==(t=this.rawDestructor)||t.call(this,e)},readValueFromPointer:J,fromWireType:ae});var Qe={_abort_js:()=>S(""),_embind_register_bigint:(e,t,r,n,i)=>{t=$(t);const a=0n===n;let s=e=>e;if(a){const e=8*r;s=t=>BigInt.asUintN(e,t),i=s(i)}R(e,{name:t,fromWireType:s,toWireType:(e,t)=>("number"==typeof t&&(t=BigInt(t)),t),readValueFromPointer:I(t,r,!a),destructorFunction:null})},_embind_register_bool:(e,t,r,n)=>{R(e,{name:t=$(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:n},readValueFromPointer:function(e){return this.fromWireType(c[e])},destructorFunction:null})},_embind_register_class:(e,t,n,i,a,s,o,l,c,u,d,h,p)=>{d=$(d),s=ce(a,s),l&&(l=ce(o,l)),u&&(u=ce(c,u)),p=ce(h,p);var f=(e=>{var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?`_${e}`:e})(d);((e,t,n)=>{r.hasOwnProperty(e)?(F(`Cannot register public name '${e}' twice`),V(r,e,e),r[e].overloadTable.hasOwnProperty(n)&&F(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),r[e].overloadTable[n]=t):(r[e]=t,r[e].argCount=n)})(f,function(){he(`Cannot construct ${d} due to unbound types`,[i])}),pe([e,t,n],i?[i]:[],t=>{var n,a,o;t=t[0],o=i?(a=t.registeredClass).instancePrototype:H.prototype;var c=U(d,function(...e){if(Object.getPrototypeOf(this)!==h)throw new A(`Use 'new' to construct ${d}`);if(void 0===m.constructor_body)throw new A(`${d} has no accessible constructor`);var t=m.constructor_body[e.length];if(void 0===t)throw new A(`Tried to invoke ctor of ${d} with invalid number of parameters (${e.length}) - expected (${Object.keys(m.constructor_body).toString()}) parameters instead!`);return t.apply(this,e)}),h=Object.create(o,{constructor:{value:c}});c.prototype=h;var m=new K(d,c,h,p,a,s,l,u);m.baseClass&&((n=m.baseClass).__derivedClasses??(n.__derivedClasses=[]),m.baseClass.__derivedClasses.push(m));var g=new se(d,m,!0,!1,!1),v=new se(d+"*",m,!1,!1,!1),b=new se(d+" const*",m,!1,!0,!1);return q[e]={pointerType:v,constPointerType:b},((e,t,n)=>{r.hasOwnProperty(e)||ne("Replacing nonexistent public symbol"),void 0!==r[e].overloadTable&&void 0!==n||(r[e]=t,r[e].argCount=n)})(f,c),[g,v,b]})},_embind_register_class_constructor:(e,t,r,n,i,a)=>{var s=fe(t,r);i=ce(n,i),pe([],[e],e=>{var r=`constructor ${(e=e[0]).name}`;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new A(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.registeredClass.constructor_body[t-1]=()=>{he(`Cannot construct ${e.name} due to unbound types`,s)},pe([],s,n=>(n.splice(1,0,null),e.registeredClass.constructor_body[t-1]=ve(r,n,null,i,a),[])),[]})},_embind_register_class_function:(e,t,r,n,i,a,s,o,l,c)=>{var u=fe(r,n);t=(e=>{const t=(e=e.trim()).indexOf("(");return-1===t?e:e.slice(0,t)})(t=$(t)),a=ce(i,a,l),pe([],[e],e=>{var n=`${(e=e[0]).name}.${t}`;function i(){he(`Cannot call ${n} due to unbound types`,u)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),o&&e.registeredClass.pureVirtualFunctions.push(t);var c=e.registeredClass.instancePrototype,d=c[t];return void 0===d||void 0===d.overloadTable&&d.className!==e.name&&d.argCount===r-2?(i.argCount=r-2,i.className=e.name,c[t]=i):(V(c,t,n),c[t].overloadTable[r-2]=i),pe([],u,i=>{var o=ve(n,i,e,a,s,l);return void 0===c[t].overloadTable?(o.argCount=r-2,c[t]=o):c[t].overloadTable[r-2]=o,[]}),[]})},_embind_register_emval:e=>R(e,_e),_embind_register_float:(e,t,r)=>{R(e,{name:t=$(t),fromWireType:e=>e,toWireType:(e,t)=>t,readValueFromPointer:ke(t,r),destructorFunction:null})},_embind_register_integer:(e,t,r,n,i)=>{t=$(t);let a=e=>e;if(0===n){var s=32-8*r;a=e=>e<<s>>>s,i=a(i)}R(e,{name:t,fromWireType:a,toWireType:(e,t)=>t,readValueFromPointer:I(t,r,0!==n),destructorFunction:null})},_embind_register_memory_view:(e,t,r)=>{var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][t];function i(e){var t=p[e>>2],r=p[e+4>>2];return new n(l.buffer,r,t)}R(e,{name:r=$(r),fromWireType:i,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},_embind_register_smart_ptr:(e,t,r,n,i,a,s,o,l,c,u,d)=>{r=$(r),a=ce(i,a),o=ce(s,o),c=ce(l,c),d=ce(u,d),pe([e],[t],e=>(e=e[0],[new se(r,e.registeredClass,!1,!1,!0,e,n,a,o,c,d)]))},_embind_register_std_string:(e,t)=>{R(e,{name:t=$(t),fromWireType(e){var t,r,n,i,a=p[e>>2];return n=a,i=!0,t=(r=e+4)?Ee(c,r,n,i):"",We(e),t},toWireType(e,t){var r;t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n="string"==typeof t;n||ArrayBuffer.isView(t)&&1==t.BYTES_PER_ELEMENT||F("Cannot pass non-string to std::string"),r=n?je(t):t.length;var i=Ke(4+r+1),a=i+4;return p[i>>2]=r,n?Ne(t,a,r+1):c.set(t,a),null!==e&&e.push(We,i),i},readValueFromPointer:J,destructorFunction(e){We(e)}})},_embind_register_std_wstring:(e,t,r)=>{var n,i,a;r=$(r),2===t?(n=De,i=Pe,a=Te):(n=Ae,i=Fe,a=Re),R(e,{name:r,fromWireType:e=>{var r=p[e>>2],i=n(e+4,r*t,!0);return We(e),i},toWireType:(e,n)=>{"string"!=typeof n&&F(`Cannot pass non-string to C++ string type ${r}`);var s=a(n),o=Ke(4+s+t);return p[o>>2]=s/t,i(n,o+4,s+t),null!==e&&e.push(We,o),o},readValueFromPointer:J,destructorFunction(e){We(e)}})},_embind_register_void:(e,t)=>{R(e,{isVoid:!0,name:t=$(t),fromWireType:()=>{},toWireType:(e,t)=>{}})},_emval_create_invoker:(e,t,r)=>{var[n,...i]=((e,t)=>{for(var r=new Array(e),n=0;n<e;++n)r[n]=Me(p[t+4*n>>2],`parameter ${n}`);return r})(e,t),a=n.toWireType.bind(n),s=i.map(e=>e.readValueFromPointer.bind(e));e--;var o,l={toValue:we.toValue},c=s.map((e,t)=>{var r=`argFromPtr${t}`;return l[r]=e,`${r}(args${t?"+"+8*t:""})`});switch(r){case 0:o="toValue(handle)";break;case 2:o="new (toValue(handle))";break;case 3:o="";break;case 1:l.getStringOrSymbol=ze,o="toValue(handle)[getStringOrSymbol(methodName)]"}o+=`(${c})`,n.isVoid||(l.toReturnWire=a,l.emval_returnValue=Oe,o=`return emval_returnValue(toReturnWire, destructorsRef, ${o})`),o=`return function (handle, methodName, destructorsRef, args) {\n  ${o}\n  }`;var u,d,h=new Function(Object.keys(l),o)(...Object.values(l)),f=`methodCaller<(${i.map(e=>e.name)}) => ${n.name}>`;return u=U(f,h),d=Ie.length,Ie.push(u),d},_emval_decref:ye,_emval_incref:e=>{e>9&&(xe[e+1]+=1)},_emval_invoke:(e,t,r,n,i)=>Ie[e](t,r,n,i),_emval_run_destructors:e=>{var t=we.toValue(e);me(t),ye(e)},_gmtime_js:function(e,t){var r;e=(r=e)<-9007199254740992||r>9007199254740992?NaN:Number(r);var n=new Date(1e3*e);h[t>>2]=n.getUTCSeconds(),h[t+4>>2]=n.getUTCMinutes(),h[t+8>>2]=n.getUTCHours(),h[t+12>>2]=n.getUTCDate(),h[t+16>>2]=n.getUTCMonth(),h[t+20>>2]=n.getUTCFullYear()-1900,h[t+24>>2]=n.getUTCDay();var i=Date.UTC(n.getUTCFullYear(),0,1,0,0,0,0),a=(n.getTime()-i)/864e5|0;h[t+28>>2]=a},_tzset_js:(e,t,r,n)=>{var i=(new Date).getFullYear(),a=new Date(i,0,1),s=new Date(i,6,1),o=a.getTimezoneOffset(),l=s.getTimezoneOffset(),c=Math.max(o,l);p[e>>2]=60*c,h[t>>2]=Number(o!=l);var u=e=>{var t=e>=0?"-":"+",r=Math.abs(e);return`UTC${t}${String(Math.floor(r/60)).padStart(2,"0")}${String(r%60).padStart(2,"0")}`},d=u(o),f=u(l);l<o?(Ne(d,r,17),Ne(f,n,17)):(Ne(d,n,17),Ne(f,r,17))},emscripten_date_now:()=>Date.now(),emscripten_resize_heap:e=>{var t=c.length,r=2147483648;if((e>>>=0)>r)return!1;for(var n=1;n<=4;n*=2){var i=t*(1+.2/n);i=Math.min(i,e+100663296);var a=Math.min(r,Be(Math.max(e,i),65536));if(He(a))return!0}return!1},environ_get:(e,t)=>{var r=0,n=0;for(var i of qe()){var a=t+r;p[e+n>>2]=a,r+=Ne(i,a,1/0)+1,n+=4}return 0},environ_sizes_get:(e,t)=>{var r=qe();p[e>>2]=r.length;var n=0;for(var i of r)n+=je(i)+1;return p[t>>2]=n,0},fd_close:e=>52,fd_seek:function(e,t,r,n){return 70},fd_write:(e,t,r,n)=>{for(var i=0,a=0;a<r;a++){var s=p[t>>2],o=p[t+4>>2];t+=8;for(var l=0;l<o;l++)Ye(e,c[s+l]);i+=o}return p[n>>2]=i,0}},Xe=await async function(){function e(e,t){var r;return Xe=e.exports,o=Xe.memory,_(),oe=Xe.__indirect_function_table,Ve=(r=Xe).__getTypeName,Ke=r.malloc,We=r.free,r._emscripten_stack_restore,r._emscripten_stack_alloc,r.emscripten_stack_get_current,function(){if(0==--N&&j){var e=j;j=null,e()}}(),Xe}N++;var t={env:Qe,wasi_snapshot_preview1:Qe};return k??(k=C()),e((await async function(e,t,r){try{var n=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(n,r)}catch(i){x(`wasm streaming compile failed: ${i}`),x("falling back to ArrayBuffer instantiation")}return E(t,r)}(0,k,t)).instance)}();return function e(){N>0||N>0?j=e:(r.calledRun=!0,y||(w=!0,Xe.__wasm_call_ctors(),null==a||a(r)))}(),w?r:new Promise((e,t)=>{a=e,s=t})}const Rw=()=>{};function Iw(e,t){try{if("/"===new URL(t).pathname)return`${t}mediainfo.js/dist/${e}`}catch{}return`${t}../${e}`}function Mw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;if(void 0===t)return new Promise((t,r)=>{Mw(e,t,r)});const{locateFile:n,...i}={...Tw,...e,format:e.format??Tw.format};Fw({print:Rw,printErr:Rw,locateFile:n??Iw,onAbort:e=>{r&&r(e)}}).then(e=>{t(new Aw(e,i))}).catch(e=>{r&&r(e)})}const Ow=new class{constructor(){t(this,"mediaInfo",null)}async initialize(){if(this.mediaInfo)return this.mediaInfo;try{return this.mediaInfo=await Mw({format:"text",locateFile:()=>"/fichegen/MediaInfoModule.wasm"}),this.mediaInfo}catch(e){throw console.error("Erreur lors de l'initialisation de MediaInfo:",e),e}}async analyzeFile(e){const t=await this.initialize(),r=await t.analyzeData(()=>e.size,(t,r)=>new Promise((n,i)=>{const a=new FileReader;a.onload=e=>{var t,r;(null==(t=e.target)?void 0:t.error)?i(e.target.error):n(new Uint8Array(null==(r=e.target)?void 0:r.result))},a.readAsArrayBuffer(e.slice(r,r+t))})),n=r.match(/(General[\s\S]*?)(?=\n(?:Video|Audio|Text|Menu|$))/);if(n){const t=n[1],i=`Complete name                            : ${e.name}\n`,a=t.replace(/^(General\s*\n)/,`$1${i}`);return r.replace(t,a)}return r}};function Lw(e){if(!e)return!1;const t=e.toLowerCase(),r=["<movie>","<tvshow>","<episodedetails>","<title>","<originaltitle>","<plot>","<director>","<?xml","<root>"].some(e=>t.includes(e)),n=["general","video","audio","text","complete name","movie name","format ","codec","bit rate","width","height","frame rate","duration"].some(e=>t.includes(e));return r||n}function zw(e){if(!e)return!1;const t=e.toLowerCase();return["general","video","audio","text","complete name","format ","codec","bit rate","width","height","frame rate","duration","mediainfo","media info"].some(e=>t.includes(e))}function Bw(e){const t={};try{const r=e.match(/<originaltitle[^>]*>(.*?)<\/originaltitle>/is);r&&(t.originaltitle=r[1].trim());const n=e.match(/<votes[^>]*>(.*?)<\/votes>/is);n&&(t.votes=n[1].trim());const i=e.match(/<premiered[^>]*>(.*?)<\/premiered>/is);i&&(t.premiered=i[1].trim());const a=e.match(/<aired[^>]*>(.*?)<\/aired>/is);a&&(t.aired=a[1].trim());const s=e.match(/<season[^>]*>(.*?)<\/season>/is);s&&(t.season=s[1].trim());const o=e.match(/<episode[^>]*>(.*?)<\/episode>/is);o&&(t.episode=o[1].trim());const l=e.match(/<tvdbid[^>]*>(.*?)<\/tvdbid>/is)||e.match(/thetvdb\.com\/(?:series|episode)\/(\d+)/i);l&&(t.tvdbId=l[1].trim());const c=e.match(/<title[^>]*>(.*?)<\/title>/is);c&&(t.title=c[1].trim());const u=e.match(/<year[^>]*>(.*?)<\/year>/is);u&&(t.year=u[1].trim());const d=e.match(/<plot[^>]*>(.*?)<\/plot>/is);d&&(t.plot=d[1].trim());const h=e.match(/<director[^>]*>(.*?)<\/director>/is);h&&(t.director=h[1].trim());const p=e.match(/<actor[^>]*>.*?<name[^>]*>(.*?)<\/name>.*?<\/actor>/gis);p&&(t.actors=p.map(e=>{const t=e.match(/<name[^>]*>(.*?)<\/name>/is);return t?t[1].trim():""}).filter(e=>e));const f=e.match(/<genre[^>]*>(.*?)<\/genre>/gis);f&&(t.genres=f.map(e=>e.replace(/<\/?genre[^>]*>/gi,"").trim()));const m=e.match(/<writer[^>]*>(.*?)<\/writer>/gis);m&&(t.writer=m.map(e=>e.replace(/<\/?writer[^>]*>/gi,"").trim()).filter(Boolean));const g=e.match(/<studio[^>]*>(.*?)<\/studio>/gis);g&&(t.studio=g.map(e=>e.replace(/<\/?studio[^>]*>/gi,"").trim()).filter(Boolean));const v=e.match(/<country[^>]*>(.*?)<\/country>/gis);v&&(t.country=v.map(e=>e.replace(/<\/?country[^>]*>/gi,"").trim()).filter(Boolean));const b=e.match(/<language[^>]*>(.*?)<\/language>/gis);b&&(t.language=b.map(e=>e.replace(/<\/?language[^>]*>/gi,"").trim()).filter(Boolean));const x=e.match(/<runtime[^>]*>(.*?)<\/runtime>/is);x&&(t.runtime=x[1].trim());const y=e.match(/<rating[^>]*>(.*?)<\/rating>/is);y&&(t.rating=y[1].trim());const w=e.match(/<imdb[^>]*>(.*?)<\/imdb>/is)||e.match(/imdb\.com\/title\/(tt\d+)/i);w&&(t.imdbId=w[1].trim());const _=e.match(/<tmdbid[^>]*>(.*?)<\/tmdbid>/is)||e.match(/themoviedb\.org\/(?:movie|tv)\/(\d+)/i);_&&(t.tmdbId=_[1].trim())}catch(r){console.error("Erreur lors du parsing NFO XML:",r)}return t}function Hw(e){return e?e.replace(/\.[^.]+$/,"").replace(/[[\]()]/g," ").replace(/[._-]/g," ").replace(/\b(19|20)\d{2}\b.*$/,"").replace(/\b(S\d+E\d+|Season\s+\d+|Episode\s+\d+)\b.*$/i,"").replace(/\b(FRENCH|ENGLISH|MULTI|TRUEFRENCH|VFF|VFQ|VOSTFR|MULTI\.TRUEFRENCH)\b.*$/i,"").replace(/\b(720p|1080p|2160p|4K|UHD|HDR|BluRay|WEB|WEB-DL|WEBRIP|HDTV|REMUX)\b.*$/i,"").replace(/\s+/g," ").trim():""}function Uw(e){if(!e)return"";const t=e.match(/(Movie\s*name|Nom\s*du\s*film)\s*:\s*(.+)/i);if(t){const e=Hw(t[2].trim());if(e&&e.length>1)return e}const r=e.match(/^Title\s*:\s*(.+)$/im);if(r){const e=Hw(r[1].trim());if(e&&e.length>1)return e}const n=e.match(/(Complete\s*name|Nom\s*complet)\s*:\s*(.+)/i);if(n){const e=Hw(n[2].trim().split(/[\\/]/).pop()||"");if(e)return e}const i=e.match(/^\s*([^\n]+?)\s*\((19|20)\d{2}\).*$/m);if(i){const e=i[1].replace(/[._]/g," ").replace(/\s+/g," ").trim();if(e&&e.length>1)return e}const a=e.match(/^\s*Source\s*:\s*(.+)$/im)||e.match(/^\s*Source\s*VF\s*:\s*(.+)$/im);if(a){let e=a[1].trim().replace(/[._]/g," ");const t=e.search(/\b(19|20)\d{2}\b/);if(t>0&&(e=e.slice(0,t)),e=e.replace(/\s+$/g,"").trim(),e&&e.length>1)return e}const s=Bw(e);return s.title?s.title:""}const qw={quality:"1080p",format:"MKV",codec:"H.264",bitrate:5,bitrateUnit:"Mbps",size:8};const Vw={"V_MPEG4/ISO/AVC":"H.264","V_MPEGH/ISO/HEVC":"H.265",HEVC:"H.265",hevc:"H.265",V_MPEG2:"MPEG-2","MPEG VIDEO":"MPEG-2","MPEG-2":"MPEG-2","V_MPEG4/ISO/ASP":"MPEG-4","V_MS/VFW/FOURCC":"FOURCC","V_MS/VFW/FOURCC / DIV3":"DivX 3","V_MS/VFW/FOURCC / DIVX":"DivX","V_MS/VFW/FOURCC / DX50":"DivX 5","V_MS/VFW/FOURCC / XVID":"Xvid",XVID:"XVID",xvid:"XVID","V_MPEG4/ISO/AP":"MPEG-4 Part 2",V_MJPEG:"MJPEG","V_MS/VFW/FOURCC / H264":"H.264","V_MS/VFW/FOURCC / X264":"H.264","V_MS/VFW/FOURCC / AVC1":"H.264","V_MS/VFW/FOURCC / H265":"H.265","V_MS/VFW/FOURCC / HEVC":"H.265","V_MS/VFW/FOURCC / x265":"H.265","V_MS/VFW/FOURCC / hev1":"H.265",V_VP8:"VP8",V_VP9:"VP9",V_THEORA:"Theora",V_MPEG1:"MPEG-1","V_MPEG4/ISO/SP":"MPEG-4 Part 2","V_MPEG4/ISO/MP4V-ES":"MPEG-4 Part 2",V_AV1:"AV1",V_AV01:"AV1","V_AV1 ":"AV1",AV1:"AV1","AV-1":"AV1","AV1+":"AV1","AOMedia Video 1":"AV1","AOM AV1":"AV1",avc1:"H.264",hev1:"H.265",hvc1:"H.265",dvh1:"H.265",av01:"AV1",vp09:"VP9",vp08:"VP8"},Kw={"A_AAC-2":"AAC",A_AAC:"AAC",A_AC3:"AC-3",A_DTS:"DTS","A_DTS/ES":"DTS-ES","A_DTS/HDRA":"DTS-HD-HRA","A_DTS/HDMA":"DTS-HD-MA","Dolby Digital Plus with Atmos":"Dolby Digital Plus / E-AC3 Atmos","Dolby Digital Plus with Dolby Atmos":"Dolby Digital Plus / E-AC3 Atmos","E-AC-3 JOC":"Dolby Digital Plus / E-AC3 Atmos","DD+ Atmos":"Dolby Digital Plus / E-AC3 Atmos","DDP Atmos":"Dolby Digital Plus / E-AC3 Atmos","Dolby Digital Plus (E-AC-3)":"Dolby Digital Plus / E-AC3","Dolby Digital Plus":"Dolby Digital Plus / E-AC3","E-AC-3":"Dolby Digital Plus / E-AC3","EC-3":"Dolby Digital Plus / E-AC3","DD+":"Dolby Digital Plus / E-AC3",A_EAC3:"E-AC-3",A_FLAC:"FLAC","A_MPEG/L3":"MP3","A_MPEG/L2":"MP2",A_TRUEHD:"TrueHD",A_VORBIS:"Vorbis",A_WAVPACK4:"WavPack",A_PCM:"PCM","A_PCM/INT/LIT":"PCM","A_PCM/INT/BIG":"PCM","A_PCM/FLOAT/IEEE":"PCM",mp4a:"AAC","ac-3":"AC-3","ec-3":"E-AC-3",dts:"DTS",dtsh:"DTS-HDRA",dtsl:"DTS-HD MA","dts-es":"DTS-ES",dtses:"DTS-ES",flac:"FLAC"},Ww={1:"Mono",2:"Stro",3:"2.1",4:"4.0",5:"5.0",6:"5.1",7:"6.1",8:"7.1",10:"7.1.2 (Atmos)",12:"7.1.4 (Atmos)",16:"15.1"},Gw={fr:{code:"fr",name:"Franais",flag:""},"fr-ad":{code:"fr-ad",name:"Franais AD",flag:""},"fr-ca":{code:"fr-ca",name:"Qubcois",flag:""},en:{code:"en",name:"Anglais",flag:""},"en-ad":{code:"en-ad",name:"Anglais AD",flag:""},es:{code:"es",name:"Espagnol",flag:""},de:{code:"de",name:"Allemand",flag:""},it:{code:"it",name:"Italien",flag:""},pt:{code:"pt",name:"Portugais",flag:""},ru:{code:"ru",name:"Russe",flag:""},ja:{code:"ja",name:"Japonais",flag:""},ko:{code:"ko",name:"Coren",flag:""},zh:{code:"zh",name:"Chinois",flag:""},ar:{code:"ar",name:"Arabe",flag:""},he:{code:"he",name:"Hbreu",flag:""},th:{code:"th",name:"Tha",flag:""},vi:{code:"vi",name:"Vietnamien",flag:""},hi:{code:"hi",name:"Hindi",flag:""},nl:{code:"nl",name:"Nerlandais",flag:""},sv:{code:"sv",name:"Sudois",flag:""},no:{code:"no",name:"Norvgien",flag:""},da:{code:"da",name:"Danois",flag:""},fi:{code:"fi",name:"Finnois",flag:""},pl:{code:"pl",name:"Polonais",flag:""},cs:{code:"cs",name:"Tchque",flag:""},hu:{code:"hu",name:"Hongrois",flag:""},tr:{code:"tr",name:"Turc",flag:""},ro:{code:"ro",name:"Roumain",flag:""},bg:{code:"bg",name:"Bulgare",flag:""},el:{code:"el",name:"Grec",flag:""},id:{code:"id",name:"Indonsien",flag:""},ms:{code:"ms",name:"Malais",flag:""},tl:{code:"tl",name:"Filipino",flag:""},uk:{code:"uk",name:"Ukrainien",flag:""},hr:{code:"hr",name:"Croate",flag:""},sr:{code:"sr",name:"Serbe",flag:""},sl:{code:"sl",name:"Slovne",flag:""},sk:{code:"sk",name:"Slovaque",flag:""},lt:{code:"lt",name:"Lituanien",flag:""},lv:{code:"lv",name:"Letton",flag:""},et:{code:"et",name:"Estonien",flag:""},"chinese (simplified)":{code:"zh",name:"Chinois (Simplifi)",flag:""},"chinese (traditional)":{code:"zh-tw",name:"Chinois (Traditionnel)",flag:""},"spanish (latin america)":{code:"es-mx",name:"Espagnol (Amrique Latine)",flag:""},"spanish (es)":{code:"es",name:"Espagnol",flag:""},spanish:{code:"es",name:"Espagnol",flag:""},"portuguese (br)":{code:"pt-br",name:"Portugais (Brsil)",flag:""},portuguese:{code:"pt",name:"Portugais",flag:""},"portuguese (pt)":{code:"pt",name:"Portugais",flag:""},"norwegian bokmal":{code:"no",name:"Norvgien",flag:""},chinese:{code:"zh",name:"Chinois",flag:""},arabic:{code:"ar",name:"Arabe",flag:""},czech:{code:"cs",name:"Tchque",flag:""},danish:{code:"da",name:"Danois",flag:""},german:{code:"de",name:"Allemand",flag:""},greek:{code:"el",name:"Grec",flag:""},finnish:{code:"fi",name:"Finnois",flag:""},hebrew:{code:"he",name:"Hbreu",flag:""},croatian:{code:"hr",name:"Croate",flag:""},hungarian:{code:"hu",name:"Hongrois",flag:""},indonesian:{code:"id",name:"Indonsien",flag:""},italian:{code:"it",name:"Italien",flag:""},korean:{code:"ko",name:"Coren",flag:""},malay:{code:"ms",name:"Malais",flag:""},dutch:{code:"nl",name:"Nerlandais",flag:""},polish:{code:"pl",name:"Polonais",flag:""},romanian:{code:"ro",name:"Roumain",flag:""},russian:{code:"ru",name:"Russe",flag:""},swedish:{code:"sv",name:"Sudois",flag:""},thai:{code:"th",name:"Tha",flag:""},turkish:{code:"tr",name:"Turc",flag:""},ukrainian:{code:"uk",name:"Ukrainien",flag:""},vietnamese:{code:"vi",name:"Vietnamien",flag:""}};function Yw(e){const t=e.toLowerCase();return"autre"===t||"other"===t?{code:t,name:e,flag:null}:Gw[t]?Gw[t]:{code:t,name:e,flag:null}}function Qw(e,t,r){"general"===t?e.general=r:"video"===t?(e.video||(e.video=[]),e.video.push(r)):"audio"===t?(e.audio||(e.audio=[]),e.audio.push(r)):"text"===t&&(e.text||(e.text=[]),e.text.push(r))}function Xw(e,t){const r=t.replace(/[()\[\]{}.*+?^$|\\]/g,"\\$&"),n=new RegExp(`^\\s*${r}\\s*:\\s*(.+)`,"im"),i=e.match(n);if(i)return i[1].trim();const a=new RegExp(`^${r}\\t(.+)$`,"im"),s=e.match(a);return s?s[1].trim():null}function Jw(e){const t={},r=e.match(/(Duration|Dure)\s*:\s*(.+)/i);r&&(t.duration=r[2].trim());const n=e.match(/(Width|Largeur)\s*:\s*([\d\s.,]+)/i),i=e.match(/(Height|Hauteur)\s*:\s*([\d\s.,]+)/i);if(n&&i){const e=parseInt(n[2].replace(/\D/g,"")),r=parseInt(i[2].replace(/\D/g,""));if(!Number.isNaN(e)&&!Number.isNaN(r)){t.width=e,t.height=r;const n=e>=3800||r>=2160||e>=3e3&&r>=1600,i=!n&&(e>=1900||r>=1e3||e>=1900&&r>=800),a=!n&&!i&&(e>=1280||r>=700);t.quality=n?"2160p":i?"1080p":a?"720p":"SD"}}const a=e.match(/(Writing\s*library|Bibliothque\s*utilise)\s*:\s*(.+)/i);if(a){t.writingLibrary=a[2].trim();const e=t.writingLibrary.toLowerCase();e.includes("x264")?t.codec="x264":e.includes("x265")&&(t.codec="x265")}if(!t.codec){const r=e.match(/(Codec ID|Identifiant du codec)\s*:\s*(.+)/i)||e.match(/Format\s*:\s*(.+)/i);if(r){let e=(r[2]||r[1]).trim();console.log("Video codec raw from MediaInfo:",e),"MPEG VIDEO"===e.toUpperCase()?e="MPEG-2":"AVC"===e.toUpperCase()||e.toUpperCase().includes("H264")?e="H.264":("HEVC"===e.toUpperCase()||e.toUpperCase().includes("H265")||e.toLowerCase().includes("hevc"))&&(e="H.265"),t.codec=function(e){if(!e)return e;const t=e.trim(),r=t.toUpperCase(),n=t.toLowerCase();return Vw[t]?Vw[t]:Vw[r]?Vw[r]:/(^|[^a-z0-9])av1(\+)?([^a-z0-9]|$)/i.test(t)||/(^|[^a-z0-9])av01([^a-z0-9]|$)/i.test(t)||/\bv[_\- ]?av0?1\b/i.test(t)||n.includes("aomedia video 1")||/\baom\s*av1\b/i.test(n)?"AV1":Vw[t]||t}(e),console.log("Video codec after mapping:",t.codec)}}const s=e.match(/(Frame\s*rate|Dbit\s*im\/s)\s*:\s*([\d.,]+)\s*(FPS|Im\/s)/i);s&&(t.frameRate=s[2].replace(",","."));const o=e.match(/(Bit[ _-]?rate|Dbit)\s*:\s*([\d\s.,]+)\s*(Mb\/?s|Mbps|Kb\/?s|Kbps|kb\/?s)/i)||e.match(/Bitrate\s*:\s*([\d\s.,]+)\s*(Mb\/?s|Mbps|Kb\/?s|Kbps|kb\/?s)/i);if(o){const e=o[2].replace(/\s/g,"").replace(",","."),r=o[3].toLowerCase();let n=parseFloat(e);Number.isNaN(n)||(r.startsWith("kb")&&(n/=1e3),t.bitrate=parseFloat(n.toFixed(3)),t.bitrateUnit="Mbps")}const l=e.match(/(Encoding\s*settings|Paramtres\s*d'encodage)\s*:\s*(.+)/i);return l&&(t.encodingSettings=l[2].trim()),t}function Zw(e,t){var r,n;try{const i={id:(t+1).toString(),language:"Franais",languageCode:"fr",codec:"AAC",channels:"Stro",bitrate:128,bitrateUnit:"Kbps",isDefault:0===t};let a=!1;const s=Xw(e,"Language")||Xw(e,"Langue");if(s){const e=s.toLowerCase();e.includes("french (ca)")||e.includes("french ca")||e.includes("vfq")?(i.language="Qubcois",i.languageCode="fr-ca"):e.includes("french")||e.includes("franais")||"fr"===e?(i.language="Franais",i.languageCode="fr"):e.includes("english")||e.includes("anglais")||"en"===e?(i.language="Anglais",i.languageCode="en"):e.includes("japanese")||e.includes("japonais")||"ja"===e?(i.language="Japonais",i.languageCode="ja"):(i.language=s,i.languageCode="other")}const o=Xw(e,"Title")||Xw(e,"Titre");o&&function(e){const t=e.toLowerCase();return!!(/\baudiodescription\b/i.test(t)||/\baudio\s*description\b/i.test(t)||/\baudio\s*descriprion\b/i.test(t)||/\bad\b/i.test(t))}(o)&&("fr"===i.languageCode?(i.language="Franais AD",i.languageCode="fr-ad"):"en"===i.languageCode&&(i.language="Anglais AD",i.languageCode="en-ad"));const l=Xw(e,"Commercial name")||Xw(e,"Format, Nom commercial IfAny")||Xw(e,"Format_Commercial_IfAny");if(l){const e=l.toLowerCase();e.includes("dolby digital plus")&&e.includes("atmos")?(i.codec="Dolby Digital Plus / E-AC3 Atmos",a=!0):e.includes("dts-hd high resolution audio")||e.includes("dts-hd hra")?(i.codec="DTS-HD HRA",a=!0):e.includes("dts-hd master audio")||e.includes("dts-hd ma")?(i.codec="DTS-HD MA",a=!0):e.includes("dts:x")?(i.codec="DTS:X",a=!0):e.includes("dolby truehd")&&e.includes("atmos")?(i.codec="Dolby TrueHD Atmos",a=!0):e.includes("dolby truehd")?(i.codec="Dolby TrueHD",a=!0):e.includes("dolby digital plus")?(i.codec="Dolby Digital Plus / E-AC3",a=!0):e.includes("dolby digital")&&(i.codec="Dolby Digital / AC3",a=!0)}/\bAtmos\b|\bJOC\b/i.test(e);const c=Xw(e,"Format")||Xw(e,"Codec ID")||Xw(e,"Identifiant du codec");if(c&&!a){const e=c.toLowerCase();"ac-3"===e||e.includes("ac-3")||"ac3"===e?i.codec="Dolby Digital / AC3":"dts xll"===e||"dts-xll"===e?i.codec="DTS-HD MA":"dts xbr"===e||"dts-xbr"===e?i.codec="DTS-HD HRA":"dts-es"===e||e.includes("dts-es")?i.codec="DTS-ES":e.includes("dts")?i.codec="DTS":"mlp fba"===e||e.includes("mlp fba 16-ch")?i.codec="Dolby TrueHD Atmos":"mlp fba"===e||e.includes("mlp")?i.codec="Dolby TrueHD":"e-ac-3"===e||"eac3"===e||e.includes("e-ac-3")?i.codec="Dolby Digital Plus / E-AC3":"aac"===e||e.includes("aac")?i.codec="AAC":"pcm"===e||e.includes("pcm")?i.codec="PCM":i.codec=function(e){if(!e)return"Autre";const t=e.trim(),r=t.toLowerCase();return/e[\- _]?ac[\- _]?3\s*joc/.test(r)||/(^|[\s\-_/])(e[\- _]?ac[\- _]?3|ec[\- _]?3|dd\+|dolby\s*digital\s*plus)([^a-z]|$)/.test(r)&&/(atmos|joc)/.test(r)||"dolby digital plus with atmos"===r||"dd+ atmos"===r||"ddp atmos"===r?"Dolby Digital Plus / E-AC3 Atmos":/dolby\s*truehd/.test(r)&&/atmos/.test(r)||/\bmlp\s*fba\s*16-ch\b/.test(r)?"Dolby TrueHD Atmos":/(^|[\s\-_/])(e[\- _]?ac[\- _]?3|ec[\- _]?3|dd\+|dolby\s*digital\s*plus)([^a-z]|$)/.test(r)?"Dolby Digital Plus / E-AC3":/(^|[\s\-_/])ac[\- _]?3([^a-z]|$)/.test(r)||/dolby\s*digital(?!\s*plus)/.test(r)?"AC-3":Kw[e]||t}(c)}console.log(`Audio track ${t+1}: Checking channels in content (first 500 chars):`,e.substring(0,500));const u=Xw(e,"Channel(s)_Original")||Xw(e,"ChannelLayout_Original"),d=Xw(e,"Channel(s)")||Xw(e,"Channels")||Xw(e,"Canal(aux)");console.log(`Audio track ${t+1}: channelsOriginal='${u}', channelsValue='${d}'`);const h=u||d;if(h){const e=parseInt(h);console.log(`Audio track ${t+1}: Parsing '${h}'  channelCount=${e}`),isNaN(e)||(i.channels=Ww[n=e]||`${n} canaux`,console.log(`Audio track ${t+1}: Detected ${e} channels  ${i.channels}`))}else console.log(`Audio track ${t+1}: No channel information found`);const p=Xw(e,"Bit rate")||Xw(e,"Maximum bit rate")||Xw(e,"Dbit maximum")||Xw(e,"BitRate")||Xw(e,"Dbit")||Xw(e,"Bitrate");if(p){const e=p.match(/([\d\s.,]+)\s*(kb\/s|kbps|Mb\/s|Mbps)?/i);if(e){const n=parseFloat(e[1].replace(/\s/g,"").replace(",",".")),a=(null==(r=e[2])?void 0:r.toLowerCase())||"kb/s";isNaN(n)||(a.includes("mb")?i.bitrate=Math.round(1e3*n):i.bitrate=Math.round(n),i.bitrateUnit="Kbps",console.log(`Audio track ${t+1}: Detected bitrate ${n} ${a}  ${i.bitrate} Kbps`))}}else{const r=Xw(e,"Title")||Xw(e,"Titre");if(r){const e=r.match(/@\s*([\d\s.,]+)\s*[Kk]bps/i);if(e){const r=parseFloat(e[1].replace(/\s/g,"").replace(",","."));isNaN(r)||(i.bitrate=Math.round(r),i.bitrateUnit="Kbps",console.log(`Audio track ${t+1}: Extracted bitrate from Title: ${i.bitrate} Kbps`))}}}return i}catch(i){return console.error("Erreur lors du parsing de la piste audio:",i),null}}function e_(e){const t=e.toLowerCase();return/(^|[._\-\s])webrip([._\-\s]|$)/i.test(t)?"WEBRip":/(^|[._\-\s])web\-?dl([._\-\s]|$)/i.test(t)||/(^|[._\-\s])web([._\-\s]|$)/i.test(t)||/(^|[._\-\s])(amzn|amazon|nf|netflix|dsnp|disney\+?|dplus|itunes|atvp|appletv\+?|hulu|max|hbomax|paramount|pmtp|peacock)([._\-\s]|$)/i.test(t)?"WEB-DL":/(^|[._\-\s])(bdremux|remux)([._\-\s]|$)/i.test(t)?"REMUX":/(^|[._\-\s])(uhd|4k)([._\-\s]|$)/i.test(t)?"UHD BluRay":/(^|[._\-\s])(bluray|blu\-ray|bdrip)([._\-\s]|$)/i.test(t)?"BluRay":/(^|[._\-\s])hdtv([._\-\s]|$)/i.test(t)?"HDTV":/(^|[._\-\s])dvdrip([._\-\s]|$)/i.test(t)?"DVDRip":/(^|[._\-\s])cam([._\-\s]|$)/i.test(t)?"CAM":/(^|[._\-\s])ts([._\-\s]|$)/i.test(t)?"TS":void 0}function t_(e){if(!e||!Lw(e))return null;const t=/\bRESOLUTiON\b|\bViDEO\b|\bAUDiO\b|\bSUBTiTLES\b/i.test(e),r={video:{},audio:[],subtitles:[]};try{if(!zw(e)&&t){const t=function(e){const t={video:{...qw},audio:[],subtitles:[]},r=e.match(/RESOLUTiON[.\s]*:\s*(\d+)\s*x\s*(\d+)/i);if(r){const e=parseInt(r[2]);e>=2160?t.video.quality="2160p":e>=1080?t.video.quality="1080p":e>=720?t.video.quality="720p":e>=480&&(t.video.quality="480p"),t.video.height=e,t.video.width=parseInt(r[1])}const n=e.match(/CODEC[.\s]*:\s*([^\n]+)/i);if(n){let e=n[1].trim().split("-")[0].trim();/265|hevc/i.test(e)?t.video.codec="H.265":/264/i.test(e)?t.video.codec="H.264":t.video.codec=e}const i=e.match(/BiTRATE[.\s]*:\s*([\d\s,]+)\s*kb\/s/i);if(i){const e=parseInt(i[1].replace(/[\s,]/g,""));t.video.bitrate=Math.round(e/1e3*100)/100,t.video.bitrateUnit="Mbps"}const a=e.match(/RELEASE\s*SiZE[.\s]*:\s*([\d.]+)\s*(GiB|GB)/i);a&&(t.video.size=parseFloat(a[1]));const s=e.match(/Format\s*:\s*(\w+)/i);if(s){let e=s[1].toUpperCase();"MATROSKA"===e&&(e="MKV"),t.video.format=e}[...e.matchAll(/AUDiO\s*#(\d+)[^]*?[^]*?([\s\S]*?)(?=[^]*?[^]*?(?:AUDiO\s*#|SUBTiTLES\s*#|LiNKS|NOTE|GREETZ)|$)/gi)].forEach((e,r)=>{var n;const i=e[1]||(r+1).toString(),a=e[2],s={id:i,language:"Franais",languageCode:"fr",codec:"AC-3",channels:"2.0",bitrate:256,bitrateUnit:"Kbps",isDefault:0===r},o=a.match(/LANGUAGE[.\s]*:\s*([^\n]+)/i);if(o){const e=o[1].trim().toLowerCase();e.includes("french ca")||e.includes("vfq")?(s.language="Qubcois",s.languageCode="fr-ca"):e.includes("french")||e.includes("franais")?(s.language="Franais",s.languageCode="fr"):e.includes("english")||e.includes("anglais")?(s.language="Anglais",s.languageCode="en"):(s.language=o[1].trim(),s.languageCode="other")}const l=a.match(/(?:TITLE|TITRE)[.\s]*:\s*([^\n]+)/i),c=null==(n=null==l?void 0:l[1])?void 0:n.trim();c&&function(e){const t=e.toLowerCase();return!!(/\baudiodescription\b/i.test(t)||/\baudio\s*description\b/i.test(t)||/\baudio\s*descriprion\b/i.test(t)||/\bad\b/i.test(t))}(c)&&("fr"===s.languageCode?(s.language="Franais AD",s.languageCode="fr-ad"):"en"===s.languageCode&&(s.language="Anglais AD",s.languageCode="en-ad"));const u=a.match(/CODEC[.\s]*:\s*([^\n]+)/i);if(u){const e=u[1].trim();/(E-AC-3|EAC-3)/i.test(e)?s.codec="Dolby Digital Plus (E-AC-3)":/(AC-3|AC3)/i.test(e)?s.codec="AC-3":/DTS(-HD)?/i.test(e)?s.codec="DTS":s.codec=e}const d=a.match(/CHANNELS[.\s]*:\s*([^\n]+)/i);if(d){const e=d[1].trim();/2\.0|stereo/i.test(e)?s.channels="Stro":/5\.1/i.test(e)?s.channels="5.1":/7\.1/i.test(e)?s.channels="7.1":s.channels=e}const h=a.match(/BiTRATE[.\s]*:\s*([\d\s,]+)\s*kb\/s/i);h&&(s.bitrate=parseInt(h[1])),t.audio.push(s)}),[...e.matchAll(/SUBTiTLES\s*#(\d+)[^]*?[^]*?([\s\S]*?)(?=[^]*?[^]*?(?:SUBTiTLES\s*#|LiNKS|NOTE|GREETZ)|$)/gi)].forEach((e,r)=>{const n=e[1]||(r+1).toString(),i=e[2],a={id:n,language:"Franais",languageCode:"fr",type:"embedded",format:"SRT",isForced:!1,isDefault:0===r},s=i.match(/LANGUAGE[.\s]*:\s*([^\n]+)/i);if(s){const e=s[1].trim(),t=e.toLowerCase();t.includes("french ca")||t.includes("vfq")?(a.language="Qubcois",a.languageCode="fr-ca"):t.includes("french")||t.includes("franais")?(a.language="Franais",a.languageCode="fr"):t.includes("english")||t.includes("anglais")?(a.language="Anglais",a.languageCode="en"):(a.language=e,a.languageCode="other")}const o=i.match(/TYPE[.\s]*:\s*([^\n]+)/i);if(o){const e=o[1].trim().toLowerCase();e.includes("forced")&&(a.isForced=!0),e.includes("full")&&(a.isComplete=!0),e.includes("sdh")&&(a.isSDH=!0)}const l=i.match(/FORMAT[.\s]*:\s*([^\n]+)/i);if(l){const e=l[1].trim();/hardcoded/i.test(e)?(a.format="Hardcoded",a.type="embedded"):a.format="UTF-8"===e.toUpperCase()?"SRT":e}t.subtitles.push(a)});const o=e.match(/SOURCE[.\s]*:\s*([^\n]+)/i);o&&(t.source=function(e){const t=e.toLowerCase();return/(^|[._\-\s])webrip([._\-\s]|$)/i.test(t)?"WEBRip":/(^|[._\-\s])web\-?dl([._\-\s]|$)/i.test(t)||/(^|[._\-\s])web([._\-\s]|$)/i.test(t)||/(^|[._\-\s])(amzn|amazon|nf|netflix|dsnp|disney\+?|dplus|itunes|atvp|appletv\+?|hulu|max|hbomax|paramount|pmtp|peacock)([._\-\s]|$)/i.test(t)?"WEB-DL":/(^|[._\-\s])(bdremux|remux)([._\-\s]|$)/i.test(t)?"REMUX":/(^|[._\-\s])(uhd|4k)([._\-\s]|$)/i.test(t)?"UHD BluRay":/(^|[._\-\s])(bluray|blu\-ray)([._\-\s]|$)/i.test(t)?"BluRay":/(^|[._\-\s])hdtv([._\-\s]|$)/i.test(t)?"HDTV":/(^|[._\-\s])dvdrip([._\-\s]|$)/i.test(t)?"DVDRip":e.trim()}(o[1]));const l=e.match(/^\s*([^\n]+?\.(?:MULTi|FRENCH|ENGLISH|TRUEFRENCH)\..*?-[A-Z0-9]+)\s*$/m);return l&&(t.releaseGroup=l[1].trim()),t}(e);if(t)return t}const n=function(e){const t={},r=e.split("\n");let n="",i=[];for(const a of r){const e=a.trim(),r=/^(general|gnral)(\s*#\d+)?\s*$/i.test(e),s=/^(video|vido)(\s*#\d+)?\s*$/i.test(e),o=/^(audio|audio)(\s*#\d+)?\s*$/i.test(e),l=/^(text|texte)(\s*#\d+)?\s*$/i.test(e),c=/^(subtitle|sous-titre)\s*#\d+\s*$/i.test(e);r?(n&&i.length>0&&Qw(t,n,i.join("\n")),n="general",i=[]):s?(n&&i.length>0&&Qw(t,n,i.join("\n")),n="video",i=[]):o?(n&&i.length>0&&Qw(t,n,i.join("\n")),n="audio",i=[]):l||c?(n&&i.length>0&&Qw(t,n,i.join("\n")),n="text",i=[]):e&&n&&(/^#\d+$/.test(e)||i.push(a))}return n&&i.length>0&&Qw(t,n,i.join("\n")),t}(e);!function(e,t){if(!e)return;console.log("processGeneralSection - generalSection:",e.substring(0,500));const r=function(e){const t={},r=e.match(/(Duration|Dure)\s*:\s*(.+)/i);r&&(t.duration=r[2].trim());const n=e.match(/(File\s*size|Taille\s*du\s*fichier)\s*:\s*([\d\s,.]+)\s*(GiB|GB|MiB|MB|Gio|Mio)/i);if(n){const e=n[2].replace(/\s/g,"").replace(",","."),r=n[3].toUpperCase(),i=parseFloat(e);Number.isNaN(i)||("GIB"===r||"GB"===r||"GIO"===r?t.fileSizeGiB=i:"MIB"!==r&&"MB"!==r&&"MIO"!==r||(t.fileSizeGiB=i/1e3))}return t}(e),n=t.video,i=e.match(/Format\s*:\s*(.+)/i);if(i){let e=i[1].trim().toUpperCase();"MATROSKA"===e?e="MKV":"AVI"===e?e="AVI":"MP4"===e?e="MP4":"M2TS"===e?e="M2TS":"ISO"!==e&&"BDAV"!==e||(e="ISO"),["MKV","MP4","AVI","M2TS","ISO"].includes(e)&&(n.format=e),console.log("Format detected from General section:",e)}r.duration&&(n.duration=r.duration);r.fileSizeGiB&&!Number.isNaN(r.fileSizeGiB)&&(n.size=r.fileSizeGiB);const a=e.match(/(Complete\s*name|Nom\s*complet)\s*:\s*(.+)/i);if(console.log("completeNameMatch:",a),a){const r=a[2];!function(e,t){const r=e.toLowerCase();/\b(2160p|uhd|4k)\b/i.test(r)?t.quality="2160p":/\b1080p\b/i.test(r)?t.quality="1080p":/\b720p\b/i.test(r)&&(t.quality="720p")}(r,n),function(e,t){const r=e_(e);r&&(t.source=r)}(r,t),function(e,t){const r=function(e){const t=e.match(/(Complete\s*name|Nom\s*complet)\s*:\s*(.+)/i);if(!t)return"";const r=t[2].trim();return(r.split(/[\\/]/).pop()||r).trim().replace(/\.[^.]+$/,"")}(e);console.log("extractReleaseInfoFromCompleteName - releaseName:",r),r&&(t.releaseGroup=r)}(e,t)}!function(e,t){const r=function(e){var t;const r={},n=e.match(/(Complete\s*name|Nom\s*complet)\s*:\s*(.+)/i),i=e.match(/(Movie\s*name|Nom\s*du\s*film)\s*:\s*(.+)/i),a=e.match(/(Encoded\s*by|Encod\s*par)\s*:\s*(.+)/i),s=e.match(/(Original\s*source\s*medium|Support\s*source\s*original)\s*:\s*(.+)/i),o=(null==(t=n?n[2]:i?i[2]:"")?void 0:t.trim())||"";if(o){const e=(o.split(/[\\/]/).pop()||o).trim().replace(/\.[^.]+$/,"").trim(),t=e.toLowerCase();r.source=e_(t)||r.source;let n=e.replace(/\b(E-AC3|DTS-HD|DTS-HDMA|DTS-HDHRA|DTS-ES)[._-]*(\d+[._-]*\d*)?\b/gi,"").replace(/[._-]+$/,"").trim();r.releaseGroup=n.replace(/\./g," ").trim()}if(!r.source&&s){const e=s[2].toLowerCase();e.includes("uhd")||e.includes("4k")?r.source="UHD BluRay":e.includes("blu-ray")?r.source="BluRay":e.includes("web")&&(r.source="WEB-DL")}return!r.releaseGroup&&a&&(r.releaseGroup=a[2].trim()),r}(e);r.source&&!t.source&&(t.source=r.source);r.releaseGroup&&!t.releaseGroup&&(t.releaseGroup=r.releaseGroup)}(e,t)}(n.general,r),function(e,t){if(!e||0===e.length)return;const r=Jw(e[0]),n=t.video,i="Mbps",a=n.format;t.video={quality:r.quality||n.quality||"1080p",format:a||"MKV",codec:r.codec||n.codec||"H.264",bitrate:r.bitrate??n.bitrate??5,bitrateUnit:r.bitrateUnit||n.bitrateUnit||i,size:n.size??r.size,duration:n.duration||r.duration},console.log("Final video format after processing:",t.video.format);const s=t.video,o=r;o.width&&(s.width=o.width);o.height&&(s.height=o.height);o.frameRate&&(s.frameRate=o.frameRate);o.writingLibrary&&(s.writingLibrary=o.writingLibrary);o.encodingSettings&&(s.encodingSettings=o.encodingSettings)}(n.video,r),function(e,t){if(!e||0===e.length)return;t.audio=e.map((e,t)=>Zw(e,t)).filter(e=>null!==e)}(n.audio,r),function(e,t){if(!e||0===e.length)return;t.subtitles=e.map((e,t)=>function(e,t){try{const r={id:(t+1).toString(),language:"Franais",languageCode:"fr",type:"embedded",format:"SRT",isForced:!1,isDefault:0===t},n=Xw(e,"Language")||Xw(e,"Langue");if(n){const e=n.toLowerCase();e.includes("french (ca)")||e.includes("french ca")||e.includes("vfq")?(r.language="Qubcois",r.languageCode="fr-ca"):e.includes("french")||e.includes("franais")||"fr"===e?(r.language="Franais",r.languageCode="fr"):e.includes("english")||e.includes("anglais")||"en"===e?(r.language="Anglais",r.languageCode="en"):e.includes("japanese")||e.includes("japonais")||"ja"===e?(r.language="Japonais",r.languageCode="ja"):(r.language=n,r.languageCode="other")}const i=Xw(e,"Format");if(i){const e=i.trim().toUpperCase();["SRT","ASS","SSA","PGS","VOBSUB","SUP","UTF-8"].includes(e)&&(r.format="UTF-8"===e?"SRT":e)}const a=Xw(e,"Title")||Xw(e,"Titre");if(a){const e=a.toLowerCase();(e.includes("forced")||e.includes("forc"))&&(r.isForced=!0),e.includes("sdh")&&(r.isSDH=!0),(e.includes("full")||e.includes("complete"))&&(r.isComplete=!0)}const s=Xw(e,"Forced")||Xw(e,"Mode forc");s&&(r.isForced=/^(yes|oui)$/i.test(s));const o=Xw(e,"Default")||Xw(e,"Par dfaut");return o&&(r.isDefault=/^(yes|oui)$/i.test(o)),r}catch(r){return console.error("Erreur lors du parsing des sous-titres:",r),null}}(e,t)).filter(e=>null!==e)}(n.text,r);return n.video&&n.video.length>1&&function(e){if(e.audio){const t=e=>`${e.language}-${e.codec}-${e.channels}-${e.bitrate}`;e.audio=r_(e.audio,t)}if(e.subtitles){const t=e=>{const t=e;return`${e.language}-${e.format}-${e.isForced}-${t.isSDH}-${t.isComplete}`};e.subtitles=r_(e.subtitles,t)}}(r),r}catch(n){return console.error("Erreur lors du parsing des spcifications techniques:",n),null}}function r_(e,t){const r=new Set;return e.filter(e=>{const n=t(e);return!r.has(n)&&(r.add(n),!0)})}var n_={exports:{}};n_.exports=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)},t=function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function r(e,t,r){for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n,a=Object.keys,s=Array.isArray;function o(e,t){return"object"!=typeof t||a(t).forEach(function(r){e[r]=t[r]}),e}"undefined"==typeof Promise||i.Promise||(i.Promise=Promise);var l=Object.getPrototypeOf,c={}.hasOwnProperty;function u(e,t){return c.call(e,t)}function d(e,t){"function"==typeof t&&(t=t(l(e))),("undefined"==typeof Reflect?a:Reflect.ownKeys)(t).forEach(function(r){p(e,r,t[r])})}var h=Object.defineProperty;function p(e,t,r,n){h(e,t,o(r&&u(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function f(e){return{from:function(t){return e.prototype=Object.create(t.prototype),p(e.prototype,"constructor",e),{extend:d.bind(null,e.prototype)}}}}var m=Object.getOwnPropertyDescriptor,g=[].slice;function v(e,t,r){return g.call(e,t,r)}function b(e,t){return t(e)}function x(e){if(!e)throw new Error("Assertion Failed")}function y(e){i.setImmediate?setImmediate(e):setTimeout(e,0)}function w(e,t){if("string"==typeof t&&u(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],n=0,i=t.length;n<i;++n){var a=w(e,t[n]);r.push(a)}return r}var s=t.indexOf(".");if(-1!==s){var o=e[t.substr(0,s)];return null==o?void 0:w(o,t.substr(s+1))}}function _(e,t,r){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){x("string"!=typeof r&&"length"in r);for(var n=0,i=t.length;n<i;++n)_(e,t[n],r[n])}else{var a,o,l=t.indexOf(".");-1!==l?(a=t.substr(0,l),""===(o=t.substr(l+1))?void 0===r?s(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=r:_(l=(l=e[a])&&u(e,a)?l:e[a]={},o,r)):void 0===r?s(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function k(e){var t,r={};for(t in e)u(e,t)&&(r[t]=e[t]);return r}var N=[].concat;function j(e){return N.apply([],e)}var S="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(j([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return i[e]}),C=new Set(S.map(function(e){return i[e]})),E=null;function $(e){return E=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var r=E.get(t);if(r)return r;if(s(t)){r=[],E.set(t,r);for(var n=0,i=t.length;n<i;++n)r.push(e(t[n]))}else if(C.has(t.constructor))r=t;else{var a,o=l(t);for(a in r=o===Object.prototype?{}:Object.create(o),E.set(t,r),t)u(t,a)&&(r[a]=e(t[a]))}return r}(e),E=null,e}var D={}.toString;function P(e){return D.call(e).slice(8,-1)}var T="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",A="symbol"==typeof T?function(e){var t;return null!=e&&(t=e[T])&&t.apply(e)}:function(){return null};function F(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var R={};function I(e){var t,r,n,i;if(1===arguments.length){if(s(e))return e.slice();if(this===R&&"string"==typeof e)return[e];if(i=A(e)){for(r=[];!(n=i.next()).done;)r.push(n.value);return r}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(r=new Array(t);t--;)r[t]=e[t];return r}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}var M="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},O=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(le=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),L={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function z(e,t){this.name=e,this.message=t}function B(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,r){return r.indexOf(e)===t}).join("\n")}function H(e,t,r,n){this.failures=t,this.failedKeys=n,this.successCount=r,this.message=B(e,t)}function U(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=B(e,this.failures)}f(z).from(Error).extend({toString:function(){return this.name+": "+this.message}}),f(H).from(z),f(U).from(z);var q=O.reduce(function(e,t){return e[t]=t+"Error",e},{}),V=z,K=O.reduce(function(e,t){var r=t+"Error";function n(e,n){this.name=r,e?"string"==typeof e?(this.message="".concat(e).concat(n?"\n "+n:""),this.inner=n||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=L[t]||r,this.inner=null)}return f(n).from(V),e[t]=n,e},{});K.Syntax=SyntaxError,K.Type=TypeError,K.Range=RangeError;var W=le.reduce(function(e,t){return e[t+"Error"]=K[t],e},{}),G=O.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=K[t]),e},{});function Y(){}function Q(e){return e}function X(e,t){return null==e||e===Q?t:function(r){return t(e(r))}}function J(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Z(e,t){return e===Y?t:function(){var r=e.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?J(n,this.onsuccess):n),i&&(this.onerror=this.onerror?J(i,this.onerror):i),void 0!==a?a:r}}function ee(e,t){return e===Y?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?J(r,this.onsuccess):r),n&&(this.onerror=this.onerror?J(n,this.onerror):n)}}function te(e,t){return e===Y?t:function(r){var n=e.apply(this,arguments);o(r,n);var i=this.onsuccess,a=this.onerror;return this.onsuccess=null,this.onerror=null,r=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?J(i,this.onsuccess):i),a&&(this.onerror=this.onerror?J(a,this.onerror):a),void 0===n?void 0===r?void 0:r:o(n,r)}}function re(e,t){return e===Y?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function ne(e,t){return e===Y?t:function(){var r=e.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return r.then(function(){return t.apply(n,a)})}return t.apply(this,arguments)}}G.ModifyError=H,G.DexieError=z,G.BulkError=U;var ie="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ae(e){ie=e}var se={},oe=100,le=(S="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,l(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,l(t),e]}())[0],ce=(O=S[1],S=S[2],O=O&&O.then,le&&le.constructor),ue=!!S,de=function(e,t){xe.push([e,t]),pe&&(queueMicrotask($e),pe=!1)},he=!0,pe=!0,fe=[],me=[],ge=Q,ve={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Y,pgp:!1,env:{},finalize:Y},be=ve,xe=[],ye=0,we=[];function _e(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=be;if("function"!=typeof e){if(e!==se)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&je(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,r){try{r(function(r){if(null===t._state){if(r===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&De();r&&"function"==typeof r.then?e(t,function(e,t){r instanceof _e?r._then(e,t):r.then(e,t)}):(t._state=!0,t._value=r,Se(t)),n&&Pe()}},je.bind(null,t))}catch(n){je(t,n)}}(this,e)}var ke={get:function(){var e=be,t=Le;function r(r,n){var i=this,a=!e.global&&(e!==be||t!==Le),s=a&&!Ue(),o=new _e(function(t,o){Ce(i,new Ne(Ye(r,e,a,s),Ye(n,e,a,s),t,o,e))});return this._consoleTask&&(o._consoleTask=this._consoleTask),o}return r.prototype=se,r},set:function(e){p(this,"then",e&&e.prototype===se?ke:{get:function(){return e},set:ke.set})}};function Ne(e,t,r,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n,this.psd=i}function je(e,t){var r,n;me.push(t),null===e._state&&(r=e._lib&&De(),t=ge(t),e._state=!1,e._value=t,n=e,fe.some(function(e){return e._value===n._value})||fe.push(n),Se(e),r&&Pe())}function Se(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)Ce(e,t[r]);var i=e._PSD;--i.ref||i.finalize(),0===ye&&(++ye,de(function(){0==--ye&&Te()},[]))}function Ce(e,t){if(null!==e._state){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ye,de(Ee,[r,e,t])}else e._listeners.push(t)}function Ee(e,t,r){try{var n,i=t._value;!t._state&&me.length&&(me=[]),n=ie&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),t._state||-1!==me.indexOf(i)||function(e){for(var t=fe.length;t;)if(fe[--t]._value===e._value)return fe.splice(t,1)}(t),r.resolve(n)}catch(a){r.reject(a)}finally{0==--ye&&Te(),--r.psd.ref||r.psd.finalize()}}function $e(){Ge(ve,function(){De()&&Pe()})}function De(){var e=he;return pe=he=!1,e}function Pe(){var e,t,r;do{for(;0<xe.length;)for(e=xe,xe=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}}while(0<xe.length);pe=he=!0}function Te(){var e=fe;fe=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=we.slice(0),r=t.length;r;)t[--r]()}function Ae(e){return new _e(se,!1,e)}function Fe(e,t){var r=be;return function(){var n=De(),i=be;try{return Ke(r,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{Ke(i,!1),n&&Pe()}}}d(_e.prototype,{then:ke,_then:function(e,t){Ce(this,new Ne(null,null,e,t,be))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,r=arguments[1];return"function"==typeof t?this.then(null,function(e){return(e instanceof t?r:Ae)(e)}):this.then(null,function(e){return(e&&e.name===t?r:Ae)(e)})},finally:function(e){return this.then(function(t){return _e.resolve(e()).then(function(){return t})},function(t){return _e.resolve(e()).then(function(){return Ae(t)})})},timeout:function(e,t){var r=this;return e<1/0?new _e(function(n,i){var a=setTimeout(function(){return i(new K.Timeout(t))},e);r.then(n,i).finally(clearTimeout.bind(null,a))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&p(_e.prototype,Symbol.toStringTag,"Dexie.Promise"),ve.env=We(),d(_e,{all:function(){var e=I.apply(null,arguments).map(qe);return new _e(function(t,r){0===e.length&&t([]);var n=e.length;e.forEach(function(i,a){return _e.resolve(i).then(function(r){e[a]=r,--n||t(e)},r)})})},resolve:function(e){return e instanceof _e?e:e&&"function"==typeof e.then?new _e(function(t,r){e.then(t,r)}):new _e(se,!0,e)},reject:Ae,race:function(){var e=I.apply(null,arguments).map(qe);return new _e(function(t,r){e.map(function(e){return _e.resolve(e).then(t,r)})})},PSD:{get:function(){return be},set:function(e){return be=e}},totalEchoes:{get:function(){return Le}},newPSD:Be,usePSD:Ge,scheduler:{get:function(){return de},set:function(e){de=e}},rejectionMapper:{get:function(){return ge},set:function(e){ge=e}},follow:function(e,t){return new _e(function(r,n){return Be(function(t,r){var n=be;n.unhandleds=[],n.onunhandled=r,n.finalize=J(function(){var e,n=this;e=function(){0===n.unhandleds.length?t():r(n.unhandleds[0])},we.push(function t(){e(),we.splice(we.indexOf(t),1)}),++ye,de(function(){0==--ye&&Te()},[])},n.finalize),e()},t,r,n)})}}),ce&&(ce.allSettled&&p(_e,"allSettled",function(){var e=I.apply(null,arguments).map(qe);return new _e(function(t){0===e.length&&t([]);var r=e.length,n=new Array(r);e.forEach(function(e,i){return _e.resolve(e).then(function(e){return n[i]={status:"fulfilled",value:e}},function(e){return n[i]={status:"rejected",reason:e}}).then(function(){return--r||t(n)})})})}),ce.any&&"undefined"!=typeof AggregateError&&p(_e,"any",function(){var e=I.apply(null,arguments).map(qe);return new _e(function(t,r){0===e.length&&r(new AggregateError([]));var n=e.length,i=new Array(n);e.forEach(function(e,a){return _e.resolve(e).then(function(e){return t(e)},function(e){i[a]=e,--n||r(new AggregateError(i))})})})}),ce.withResolvers&&(_e.withResolvers=ce.withResolvers));var Re={awaits:0,echoes:0,id:0},Ie=0,Me=[],Oe=0,Le=0,ze=0;function Be(e,t,r,n){var i=be,a=Object.create(i);return a.parent=i,a.ref=0,a.global=!1,a.id=++ze,ve.env,a.env=ue?{Promise:_e,PromiseProp:{value:_e,configurable:!0,writable:!0},all:_e.all,race:_e.race,allSettled:_e.allSettled,any:_e.any,resolve:_e.resolve,reject:_e.reject}:{},t&&o(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()},n=Ge(a,e,r,n),0===a.ref&&a.finalize(),n}function He(){return Re.id||(Re.id=++Ie),++Re.awaits,Re.echoes+=oe,Re.id}function Ue(){return!!Re.awaits&&(0==--Re.awaits&&(Re.id=0),Re.echoes=Re.awaits*oe,!0)}function qe(e){return Re.echoes&&e&&e.constructor===ce?(He(),e.then(function(e){return Ue(),e},function(e){return Ue(),Xe(e)})):e}function Ve(){var e=Me[Me.length-1];Me.pop(),Ke(e,!1)}function Ke(e,t){var r,n=be;(t?!Re.echoes||Oe++&&e===be:!Oe||--Oe&&e===be)||queueMicrotask(t?function(e){++Le,Re.echoes&&0!=--Re.echoes||(Re.echoes=Re.awaits=Re.id=0),Me.push(be),Ke(e,!0)}.bind(null,e):Ve),e!==be&&(be=e,n===ve&&(ve.env=We()),ue&&(r=ve.env.Promise,t=e.env,(n.global||e.global)&&(Object.defineProperty(i,"Promise",t.PromiseProp),r.all=t.all,r.race=t.race,r.resolve=t.resolve,r.reject=t.reject,t.allSettled&&(r.allSettled=t.allSettled),t.any&&(r.any=t.any))))}function We(){var e=i.Promise;return ue?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ge(e,t,r,n,i){var a=be;try{return Ke(e,!0),t(r,n,i)}finally{Ke(a,!1)}}function Ye(e,t,r,n){return"function"!=typeof e?e:function(){var i=be;r&&He(),Ke(t,!0);try{return e.apply(this,arguments)}finally{Ke(i,!1),n&&queueMicrotask(Ue)}}}function Qe(e){Promise===ce&&0===Re.echoes?0===Oe?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+O).indexOf("[native code]")&&(He=Ue=Y);var Xe=_e.reject,Je=String.fromCharCode(65535),Ze="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",et="String expected.",tt=[],rt="__dbnames",nt="readonly",it="readwrite";function at(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var st={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ot(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=$(t))[e],t}}function lt(){throw K.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ct(e,t){try{var r=ut(e),n=ut(t);if(r!==n)return"Array"===r?1:"Array"===n?-1:"binary"===r?1:"binary"===n?-1:"string"===r?1:"string"===n?-1:"Date"===r?1:"Date"!==n?NaN:-1;switch(r){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var r=e.length,n=t.length,i=r<n?r:n,a=0;a<i;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return r===n?0:r<n?-1:1}(dt(e),dt(t));case"Array":return function(e,t){for(var r=e.length,n=t.length,i=r<n?r:n,a=0;a<i;++a){var s=ct(e[a],t[a]);if(0!==s)return s}return r===n?0:r<n?-1:1}(e,t)}}catch(i){}return NaN}function ut(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=P(e))?"binary":e}function dt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function ht(e,t,r){var n=e.schema.yProps;return n?(t&&0<r.numFailures&&(t=t.filter(function(e,t){return!r.failures[t]})),Promise.all(n.map(function(r){return r=r.updatesTable,t?e.db.table(r).where("k").anyOf(t).delete():e.db.table(r).clear()})).then(function(){return r})):r}var pt=(ft.prototype.execute=function(e){var t=this["@@propmod"];if(void 0!==t.add){var n=t.add;if(s(n))return r(r([],s(e)?e:[],!0),n).sort();if("number"==typeof n)return(Number(e)||0)+n;if("bigint"==typeof n)try{return BigInt(e)+n}catch(a){return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(void 0!==t.remove){var i=t.remove;if(s(i))return s(e)?e.filter(function(e){return!i.includes(e)}).sort():[];if("number"==typeof i)return Number(e)-i;if("bigint"==typeof i)try{return BigInt(e)-i}catch(a){return BigInt(0)-i}throw new TypeError("Invalid subtrahend ".concat(i))}return(n=null===(n=t.replacePrefix)||void 0===n?void 0:n[0])&&"string"==typeof e&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},ft);function ft(e){this["@@propmod"]=e}function mt(e,t){for(var r=a(t),n=r.length,i=!1,s=0;s<n;++s){var o=r[s],l=t[o],c=w(e,o);l instanceof pt?(_(e,o,l.execute(c)),i=!0):c!==l&&(_(e,o,l),i=!0)}return i}var gt=(vt.prototype._trans=function(e,t,r){var n=this._tx||be.trans,i=this.name,a=ie&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function s(e,r,n){if(!n.schema[i])throw new K.NotFound("Table "+i+" not part of transaction");return t(n.idbtrans,n)}var o=De();try{var l=n&&n.db._novip===this.db._novip?n===be.trans?n._promise(e,s,r):Be(function(){return n._promise(e,s,r)},{trans:n,transless:be.transless||be}):function e(t,r,n,i){if(t.idbdb&&(t._state.openComplete||be.letThrough||t._vip)){var a=t._createTransaction(r,n,t._dbSchema);try{a.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===q.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,i)})):Xe(s)}return a._promise(r,function(e,t){return Be(function(){return be.trans=a,i(e,t,a)})}).then(function(e){if("readwrite"===r)try{a.idbtrans.commit()}catch(t){}return"readonly"===r?e:a._completion.then(function(){return e})})}if(t._state.openComplete)return Xe(new K.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return Xe(new K.DatabaseClosed);t.open().catch(Y)}return t._state.dbReadyPromise.then(function(){return e(t,r,n,i)})}(this.db,e,[this.name],s);return a&&(l._consoleTask=a,l=l.catch(function(e){return console.trace(e),Xe(e)})),l}finally{o&&Pe()}},vt.prototype.get=function(e,t){var r=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?Xe(new K.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return r.core.get({trans:t,key:e}).then(function(e){return r.hook.reading.fire(e)})}).then(t)},vt.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(s(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=a(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return 0<=e.keyPath.indexOf(t)})){for(var r=0;r<t.length;++r)if(-1===t.indexOf(e.keyPath[r]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(r&&this.db._maxKey!==Je){var n=r.keyPath.slice(0,t.length);return this.where(n).equals(n.map(function(t){return e[t]}))}!r&&ie&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var i=this.schema.idxByName;function o(e,t){return 0===ct(e,t)}n=(l=t.reduce(function(t,r){var n=t[0],a=t[1],l=(t=i[r],e[r]);return[n||t,n||!t?at(a,t&&t.multi?function(e){return e=w(e,r),s(e)&&e.some(function(e){return o(l,e)})}:function(e){return o(l,w(e,r))}):a]},[null,null]))[0];var l=l[1];return n?this.where(n.name).equals(e[n.keyPath]).filter(l):r?this.filter(l):this.where(t).equals("")},vt.prototype.filter=function(e){return this.toCollection().and(e)},vt.prototype.count=function(e){return this.toCollection().count(e)},vt.prototype.offset=function(e){return this.toCollection().offset(e)},vt.prototype.limit=function(e){return this.toCollection().limit(e)},vt.prototype.each=function(e){return this.toCollection().each(e)},vt.prototype.toArray=function(e){return this.toCollection().toArray(e)},vt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},vt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,s(e)?"[".concat(e.join("+"),"]"):e))},vt.prototype.reverse=function(){return this.toCollection().reverse()},vt.prototype.mapToClass=function(t){var r,n=this.db,i=this.name;function a(){return null!==r&&r.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof lt&&(function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(a,r=t),Object.defineProperty(a.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),a.prototype.table=function(){return i},t=a);for(var s=new Set,o=t.prototype;o;o=l(o))Object.getOwnPropertyNames(o).forEach(function(e){return s.add(e)});function c(e){if(!e)return e;var r,n=Object.create(t.prototype);for(r in e)if(!s.has(r))try{n[r]=e[r]}catch(i){}return n}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=c,this.hook("reading",c),t},vt.prototype.defineClass=function(){return this.mapToClass(function(e){o(this,e)})},vt.prototype.add=function(e,t){var r=this,n=this.schema.primKey,i=n.auto,a=n.keyPath,s=e;return a&&i&&(s=ot(a)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[s]})}).then(function(e){return e.numFailures?_e.reject(e.failures[0]):e.lastResult}).then(function(t){if(a)try{_(e,a,t)}catch(r){}return t})},vt.prototype.upsert=function(e,t){var r=this,n=this.schema.primKey.keyPath;return this._trans("readwrite",function(i){return r.core.get({trans:i,key:e}).then(function(a){var s=null!=a?a:{};return mt(s,t),n&&_(s,n,e),r.core.mutate({trans:i,type:"put",values:[s],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[t]}}).then(function(e){return e.numFailures?_e.reject(e.failures[0]):!!a})})})},vt.prototype.update=function(e,t){return"object"!=typeof e||s(e)?this.where(":id").equals(e).modify(t):void 0===(e=w(e,this.schema.primKey.keyPath))?Xe(new K.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},vt.prototype.put=function(e,t){var r=this,n=this.schema.primKey,i=n.auto,a=n.keyPath,s=e;return a&&i&&(s=ot(a)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"put",values:[s],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?_e.reject(e.failures[0]):e.lastResult}).then(function(t){if(a)try{_(e,a,t)}catch(r){}return t})},vt.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:[e]}).then(function(r){return ht(t,[e],r)}).then(function(e){return e.numFailures?_e.reject(e.failures[0]):void 0})})},vt.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:st}).then(function(t){return ht(e,null,t)})}).then(function(e){return e.numFailures?_e.reject(e.failures[0]):void 0})},vt.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(r){return t.core.getMany({keys:e,trans:r}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},vt.prototype.bulkAdd=function(e,t,r){var n=this,i=Array.isArray(t)?t:void 0,a=(r=r||(i?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=(o=n.schema.primKey).auto;if((o=o.keyPath)&&i)throw new K.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,o=o&&r?e.map(ot(o)):e;return n.core.mutate({trans:t,type:"add",keys:i,values:o,wantResults:a}).then(function(e){var t=e.numFailures,r=e.results,i=e.lastResult;if(e=e.failures,0===t)return a?r:i;throw new U("".concat(n.name,".bulkAdd(): ").concat(t," of ").concat(s," operations failed"),e)})})},vt.prototype.bulkPut=function(e,t,r){var n=this,i=Array.isArray(t)?t:void 0,a=(r=r||(i?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=(o=n.schema.primKey).auto;if((o=o.keyPath)&&i)throw new K.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,o=o&&r?e.map(ot(o)):e;return n.core.mutate({trans:t,type:"put",keys:i,values:o,wantResults:a}).then(function(e){var t=e.numFailures,r=e.results,i=e.lastResult;if(e=e.failures,0===t)return a?r:i;throw new U("".concat(n.name,".bulkPut(): ").concat(t," of ").concat(s," operations failed"),e)})})},vt.prototype.bulkUpdate=function(e){var t=this,r=this.core,n=e.map(function(e){return e.key}),i=e.map(function(e){return e.changes}),a=[];return this._trans("readwrite",function(s){return r.getMany({trans:s,keys:n,cache:"clone"}).then(function(o){var l=[],c=[];e.forEach(function(e,r){var n=e.key,i=e.changes,s=o[r];if(s){for(var u=0,d=Object.keys(i);u<d.length;u++){var h=d[u],p=i[h];if(h===t.schema.primKey.keyPath){if(0!==ct(p,n))throw new K.Constraint("Cannot update primary key in bulkUpdate()")}else _(s,h,p)}a.push(r),l.push(n),c.push(s)}});var u=l.length;return r.mutate({trans:s,type:"put",keys:l,values:c,updates:{keys:n,changeSpecs:i}}).then(function(e){var r=e.numFailures,n=e.failures;if(0===r)return u;for(var i=0,s=Object.keys(n);i<s.length;i++){var o,l=s[i],c=a[Number(l)];null!=c&&(o=n[l],delete n[l],n[c]=o)}throw new U("".concat(t.name,".bulkUpdate(): ").concat(r," of ").concat(u," operations failed"),n)})})})},vt.prototype.bulkDelete=function(e){var t=this,r=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e}).then(function(r){return ht(t,e,r)})}).then(function(e){var n=e.numFailures,i=e.lastResult;if(e=e.failures,0===n)return i;throw new U("".concat(t.name,".bulkDelete(): ").concat(n," of ").concat(r," operations failed"),e)})},vt);function vt(){}function bt(e){function t(t,n){if(n){for(var i=arguments.length,a=new Array(i-1);--i;)a[i-1]=arguments[i];return r[t].subscribe.apply(null,a),e}if("string"==typeof t)return r[t]}var r={};t.addEventType=o;for(var n=1,i=arguments.length;n<i;++n)o(arguments[n]);return t;function o(e,n,i){if("object"!=typeof e){var l;n=n||re;var c={subscribers:[],fire:i=i||Y,subscribe:function(e){-1===c.subscribers.indexOf(e)&&(c.subscribers.push(e),c.fire=n(c.fire,e))},unsubscribe:function(e){c.subscribers=c.subscribers.filter(function(t){return t!==e}),c.fire=c.subscribers.reduce(n,i)}};return r[e]=t[e]=c}a(l=e).forEach(function(e){var t=l[e];if(s(t))o(e,l[e][0],l[e][1]);else{if("asap"!==t)throw new K.InvalidArgument("Invalid event config");var r=o(e,Q,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach(function(e){y(function(){e.apply(null,t)})})})}})}}function xt(e,t){return f(t).from({prototype:e}),t}function yt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function wt(e,t){e.filter=at(e.filter,t)}function _t(e,t,r){var n=e.replayFilter;e.replayFilter=n?function(){return at(n(),t())}:t,e.justLimit=r&&!n}function kt(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new K.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function Nt(e,t,r){var n=kt(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:n,range:e.range}})}function jt(e,t,r,n){var i=e.replayFilter?at(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},s=function(e,r,n){var s,o;i&&!i(r,n,function(e){return r.stop(e)},function(e){return r.fail(e)})||("[object ArrayBuffer]"==(o=""+(s=r.primaryKey))&&(o=""+new Uint8Array(s)),u(a,o)||(a[o]=!0,t(e,r,n)))};return Promise.all([e.or._iterate(s,r),St(Nt(e,n,r),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return St(Nt(e,n,r),at(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function St(e,t,r,n){var i=Fe(n?function(e,t,i){return r(n(e),t,i)}:r);return e.then(function(e){if(e)return e.start(function(){var r=function(){return e.continue()};t&&!t(e,function(e){return r=e},function(t){e.stop(t),r=Y},function(t){e.fail(t),r=Y})||i(e.value,e,function(e){return r=e}),r()})})}var Ct=(Et.prototype._read=function(e,t){var r=this._ctx;return r.error?r.table._trans(null,Xe.bind(null,r.error)):r.table._trans("readonly",e).then(t)},Et.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Xe.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Et.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=at(t.algorithm,e)},Et.prototype._iterate=function(e,t){return jt(this._ctx,e,t,this._ctx.table.core)},Et.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&o(r,e),t._ctx=r,t},Et.prototype.raw=function(){return this._ctx.valueMapper=null,this},Et.prototype.each=function(e){var t=this._ctx;return this._read(function(r){return jt(t,e,r,t.table.core)})},Et.prototype.count=function(e){var t=this;return this._read(function(e){var r=t._ctx,n=r.table.core;if(yt(r,!0))return n.count({trans:e,query:{index:kt(r,n.schema),range:r.range}}).then(function(e){return Math.min(e,r.limit)});var i=0;return jt(r,function(){return++i,!1},e,n).then(function(){return i})}).then(e)},Et.prototype.sortBy=function(e,t){var r=e.split(".").reverse(),n=r[0],i=r.length-1;function a(e,t){return t?a(e[r[t]],t-1):e[n]}var s="next"===this._ctx.dir?1:-1;function o(e,t){return ct(a(e,i),a(t,i))*s}return this.toArray(function(e){return e.sort(o)}).then(t)},Et.prototype.toArray=function(e){var t=this;return this._read(function(e){var r=t._ctx;if("next"===r.dir&&yt(r,!0)&&0<r.limit){var n=r.valueMapper,i=kt(r,r.table.core.schema);return r.table.core.query({trans:e,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(function(e){return e=e.result,n?e.map(n):e})}var a=[];return jt(r,function(e){return a.push(e)},e,r.table.core).then(function(){return a})},e)},Et.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,yt(t)?_t(t,function(){var t=e;return function(e,r){return 0===t||(1===t?--t:r(function(){e.advance(t),t=0}),!1)}}):_t(t,function(){var t=e;return function(){return--t<0}})),this},Et.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),_t(this._ctx,function(){var t=e;return function(e,r,n){return--t<=0&&r(n),0<=t}},!0),this},Et.prototype.until=function(e,t){return wt(this._ctx,function(r,n,i){return!e(r.value)||(n(i),t)}),this},Et.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},Et.prototype.last=function(e){return this.reverse().first(e)},Et.prototype.filter=function(e){var t;return wt(this._ctx,function(t){return e(t.value)}),(t=this._ctx).isMatch=at(t.isMatch,e),this},Et.prototype.and=function(e){return this.filter(e)},Et.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Et.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Et.prototype.desc=function(){return this.reverse()},Et.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.key,r)})},Et.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Et.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.primaryKey,r)})},Et.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.key)}).then(function(){return r}).then(e)},Et.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&yt(t,!0)&&0<t.limit)return this._read(function(e){var r=kt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:r,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.primaryKey)}).then(function(){return r}).then(e)},Et.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Et.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},Et.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Et.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return wt(this._ctx,function(e){var r=e.primaryKey.toString();return e=u(t,r),t[r]=!0,!e}),this},Et.prototype.modify=function(e){var t=this,r=this._ctx;return this._write(function(n){var i,s="function"==typeof e?e:function(t){return mt(t,e)},o=r.table.core,l=(i=o.schema.primaryKey).outbound,c=i.extractKey,u=200;function d(e,t){var r=t.failures;t=t.numFailures,p+=e-t;for(var n=0,i=a(r);n<i.length;n++){var s=i[n];h.push(r[s])}}(i=t.db._options.modifyChunkSize)&&(u="object"==typeof i?i[o.name]||i["*"]||200:i);var h=[],p=0,f=[],m=e===$t;return t.clone().primaryKeys().then(function(t){function i(h){var p=Math.min(u,t.length-h),f=t.slice(h,h+p);return(m?Promise.resolve([]):o.getMany({trans:n,keys:f,cache:"immutable"})).then(function(g){var v=[],b=[],x=l?[]:null,y=m?f:[];if(!m)for(var w=0;w<p;++w){var _=g[w],k={value:$(_),primKey:t[h+w]};!1!==s.call(k,k.value,k)&&(null==k.value?y.push(t[h+w]):l||0===ct(c(_),c(k.value))?(b.push(k.value),l&&x.push(t[h+w])):(y.push(t[h+w]),v.push(k.value)))}return Promise.resolve(0<v.length&&o.mutate({trans:n,type:"add",values:v}).then(function(e){for(var t in e.failures)y.splice(parseInt(t),1);d(v.length,e)})).then(function(){return(0<b.length||a&&"object"==typeof e)&&o.mutate({trans:n,type:"put",keys:x,values:b,criteria:a,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<h}).then(function(e){return d(b.length,e)})}).then(function(){return(0<y.length||a&&m)&&o.mutate({trans:n,type:"delete",keys:y,criteria:a,isAdditionalChunk:0<h}).then(function(e){return ht(r.table,y,e)}).then(function(e){return d(y.length,e)})}).then(function(){return t.length>h+p&&i(h+u)})})}var a=yt(r)&&r.limit===1/0&&("function"!=typeof e||m)&&{index:r.index,range:r.range};return i(0).then(function(){if(0<h.length)throw new H("Error modifying one or more objects",h,p,f);return t.length})})})},Et.prototype.delete=function(){var e=this._ctx,t=e.range;return!yt(e)||e.table.schema.yProps||!e.isPrimKey&&3!==t.type?this.modify($t):this._write(function(r){var n=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:r,query:{index:n,range:i}}).then(function(t){return e.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(function(e){var r=e.failures;if(e=e.numFailures)throw new H("Could not delete some values",Object.keys(r).map(function(e){return r[e]}),t-e);return t-e})})})},Et);function Et(){}var $t=function(e,t){return t.value=null};function Dt(e,t){return e<t?-1:e===t?0:1}function Pt(e,t){return t<e?-1:e===t?0:1}function Tt(e,t,r){return(e=e instanceof Mt?new e.Collection(e):e)._ctx.error=new(r||TypeError)(t),e}function At(e){return new e.Collection(e,function(){return It("")}).limit(0)}function Ft(e,t,r,n){var i,a,s,o,l,c,u,d=r.length;if(!r.every(function(e){return"string"==typeof e}))return Tt(e,et);function h(e){i="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},a="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},s="next"===e?Dt:Pt;var t=r.map(function(e){return{lower:a(e),upper:i(e)}}).sort(function(e,t){return s(e.lower,t.lower)});o=t.map(function(e){return e.upper}),l=t.map(function(e){return e.lower}),u="next"===(c=e)?"":n}h("next"),(e=new e.Collection(e,function(){return Rt(o[0],l[d-1]+n)}))._ondirectionchange=function(e){h(e)};var p=0;return e._addAlgorithm(function(e,r,n){var i=e.key;if("string"!=typeof i)return!1;var h=a(i);if(t(h,l,p))return!0;for(var f=null,m=p;m<d;++m){var g=function(e,t,r,n,i,a){for(var s=Math.min(e.length,n.length),o=-1,l=0;l<s;++l){var c=t[l];if(c!==n[l])return i(e[l],r[l])<0?e.substr(0,l)+r[l]+r.substr(l+1):i(e[l],n[l])<0?e.substr(0,l)+n[l]+r.substr(l+1):0<=o?e.substr(0,o)+t[o]+r.substr(o+1):null;i(e[l],c)<0&&(o=l)}return s<n.length&&"next"===a?e+r.substr(e.length):s<e.length&&"prev"===a?e.substr(0,r.length):o<0?null:e.substr(0,o)+n[o]+r.substr(o+1)}(i,h,o[m],l[m],s,c);null===g&&null===f?p=m+1:(null===f||0<s(f,g))&&(f=g)}return r(null!==f?function(){e.continue(f+u)}:n),!1}),e}function Rt(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function It(e){return{type:1,lower:e,upper:e}}var Mt=(Object.defineProperty(Ot.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ot.prototype.between=function(e,t,r,n){r=!1!==r,n=!0===n;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(r||n)&&(!r||!n)?At(this):new this.Collection(this,function(){return Rt(e,t,!r,!n)})}catch(i){return Tt(this,Ze)}},Ot.prototype.equals=function(e){return null==e?Tt(this,Ze):new this.Collection(this,function(){return It(e)})},Ot.prototype.above=function(e){return null==e?Tt(this,Ze):new this.Collection(this,function(){return Rt(e,void 0,!0)})},Ot.prototype.aboveOrEqual=function(e){return null==e?Tt(this,Ze):new this.Collection(this,function(){return Rt(e,void 0,!1)})},Ot.prototype.below=function(e){return null==e?Tt(this,Ze):new this.Collection(this,function(){return Rt(void 0,e,!1,!0)})},Ot.prototype.belowOrEqual=function(e){return null==e?Tt(this,Ze):new this.Collection(this,function(){return Rt(void 0,e)})},Ot.prototype.startsWith=function(e){return"string"!=typeof e?Tt(this,et):this.between(e,e+Je,!0,!0)},Ot.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Ft(this,function(e,t){return 0===e.indexOf(t[0])},[e],Je)},Ot.prototype.equalsIgnoreCase=function(e){return Ft(this,function(e,t){return e===t[0]},[e],"")},Ot.prototype.anyOfIgnoreCase=function(){var e=I.apply(R,arguments);return 0===e.length?At(this):Ft(this,function(e,t){return-1!==t.indexOf(e)},e,"")},Ot.prototype.startsWithAnyOfIgnoreCase=function(){var e=I.apply(R,arguments);return 0===e.length?At(this):Ft(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,Je)},Ot.prototype.anyOf=function(){var e=this,t=I.apply(R,arguments),r=this._cmp;try{t.sort(r)}catch(a){return Tt(this,Ze)}if(0===t.length)return At(this);var n=new this.Collection(this,function(){return Rt(t[0],t[t.length-1])});n._ondirectionchange=function(n){r="next"===n?e._ascending:e._descending,t.sort(r)};var i=0;return n._addAlgorithm(function(e,n,a){for(var s=e.key;0<r(s,t[i]);)if(++i===t.length)return n(a),!1;return 0===r(s,t[i])||(n(function(){e.continue(t[i])}),!1)}),n},Ot.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ot.prototype.noneOf=function(){var e=I.apply(R,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(r){return Tt(this,Ze)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Ot.prototype.inAnyRange=function(e,t){var r=this,n=this._cmp,i=this._ascending,a=this._descending,s=this._min,o=this._max;if(0===e.length)return At(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0}))return Tt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",K.InvalidArgument);var l,c=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers,d=i;function h(e,t){return d(e[0],t[0])}try{(l=e.reduce(function(e,t){for(var r=0,i=e.length;r<i;++r){var a=e[r];if(n(t[0],a[1])<0&&0<n(t[1],a[0])){a[0]=s(a[0],t[0]),a[1]=o(a[1],t[1]);break}}return r===i&&e.push(t),e},[])).sort(h)}catch(v){return Tt(this,Ze)}var p=0,f=u?function(e){return 0<i(e,l[p][1])}:function(e){return 0<=i(e,l[p][1])},m=c?function(e){return 0<a(e,l[p][0])}:function(e){return 0<=a(e,l[p][0])},g=f;return(e=new this.Collection(this,function(){return Rt(l[0][0],l[l.length-1][1],!c,!u)}))._ondirectionchange=function(e){d="next"===e?(g=f,i):(g=m,a),l.sort(h)},e._addAlgorithm(function(e,t,n){for(var a,s=e.key;g(s);)if(++p===l.length)return t(n),!1;return!f(a=s)&&!m(a)||(0===r._cmp(s,l[p][1])||0===r._cmp(s,l[p][0])||t(function(){d===i?e.continue(l[p][0]):e.continue(l[p][1])}),!1)}),e},Ot.prototype.startsWithAnyOf=function(){var e=I.apply(R,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?At(this):this.inAnyRange(e.map(function(e){return[e,e+Je]})):Tt(this,"startsWithAnyOf() only works with strings")},Ot);function Ot(){}function Lt(e){return Fe(function(t){return zt(t),e(t.target.error),!1})}function zt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Bt="storagemutated",Ht="x-storagemutated-1",Ut=bt(null,Bt),qt=(Vt.prototype._lock=function(){return x(!be.global),++this._reculock,1!==this._reculock||be.global||(be.lockOwnerFor=this),this},Vt.prototype._unlock=function(){if(x(!be.global),0==--this._reculock)for(be.global||(be.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Ge(e[1],e[0])}catch(t){}}return this},Vt.prototype._locked=function(){return this._reculock&&be.lockOwnerFor!==this},Vt.prototype.create=function(e){var t=this;if(!this.mode)return this;var r=this.db.idbdb,n=this.db._state.dbOpenError;if(x(!this.idbtrans),!e&&!r)switch(n&&n.name){case"DatabaseClosedError":throw new K.DatabaseClosed(n);case"MissingAPIError":throw new K.MissingAPI(n.message,n);default:throw new K.OpenFailed(n)}if(!this.active)throw new K.TransactionInactive;return x(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||r).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Fe(function(r){zt(r),t._reject(e.error)}),e.onabort=Fe(function(r){zt(r),t.active&&t._reject(new K.Abort(e.error)),t.active=!1,t.on("abort").fire(r)}),e.oncomplete=Fe(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Ut.storagemutated.fire(e.mutatedParts)}),this},Vt.prototype._promise=function(e,t,r){var n=this;if("readwrite"===e&&"readwrite"!==this.mode)return Xe(new K.ReadOnly("Transaction is readonly"));if(!this.active)return Xe(new K.TransactionInactive);if(this._locked())return new _e(function(i,a){n._blockedFuncs.push([function(){n._promise(e,t,r).then(i,a)},be])});if(r)return Be(function(){var e=new _e(function(e,r){n._lock();var i=t(e,r,n);i&&i.then&&i.then(e,r)});return e.finally(function(){return n._unlock()}),e._lib=!0,e});var i=new _e(function(e,r){var i=t(e,r,n);i&&i.then&&i.then(e,r)});return i._lib=!0,i},Vt.prototype._root=function(){return this.parent?this.parent._root():this},Vt.prototype.waitFor=function(e){var t,r=this._root(),n=_e.resolve(e);r._waitingFor?r._waitingFor=r._waitingFor.then(function(){return n}):(r._waitingFor=n,r._waitingQueue=[],t=r.idbtrans.objectStore(r.storeNames[0]),function e(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(t.get(-1/0).onsuccess=e)}());var i=r._waitingFor;return new _e(function(e,t){n.then(function(t){return r._waitingQueue.push(Fe(e.bind(null,t)))},function(e){return r._waitingQueue.push(Fe(t.bind(null,e)))}).finally(function(){r._waitingFor===i&&(r._waitingFor=null)})})},Vt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new K.Abort))},Vt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(u(t,e))return t[e];var r=this.schema[e];if(!r)throw new K.NotFound("Table "+e+" not part of transaction");return(r=new this.db.Table(e,r,this)).core=this.db.core.table(e),t[e]=r},Vt);function Vt(){}function Kt(e,t,r,n,i,a,s,o){return{name:e,keyPath:t,unique:r,multi:n,auto:i,compound:a,src:(r&&!s?"&":"")+(n?"*":"")+(i?"++":"")+Wt(t),type:o}}function Wt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Gt(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:(n=function(e){return[e.name,e]},r.reduce(function(e,t,r){return(r=n(t,r))&&(e[r[0]]=r[1]),e},{}))};var n}var Yt=function(e){try{return e.only([[]]),Yt=function(){return[[]]},[[]]}catch(t){return Yt=function(){return Je},Je}};function Qt(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(e){return e[t]}:function(e){return w(e,t)}:function(t){return w(t,e)};var t}function Xt(e){return[].slice.call(e)}var Jt=0;function Zt(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function er(e,t,r){function n(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var r=e.lower,n=e.upper,i=e.lowerOpen;return e=e.upperOpen,void 0===r?void 0===n?null:t.upperBound(n,!!e):void 0===n?t.lowerBound(r,!!i):t.bound(r,n,!!i,!!e)}function i(e){var t,r=e.name;return{name:r,schema:e,mutate:function(e){var t=e.trans,i=e.type,a=e.keys,s=e.values,o=e.range;return new Promise(function(e,l){e=Fe(e);var c=t.objectStore(r),u=null==c.keyPath,d="put"===i||"add"===i;if(!d&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var h,p=(a||s||{length:1}).length;if(a&&s&&a.length!==s.length)throw new Error("Given keys array must have same length as given values array.");if(0===p)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function f(e){++v,zt(e)}var m=[],g=[],v=0;if("deleteRange"===i){if(4===o.type)return e({numFailures:v,failures:g,results:[],lastResult:void 0});3===o.type?m.push(h=c.clear()):m.push(h=c.delete(n(o)))}else{var b=(u=d?u?[s,a]:[s,null]:[a,null])[0],x=u[1];if(d)for(var y=0;y<p;++y)m.push(h=x&&void 0!==x[y]?c[i](b[y],x[y]):c[i](b[y])),h.onerror=f;else for(y=0;y<p;++y)m.push(h=c[i](b[y])),h.onerror=f}function w(t){t=t.target.result,m.forEach(function(e,t){return null!=e.error&&(g[t]=e.error)}),e({numFailures:v,failures:g,results:"delete"===i?a:m.map(function(e){return e.result}),lastResult:t})}h.onerror=function(e){f(e),w(e)},h.onsuccess=w})},getMany:function(e){var t=e.trans,n=e.keys;return new Promise(function(e,i){e=Fe(e);for(var a,s=t.objectStore(r),o=n.length,l=new Array(o),c=0,u=0,d=function(t){t=t.target,l[t._pos]=t.result,++u===c&&e(l)},h=Lt(i),p=0;p<o;++p)null!=n[p]&&((a=s.get(n[p]))._pos=p,a.onsuccess=d,a.onerror=h,++c);0===c&&e(l)})},get:function(e){var t=e.trans,n=e.key;return new Promise(function(e,i){e=Fe(e);var a=t.objectStore(r).get(n);a.onsuccess=function(t){return e(t.target.result)},a.onerror=Lt(i)})},query:(t=c,function(e){return new Promise(function(i,a){i=Fe(i);var s,o,l,c=e.trans,u=e.values,d=e.limit,h=e.query,p=d===1/0?void 0:d,f=h.index;if(h=h.range,c=c.objectStore(r),f=f.isPrimaryKey?c:c.index(f.name),h=n(h),0===d)return i({result:[]});t?((p=u?f.getAll(h,p):f.getAllKeys(h,p)).onsuccess=function(e){return i({result:e.target.result})},p.onerror=Lt(a)):(s=0,o=!u&&"openKeyCursor"in f?f.openKeyCursor(h):f.openCursor(h),l=[],o.onsuccess=function(e){var t=o.result;return t?(l.push(u?t.value:t.primaryKey),++s===d?i({result:l}):void t.continue()):i({result:l})},o.onerror=Lt(a))})}),openCursor:function(e){var t=e.trans,i=e.values,a=e.query,s=e.reverse,o=e.unique;return new Promise(function(e,l){e=Fe(e);var c=a.index,u=a.range,d=t.objectStore(r),h=(d=c.isPrimaryKey?d:d.index(c.name),c=s?o?"prevunique":"prev":o?"nextunique":"next",!i&&"openKeyCursor"in d?d.openKeyCursor(n(u),c):d.openCursor(n(u),c));h.onerror=Lt(l),h.onsuccess=Fe(function(r){var n,i,a,s,o=h.result;o?(o.___id=++Jt,o.done=!1,n=o.continue.bind(o),i=(i=o.continuePrimaryKey)&&i.bind(o),a=o.advance.bind(o),s=function(){throw new Error("Cursor not stopped")},o.trans=t,o.stop=o.continue=o.continuePrimaryKey=o.advance=function(){throw new Error("Cursor not started")},o.fail=Fe(l),o.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},o.start=function(e){function t(){if(h.result)try{e()}catch(t){o.fail(t)}else o.done=!0,o.start=function(){throw new Error("Cursor behind last entry")},o.stop()}var r=new Promise(function(e,t){e=Fe(e),h.onerror=Lt(t),o.fail=t,o.stop=function(t){o.stop=o.continue=o.continuePrimaryKey=o.advance=s,e(t)}});return h.onsuccess=Fe(function(e){h.onsuccess=t,t()}),o.continue=n,o.continuePrimaryKey=i,o.advance=a,t(),r},e(o)):e(null)},l)})},count:function(e){var t=e.query,i=e.trans,a=t.index,s=t.range;return new Promise(function(e,t){var o=i.objectStore(r),l=a.isPrimaryKey?o:o.index(a.name);(l=(o=n(s))?l.count(o):l.count()).onsuccess=Fe(function(t){return e(t.target.result)}),l.onerror=Lt(t)})}}}r=(o=r,l=Xt((a=e).objectStoreNames),u={schema:{name:a.name,tables:l.map(function(e){return o.objectStore(e)}).map(function(e){var t=e.keyPath,r=e.autoIncrement,n=s(t),i={};return r={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:n,keyPath:t,autoIncrement:r,unique:!0,extractKey:Qt(t)},indexes:Xt(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,r=e.unique,n=e.multiEntry;return e=e.keyPath,n={name:t,compound:s(e),keyPath:e,unique:r,multiEntry:n,extractKey:Qt(e)},i[Zt(e)]=n}),getIndexByKeyPath:function(e){return i[Zt(e)]}},i[":id"]=r.primaryKey,null!=t&&(i[Zt(t)]=r.primaryKey),r})},hasGetAll:0<l.length&&"getAll"in o.objectStore(l[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}).schema;var a,o,l,c=u.hasGetAll,u=r.tables.map(i),d={};return u.forEach(function(e){return d[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!d[e])throw new Error("Table '".concat(e,"' not found"));return d[e]},MIN_KEY:-1/0,MAX_KEY:Yt(t),schema:r}}function tr(e,r,n,i){var a=n.IDBKeyRange;return n.indexedDB,{dbcore:(i=er(r,a,i),e.dbcore.reduce(function(e,r){return r=r.create,t(t({},e),r(e))},i))}}function rr(e,t){var r=t.db;t=tr(e._middlewares,r,e._deps,t),e.core=t.dbcore,e.tables.forEach(function(t){var r=t.name;e.core.schema.tables.some(function(e){return e.name===r})&&(t.core=e.core.table(r),e[r]instanceof e.Table&&(e[r].core=t.core))})}function nr(e,t,r,n){r.forEach(function(r){var i=n[r];t.forEach(function(t){var n=function e(t,r){return m(t,r)||(t=l(t))&&e(t,r)}(t,r);(!n||"value"in n&&void 0===n.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?p(t,r,{get:function(){return this.table(r)},set:function(e){h(this,r,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[r]=new e.Table(r,i))})})}function ir(e,t){t.forEach(function(t){for(var r in t)t[r]instanceof e.Table&&delete t[r]})}function ar(e,t){return e._cfg.version-t._cfg.version}function sr(e,t,r,n){var i=e._dbSchema;r.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=Gt("$meta",fr("")[0],[]),e._storeNames.push("$meta"));var s=e._createTransaction("readwrite",e._storeNames,i);s.create(r),s._completion.catch(n);var o=s._reject.bind(s),l=be.transless||be;Be(function(){return be.trans=s,be.transless=l,0!==t?(rr(e,r),c=t,((n=s).storeNames.includes("$meta")?n.table("$meta").get("version").then(function(e){return null!=e?e:c}):_e.resolve(c)).then(function(t){return i=t,o=s,l=r,c=[],t=(n=e)._versions,u=n._dbSchema=hr(0,n.idbdb,l),0!==(t=t.filter(function(e){return e._cfg.version>=i})).length?(t.forEach(function(e){c.push(function(){var t=u,r=e._cfg.dbschema;pr(n,t,l),pr(n,r,l),u=n._dbSchema=r;var s=lr(t,r);s.add.forEach(function(e){cr(l,e[0],e[1].primKey,e[1].indexes)}),s.change.forEach(function(e){if(e.recreate)throw new K.Upgrade("Not yet support for changing primary key");var t=l.objectStore(e.name);e.add.forEach(function(e){return dr(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),dr(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var c=e._cfg.contentUpgrade;if(c&&e._cfg.version>i){rr(n,l),o._memoizedTables={};var d=k(r);s.del.forEach(function(e){d[e]=t[e]}),ir(n,[n.Transaction.prototype]),nr(n,[n.Transaction.prototype],a(d),d),o.schema=d;var h,p=M(c);return p&&He(),s=_e.follow(function(){var e;(h=c(o))&&p&&(e=Ue.bind(null,null),h.then(e,e))}),h&&"function"==typeof h.then?_e.resolve(h):s.then(function(){return h})}}),c.push(function(t){var r,i,a=e._cfg.dbschema;r=a,i=t,[].slice.call(i.db.objectStoreNames).forEach(function(e){return null==r[e]&&i.db.deleteObjectStore(e)}),ir(n,[n.Transaction.prototype]),nr(n,[n.Transaction.prototype],n._storeNames,n._dbSchema),o.schema=n._dbSchema}),c.push(function(t){n.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(n.idbdb.version/10)===e._cfg.version?(n.idbdb.deleteObjectStore("$meta"),delete n._dbSchema.$meta,n._storeNames=n._storeNames.filter(function(e){return"$meta"!==e})):t.objectStore("$meta").put(e._cfg.version,"version"))})}),function e(){return c.length?_e.resolve(c.shift()(o.idbtrans)).then(e):_e.resolve()}().then(function(){ur(u,l)})):_e.resolve();var n,i,o,l,c,u}).catch(o)):(a(i).forEach(function(e){cr(r,e,i[e].primKey,i[e].indexes)}),rr(e,r),void _e.follow(function(){return e.on.populate.fire(s)}).catch(o));var n,c})}function or(e,t){ur(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var r=hr(0,e.idbdb,t);pr(e,e._dbSchema,t);for(var n=0,i=lr(r,e._dbSchema).change;n<i.length;n++){var a=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var r=t.objectStore(e.name);e.add.forEach(function(t){ie&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),dr(r,t)})}(i[n]);if("object"==typeof a)return a.value}}function lr(e,t){var r,n={del:[],add:[],change:[]};for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],a=t[r];if(i){var s={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto)s.recreate=!0,n.change.push(s);else{var o=i.idxByName,l=a.idxByName,c=void 0;for(c in o)l[c]||s.del.push(c);for(c in l){var u=o[c],d=l[c];u?u.src!==d.src&&s.change.push(d):s.add.push(d)}(0<s.del.length||0<s.add.length||0<s.change.length)&&n.change.push(s)}}else n.add.push([r,a])}return n}function cr(e,t,r,n){var i=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(function(e){return dr(i,e)}),i}function ur(e,t){a(e).forEach(function(r){t.db.objectStoreNames.contains(r)||(ie&&console.debug("Dexie: Creating missing table",r),cr(t,r,e[r].primKey,e[r].indexes))})}function dr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function hr(e,t,r){var n={};return v(t.objectStoreNames,0).forEach(function(e){for(var t=r.objectStore(e),i=Kt(Wt(o=t.keyPath),o||"",!0,!1,!!t.autoIncrement,o&&"string"!=typeof o,!0),a=[],s=0;s<t.indexNames.length;++s){var o=(l=t.index(t.indexNames[s])).keyPath,l=Kt(l.name,o,!!l.unique,!!l.multiEntry,!1,o&&"string"!=typeof o,!1);a.push(l)}n[e]=Gt(e,i,a)}),n}function pr(e,t,r){for(var n=r.db.objectStoreNames,a=0;a<n.length;++a){var s=n[a],o=r.objectStore(s);e._hasGetAll="getAll"in o;for(var l=0;l<o.indexNames.length;++l){var c=o.indexNames[l],u=o.index(c).keyPath,d="string"==typeof u?u:"["+v(u).join("+")+"]";!t[s]||(u=t[s].idxByName[d])&&(u.name=c,delete t[s].idxByName[d],t[s].idxByName[c]=u)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function fr(e){return e.split(",").map(function(e,t){var r=null===(n=(i=e.split(":"))[1])||void 0===n?void 0:n.trim(),n=(e=i[0].trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Kt(n,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),s(i),0===t,r)})}var mr=(gr.prototype._createTableSchema=Gt,gr.prototype._parseIndexSyntax=fr,gr.prototype._parseStoresSpec=function(e,t){var r=this;a(e).forEach(function(n){if(null!==e[n]){var i=r._parseIndexSyntax(e[n]),a=i.shift();if(!a)throw new K.Schema("Invalid schema for table "+n+": "+e[n]);if(a.unique=!0,a.multi)throw new K.Schema("Primary key cannot be multiEntry*");i.forEach(function(e){if(e.auto)throw new K.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new K.Schema("Index must have a name and cannot be an empty string")}),i=r._createTableSchema(n,a,i),t[n]=i}})},gr.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?o(this._cfg.storesSource,e):e,e=t._versions;var r={},n={};return e.forEach(function(e){o(r,e._cfg.storesSource),n=e._cfg.dbschema={},e._parseStoresSpec(r,n)}),t._dbSchema=n,ir(t,[t._allTables,t,t.Transaction.prototype]),nr(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],a(n),n),t._storeNames=a(n),this},gr.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ne(this._cfg.contentUpgrade||Y,e),this},gr);function gr(){}function vr(e,t){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new rn(rt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function br(e){return e&&"function"==typeof e.databases}function xr(e){return Be(function(){return be.letThrough=!0,e()})}function yr(e){return!("from"in e)}var wr=function(e,t){if(!this){var r=new wr;return e&&"d"in e&&o(r,e),r}o(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function _r(e,t,r){var n=ct(t,r);if(!isNaN(n)){if(0<n)throw RangeError();if(yr(e))return o(e,{from:t,to:r,d:1});var i=e.l;if(n=e.r,ct(r,e.from)<0)return i?_r(i,t,r):e.l={from:t,to:r,d:1,l:null,r:null},Sr(e);if(0<ct(t,e.to))return n?_r(n,t,r):e.r={from:t,to:r,d:1,l:null,r:null},Sr(e);ct(t,e.from)<0&&(e.from=t,e.l=null,e.d=n?n.d+1:1),0<ct(r,e.to)&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1),r=!e.r,i&&!e.l&&kr(e,i),n&&r&&kr(e,n)}}function kr(e,t){yr(t)||function e(t,r){var n=r.from,i=r.to,a=r.l;r=r.r,_r(t,n,i),a&&e(t,a),r&&e(t,r)}(e,t)}function Nr(e,t){var r=jr(t),n=r.next();if(n.done)return!1;for(var i=n.value,a=jr(e),s=a.next(i.from),o=s.value;!n.done&&!s.done;){if(ct(o.from,i.to)<=0&&0<=ct(o.to,i.from))return!0;ct(i.from,o.from)<0?i=(n=r.next(o.from)).value:o=(s=a.next(i.from)).value}return!1}function jr(e){var t=yr(e)?null:{s:0,n:e};return{next:function(e){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&ct(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||ct(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Sr(e){var r,n,i=((null===(r=e.r)||void 0===r?void 0:r.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),a=1<i?"r":i<-1?"l":"";a&&(r="r"==a?"l":"r",n=t({},e),i=e[a],e.from=i.from,e.to=i.to,e[a]=i[a],n[a]=i[r],(e[r]=n).d=Cr(n)),e.d=Cr(e)}function Cr(e){var t=e.r;return e=e.l,(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function Er(e,t){return a(t).forEach(function(r){e[r]?kr(e[r],t[r]):e[r]=function e(t){var r,n,i={};for(r in t)u(t,r)&&(n=t[r],i[r]=!n||"object"!=typeof n||C.has(n.constructor)?n:e(n));return i}(t[r])}),e}function $r(e,t){return e.all||t.all||Object.keys(e).some(function(r){return t[r]&&Nr(t[r],e[r])})}d(wr.prototype,((O={add:function(e){return kr(this,e),this},addKey:function(e){return _r(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return _r(t,e,e)}),this},hasKey:function(e){var t=jr(this).next(e).value;return t&&ct(t.from,e)<=0&&0<=ct(t.to,e)}})[T]=function(){return jr(this)},O));var Dr={},Pr={},Tr=!1;function Ar(e){Er(Pr,e),Tr||(Tr=!0,setTimeout(function(){Tr=!1,Fr(Pr,!(Pr={}))},0))}function Fr(e,t){void 0===t&&(t=!1);var r=new Set;if(e.all)for(var n=0,i=Object.values(Dr);n<i.length;n++)Rr(s=i[n],e,r,t);else for(var a in e){var s,o=/^idb\:\/\/(.*)\/(.*)\//.exec(a);o&&(a=o[1],o=o[2],(s=Dr["idb://".concat(a,"/").concat(o)])&&Rr(s,e,r,t))}r.forEach(function(e){return e()})}function Rr(e,t,r,n){for(var i=[],a=0,s=Object.entries(e.queries.query);a<s.length;a++){for(var o=s[a],l=o[0],c=[],u=0,d=o[1];u<d.length;u++){var h=d[u];$r(t,h.obsSet)?h.subscribers.forEach(function(e){return r.add(e)}):n&&c.push(h)}n&&i.push([l,c])}if(n)for(var p=0,f=i;p<f.length;p++){var m=f[p];l=m[0],c=m[1],e.queries.query[l]=c}}function Ir(e){var t=e._state,r=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Xe(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var n=t.openCanceller,i=Math.round(10*e.verno),s=!1;function o(){if(t.openCanceller!==n)throw new K.DatabaseClosed("db.open() was cancelled")}function l(){return new _e(function(n,c){if(o(),!r)throw new K.MissingAPI;var u=e.name,p=t.autoSchema||!i?r.open(u):r.open(u,i);if(!p)throw new K.MissingAPI;p.onerror=Lt(c),p.onblocked=Fe(e._fireOnBlocked),p.onupgradeneeded=Fe(function(n){var i;d=p.transaction,t.autoSchema&&!e._options.allowEmptyDB?(p.onerror=zt,d.abort(),p.result.close(),(i=r.deleteDatabase(u)).onsuccess=i.onerror=Fe(function(){c(new K.NoSuchDatabase("Database ".concat(u," doesnt exist")))})):(d.onerror=Lt(c),n=n.oldVersion>Math.pow(2,62)?0:n.oldVersion,h=n<1,e.idbdb=p.result,s&&or(e,d),sr(e,n/10,d,c))},c),p.onsuccess=Fe(function(){d=null;var r,o,c,f,m,g=e.idbdb=p.result,b=v(g.objectStoreNames);if(0<b.length)try{var x=g.transaction(1===(f=b).length?f[0]:f,"readonly");if(t.autoSchema)o=g,c=x,(r=e).verno=o.version/10,c=r._dbSchema=hr(0,o,c),r._storeNames=v(o.objectStoreNames,0),nr(r,[r._allTables],a(c),c);else if(pr(e,e._dbSchema,x),((m=lr(hr(0,(m=e).idbdb,x),m._dbSchema)).add.length||m.change.some(function(e){return e.add.length||e.change.length}))&&!s)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),g.close(),i=g.version+1,s=!0,n(l());rr(e,x)}catch(y){}tt.push(e),g.onversionchange=Fe(function(r){t.vcFired=!0,e.on("versionchange").fire(r)}),g.onclose=Fe(function(){e.close({disableAutoOpen:!1})}),h&&(m=e._deps,x=u,g=m.indexedDB,m=m.IDBKeyRange,br(g)||x===rt||vr(g,m).put({name:x}).catch(Y)),n()},c)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),l();break;case"VersionError":if(0<i)return i=0,l()}return _e.reject(e)})}var c,u=t.dbReadyResolve,d=null,h=!1;return _e.race([n,("undefined"==typeof navigator?_e.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){function t(){return indexedDB.databases().finally(e)}c=setInterval(t,100),t()}).finally(function(){return clearInterval(c)}):Promise.resolve()).then(l)]).then(function(){return o(),t.onReadyBeingFired=[],_e.resolve(xr(function(){return e.on.ready.fire(e.vip)})).then(function r(){if(0<t.onReadyBeingFired.length){var n=t.onReadyBeingFired.reduce(ne,Y);return t.onReadyBeingFired=[],_e.resolve(xr(function(){return n(e.vip)})).then(r)}})}).finally(function(){t.openCanceller===n&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(r){t.dbOpenError=r;try{d&&d.abort()}catch(i){}return n===t.openCanceller&&e._close(),Xe(r)}).finally(function(){t.openComplete=!0,u()}).then(function(){var t;return h&&(t={},e.tables.forEach(function(r){r.schema.indexes.forEach(function(n){n.name&&(t["idb://".concat(e.name,"/").concat(r.name,"/").concat(n.name)]=new wr(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(r.name,"/")]=t["idb://".concat(e.name,"/").concat(r.name,"/:dels")]=new wr(-1/0,[[[]]])}),Ut(Bt).fire(t),Fr(t,!0)),e})}function Mr(e){function t(t){return e.next(t)}var r=i(t),n=i(function(t){return e.throw(t)});function i(e){return function(t){var i=e(t);return t=i.value,i.done?t:t&&"function"==typeof t.then?t.then(r,n):s(t)?Promise.all(t).then(r,n):r(t)}}return i(t)()}function Or(e,t,r){for(var n=s(e)?e.slice():[e],i=0;i<r;++i)n.push(t);return n}var Lr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(r){var n=e.table(r),i=n.schema,a={},s=[];function o(e,r,n){var i=Zt(e),l=a[i]=a[i]||[],c=null==e?0:"string"==typeof e?1:e.length,u=0<r;return u=t(t({},n),{name:u?"".concat(i,"(virtual-from:").concat(n.name,")"):n.name,lowLevelIndex:n,isVirtual:u,keyTail:r,keyLength:c,extractKey:Qt(e),unique:!u&&n.unique}),l.push(u),u.isPrimaryKey||s.push(u),1<c&&o(2===c?e[0]:e.slice(0,c-1),r+1,n),l.sort(function(e,t){return e.keyTail-t.keyTail}),u}r=o(i.primaryKey.keyPath,0,i.primaryKey),a[":id"]=[r];for(var l=0,c=i.indexes;l<c.length;l++){var u=c[l];o(u.keyPath,0,u)}function d(r){var n,i=r.query.index;return i.isVirtual?t(t({},r),{query:{index:i.lowLevelIndex,range:(n=r.query.range,i=i.keyTail,{type:1===n.type?2:n.type,lower:Or(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:Or(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}):r}return t(t({},n),{schema:t(t({},i),{primaryKey:r,indexes:s,getIndexByKeyPath:function(e){return(e=a[Zt(e)])&&e[0]}}),count:function(e){return n.count(d(e))},query:function(e){return n.query(d(e))},openCursor:function(t){var r=t.query.index,i=r.keyTail,a=r.isVirtual,s=r.keyLength;return a?n.openCursor(d(t)).then(function(e){return e&&o(e)}):n.openCursor(t);function o(r){return Object.create(r,{continue:{value:function(n){null!=n?r.continue(Or(n,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?r.continue(r.key.slice(0,s).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):r.continue()}},continuePrimaryKey:{value:function(t,n){r.continuePrimaryKey(Or(t,e.MAX_KEY,i),n)}},primaryKey:{get:function(){return r.primaryKey}},key:{get:function(){var e=r.key;return 1===s?e[0]:e.slice(0,s)}},value:{get:function(){return r.value}}})}}})}})}};function zr(e,t,r,n){return r=r||{},n=n||"",a(e).forEach(function(i){var a,s,o;u(t,i)?(a=e[i],s=t[i],"object"==typeof a&&"object"==typeof s&&a&&s?(o=P(a))!==P(s)?r[n+i]=t[i]:"Object"===o?zr(a,s,r,n+i+"."):a!==s&&(r[n+i]=t[i]):a!==s&&(r[n+i]=t[i])):r[n+i]=void 0}),a(t).forEach(function(i){u(e,i)||(r[n+i]=t[i])}),r}function Br(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var Hr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(n){var i=e.table(n),a=i.schema.primaryKey;return t(t({},i),{mutate:function(e){var s=be.trans,o=s.table(n).hook,l=o.deleting,c=o.creating,d=o.updating;switch(e.type){case"add":if(c.fire===Y)break;return s._promise("readwrite",function(){return h(e)},!0);case"put":if(c.fire===Y&&d.fire===Y)break;return s._promise("readwrite",function(){return h(e)},!0);case"delete":if(l.fire===Y)break;return s._promise("readwrite",function(){return h(e)},!0);case"deleteRange":if(l.fire===Y)break;return s._promise("readwrite",function(){return function e(r,n,s){return i.query({trans:r,values:!1,query:{index:a,range:n},limit:s}).then(function(i){var a=i.result;return h({type:"delete",keys:a,trans:r}).then(function(i){return 0<i.numFailures?Promise.reject(i.failures[0]):a.length<s?{failures:[],numFailures:0,lastResult:void 0}:e(r,t(t({},n),{lower:a[a.length-1],lowerOpen:!0}),s)})})}(e.trans,e.range,1e4)},!0)}return i.mutate(e);function h(e){var n,s,o,h=be.trans,p=e.keys||Br(a,e);if(!p)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:p}):t({},e)).type&&(e.values=r([],e.values)),e.keys&&(e.keys=r([],e.keys)),n=i,o=p,("add"===(s=e).type?Promise.resolve([]):n.getMany({trans:s.trans,keys:o,cache:"immutable"})).then(function(t){var r=p.map(function(r,n){var i,s,o,p=t[n],f={onerror:null,onsuccess:null};return"delete"===e.type?l.fire.call(f,r,p,h):"add"===e.type||void 0===p?(i=c.fire.call(f,r,e.values[n],h),null==r&&null!=i&&(e.keys[n]=r=i,a.outbound||_(e.values[n],a.keyPath,r))):(i=zr(p,e.values[n]),(s=d.fire.call(f,i,r,p,h))&&(o=e.values[n],Object.keys(s).forEach(function(e){u(o,e)?o[e]=s[e]:_(o,e,s[e])}))),f});return i.mutate(e).then(function(n){for(var i=n.failures,a=n.results,s=n.numFailures,o=(n=n.lastResult,0);o<p.length;++o){var l=(a||p)[o],c=r[o];null==l?c.onerror&&c.onerror(i[o]):c.onsuccess&&c.onsuccess("put"===e.type&&t[o]?e.values[o]:l)}return{failures:i,results:a,numFailures:s,lastResult:n}}).catch(function(e){return r.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}}})}})}};function Ur(e,t,r){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var n=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)0===ct(t.keys[i],e[a])&&(n.push(r?$(t.values[i]):t.values[i]),++a);return n.length===e.length?n:null}catch(s){return null}}var qr={stack:"dbcore",level:-1,create:function(e){return{table:function(r){var n=e.table(r);return t(t({},n),{getMany:function(e){if(!e.cache)return n.getMany(e);var t=Ur(e.keys,e.trans._cache,"clone"===e.cache);return t?_e.resolve(t):n.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?$(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}};function Vr(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Kr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Wr={stack:"dbcore",level:0,name:"Observability",create:function(e){var r=e.schema.name,n=new wr(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,r,n){if(be.subscr&&"readonly"!==r)throw new K.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(be.querier));return e.transaction(t,r,n)},table:function(i){var o=e.table(i),l=o.schema,c=l.primaryKey,u=l.indexes,d=c.extractKey,h=c.outbound,p=c.autoIncrement&&u.filter(function(e){return e.compound&&e.keyPath.includes(c.keyPath)}),f=t(t({},o),{mutate:function(t){function a(e){return e="idb://".concat(r,"/").concat(i,"/").concat(e),m[e]||(m[e]=new wr)}var u,d,h,f=t.trans,m=t.mutatedParts||(t.mutatedParts={}),g=a(""),v=a(":dels"),b=t.type,x=(w="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[Br(c,t).filter(function(e){return e}),t.values]:[])[0],y=w[1],w=t.trans._cache;return s(x)?(g.addKeys(x),(w="delete"===b||x.length===y.length?Ur(x,w):null)||v.addKeys(x),(w||y)&&(u=a,d=w,h=y,l.indexes.forEach(function(e){var t=u(e.name||"");function r(t){return null!=t?e.extractKey(t):null}function n(r){return e.multiEntry&&s(r)?r.forEach(function(e){return t.addKey(e)}):t.addKey(r)}(d||h).forEach(function(e,t){var i=d&&r(d[t]);0!==ct(i,t=h&&r(h[t]))&&(null!=i&&n(i),null!=t&&n(t))})}))):x?(y={from:null!==(y=x.lower)&&void 0!==y?y:e.MIN_KEY,to:null!==(y=x.upper)&&void 0!==y?y:e.MAX_KEY},v.add(y),g.add(y)):(g.add(n),v.add(n),l.indexes.forEach(function(e){return a(e.name).add(n)})),o.mutate(t).then(function(e){return!x||"add"!==t.type&&"put"!==t.type||(g.addKeys(e.results),p&&p.forEach(function(r){for(var n=t.values.map(function(e){return r.extractKey(e)}),i=r.keyPath.findIndex(function(e){return e===c.keyPath}),s=0,o=e.results.length;s<o;++s)n[s][i]=e.results[s];a(r.name).addKeys(n)})),f.mutatedParts=Er(f.mutatedParts||{},m),e})}}),m={get:function(e){return[c,new wr(e.key)]},getMany:function(e){return[c,(new wr).addKeys(e.keys)]},count:u=function(t){t=(r=t.query).index;var r=r.range;return[t,new wr(null!==(t=r.lower)&&void 0!==t?t:e.MIN_KEY,null!==(r=r.upper)&&void 0!==r?r:e.MAX_KEY)]},query:u,openCursor:u};return a(m).forEach(function(e){f[e]=function(a){var s=!!(f=be.subscr),l=Vr(be,o)&&Kr(e,a)?a.obsSet={}:f;if(s){var c=function(e){return e="idb://".concat(r,"/").concat(i,"/").concat(e),l[e]||(l[e]=new wr)},u=c(""),p=c(":dels"),f=(s=(f=m[e](a))[0],f[1]);if(("query"===e&&s.isPrimaryKey&&!a.values?p:c(s.name||"")).add(f),!s.isPrimaryKey){if("count"!==e){var g="query"===e&&h&&a.values&&o.query(t(t({},a),{values:!1}));return o[e].apply(this,arguments).then(function(t){if("query"===e){if(h&&a.values)return g.then(function(e){return e=e.result,u.addKeys(e),t});var r=a.values?t.result.map(d):t.result;(a.values?u:p).addKeys(r)}else if("openCursor"===e){var n=t,i=a.values;return n&&Object.create(n,{key:{get:function(){return p.addKey(n.primaryKey),n.key}},primaryKey:{get:function(){var e=n.primaryKey;return p.addKey(e),e}},value:{get:function(){return i&&u.addKey(n.primaryKey),n.value}}})}return t})}p.add(n)}}return o[e].apply(this,arguments)}}),f}})}};function Gr(e,r,n){if(0===n.numFailures)return r;if("deleteRange"===r.type)return null;var i=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;return n.numFailures===i?null:(r=t({},r),s(r.keys)&&(r.keys=r.keys.filter(function(e,t){return!(t in n.failures)})),"values"in r&&s(r.values)&&(r.values=r.values.filter(function(e,t){return!(t in n.failures)})),r)}function Yr(e,t){return r=e,(void 0===(n=t).lower||(n.lowerOpen?0<ct(r,n.lower):0<=ct(r,n.lower)))&&(void 0===t.upper||(t.upperOpen?ct(e,t.upper)<0:ct(e,t.upper)<=0));var r,n}function Qr(e,t,r,n,i,a){if(!r||0===r.length)return e;var o=t.query.index,l=o.multiEntry,c=t.query.range,u=n.schema.primaryKey.extractKey,d=o.extractKey,h=(o.lowLevelIndex||o).extractKey;return(r=r.reduce(function(e,r){var n=e,i=[];if("add"===r.type||"put"===r.type)for(var a=new wr,o=r.values.length-1;0<=o;--o){var h,p=r.values[o],f=u(p);a.hasKey(f)||(h=d(p),(l&&s(h)?h.some(function(e){return Yr(e,c)}):Yr(h,c))&&(a.addKey(f),i.push(p)))}switch(r.type){case"add":var m=(new wr).addKeys(t.values?e.map(function(e){return u(e)}):e);n=e.concat(t.values?i.filter(function(e){return e=u(e),!m.hasKey(e)&&(m.addKey(e),!0)}):i.map(function(e){return u(e)}).filter(function(e){return!m.hasKey(e)&&(m.addKey(e),!0)}));break;case"put":var g=(new wr).addKeys(r.values.map(function(e){return u(e)}));n=e.filter(function(e){return!g.hasKey(t.values?u(e):e)}).concat(t.values?i:i.map(function(e){return u(e)}));break;case"delete":var v=(new wr).addKeys(r.keys);n=e.filter(function(e){return!v.hasKey(t.values?u(e):e)});break;case"deleteRange":var b=r.range;n=e.filter(function(e){return!Yr(u(e),b)})}return n},e))===e?e:(r.sort(function(e,t){return ct(h(e),h(t))||ct(u(e),u(t))}),t.limit&&t.limit<1/0&&(r.length>t.limit?r.length=t.limit:e.length===t.limit&&r.length<t.limit&&(i.dirty=!0)),a?Object.freeze(r):r)}function Xr(e,t){return 0===ct(e.lower,t.lower)&&0===ct(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Jr(e,t){return function(e,t,r,n){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=ct(e,t))){if(r&&n)return 0;if(r)return 1;if(n)return-1}return t}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(e,t,r,n){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;if(0===(t=ct(e,t))){if(r&&n)return 0;if(r)return-1;if(n)return 1}return t}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Zr(e,t,r,n){e.subscribers.add(r),n.addEventListener("abort",function(){var n,i;e.subscribers.delete(r),0===e.subscribers.size&&(n=e,i=t,setTimeout(function(){0===n.subscribers.size&&F(i,n)},3e3))})}var en={stack:"dbcore",level:0,name:"Cache",create:function(e){var r=e.schema.name;return t(t({},e),{transaction:function(t,n,i){var a,s,o=e.transaction(t,n,i);return"readwrite"===n&&(s=(a=new AbortController).signal,i=function(i){return function(){if(a.abort(),"readwrite"===n){for(var s=new Set,l=0,c=t;l<c.length;l++){var u=c[l],d=Dr["idb://".concat(r,"/").concat(u)];if(d){var h=e.table(u),p=d.optimisticOps.filter(function(e){return e.trans===o});if(o._explicit&&i&&o.mutatedParts)for(var f=0,m=Object.values(d.queries.query);f<m.length;f++)for(var g=0,v=(y=m[f]).slice();g<v.length;g++)$r((w=v[g]).obsSet,o.mutatedParts)&&(F(y,w),w.subscribers.forEach(function(e){return s.add(e)}));else if(0<p.length){d.optimisticOps=d.optimisticOps.filter(function(e){return e.trans!==o});for(var b=0,x=Object.values(d.queries.query);b<x.length;b++)for(var y,w,_,k=0,N=(y=x[b]).slice();k<N.length;k++)null!=(w=N[k]).res&&o.mutatedParts&&(i&&!w.dirty?(_=Object.isFrozen(w.res),_=Qr(w.res,w.req,p,h,w,_),w.dirty?(F(y,w),w.subscribers.forEach(function(e){return s.add(e)})):_!==w.res&&(w.res=_,w.promise=_e.resolve({result:_}))):(w.dirty&&F(y,w),w.subscribers.forEach(function(e){return s.add(e)})))}}}s.forEach(function(e){return e()})}}},o.addEventListener("abort",i(!1),{signal:s}),o.addEventListener("error",i(!1),{signal:s}),o.addEventListener("complete",i(!0),{signal:s})),o},table:function(n){var i=e.table(n),a=i.schema.primaryKey;return t(t({},i),{mutate:function(e){var s=be.trans;if(a.outbound||"disabled"===s.db._options.cache||s.explicit||"readwrite"!==s.idbtrans.mode)return i.mutate(e);var o=Dr["idb://".concat(r,"/").concat(n)];return o?(s=i.mutate(e),"add"!==e.type&&"put"!==e.type||!(50<=e.values.length||Br(a,e).some(function(e){return null==e}))?(o.optimisticOps.push(e),e.mutatedParts&&Ar(e.mutatedParts),s.then(function(t){0<t.numFailures&&(F(o.optimisticOps,e),(t=Gr(0,e,t))&&o.optimisticOps.push(t),e.mutatedParts&&Ar(e.mutatedParts))}),s.catch(function(){F(o.optimisticOps,e),e.mutatedParts&&Ar(e.mutatedParts)})):s.then(function(r){var n=Gr(0,t(t({},e),{values:e.values.map(function(e,n){var i;return r.failures[n]||_(e=null!==(i=a.keyPath)&&void 0!==i&&i.includes(".")?$(e):t({},e),a.keyPath,r.results[n]),e})}),r);o.optimisticOps.push(n),queueMicrotask(function(){return e.mutatedParts&&Ar(e.mutatedParts)})}),s):i.mutate(e)},query:function(e){if(!Vr(be,i)||!Kr("query",e))return i.query(e);var t="immutable"===(null===(o=be.trans)||void 0===o?void 0:o.db._options.cache),a=(c=be).requery,s=c.signal,o=function(e,t,r,n){var i=Dr["idb://".concat(e,"/").concat(t)];if(!i)return[];if(!(t=i.queries[r]))return[null,!1,i,null];var a=t[(n.query?n.query.index.name:null)||""];if(!a)return[null,!1,i,null];switch(r){case"query":var s=a.find(function(e){return e.req.limit===n.limit&&e.req.values===n.values&&Xr(e.req.query.range,n.query.range)});return s?[s,!0,i,a]:[a.find(function(e){return("limit"in e.req?e.req.limit:1/0)>=n.limit&&(!n.values||e.req.values)&&Jr(e.req.query.range,n.query.range)}),!1,i,a];case"count":return[s=a.find(function(e){return Xr(e.req.query.range,n.query.range)}),!!s,i,a]}}(r,n,"query",e),l=o[0],c=o[1],u=o[2],d=o[3];return l&&c?l.obsSet=e.obsSet:(c=i.query(e).then(function(e){var r=e.result;if(l&&(l.res=r),t){for(var n=0,i=r.length;n<i;++n)Object.freeze(r[n]);Object.freeze(r)}else e.result=$(r);return e}).catch(function(e){return d&&l&&F(d,l),Promise.reject(e)}),l={obsSet:e.obsSet,promise:c,subscribers:new Set,type:"query",req:e,dirty:!1},d?d.push(l):(d=[l],(u=u||(Dr["idb://".concat(r,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=d)),Zr(l,d,a,s),l.promise.then(function(r){return{result:Qr(r.result,e,null==u?void 0:u.optimisticOps,i,l,t)}})}})}})}};function tn(e,t){return new Proxy(e,{get:function(e,r,n){return"db"===r?t:Reflect.get(e,r,n)}})}var rn=(nn.prototype.version=function(e){if(isNaN(e)||e<.1)throw new K.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new K.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,r=t.filter(function(t){return t._cfg.version===e})[0];return r||(r=new this.Version(e),t.push(r),t.sort(ar),r.stores({}),this._state.autoSchema=!1,r)},nn.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||be.letThrough||this._vip)?e():new _e(function(e,r){if(t._state.openComplete)return r(new K.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new K.DatabaseClosed);t.open().catch(Y)}t._state.dbReadyPromise.then(e,r)}).then(e)},nn.prototype.use=function(e){var t=e.stack,r=e.create,n=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:r,level:null==n?10:n,name:i}),e.sort(function(e,t){return e.level-t.level}),this},nn.prototype.unuse=function(e){var t=e.stack,r=e.name,n=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return n?e.create!==n:!!r&&e.name!==r})),this},nn.prototype.open=function(){var e=this;return Ge(ve,function(){return Ir(e)})},nn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=tt.indexOf(this);if(0<=t&&tt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(r){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new _e(function(t){e.dbReadyResolve=t}),e.openCanceller=new _e(function(t,r){e.cancelOpen=r}))},nn.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen;e=this._state,t?(e.isBeingOpened&&e.cancelOpen(new K.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new K.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},nn.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var r=0<arguments.length&&"object"!=typeof arguments[0],n=this._state;return new _e(function(i,a){function s(){t.close(e);var r=t._deps.indexedDB.deleteDatabase(t.name);r.onsuccess=Fe(function(){var e,r,n;e=t._deps,r=t.name,n=e.indexedDB,e=e.IDBKeyRange,br(n)||r===rt||vr(n,e).delete(r).catch(Y),i()}),r.onerror=Lt(a),r.onblocked=t._fireOnBlocked}if(r)throw new K.InvalidArgument("Invalid closeOptions argument to db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})},nn.prototype.backendDB=function(){return this.idbdb},nn.prototype.isOpen=function(){return null!==this.idbdb},nn.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},nn.prototype.hasFailed=function(){return null!==this._state.dbOpenError},nn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(nn.prototype,"tables",{get:function(){var e=this;return a(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),nn.prototype.transaction=function(){var e=function(e,t,r){var n=arguments.length;if(n<2)throw new K.InvalidArgument("Too few arguments");for(var i=new Array(n-1);--n;)i[n-1]=arguments[n];return r=i.pop(),[e,j(i),r]}.apply(this,arguments);return this._transaction.apply(this,e)},nn.prototype._transaction=function(e,t,r){var n=this,i=be.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var a,s,o=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(s=t.map(function(e){if("string"!=typeof(e=e instanceof n.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==e||e===nt)a=nt;else{if("rw"!=e&&e!=it)throw new K.InvalidArgument("Invalid transaction mode: "+e);a=it}if(i){if(i.mode===nt&&a===it){if(!o)throw new K.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&s.forEach(function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!o)throw new K.SubTransaction("Table "+e+" not included in parent transaction.");i=null}}),o&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,function(e,t){t(c)}):Xe(c)}var l=function e(t,r,n,i,a){return _e.resolve().then(function(){var s=be.transless||be,o=t._createTransaction(r,n,t._dbSchema,i);if(o.explicit=!0,s={trans:o,transless:s},i)o.idbtrans=i.idbtrans;else try{o.create(),o.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(u){return u.name===q.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,null,a)})):Xe(u)}var l,c=M(a);return c&&He(),s=_e.follow(function(){var e;(l=a.call(o,o))&&(c?(e=Ue.bind(null,null),l.then(e,e)):"function"==typeof l.next&&"function"==typeof l.throw&&(l=Mr(l)))},s),(l&&"function"==typeof l.then?_e.resolve(l).then(function(e){return o.active?e:Xe(new K.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):s.then(function(){return l})).then(function(e){return i&&o._resolve(),o._completion.then(function(){return e})}).catch(function(e){return o._reject(e),Xe(e)})})}.bind(null,this,a,s,i,r);return i?i._promise(a,l,"lock"):be.trans?Ge(be.transless,function(){return n._whenReady(l)}):this._whenReady(l)},nn.prototype.table=function(e){if(!u(this._allTables,e))throw new K.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},nn);function nn(e,r){var n=this;this._middlewares={},this.verno=0;var i=nn.dependencies;this._options=r=t({addons:nn.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},i=r.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a,s,o,l,c,u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Y,dbReadyPromise:null,cancelOpen:Y,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};u.dbReadyPromise=new _e(function(e){u.dbReadyResolve=e}),u.openCanceller=new _e(function(e,t){u.cancelOpen=t}),this._state=u,this.name=e,this.on=bt(this,"populate","blocked","versionchange","close",{ready:[ne,Y]}),this.once=function(e,t){var r=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];n.on(e).unsubscribe(r),t.apply(n,i)};return n.on(e,r)},this.on.ready.subscribe=b(this.on.ready.subscribe,function(e){return function(t,r){nn.vip(function(){var i,a=n._state;a.openComplete?(a.dbOpenError||_e.resolve().then(t),r&&e(t)):a.onReadyBeingFired?(a.onReadyBeingFired.push(t),r&&e(t)):(e(t),i=n,r||e(function e(){i.on.ready.unsubscribe(t),i.on.ready.unsubscribe(e)}))})}}),this.Collection=(a=this,xt(Ct.prototype,function(e,t){this.db=a;var r=st,n=null;if(t)try{r=t()}catch(s){n=s}var i=e._ctx;e=(t=i.table).hook.reading.fire,this._ctx={table:t,index:i.index,isPrimKey:!i.index||t.schema.primKey.keyPath&&i.index===t.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:i.or,valueMapper:e!==Q?e:null}})),this.Table=(s=this,xt(gt.prototype,function(e,t,r){this.db=s,this._tx=r,this.name=e,this.schema=t,this.hook=s._allTables[e]?s._allTables[e].hook:bt(null,{creating:[Z,Y],reading:[X,Q],updating:[te,Y],deleting:[ee,Y]})})),this.Transaction=(o=this,xt(qt.prototype,function(e,t,r,n,i){var a=this;"readonly"!==e&&t.forEach(function(e){(e=null===(e=r[e])||void 0===e?void 0:e.yProps)&&(t=t.concat(e.map(function(e){return e.updatesTable})))}),this.db=o,this.mode=e,this.storeNames=t,this.schema=r,this.chromeTransactionDurability=n,this.idbtrans=null,this.on=bt(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new _e(function(e,t){a._resolve=e,a._reject=t}),this._completion.then(function(){a.active=!1,a.on.complete.fire()},function(e){var t=a.active;return a.active=!1,a.on.error.fire(e),a.parent?a.parent._reject(e):t&&a.idbtrans&&a.idbtrans.abort(),Xe(e)})})),this.Version=(l=this,xt(mr.prototype,function(e){this.db=l,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(c=this,xt(Mt.prototype,function(e,t,r){if(this.db=c,this._ctx={table:e,index:":id"===t?null:t,or:r},this._cmp=this._ascending=ct,this._descending=function(e,t){return ct(t,e)},this._max=function(e,t){return 0<ct(e,t)?e:t},this._min=function(e,t){return ct(e,t)<0?e:t},this._IDBKeyRange=c._deps.IDBKeyRange,!this._IDBKeyRange)throw new K.MissingAPI})),this.on("versionchange",function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}),this._maxKey=Yt(r.IDBKeyRange),this._createTransaction=function(e,t,r,i){return new n.Transaction(e,t,r,n._options.chromeTransactionDurability,i)},this._fireOnBlocked=function(e){n.on("blocked").fire(e),tt.filter(function(e){return e.name===n.name&&e!==n&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(qr),this.use(en),this.use(Wr),this.use(Lr),this.use(Hr);var d=new Proxy(this,{get:function(e,t,r){if("_vip"===t)return!0;if("table"===t)return function(e){return tn(n.table(e),d)};var i=Reflect.get(e,t,r);return i instanceof gt?tn(i,d):"tables"===t?i.map(function(e){return tn(e,d)}):"_createTransaction"===t?function(){return tn(i.apply(this,arguments),d)}:i}});this.vip=d,i.forEach(function(e){return e(n)})}O="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var an,sn=(on.prototype.subscribe=function(e,t,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:r})},on.prototype[O]=function(){return this},on);function on(e){this._subscribe=e}try{an={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(fn){an={indexedDB:null,IDBKeyRange:null}}function ln(e){var t,r=!1,n=new sn(function(n){var i,a=M(e),s=!1,o={},l={},c={get closed(){return s},unsubscribe:function(){s||(s=!0,i&&i.abort(),d&&Ut.storagemutated.unsubscribe(p))}};n.start&&n.start(c);var d=!1,h=function(){return Qe(f)},p=function(e){Er(o,e),$r(l,o)&&h()},f=function(){var c,f,m;!s&&an.indexedDB&&(o={},c={},i&&i.abort(),i=new AbortController,m=function(t){var r=De();try{a&&He();var n=Be(e,t);return n=a?n.finally(Ue):n}finally{r&&Pe()}}(f={subscr:c,signal:i.signal,requery:h,querier:e,trans:null}),Promise.resolve(m).then(function(e){r=!0,t=e,s||f.signal.aborted||(o={},function(e){for(var t in e)if(u(e,t))return;return 1}(l=c)||d||(Ut(Bt,p),d=!0),Qe(function(){return!s&&n.next&&n.next(e)}))},function(e){r=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||s||Qe(function(){s||n.error&&n.error(e)})}))};return setTimeout(h,0),c});return n.hasValue=function(){return r},n.getValue=function(){return t},n}var cn=rn;function un(e){var t=hn;try{hn=!0,Ut.storagemutated.fire(e),Fr(e,!0)}finally{hn=t}}d(cn,t(t({},G),{delete:function(e){return new cn(e,{addons:[]}).delete()},exists:function(e){return new cn(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return r=(t=cn.dependencies).indexedDB,t=t.IDBKeyRange,(br(r)?Promise.resolve(r.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==rt})}):vr(r,t).toCollection().primaryKeys()).then(e)}catch(n){return Xe(new K.MissingAPI)}var t,r},defineClass:function(){return function(e){o(this,e)}},ignoreTransaction:function(e){return be.trans?Ge(be.transless,e):e()},vip:xr,async:function(e){return function(){try{var t=Mr(e.apply(this,arguments));return t&&"function"==typeof t.then?t:_e.resolve(t)}catch(r){return Xe(r)}}},spawn:function(e,t,r){try{var n=Mr(e.apply(r,t||[]));return n&&"function"==typeof n.then?n:_e.resolve(n)}catch(i){return Xe(i)}},currentTransaction:{get:function(){return be.trans||null}},waitFor:function(e,t){return t=_e.resolve("function"==typeof e?cn.ignoreTransaction(e):e).timeout(t||6e4),be.trans?be.trans.waitFor(t):t},Promise:_e,debug:{get:function(){return ie},set:function(e){ae(e)}},derive:f,extend:o,props:d,override:b,Events:bt,on:Ut,liveQuery:ln,extendObservabilitySet:Er,getByKeyPath:w,setByKeyPath:_,delByKeyPath:function(e,t){"string"==typeof t?_(e,t,void 0):"length"in t&&[].map.call(t,function(t){_(e,t,void 0)})},shallowClone:k,deepClone:$,getObjectDiff:zr,cmp:ct,asap:y,minKey:-1/0,addons:[],connections:tt,errnames:q,dependencies:an,cache:Dr,semVer:"4.2.1",version:"4.2.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,r){return e+t/Math.pow(10,2*r)})})),cn.maxKey=Yt(cn.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Ut(Bt,function(e){hn||(e=new CustomEvent(Ht,{detail:e}),hn=!0,dispatchEvent(e),hn=!1)}),addEventListener(Ht,function(e){e=e.detail,hn||un(e)}));var dn,hn=!1,pn=function(){};return"undefined"!=typeof BroadcastChannel&&((pn=function(){(dn=new BroadcastChannel(Ht)).onmessage=function(e){return e.data&&un(e.data)}})(),"function"==typeof dn.unref&&dn.unref(),Ut(Bt,function(e){hn||dn.postMessage(e)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(e){if(!rn.disableBfCache&&e.persisted){ie&&console.debug("Dexie: handling persisted pagehide"),null!=dn&&dn.close();for(var t=0,r=tt;t<r.length;t++)r[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!rn.disableBfCache&&e.persisted&&(ie&&console.debug("Dexie: handling persisted pageshow"),pn(),un({all:new wr(-1/0,[[]])}))})),_e.rejectionMapper=function(e,t){return!e||e instanceof z||e instanceof TypeError||e instanceof SyntaxError||!e.name||!W[e.name]?e:(t=new W[e.name](t||e.message,e),"stack"in e&&p(t,"stack",{get:function(){return this.inner.stack}}),t)},ae(ie),t(rn,Object.freeze({__proto__:null,Dexie:rn,liveQuery:ln,Entity:lt,cmp:ct,PropModification:pt,replacePrefix:function(e,t){return new pt({replacePrefix:[e,t]})},add:function(e){return new pt({add:e})},remove:function(e){return new pt({remove:e})},default:rn,RangeSet:wr,mergeRanges:kr,rangesOverlap:Nr}),{default:rn}),rn}();const i_=r(n_.exports),a_=Symbol.for("Dexie"),s_=globalThis[a_]||(globalThis[a_]=i_);if(i_.semVer!==s_.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${i_.semVer} and ${s_.semVer}`);const{liveQuery:o_,mergeRanges:l_,rangesOverlap:c_,RangeSet:u_,cmp:d_,Entity:h_,PropModification:p_,replacePrefix:f_,add:m_,remove:g_,DexieYProvider:v_}=s_;const b_=new class extends s_{constructor(){super("fichegen"),t(this,"settings"),t(this,"ebookSpecs"),t(this,"searchHistory"),this.version(1).stores({settings:"&key",ebookSpecs:"&id",searchHistory:"++id, query"}),this.version(2).stores({settings:"&key",ebookSpecs:"&id",searchHistory:"++id, createdAt, query"}),this.version(3).stores({settings:"&key",ebookSpecs:"&id",searchHistory:"++id, createdAt, query, generatedNFO"})}},x_=U.createContext(void 0),y_={fr:{"footer.version":"V.1.6","header.title":"FicheGen","header.subtitle":"Copi, jamais gal !","search.placeholder":"Rechercher un film, une srie, un spectacle ...","search.nfo.upload":"Importer NFO","search.nfo.paste":"Coller NFO","search.nfo.notitle":"NFO import / gnr avec succs, mais aucun titre trouv. Recherchez le manuellement.","nfo.media.not.found.title":"Mdia non trouv","nfo.media.not.found.description":"Les informations du NFO ont t enregistres, mais aucun mdia correspondant n'a t trouv. Veuillez affiner votre recherche manuellement.","specs.title":"Spcifications techniques","specs.back":"Retour","specs.name":"Titre","specs.team":"Team","specs.size":"Taille","specs.video":"Vido","specs.resolution":"Rsolution","specs.codec":"Codec","specs.bitrate":"Dbit","specs.audio":"Audio","specs.subtitles":"Sous-titres","specs.language":"Audio","specs.format":"Format","specs.default":"Dfaut","specs.add":"Ajouter","specs.generate":"Gnrer la fiche","lang.french":"Franais","lang.french_ad":"Franais AD","lang.english":"Anglais","lang.english_ad":"Anglais AD","lang.spanish":"Espagnol","lang.german":"Allemand","lang.italian":"Italien","lang.portuguese":"Portugais","lang.russian":"Russe","lang.japanese":"Japonais","lang.korean":"Coren","lang.chinese":"Chinois","lang.arabic":"Arabe","lang.hindi":"Hindi","lang.dutch":"Nerlandais","lang.swedish":"Sudois","lang.norwegian":"Norvgien","lang.danish":"Danois","lang.finnish":"Finnois","lang.polish":"Polonais","lang.czech":"Tchque","lang.hungarian":"Hongrois","lang.romanian":"Roumain","lang.bulgarian":"Bulgare","lang.greek":"Grec","lang.turkish":"Turc","lang.hebrew":"Hbreu","lang.thai":"Tha","lang.vietnamese":"Vietnamien","lang.indonesian":"Indonsien","lang.malay":"Malais","lang.filipino":"Filipino","lang.ukrainian":"Ukrainien","lang.croatian":"Croate","lang.serbian":"Serbe","lang.slovenian":"Slovne","lang.slovak":"Slovaque","lang.lithuanian":"Lituanien","lang.latvian":"Letton","lang.estonian":"Estonien","lang.quebecois":"Qubcois","lang.other":"Autre","card.synopsis":"Synopsis","card.cast":"Distribution","card.crew":"quipe technique","card.director":"Ralisateur","card.writer":"Scnariste","card.producer":"Producteur","card.composer":"Compositeur","card.cinematographer":"Directeur de la photographie","card.editor":"Monteur","card.production":"Production","card.company":"Socit de production","card.country":"Pays","card.release":"Date de sortie","card.runtime":"Dure","card.budget":"Budget","card.revenue":"Recettes","card.genres":"Genres","card.rating":"Note","card.votes":"votes","card.technical":"Infos complmentaires","card.torrent":"Infos","card.torrent.specs":"Spcifications techniques","card.export.bbcode":"Exporter BBCode","card.export.html":"Exporter HTML","card.export.markdown":"Exporter Markdown","card.export.text":"Exporter Texte","tv.seasons":"Saisons","tv.episodes":"pisodes","tv.status":"Statut","tv.network":"Chane","tv.firstAired":"Premire diffusion","tv.lastAired":"Dernire diffusion","app.create":"Crez vos Prez et NFO","app.professional":"de sries, films ...","app.description":"Recherchez un mdia via sa vido, son titre, un NFO ou son ID TMDB","app.config.required":"Configuration requise :","app.config.message":"Vous devez configurer votre cl API TMDB pour utiliser cette application.","app.config.now":"Configurer maintenant","app.loading":"Chargement des dtails...","app.specs.detected":"Spcifications techniques dtectes :","app.specs.message":"NFO analys. Vous pouvez modifier les informations si ncessaire.","app.preview.title":"Prvisualisation de la fiche","app.preview.change":"Changer","app.preview.continue":"Continuer","app.preview.check":"Prvisualisation :","app.preview.verify":"Vrifiez que c'est bien le bon film/srie avant de remplir les spcifications techniques.","app.sheet.generated":"Fiche gnre","app.sheet.modify":"Modifier le film/srie","app.sheet.edit.specs":"Modifier les spcifications","app.sheet.new":"Nouvelle recherche","app.ready.title":"Prt  crer votre premire fiche ?","app.ready.description":"Utilisez la barre de recherche ci-dessus ou glissez une vido pour commencer.","app.step1":"Recherchez","app.step1.desc":"Scannez votre video ou tapez le nom d'un film, d'une srie ou son ID TMDB","app.step2":"Slectionnez","app.step2.desc":"Choisissez dans les rsultats de recherche","app.step3":"Exportez","app.step3.desc":"Tlchargez votre NFO et la fiche en BBCODE, HTML, Markdown ou TXT","search.movie":"Film","search.tv":"Srie","search.searching":"Recherche en cours...","search.no.results":"Aucun rsultat","nfo.title.not.found":"Titre non trouv","nfo.close":"Fermer","nfo.paste.title":"Coller le contenu NFO","nfo.paste.description":"Collez ici le contenu de votre NFO. Les spcifications techniques seront automatiquement analyses.","nfo.paste.placeholder":"Collez le contenu de votre fichier NFO ici...","nfo.cancel":"Annuler","nfo.save":"Sauvegarder","nfo.analyze":"Analyser","specs.channels":"Canaux","specs.additional":"Infos supplmentaires","specs.release.group":"Release","specs.notes":"Notes","specs.notes.placeholder":"Informations supplmentaires ...","specs.release.placeholder":"ex : nom de la release source","specs.track.audio":"Piste Audio","specs.track.subtitle":"Sous-titre","specs.type":"Type","specs.embedded":"Intgr","specs.external":"Externe","specs.forced":"Forc","card.main.cast":"Casting principal","card.data.provided":"Donnes fournies par","specs.video.title":"Spcifications Vido","specs.quality":"Qualit","specs.audio.tracks":"Pistes Audio","specs.bitrate.label":"Dbit","specs.track.default":"Piste par dfaut","poster.choose":"Choisir une affiche","poster.select":"Slectionner","poster.close":"Fermer","poster.description":"Slectionnez l'affiche voulue. Les affiches sont tries par popularit et qualit.","poster.loading":"Chargement des affiches...","poster.none":"Aucune affiche supplmentaire disponible","poster.use":"Utiliser cette affiche","api.title":"Configuration API TMDB","api.description":"Entrez votre cl API TMDB pour accder aux donnes des films et sries.","api.key.label":"Cl API TMDB","api.key.placeholder":"Votre cl API TMDB...","api.get.key":"Obtenir une cl API","api.save":"Sauvegarder","export.title":"Exporter la fiche en bbcode","export.style":"Style de la prsentation","export.copy":"Copier le code","export.download":"Tlcharger","card.export.actions":"Actions","card.change.poster":"Changer l'affiche","card.export.formats":"Formats d'export","history.title":"Historique des fiches","history.clear.all":"Tout supprimer","history.empty":"Aucune fiche dans l'historique","history.empty.description":"Les fiches gnres apparatront ici","history.load":"Charger","history.button":"Historique","nav.movies":"Vido","nav.books":"eBook","ebook.create":"Crez vos fiches et NFO","ebook.professional":"de livres, BD etc ...","ebook.description":"Sacnnez un livre,une BD ou son titre dans Google Book","ebook.search.placeholder":"Rechercher un livre ou BD par titre, auteur ou ISBN...","ebook.search.results":"livres trouvs","ebook.search.loading":"Chargement...","ebook.search.loadMore":"Charger plus","ebook.more":"autres","ebook.showMore":"Voir plus","ebook.showLess":"Voir moins","ebook.categories":"Catgories","ebook.technical.specs":"Spcifications eBook","ebook.format":"Format","ebook.size":"Taille","ebook.quality":"Qualit","ebook.drm":"Protection DRM","ebook.yes":"Oui","ebook.no":"Non","ebook.source":"Source","ebook.notes":"Notes","ebook.notes.placeholder":"Informations supplmentaires...","ebook.specs.title":"Spcifications eBook","ebook.filename":"Nom du fichier","ebook.language":"Langue","ebook.edition":"dition","ebook.publisher":"diteur","ebook.year":"Anne","ebook.uploaded.by":"Upload par","ebook.cancel":"Annuler","ebook.generate.sheet":"Gnrer la fiche","ebook.preview.title":"Prvisualisation du livre","ebook.sheet.generated":"Fiche eBook gnre","ebook.ready.title":"Prt  crer votre premire fiche eBook ?","ebook.ready.description":"Recherchez un livre par titre, auteur ou ISBN pour commencer.","ebook.step1":"Recherchez","ebook.step1.desc":"Scanner votre livre, recherchez le nom d'un auteur ou un ISBN","ebook.step2":"Configurez","ebook.step2.desc":"Vrifiez les spcifications techniques du fichier eBook","ebook.step3":"Exportez","ebook.step3.desc":"Tlchargez votre NFO et votre prez !","modal.cover.title":"Changer la couverture","modal.cover.current":"Couverture actuelle","modal.cover.url":"URL de la nouvelle couverture","modal.cover.preview":"Aperu","modal.cover.error":"Image non valide","modal.cover.help.title":"Conseil :","modal.cover.help.description":"Utilisez une URL d'image directe (se terminant par .jpg, .png, etc.)","modal.cover.cancel":"Annuler","modal.cover.confirm":"Confirmer","upload.video.dropzone":"Dposez votre vido ou un dossier ici ...","upload.video.nfo":"ou votre fichier NFO","upload.video.analyse":"Relchez pour analyser","upload.video.analyse2":"Analyse en cours...","upload.video.extract":"Extraction des mtadonnes du fichier vido","upload.video.select":"Slectionnez votre fichier","upload.video.select_files":"Slectionnez une vido","upload.video.select_folder":"Slectionnez un dossier","upload.video.charge":"Chargement...","upload.video.more":"Voir plus de rsultats","nfo.generator.title":"Gnrateur NFO","nfo.generator.subtitle":"MediaInfo","nfo.generator.description":"Gnrez un fichier NFO MediaInfo  partir de votre fichier vido","nfo.generator.drop.title":"  Gooooooooo !!  ","nfo.generator.drop.subtitle":"Dposez votre fichier vido","nfo.generator.drop.desc":"ou cliquez sur le bouton ci-dessous pour slectionner un fichier","nfo.generator.drop.analyzing":"Analyse du fichier...","nfo.generator.select.button":"Slectionner un fichier vido","nfo.generator.analyzing.title":"Analyse en cours...","nfo.generator.analyzing.desc":"Extraction des informations techniques du fichier vido","nfo.generator.success":"NFO gnr avec succs","nfo.generator.copy":"Copier","nfo.generator.download":"Tlcharger","nfo.generator.new":"Nouveau","nfo.generator.content.title":"Contenu du fichier NFO","nfo.generator.copy.success":"NFO copi dans le presse-papiers !","nfo.generator.error":"Erreur lors de la gnration du fichier NFO. Veuillez ressayer.","nfo.generator.summary.success":"Vido analyse avec succs !","nfo.generator.summary.description":"Caractristiques :","nfo.generator.summary.source":"Source","nfo.generator.summary.codec":"Codec","nfo.generator.summary.resolution":"Rsolution","nfo.generator.summary.audio":"Audio","nfo.generator.hdlight.warning.title":"Avertissement de compression","nfo.generator.hdlight.warning.message":"Cette vido est encode en HD light (compression leve).<br/>La qualit peut tre infrieure  un encodage HD standard ou  un remux.","nfo.generator.gpu.warning.title":"Encodage Matriel (GPU) Probable !","nfo.generator.gpu.warning.message":"Cet encodage semble avoir t ralis avec une puce matrielle (GPU), ce qui peut entraner une qualit infrieure  un encodage logiciel (CPU)  bitrate quivalent.","nfo.viewer.title":"NFO MediaInfo","nfo.viewer.subtitle":"Fichier technique gnr","nfo.viewer.show":"Afficher","nfo.viewer.copy":"Copier","nfo.viewer.copied":"Copi !","nfo.viewer.download":"Tlcharger","html.export.title":"HTML Export","html.export.choose":"Choisissez le type d'export HTML pour","html.export.simple.title":"HTML Simple","html.export.simple.desc":"Export rapide avec images distantes (URLs)","html.export.simple.check1":"Fichier unique, lger","html.export.simple.check2":"Ncessite une connexion internet","html.export.complete.title":"HTML Complet","html.export.complete.desc":"Export avec toutes les images tlcharges","html.export.complete.check1":"Archive ZIP avec HTML + images","html.export.complete.check2":"Fonctionne hors ligne","html.export.generating":"Gnration du fichier HTML...","html.export.downloading":"Test des permissions et tlchargement des images...","html.export.error.cors":"Erreur CORS dtecte","html.export.error.cors.details":"Les images n'ont pas pu tre tlcharges.\n\nSolutions :\n Utilisez l'export HTML simple (images distantes)\n Ouvrez les DevTools (appuyez sur F12) puis ressayez","html.export.error.generic":"Erreur d'export","html.export.error.generic.details":"Une erreur s'est produite lors de l'export: {error}. Veuillez ressayer.","html.export.error.unexpected":"Erreur inattendue","html.export.error.unexpected.details":"Une erreur inattendue s'est produite: {error}. Veuillez ressayer.","html.export.close":"Fermer","html.export.try.simple":"Essayer l'export simple","export.modal.style.complete":"Complet avec images","export.modal.style.minimalist":"Minimaliste","export.modal.style.modern":"Moderne","export.modal.style.classic":"Classique","export.modal.style.modern.emux":"Moderne (eMux)","export.modal.desc":"Voici le BBCode gnr pour","export.modal.desc.suffix":"Il vous suffit de le copier et le coller.","export.modal.generated":"BBCode gnr (modifiable)","export.modal.placeholder":"Votre BBCode apparatra ici...","export.modal.warning":"Attention :","export.modal.warning.desc":"Le BBCode est capricieux et peut ne pas fonctionner correctement selon la destination, il peut falloir apporter des modifications.","specs.files.count":"Nb de fichiers","specs.edit.modal.title":"diter les informations","specs.edit.modal.year":"Anne","specs.edit.modal.audio":"Audio","specs.edit.modal.video.standards":"Standard Vido","specs.edit.modal.edition":"Edition","specs.edit.modal.special.cases":"Cas particuliers","specs.edit.modal.close":"Fermer","tooltip.custom":"Pistes audio et vido provenant de diffrentes sources","tooltip.ad":"Audio Description pour les malvoyants","tooltip.vff":"Version Franaise Franaise","tooltip.vfi":"Version Franaise Internationale","tooltip.vfq":"Version Franaise Qubcoise","tooltip.vf2":"Version Franaise 2","tooltip.dv":"Dolby Vision","tooltip.hdr":"High Dynamic Range","tooltip.hdr10plus":"HDR10 Plus avec mtadonnes dynamiques","tooltip.hlg":"Hybrid Log-Gamma","tooltip.10bits":"Profondeur de couleur 10 bits","tooltip.4klight":"Version allge 4K","tooltip.hdlight":"Version allge HD","tooltip.imax":"Format IMAX Enhanced","tooltip.3d":"Vido en relief stroscopique","tooltip.dc":"Director's Cut - Version du ralisateur","tooltip.extended":"Version tendue avec scnes supplmentaires","tooltip.theatrical":"Version cinma originale","tooltip.unrated":"Version non censure","tooltip.finalcut":"Montage final dfinitif","tooltip.remastered":"Version remasterise","tooltip.restored":"Version restaure","tooltip.repack":"Nouvelle version corrigeant un problme","tooltip.proper":"Version correcte remplaant une release dfectueuse","tag.auto.generated":"Tag gnr automatiquement","tag.audio.codec.tooltip":"Le codec audio pris en compte dans le tag est celui de la piste audio par dfaut","tag.format.pattern":"[Titre].[Annee].[Langue].[Resolution].[Source].[Audio].[Video]-[TEAM]","tag.spaces.instead.dots":"Espaces au lieu de points","tag.copy":"Copier le tag","tag.edit":"diter","ebook.googleBookLink":"Google Book","ebook.pages":"pages","ebook.isbn":"ISBN: ","ebook.yearLabel":"Anne :","ebook.editionLabel":"dition :","ebook.filesCountLabel":"Nb fichiers :","ebook.fileNameLabel":"Nom fichier :","ebook.export.bbcode":"BB","ebook.export.markdown":"MD","ebook.export.text":"TXT","ebook.ratings":"valuations","export.error.copy":"Erreur lors de la copie:","export.style.label":"Style","ebook.fileInfo":"Informations sur le fichier","ebook.audiobook":"Livre audio","ebook.fileNamePlaceholder":"MonLivre.epub","ebook.metadata":"Mtadonnes du livre","ebook.title":"Titre","ebook.subtitle":"Sous-titre","ebook.titlePlaceholder":"Titre du livre","ebook.subtitlePlaceholder":"Sous-titre (optionnel)","ebook.authors":"Auteurs","ebook.authorsPlaceholder":"Spars par des virgules","ebook.publisherPlaceholder":"Nom de l'diteur","ebook.yearPlaceholder":"2023","ebook.isbnLabel":"ISBN","ebook.isbnPlaceholder":"978-2-123456-78-9","ebook.tomeNumber":"Numro du tome","ebook.tomeNumberPlaceholder":"Tome 1, Volume 2...","ebook.editionPlaceholder":"dition spciale, rvise...","ebook.languagePlaceholder":"fr, en, es...","ebook.pagesLabel":"Pages","ebook.pagesPlaceholder":"Nombre de pages","ebook.mainCategory":"Catgorie principale","ebook.mainCategoryPlaceholder":"Genre, catgorie...","ebook.publicationDate":"Date de publication","ebook.publicationDatePlaceholder":"YYYY-MM-DD ou YYYY","ebook.descriptionLabel":"Description","ebook.descriptionPlaceholder":"Rsum ou description du livre","ebook.releaseInfo":"Informations de la release","ebook.sourcePlaceholder":"Source du fichier","ebook.filesCount":"Nombre de fichiers","ebook.filesCountPlaceholder":"1","ebook.dropzone.title":"Dposez vos ebooks ou un dossier ici...","ebook.dropzone.select.files":"Slectionnez des fichiers","ebook.dropzone.select.folder":"Slectionnez un dossier","ebook.tag.auto.title":"Tag gnr automatiquement","ebook.tag.auto.tooltip":"Le tag est gnr automatiquement  partir des informations du livre","ebook.tag.pattern":"[Titre].[NumeroduTome].[Auteurs].[Annee].[Langue].[Format]-[TEAM]","ebook.tag.spaces":"Espaces au lieu de points","ebook.tag.edit.modal.title":"diter les informations","ebook.tag.edit.title":"Titre","ebook.tag.edit.tome":"Tome","ebook.tag.edit.authors":"Auteurs","ebook.tag.edit.year":"Anne","ebook.tag.edit.language":"Langue","ebook.tag.edit.format":"Format","ebook.tag.edit.team":"Team","ebook.tag.edit.edition":"Edition","ebook.tag.edit.special":"Cas particuliers","ebook.tag.preview":"Aperu du tag","ebook.tag.modal.close":"Fermer","ebook.tag.modal.apply":"Appliquer","ebook.scan.success":"Ebooks analyss avec succs !","ebook.scan.characteristics":"Caractristiques :","ebook.scan.title":"Titre","ebook.scan.author":"Auteur","ebook.scan.ebook.count":"Nombre d'ebooks","ebook.scan.page.count":"Nombre de pages","ebook.scan.format":"Format","ebook.scan.isbn":"ISBN","ebook.scan.language":"Langue","ebook.scan.total.files":"Nombre de fichiers total","ebook.scan.total.size":"Taille totale","ebook.continue.without.selection":"Continuer sans slectionner (ouvrage non rfrenc)","ebook.nfo.title":"NFO","ebook.nfo.subtitle":"Fichier technique gnr","ebook.nfo.show":"Afficher","ebook.nfo.copy":"Copier","ebook.nfo.download":"Tlcharger","ebook.tag.title":"Tag gnr","ebook.tag.copy":"Copier le tag","ebook.nfo.author":"Auteur","ebook.nfo.album":"Album","ebook.nfo.year":"Anne","ebook.nfo.publisher":"Editeur","ebook.nfo.total.pages":"Nombre de page Total","ebook.nfo.language":"Langue","ebook.nfo.isbn":"ISBN","ebook.nfo.ebook.count":"Nombre d'ebooks","ebook.nfo.quality":"Qualit","ebook.nfo.format":"Format","ebook.nfo.ebook.list":"Liste des ebooks","ebook.nfo.source":"Source","ebook.nfo.total.files":"Nombre de fichiers Total","ebook.nfo.total.weight":"Poids total"},en:{"footer.version":"V.1.6","header.title":"FicheGen","header.subtitle":"Often copied, never equaled","search.placeholder":"Search for a movie, a series, a show...","search.nfo.upload":"Upload NFO","search.nfo.paste":"Paste NFO","search.nfo.notitle":"NFO successfully imported/generated, but no extractable title found. Please search manually.","nfo.media.not.found.title":"Media not found","nfo.media.not.found.description":"The NFO information has been saved, but no matching media was found. Please refine your search manually.","specs.title":"Technical Specifications","specs.back":"Back","specs.name":"Title","specs.team":"Team","specs.size":"Size","specs.video":"Video","specs.resolution":"Resolution","specs.codec":"Codec","specs.bitrate":"Bitrate","specs.audio":"Audio","specs.subtitles":"Subtitles","specs.language":"Audio","specs.format":"Format","specs.default":"Default","specs.add":"Add","specs.generate":"Generate Sheet","lang.french":"French","lang.french_ad":"French AD","lang.english":"English","lang.english_ad":"English AD","lang.spanish":"Spanish","lang.german":"German","lang.italian":"Italian","lang.portuguese":"Portuguese","lang.russian":"Russian","lang.japanese":"Japanese","lang.korean":"Korean","lang.chinese":"Chinese","lang.arabic":"Arabic","lang.hindi":"Hindi","lang.dutch":"Dutch","lang.swedish":"Swedish","lang.norwegian":"Norwegian","lang.danish":"Danish","lang.finnish":"Finnish","lang.polish":"Polish","lang.czech":"Czech","lang.hungarian":"Hungarian","lang.romanian":"Romanian","lang.bulgarian":"Bulgarian","lang.greek":"Greek","lang.turkish":"Turkish","lang.hebrew":"Hebrew","lang.thai":"Thai","lang.vietnamese":"Vietnamese","lang.indonesian":"Indonesian","lang.malay":"Malay","lang.filipino":"Filipino","lang.ukrainian":"Ukrainian","lang.croatian":"Croatian","lang.serbian":"Serbian","lang.slovenian":"Slovenian","lang.slovak":"Slovak","lang.lithuanian":"Lithuanian","lang.latvian":"Latvian","lang.estonian":"Estonian","lang.quebecois":"Quebec French","lang.other":"Other","card.synopsis":"Synopsis","card.cast":"Cast","card.crew":"Crew","card.director":"Director","card.writer":"Writer","card.producer":"Producer","card.composer":"Composer","card.cinematographer":"Cinematographer","card.editor":"Editor","card.production":"Production","card.company":"Production Company","card.country":"Country","card.release":"Release Date","card.runtime":"Runtime","card.budget":"Budget","card.revenue":"Revenue","card.genres":"Genres","card.rating":"Rating","card.votes":"votes","card.technical":"Technical Information","card.torrent":"Specifications","card.torrent.specs":"Technical Specifications","card.export.bbcode":"Export BBCode","card.export.html":"Export HTML","card.export.markdown":"Export Markdown","card.export.text":"Export Text","tv.seasons":"Seasons","tv.episodes":"Episodes","tv.status":"Status","tv.network":"Network","tv.firstAired":"First Aired","tv.lastAired":"Last Aired","app.create":"Create NFOs & Layouts","app.professional":"for TV shows, movies...","app.description":"Search for media by its video, title, NFO, or TMDB ID","app.config.required":"Configuration required:","app.config.message":"You must configure your TMDB API key to use this application.","app.config.now":"Configure now","app.loading":"Loading details...","app.specs.detected":"Technical specifications detected:","app.specs.message":"NFO file information has been analyzed and pre-filled automatically. You can modify them if necessary","app.preview.title":"Sheet Preview","app.preview.change":"Change","app.preview.continue":"Continue","app.preview.check":"Preview:","app.preview.verify":"Check that this is the correct movie/series before filling in the technical specifications.","app.sheet.generated":"Generated Sheet","app.sheet.modify":"Modify movie/TV show","app.sheet.edit.specs":"Edit specifications","app.sheet.new":"New search","app.ready.title":"Ready to create your first sheet?","app.ready.description":"Use the search bar above or drag and drop a video to get started.","app.step1":"Search","app.step1.desc":"Scan your video or type the name of a movie, series, or its TMD ID","app.step2":"Select","app.step2.desc":"Choose from search results","app.step3":"Export","app.step3.desc":"Download your NFO and the datasheet in BBCODE, HTML, Markdown or TXT","search.movie":"Movie","search.tv":"TV Show","search.searching":"Searching...","search.no.results":"No results","nfo.title.not.found":"Title not found","nfo.close":"Close","nfo.paste.title":"Paste NFO content","nfo.paste.description":"Paste your NFO file content here (MediaInfo or XML). Technical specifications will be automatically analyzed.","nfo.paste.placeholder":"Paste your NFO file content here...","nfo.cancel":"Cancel","nfo.save":"Save","nfo.analyze":"Analyze","specs.channels":"Channels","specs.additional":"Additional Information","specs.release.group":"Release","specs.notes":"Notes","specs.notes.placeholder":"Additional information...","specs.release.placeholder":"Ex: release source","specs.track.audio":"Audio Track","specs.track.subtitle":"Subtitle","specs.type":"Type","specs.embedded":"Embedded","specs.external":"External","specs.forced":"Forced","card.main.cast":"Main Cast","card.data.provided":"Data provided by","specs.video.title":"Video Specifications","specs.quality":"Quality","specs.audio.tracks":"Audio Tracks","specs.bitrate.label":"Bitrate","specs.track.default":"Default track","poster.choose":"Choose Poster","poster.select":"Select","poster.close":"Close","poster.description":"Select the poster you want to use for your sheet. Posters are sorted by popularity and quality.","poster.loading":"Loading posters...","poster.none":"No additional posters available","poster.use":"Use this poster","api.title":"TMDB API Configuration","api.description":"Enter your TMDB API key to access movie and TV show data.","api.key.label":"TMDB API Key","api.key.placeholder":"Your TMDB API key...","api.get.key":"Get API Key","api.save":"Save","export.title":"Export Sheet","export.style":"Export Style","export.copy":"Copy Code","export.download":"Download","card.export.actions":"Actions","card.change.poster":"Change Poster","card.export.formats":"Export Formats","history.title":"Sheet History","history.clear.all":"Clear All","history.empty":"No sheets in history","history.empty.description":"Generated sheets will appear here","history.load":"Load","history.button":"History","nav.movies":"Video","nav.books":"eBook","ebook.create":"Create your sheets and NFO","ebook.professional":"for books, comics, etc.","ebook.description":"Search for a book or a comic by its title in Google Books","ebook.search.placeholder":"Search for a book by title, author or ISBN...","ebook.search.results":"books found","ebook.search.loading":"Loading...","ebook.search.loadMore":"Load more","ebook.more":"more","ebook.showMore":"Show more","ebook.showLess":"Show less","ebook.categories":"Categories","ebook.technical.specs":"eBook Specifications","ebook.format":"Format","ebook.size":"Size","ebook.quality":"Quality","ebook.drm":"DRM Protection","ebook.yes":"Yes","ebook.no":"No","ebook.source":"Source","ebook.notes":"Notes","ebook.notes.placeholder":"Additional information...","ebook.specs.title":"eBook Specifications","ebook.filename":"Filename","ebook.language":"Language","ebook.edition":"Edition","ebook.publisher":"Publisher","ebook.year":"Year","ebook.uploaded.by":"Uploaded by","ebook.cancel":"Cancel","ebook.generate.sheet":"Generate Sheet","ebook.preview.title":"Book Preview","ebook.sheet.generated":"eBook Sheet Generated","ebook.ready.title":"Ready to create your first eBook sheet?","ebook.ready.description":"Search for a book by title, author or ISBN to start.","ebook.step1":"Search","ebook.step1.desc":"Scan a book or search title, author name, ISBN","ebook.step2":"Configure","ebook.step2.desc":"Add the eBook file technical specifications","ebook.step3":"Export","ebook.step3.desc":"Download your sheet and your NFO","modal.cover.title":"Change Cover","modal.cover.current":"Current cover","modal.cover.url":"New cover URL","modal.cover.preview":"Preview","modal.cover.error":"Invalid image","modal.cover.help.title":"Tip:","modal.cover.help.description":"Use a direct image URL (ending with .jpg, .png, etc.)","modal.cover.cancel":"Cancel","modal.cover.confirm":"Confirm","upload.video.dropzone":"Drop your video or folder here ...","upload.video.nfo":"or your NFO file","upload.video.analyse":"Drop to analyze","upload.video.analyse2":"Analysis in progress...","upload.video.extract":"Extracting metadata from the video file","upload.video.select":"Select your file","upload.video.select_files":"Select a video","upload.video.select_folder":"Select a folder","upload.video.charge":"Loading...","upload.video.more":"See more results","nfo.generator.title":"NFO Generator","nfo.generator.subtitle":"MediaInfo","nfo.generator.description":"Generate a MediaInfo NFO file from your video file","nfo.generator.drop.title":"  Gooooooooo !!  ","nfo.generator.drop.subtitle":"Drop your video file","nfo.generator.drop.desc":"or click the button below to select a file","nfo.generator.drop.analyzing":"Analyzing file...","nfo.generator.select.button":"Select a video file","nfo.generator.analyzing.title":"Analysis in progress...","nfo.generator.analyzing.desc":"Extracting technical information from the video file","nfo.generator.success":"NFO generated successfully","nfo.generator.copy":"Copy","nfo.generator.download":"Download","nfo.generator.new":"New","nfo.generator.content.title":"NFO File Content","nfo.generator.copy.success":"NFO copied to clipboard!","nfo.generator.error":"Error generating NFO file. Please try again.","nfo.generator.summary.success":"Video analyzed successfully!","nfo.generator.summary.description":"Specifications :","nfo.generator.summary.source":"Source","nfo.generator.summary.codec":"Codec","nfo.generator.summary.resolution":"Resolution","nfo.generator.summary.audio":"Audio","nfo.generator.hdlight.warning.title":"Compression Warning","nfo.generator.hdlight.warning.message":"This video is encoded in HD light (high compression).<br/>The quality may be lower than a standard HD encode or a remux.","nfo.generator.gpu.warning.title":"Hardware (GPU) Encoding Likely !","nfo.generator.gpu.warning.message":"This encoding appears to have been done using a hardware chip (GPU), which can result in lower quality than a software encode (CPU) at an equivalent bitrate.","nfo.viewer.title":"MediaInfo NFO","nfo.viewer.subtitle":"Generated technical file","nfo.viewer.show":"Show","nfo.viewer.copy":"Copy","nfo.viewer.copied":"Copied!","nfo.viewer.download":"Download","html.export.title":"HTML Export","html.export.choose":"Choose HTML export type for","html.export.simple.title":"Simple HTML","html.export.simple.desc":"Quick export with remote images (URLs)","html.export.simple.check1":"Single, lightweight file","html.export.simple.check2":"Requires internet connection","html.export.complete.title":"Complete HTML","html.export.complete.desc":"Export with all images downloaded","html.export.complete.check1":"ZIP archive with HTML + images","html.export.complete.check2":"Works offline","html.export.generating":"Generating HTML file...","html.export.downloading":"Testing permissions and downloading images...","html.export.error.cors":"CORS Error Detected","html.export.error.cors.details":"Images could not be downloaded.\n\nSolutions:\n Use simple HTML export (remote images)\n Open DevTools (press F12) and try again","html.export.error.generic":"Export Error","html.export.error.generic.details":"An error occurred during export: {error}. Please try again.","html.export.error.unexpected":"Unexpected Error","html.export.error.unexpected.details":"An unexpected error occurred: {error}. Please try again.","html.export.close":"Close","html.export.try.simple":"Try simple export","export.modal.style.complete":"Complete with images","export.modal.style.minimalist":"Minimalist","export.modal.style.modern":"Modern","export.modal.style.classic":"Classic","export.modal.style.modern.emux":"Moderne (eMux)","export.modal.desc":"Here is the generated BBCode for","export.modal.desc.suffix":"Simply copy and paste it.","export.modal.generated":"Generated BBCode (editable)","export.modal.placeholder":"Your BBCode will appear here...","export.modal.warning":"Warning:","export.modal.warning.desc":"BBCode can be finicky and may not work correctly depending on the destination; manual adjustments might be required.","specs.files.count":"File count","specs.edit.modal.title":"Edit Information","specs.edit.modal.year":"Year","specs.edit.modal.audio":"Audio","specs.edit.modal.video.standards":"Video Standards","specs.edit.modal.edition":"Edition","specs.edit.modal.special.cases":"Special Cases","specs.edit.modal.close":"Close","tooltip.custom":"Audio and video tracks from different sources","tooltip.ad":"Audio Description for the visually impaired","tooltip.vff":"French Version France","tooltip.vfi":"French Version International","tooltip.vfq":"French Version Quebec","tooltip.vf2":"French Version 2","tooltip.dv":"Dolby Vision","tooltip.hdr":"High Dynamic Range","tooltip.hdr10plus":"HDR10 Plus with dynamic metadata","tooltip.hlg":"Hybrid Log-Gamma","tooltip.10bits":"10-bit color depth","tooltip.4klight":"Lightweight 4K version","tooltip.hdlight":"Lightweight HD version","tooltip.imax":"IMAX Enhanced format","tooltip.3d":"Stereoscopic 3D video","tooltip.dc":"Director's Cut - Director's version","tooltip.extended":"Extended version with additional scenes","tooltip.theatrical":"Original theatrical version","tooltip.unrated":"Unrated version","tooltip.finalcut":"Final definitive cut","tooltip.remastered":"Remastered version","tooltip.restored":"Restored version","tooltip.repack":"New version fixing an issue","tooltip.proper":"Correct version replacing a defective release","tag.auto.generated":"Auto-generated tag","tag.audio.codec.tooltip":"The audio codec used in the tag is from the default audio track","tag.format.pattern":"[Title].[Year].[Language].[Resolution].[Source].[Audio].[Video]-[TEAM]","tag.spaces.instead.dots":"Spaces instead of dots","tag.copy":"Copy tag","tag.edit":"Edit","ebook.googleBookLink":"Google Book","ebook.pages":"pages","ebook.isbn":"ISBN: ","ebook.yearLabel":"Year:","ebook.editionLabel":"Edition:","ebook.filesCountLabel":"Nb files:","ebook.fileNameLabel":"File name:","ebook.export.bbcode":"BB","ebook.export.markdown":"MD","ebook.export.text":"TXT","ebook.ratings":"ratings","export.error.copy":"Error copying:","export.style.label":"Style","ebook.fileInfo":"File Information","ebook.audiobook":"Audiobook","ebook.fileNamePlaceholder":"MyBook.epub","ebook.metadata":"Book Metadata","ebook.title":"Title","ebook.subtitle":"Subtitle","ebook.titlePlaceholder":"Book title","ebook.subtitlePlaceholder":"Subtitle (optional)","ebook.authors":"Authors","ebook.authorsPlaceholder":"Separated by commas","ebook.publisherPlaceholder":"Publisher name","ebook.yearPlaceholder":"2023","ebook.isbnLabel":"ISBN","ebook.isbnPlaceholder":"978-2-123456-78-9","ebook.tomeNumber":"Tome Number","ebook.tomeNumberPlaceholder":"Tome 1, Volume 2...","ebook.editionPlaceholder":"Special edition, revised...","ebook.languagePlaceholder":"en, fr, es...","ebook.pagesLabel":"Pages","ebook.pagesPlaceholder":"Number of pages","ebook.mainCategory":"Main Category","ebook.mainCategoryPlaceholder":"Genre, category...","ebook.publicationDate":"Publication Date","ebook.publicationDatePlaceholder":"YYYY-MM-DD or YYYY","ebook.descriptionLabel":"Description","ebook.descriptionPlaceholder":"Summary or description of the book","ebook.releaseInfo":"Release Information","ebook.sourcePlaceholder":"File source","ebook.filesCount":"Number of files","ebook.filesCountPlaceholder":"1","ebook.dropzone.title":"Drop your ebooks or a folder here...","ebook.dropzone.select.files":"Select files","ebook.dropzone.select.folder":"Select a folder","ebook.tag.auto.title":"Auto-generated tag","ebook.tag.auto.tooltip":"The tag is automatically generated from the book information","ebook.tag.pattern":"[Title].[TomeNumber].[Authors].[Year].[Language].[Format]-[TEAM]","ebook.tag.spaces":"Spaces instead of dots","ebook.tag.edit.modal.title":"Edit information","ebook.tag.edit.title":"Title","ebook.tag.edit.tome":"Tome","ebook.tag.edit.authors":"Authors","ebook.tag.edit.year":"Year","ebook.tag.edit.language":"Language","ebook.tag.edit.format":"Format","ebook.tag.edit.team":"Team","ebook.tag.edit.edition":"Edition","ebook.tag.edit.special":"Special cases","ebook.tag.preview":"Tag preview","ebook.tag.modal.close":"Close","ebook.tag.modal.apply":"Apply","ebook.scan.success":"Ebooks analyzed successfully!","ebook.scan.characteristics":"Characteristics:","ebook.scan.title":"Title","ebook.scan.author":"Author","ebook.scan.ebook.count":"Number of ebooks","ebook.scan.page.count":"Number of pages","ebook.scan.format":"Format","ebook.scan.isbn":"ISBN","ebook.scan.language":"Language","ebook.scan.total.files":"Total number of files","ebook.scan.total.size":"Total size","ebook.continue.without.selection":"Continue without selection (unlisted book)","ebook.nfo.title":"NFO","ebook.nfo.subtitle":"Generated technical file","ebook.nfo.show":"Show","ebook.nfo.copy":"Copy","ebook.nfo.download":"Download","ebook.tag.title":"Generated tag","ebook.tag.copy":"Copy tag","ebook.nfo.author":"Author","ebook.nfo.album":"Album","ebook.nfo.year":"Year","ebook.nfo.publisher":"Publisher","ebook.nfo.total.pages":"Total Page Count","ebook.nfo.language":"Language","ebook.nfo.isbn":"ISBN","ebook.nfo.ebook.count":"Number of ebooks","ebook.nfo.quality":"Quality","ebook.nfo.format":"Format","ebook.nfo.ebook.list":"Ebook list","ebook.nfo.source":"Source","ebook.nfo.total.files":"Total File Count","ebook.nfo.total.weight":"Total Weight"}},w_=({children:e})=>{const[t,r]=U.useState("en");U.useEffect(()=>{(async()=>{const e=await b_.settings.get("language");if(!e||"fr"!==e.value&&"en"!==e.value){const e=navigator.language.startsWith("fr")?"fr":"en";r(e),await b_.settings.put({key:"language",value:e})}else r(e.value)})()},[]);return J.jsx(x_.Provider,{value:{language:t,setLanguage:async e=>{r(e),await b_.settings.put({key:"language",value:e})},t:e=>y_[t][e]||e},children:e})},__=()=>{const e=U.useContext(x_);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e};function k_({onResultSelect:e,onTechnicalSpecsFound:t,onNFOGenerated:r,apiKey:n,disabled:i=!1,language:a="fr"}){const{t:s}=__(),[o,l]=U.useState(""),[c,u]=U.useState([]),[d,h]=U.useState(!1),[p,f]=U.useState(!1),[m,g]=U.useState(1),[v,b]=U.useState(0),[x,y]=U.useState(!1),[w,_]=U.useState(!1),[k,N]=U.useState(!1),[j,S]=U.useState(""),[C,E]=U.useState(null),[$,D]=U.useState(!1),[P,T]=U.useState(!1),[A,F]=U.useState(!1),[R,I]=U.useState(!1),[M,O]=U.useState(null),[L,z]=U.useState(!1),[B,H]=U.useState("UNKNOWN"),q=U.useRef(null),V=U.useRef(null),K=U.useRef(null),W=U.useRef(null);U.useEffect(()=>{n&&Cw.setApiKey(n)},[n]),U.useEffect(()=>{if(C){const e=t_(C);if(e){const t=e.video,r=e.audio,n={source:e.source||null,codec:(null==t?void 0:t.codec)||null,resolution:(null==t?void 0:t.quality)||null,audio:(null==r?void 0:r.map(e=>e.codec).join(", "))||null};O(n);const i=C.split(/\r?\n\r?\n/).find(e=>e.startsWith("Video"))||C,a=i.toLowerCase();if(["nvenc","hevc_nvenc","qsv","quicksync","amf","avc coding"].some(e=>a.includes(e)))H("GPU");else{let e=0;[{pattern:/x264/i,weight:1},{pattern:/libx264/i,weight:1},{pattern:/x265/i,weight:1},{pattern:/libx265/i,weight:1},{pattern:/rc=crf\s*=\s*\d+/i,weight:2},{pattern:/psy-rd/i,weight:1},{pattern:/psy-rdoq/i,weight:1},{pattern:/bframes\s*=\s*\d+/i,weight:2},{pattern:/ref\s*=\s*\d+/i,weight:2},{pattern:/wpp/i,weight:1},{pattern:/numa-pools/i,weight:1}].forEach(t=>{t.pattern.test(a)&&(e+=t.weight)}),H(e>=3?"CPU":"UNKNOWN")}const s=i.match(/Bits\/\(Pixel\*Frame\)\s*:\s*([\d.]+)/);if(s&&(null==t?void 0:t.quality)){const e=parseFloat(s[1]);"2160p"===t.quality&&e<.035||("1080p"===t.quality||"720p"===t.quality)&&e<.1?z(!0):z(!1)}else z(!1)}else O(null),z(!1),H("UNKNOWN")}else O(null),z(!1),H("UNKNOWN")},[C]),U.useEffect(()=>{const e=setTimeout(async()=>{if(o.trim()){h(!0),g(1);try{const e=o.match(/\b(19\d{2}|20[0-3]\d)\b/g);let t,r=o;if(e&&e.length>1){t=parseInt(e[e.length-1]);const n=o.lastIndexOf(e[e.length-1]);r=(o.substring(0,n)+o.substring(n+4)).trim().replace(/\s+/g," ")}else if(e&&1===e.length){const n=o.replace(/\b(19\d{2}|20[0-3]\d)\b/g,"").trim();n.length>0&&(t=parseInt(e[0]),r=n.replace(/\s+/g," "))}const n=await Cw.searchMulti(r,1,a,t);u(n.results),b(n.total_pages),f(!0),A&&0===n.results.length&&I(!0)}catch(e){console.error("Erreur de recherche:",e),u([]),b(0)}finally{h(!1),A&&F(!1)}}else u([]),f(!1),g(1),b(0)},300);return()=>clearTimeout(e)},[o,a]);const G=e=>{if(Lw(e)){let r="";if(zw(e)){r=Uw(e);const n=t_(e);n&&t&&t(n)}else{r=Bw(e).title||""}r?(D(!1),I(!1),F(!0),l(r)):(I(!1),D(!0))}},Y=async(e,t=[])=>{if(e.isFile)try{const r=await new Promise((t,r)=>e.file(t,r)),n=/\.(mkv|avi|mp4|mov|wmv|flv|webm|m4v|3gp|ogv|iso|ts|m2ts)$/i;(r.type.startsWith("video/")||n.test(r.name))&&t.push(r)}catch(r){console.warn(`Impossible de lire le fichier: ${e.fullPath}`,r)}else if(e.isDirectory)try{const r=e.createReader(),n=await new Promise((e,t)=>{const n=[],i=()=>{r.readEntries(t=>{0===t.length?e(n):(n.push(...t),i())},t)};i()});for(const e of n)await Y(e,t)}catch(r){console.warn(`Impossible de lire le dossier: ${e.fullPath}`,r)}return t},Q=()=>{N(!1),S("")},X=async e=>{var n;const i=e.target.files;if(i&&0!==i.length){T(!0);try{const a=/\.(mkv|avi|mp4|mov|wmv|flv|webm|m4v|3gp|ogv|iso|ts|m2ts)$/i;let s=null;for(let e=0;e<i.length;e++){const t=i[e];if(t.type.startsWith("video/")||a.test(t.name)){s=t;break}}if(!s)throw new Error("Aucun fichier vido trouv");let o=0;for(let e=0;e<i.length;e++)o+=i[e].size;const c=parseFloat((o/1e9).toFixed(2)),u=i.length>1?(null==(n=e.target.dataset)?void 0:n.folderName)||(s.webkitRelativePath?s.webkitRelativePath.split("/")[0]:null):null,d=await Ow.analyzeFile(s);E(d),r&&r(d);let h=u?Hw(u):Uw(d);if(h)D(!1),I(!1),F(!0),l(h);else{const e=Hw(s.name);e&&(D(!1),I(!1),F(!0),l(e))}const p=t_(d);p&&t&&(p.video&&(p.video.size=c),p.numberOfFiles=i.length,u&&(p.releaseGroup=u),t(p))}catch(a){console.error("Erreur lors de la gnration NFO:",a),I(!1),D(!0)}finally{T(!1),e.target.value=""}}},Z=()=>{l(""),u([]),f(!1),D(!1),I(!1),E(null),r&&r(null)};return J.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-4",children:[M&&J.jsxs("div",{className:"space-y-2",children:[J.jsx("div",{className:"mt-2 p-3 border rounded-lg animate-in fade-in bg-green-500/10 border-green-500/20",children:J.jsxs("div",{className:"flex items-start gap-2",children:[J.jsx(Iy,{className:"h-4 w-4 shrink-0 mt-0.5 text-green-500","aria-hidden":"true"}),J.jsxs("div",{className:"flex-1 space-y-1",children:[J.jsx("p",{className:"text-xs font-semibold text-green-500",children:s("nfo.generator.summary.success")}),J.jsx("p",{className:"text-xs text-gray-300",children:s("nfo.generator.summary.description")}),M.source&&J.jsxs("p",{className:"text-xs text-gray-400",children:[" ",s("nfo.generator.summary.source"),": ",J.jsx("span",{className:"text-gray-300",children:M.source})]}),M.codec&&J.jsxs("p",{className:"text-xs text-gray-400",children:[" ",s("nfo.generator.summary.codec"),": ",J.jsx("span",{className:"text-gray-300",children:M.codec})]}),M.resolution&&J.jsxs("p",{className:"text-xs text-gray-400",children:[" ",s("nfo.generator.summary.resolution"),": ",J.jsx("span",{className:"text-gray-300",children:M.resolution})]}),M.audio&&J.jsxs("p",{className:"text-xs text-gray-400",children:[" ",s("nfo.generator.summary.audio"),": ",J.jsx("span",{className:"text-gray-300",children:M.audio})]})]})]})}),"GPU"===B&&J.jsx("div",{className:"mt-2 p-3 border rounded-lg animate-in fade-in bg-red-500/10 border-red-500/20",children:J.jsxs("div",{className:"flex items-start gap-2",children:[J.jsx($y,{className:"h-4 w-4 shrink-0 mt-0.5 text-red-500","aria-hidden":"true"}),J.jsxs("div",{className:"flex-1 space-y-1",children:[J.jsx("p",{className:"text-xs font-semibold text-red-400",children:s("nfo.generator.gpu.warning.title")}),J.jsx("p",{className:"text-xs text-gray-300",dangerouslySetInnerHTML:{__html:s("nfo.generator.gpu.warning.message")}})]})]})}),L&&"GPU"!==B&&J.jsx("div",{className:"mt-2 p-3 border rounded-lg animate-in fade-in bg-yellow-500/10 border-yellow-500/20",children:J.jsxs("div",{className:"flex items-start gap-2",children:[J.jsx(iw,{className:"h-4 w-4 shrink-0 mt-0.5 text-yellow-500","aria-hidden":"true"}),J.jsxs("div",{className:"flex-1 space-y-1",children:[J.jsx("p",{className:"text-xs font-semibold text-yellow-400",children:s("nfo.generator.hdlight.warning.title")}),J.jsx("p",{className:"text-xs text-gray-300",dangerouslySetInnerHTML:{__html:s("nfo.generator.hdlight.warning.message")}})]})]})})]}),J.jsxs("div",{ref:q,className:"relative",children:[J.jsx("div",{className:"relative bg-gray-800/60 backdrop-blur-sm border-2 border-gray-700/50 rounded-xl hover:border-gray-600/70 focus-within:border-violet-500 transition-all duration-200",children:J.jsxs("div",{className:"flex items-center px-4 py-3",children:[J.jsx(pw,{className:"w-5 h-5 text-gray-400 mr-3"}),J.jsx("input",{type:"text",placeholder:s("search.placeholder"),value:o,onChange:e=>{l(e.target.value),$&&D(!1),R&&I(!1)},className:"flex-1 bg-transparent text-white placeholder-gray-400 outline-none",disabled:P}),o&&J.jsx("button",{onClick:Z,className:"ml-2 p-1 text-gray-400 hover:text-white transition-colors",children:J.jsx(Nw,{className:"w-4 h-4"})}),J.jsxs("div",{className:"flex items-center space-x-2 ml-3",children:[J.jsxs("button",{onClick:()=>{var e;Z(),null==(e=V.current)||e.click()},className:"px-3 py-1.5 text-sm bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 hover:text-white transition-colors rounded-lg border border-gray-600/50 hover:border-gray-500 flex items-center space-x-1.5",title:"Importer un fichier NFO",children:[J.jsx(yw,{className:"w-4 h-4"}),J.jsx("span",{children:"NFO"})]}),J.jsxs("button",{onClick:()=>{Z(),N(!0)},className:"px-3 py-1.5 text-sm bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 hover:text-white transition-colors rounded-lg border border-gray-600/50 hover:border-gray-500 flex items-center space-x-1.5",title:"Coller contenu NFO",children:[J.jsx(zy,{className:"w-4 h-4"}),J.jsx("span",{children:"Coller"})]})]})]})}),J.jsx("input",{ref:V,type:"file",accept:".nfo,.txt",onChange:e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];if(!n)return;const i=new FileReader;i.onload=async e=>{var t;const n=null==(t=e.target)?void 0:t.result;E(n),r&&r(n),G(n)},i.readAsText(n),e.target.value=""},className:"hidden"}),J.jsx("input",{ref:K,type:"file",webkitdirectory:"",directory:"",multiple:!0,onChange:X,className:"hidden"}),J.jsx("input",{ref:W,type:"file",multiple:!0,accept:"video/*,.mkv,.avi,.mp4,.mov,.wmv,.flv,.webm,.m4v,.3gp,.ogv,.iso,.ts,.m2ts,.nfo,.txt",onChange:X,className:"hidden"}),p&&c.length>0&&!i&&J.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800/95 backdrop-blur-sm border border-gray-700/50 rounded-xl shadow-2xl overflow-hidden z-50 max-h-[32rem]",children:[J.jsx("div",{className:"overflow-y-auto max-h-[28rem]",children:c.map(t=>J.jsxs("button",{onClick:()=>(t=>{e(t),f(!1),l(t.title||t.name||"")})(t),className:"w-full flex items-center px-4 py-3 hover:bg-gray-700/50 transition-colors text-left",children:[J.jsx("div",{className:"flex-shrink-0 w-12 h-16 mr-3 bg-gray-700 rounded overflow-hidden",children:(null==t?void 0:t.poster_path)?J.jsx("img",{src:Cw.getImageUrl(null==t?void 0:t.poster_path,"w92"),alt:"",className:"w-full h-full object-cover"}):J.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"movie"===(null==t?void 0:t.media_type)?J.jsx(Xy,{className:"w-5 h-5 text-gray-500"}):J.jsx(xw,{className:"w-5 h-5 text-gray-500"})})}),J.jsxs("div",{className:"flex-1 min-w-0",children:[J.jsx("h3",{className:"text-white font-medium truncate",children:(null==t?void 0:t.title)||(null==t?void 0:t.name)}),J.jsxs("p",{className:"text-gray-400 text-sm",children:["movie"===(null==t?void 0:t.media_type)?s("search.movie"):s("search.tv"),"  ",(null==t?void 0:t.release_date)?new Date(t.release_date).getFullYear():(null==t?void 0:t.first_air_date)?new Date(t.first_air_date).getFullYear():"N/A"]}),(null==t?void 0:t.vote_average)>0&&J.jsx("div",{className:"flex items-center mt-1",children:J.jsxs("div",{className:"flex items-center",children:[J.jsx("span",{className:"text-yellow-400 text-sm",children:""}),J.jsx("span",{className:"text-gray-400 text-sm ml-1",children:null==t?void 0:t.vote_average.toFixed(1)})]})})]})]},t.id))}),m<v&&J.jsx("div",{className:"border-t border-gray-700/50 p-3",children:J.jsx("button",{onClick:async()=>{if(!(x||m>=v)){y(!0);try{const e=o.match(/\b(19\d{2}|20[0-3]\d)\b/g);let t,r=o;if(e&&e.length>1){t=parseInt(e[e.length-1]);const n=o.lastIndexOf(e[e.length-1]);r=(o.substring(0,n)+o.substring(n+4)).trim().replace(/\s+/g," ")}else if(e&&1===e.length){const n=o.replace(/\b(19\d{2}|20[0-3]\d)\b/g,"").trim();n.length>0&&(t=parseInt(e[0]),r=n.replace(/\s+/g," "))}const n=await Cw.searchMulti(r,m+1,a,t);u(e=>[...e,...n.results]),g(e=>e+1)}catch(e){console.error("Erreur lors du chargement de plus de rsultats:",e)}y(!1)}},disabled:x,className:"w-full py-2 text-sm text-violet-300 hover:text-violet-200 disabled:text-gray-500 transition-colors",children:x?s("upload.video.charge"):`${s("upload.video.more")} (${c.length}/${v>1?"20+":c.length})`})})]}),d&&J.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800/95 backdrop-blur-sm border border-gray-700/50 rounded-xl p-4 text-center z-50",children:[J.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-violet-500 mx-auto"}),J.jsx("p",{className:"text-gray-400 text-sm mt-2",children:s("search.searching")})]})]}),!p&&!C&&J.jsx("div",{onDragOver:e=>{e.preventDefault(),_(!0)},onDragLeave:e=>{e.preventDefault(),_(!1)},onDrop:async e=>{var t;e.preventDefault(),_(!1);try{let n=[],i=null;if(e.dataTransfer.items&&e.dataTransfer.items.length>0){const a=Array.from(e.dataTransfer.items);for(const e of a)if("file"===e.kind){const a=null==(t=e.webkitGetAsEntry)?void 0:t.call(e);if(a)if(a.isDirectory){i=a.name;const e=await Y(a);n.push(...e)}else{const t=e.getAsFile();if(t){const e=/\.(mkv|avi|mp4|mov|wmv|flv|webm|m4v|3gp|ogv|iso|ts|m2ts)$/i;if(t.type.startsWith("video/")||e.test(t.name))n.push(t);else if(t.name.endsWith(".nfo")||t.type.startsWith("text/")){const e=new FileReader;return e.onload=e=>{var t;const n=null==(t=e.target)?void 0:t.result;E(n),r&&r(n),G(n)},void e.readAsText(t)}}}}}if(0===n.length)return;const a=new DataTransfer;n.forEach(e=>a.items.add(e));const s={target:{files:a.files,value:"",dataset:{folderName:i}}};await X(s)}catch(n){console.error("Erreur lors du traitement du drop:",n)}},className:"relative transition-all duration-300 "+(w?"scale-[1.02]":""),children:J.jsx("div",{className:"relative bg-gradient-to-br from-gray-800/80 to-gray-900/80 backdrop-blur-sm border-2 border-dashed rounded-2xl p-12 transition-all duration-300 "+(w?"border-violet-400 bg-violet-500/10 shadow-lg shadow-violet-500/20":"border-gray-600/50 hover:border-gray-500/70"),children:P?J.jsxs("div",{className:"text-center",children:[J.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-violet-500/20 rounded-full mb-4",children:J.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-violet-500 border-t-transparent"})}),J.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:s("upload.video.analyse2")}),J.jsx("p",{className:"text-gray-400",children:s("upload.video.extract")})]}):J.jsxs("div",{className:"text-center",children:[J.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-violet-500/20 to-blue-500/20 rounded-full mb-6",children:J.jsx(Yy,{className:"w-10 h-10 text-violet-400"})}),J.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:w?"  Gooooooooo !!  ":s("upload.video.dropzone")}),J.jsx("p",{className:"text-gray-400 mb-6",children:s(w?"upload.video.analyse":"upload.video.nfo")}),J.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[J.jsxs("button",{onClick:()=>{var e;return null==(e=W.current)?void 0:e.click()},className:"px-6 py-3 bg-gradient-to-r from-violet-600 to-blue-600 hover:from-violet-500 hover:to-blue-500 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-violet-500/25 flex items-center space-x-2",children:[J.jsx(yw,{className:"w-5 h-5"}),J.jsx("span",{children:s("upload.video.select_files")})]}),J.jsxs("button",{onClick:()=>{var e;return null==(e=K.current)?void 0:e.click()},className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-green-500/25 flex items-center space-x-2",children:[J.jsx(Jy,{className:"w-5 h-5"}),J.jsx("span",{children:s("upload.video.select_folder")})]})]}),J.jsx("p",{className:"text-gray-500 text-sm mt-4",children:"Slectionnez un dossier pour scanner le premier fichier vido et calculer la taille totale"}),J.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-2 text-xs text-gray-500",children:[J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"MKV"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"ISO"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"MP4"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"AVI"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"MOV"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"TS"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"M2TS"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"NFO"})]})]})})}),$&&J.jsx("div",{className:"bg-orange-500/10 backdrop-blur-sm border border-orange-500/30 rounded-xl p-4",children:J.jsxs("div",{className:"flex items-start",children:[J.jsx(Gy,{className:"w-5 h-5 text-orange-400 mr-3 mt-0.5 flex-shrink-0"}),J.jsxs("div",{className:"flex-1",children:[J.jsx("p",{className:"text-orange-300 font-medium mb-1",children:s("nfo.title.not.found")}),J.jsx("p",{className:"text-orange-200 text-sm mb-3",children:s("search.nfo.notitle")}),J.jsx("button",{onClick:()=>D(!1),className:"text-orange-300 hover:text-orange-200 text-sm underline",children:s("nfo.close")})]})]})}),R&&J.jsx("div",{className:"bg-orange-500/10 backdrop-blur-sm border border-orange-500/30 rounded-xl p-4",children:J.jsxs("div",{className:"flex items-start",children:[J.jsx(Gy,{className:"w-5 h-5 text-orange-400 mr-3 mt-0.5 flex-shrink-0"}),J.jsxs("div",{className:"flex-1",children:[J.jsx("p",{className:"text-orange-300 font-medium mb-1",children:s("nfo.media.not.found.title")}),J.jsx("p",{className:"text-orange-200 text-sm mb-3",children:s("nfo.media.not.found.description")}),J.jsx("button",{onClick:()=>I(!1),className:"text-orange-300 hover:text-orange-200 text-sm underline",children:s("nfo.close")})]})]})}),k&&J.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:J.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-2xl w-full max-h-[80vh] shadow-2xl border border-gray-700",children:[J.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[J.jsxs("div",{className:"flex items-center",children:[J.jsx(Gy,{className:"w-6 h-6 text-violet-400 mr-3"}),J.jsx("h2",{className:"text-xl font-bold text-white",children:s("nfo.paste.title")})]}),J.jsx("button",{onClick:Q,className:"text-gray-400 hover:text-white transition-colors",children:J.jsx(Nw,{className:"w-5 h-5"})})]}),J.jsxs("div",{className:"p-6",children:[J.jsx("p",{className:"text-gray-300 mb-4",children:s("nfo.paste.description")}),J.jsx("textarea",{value:j,onChange:e=>S(e.target.value),placeholder:s("nfo.paste.placeholder"),className:"w-full h-64 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500 font-mono text-sm resize-none"}),J.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[J.jsx("button",{onClick:Q,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:s("nfo.cancel")}),J.jsx("button",{onClick:()=>{j.trim()&&(E(j),r&&r(j),G(j),N(!1),S(""))},disabled:!j.trim(),className:"px-6 py-2 bg-violet-600 hover:bg-violet-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:s("nfo.analyze")})]})]})]})})]})}const N_=(e,t)=>"Kbps"===t&&e>=1e3?e.toLocaleString("fr-FR").replace(/,/g," "):e.toString(),j_=e=>{if(e<1){const t=1e3*e;return t>=100?`${t.toLocaleString("fr-FR").replace(/,/g," ")} MB`:`${t} MB`}return`${e} GB`},S_=e=>{if(!e)return"N/A";return`${Math.floor(e/60)}h${(e%60).toString().padStart(2,"0")}`},C_=e=>{if(!e||0===e.length)return"N/A";const t=Math.round(e.reduce((e,t)=>e+t,0)/e.length);return`${t} min`},E_=(e,t,r)=>{const n="movie"===r,i=e,a=e;return{isMovie:n,movie:i,tvShow:a,director:t.crew.find(e=>"Director"===e.job),creators:t.crew.filter(e=>"Creator"===e.job||"Executive Producer"===e.job),mainActors:t.cast.slice(0,5),title:n?i.title:a.name,originalTitle:n?i.original_title:a.original_name,releaseDate:n?i.release_date:a.first_air_date,overview:e.overview,tagline:e.tagline,voteAverage:e.vote_average,voteCount:e.vote_count,id:e.id,posterPath:e.poster_path,genres:e.genres,productionCountries:e.production_countries}},$_=e=>e.map(e=>`[i][url=/torrents?tags=${encodeURIComponent(e.name)}]${e.name}[/url][/i]`).join(", ");function D_(e,t,r,n,i=1,a){switch(i){case 1:default:return P_(e,t,r,n,a);case 2:return function(e,t,r,n){const{isMovie:i,movie:a,tvShow:s,director:o,creators:l,mainActors:c,title:u,originalTitle:d,releaseDate:h,overview:p,tagline:f,voteAverage:m,voteCount:g,posterPath:v,genres:b,productionCountries:x}=E_(e,t,r);let y=`[center][b][size=29]${u}[/size][/b]\n[size=18](${new Date(h).getFullYear()})[/size]\n\n[img]${Cw.getImageUrl(v,"original")}[/img]${f?`\n\n[i]"${f}"[/i]`:""}[/center]\n\n[list]\n[*] [b]Titre original :[/b] ${d}\n[*] [b]Pays :[/b] ${x.map(e=>e.name).join(", ")||"N/A"}\n[*] [b]Genres :[/b] ${$_(b)}\n[*] [b]Date de sortie :[/b] ${new Date(h).toLocaleDateString("fr-FR")}\n[*] [b]Dure :[/b] ${i?S_(a.runtime):C_(s.episode_run_time)}`;i||(y+=`\n[*] [b]Saisons :[/b] ${s.number_of_seasons}\n[*] [b]pisodes :[/b] ${s.number_of_episodes}`);y+=`\n[*] [b]${i?"Ralisateur":"Crateur(s)"} :[/b] ${i?(null==o?void 0:o.name)||"N/A":l.slice(0,2).map(e=>e.name).join(", ")||"N/A"}\n[*] [b]Note TMDB :[/b] ${m.toFixed(1)}/10 (${g} votes)\n[/list]\n[b]Synopsis :[/b]\n${p||"Aucun synopsis disponible."}\n\n\n[b]Casting :[/b]\n    [list]`,c.forEach(e=>{y+=`\n    [*] ${e.name} - ${e.character}`}),y+="\n   [/list]",n&&(y+=`\n[b]Spcifications techniques :[/b]\n[list]\n[*] [b]Source :[/b] ${n.source||"N/A"}\n[*] [b]Qualit :[/b] ${n.video.quality}\n[*] [b]Format :[/b] ${n.video.format}\n[*] [b]Codec vido :[/b] ${n.video.codec}\n[*] [b]Dbit vido :[/b] ${N_(n.video.bitrate,n.video.bitrateUnit)} ${n.video.bitrateUnit}\n[*] [b]Taille :[/b] ${j_(n.video.size)}\n[*] [b]Nombre de fichiers :[/b] ${n.numberOfFiles||(i?1:s.number_of_episodes||1)}\n[/list]`,n.audio.length>0&&(y+="\n[b]Audio :[/b]\n    [list=1]",n.audio.forEach(e=>{let t=Yw(e.languageCode);!t.flag&&e.language&&(t=Yw(e.language));const r=t.flag?` ${t.flag} `:"";y+=`\n   [*] ${r}${e.language} [${e.channels}] ${e.codec} @ ${N_(e.bitrate,e.bitrateUnit)} ${"Mbps"===e.bitrateUnit?"Mb/s":"kb/s"}`}),y+="\n   [/list]"),n.subtitles.length>0&&(y+="\n[b]Sous-titres :[/b]\n    [list=1]",n.subtitles.forEach(e=>{let t=Yw(e.languageCode);!t.flag&&e.language&&(t=Yw(e.language));const r=t.flag?` ${t.flag} `:"";let n="";e.isForced?n=" - Forc":e.isSDH&&(n=" - SDH"),y+=`\n    [*] ${r}${e.language} (${e.format})${n}`}),y+="\n    [/list] "),y+="\n[list]",n.releaseGroup&&(y+=`\n[*] [b]Release :[/b] ${n.releaseGroup}`),n.notes&&(y+=`\n[*] [b]Notes :[/b] ${n.notes}`),y+="\n[/list]",y+="\n");return y}(e,t,r,n);case 3:return function(e,t,r,n,i){const{isMovie:a,movie:s,tvShow:o,director:l,creators:c,mainActors:u,title:d,originalTitle:h,releaseDate:p,overview:f,tagline:m,voteAverage:g,posterPath:v,genres:b}=E_(e,t,r),x=Cw.getImageUrl(v,"original"),y=new Date(p).getFullYear(),w=$_(b.slice(0,2)),_=a?S_(s.runtime):C_(o.episode_run_time),k=`${g.toFixed(1)}/10`,N=a?(null==l?void 0:l.name)||"N/A":c.slice(0,2).map(e=>e.name).join(", ")||"N/A",j=u.map(e=>e.name).join(", "),S=f||"Aucun synopsis disponible.",C=(null==n?void 0:n.video.quality)||"N/A",E=j_((null==n?void 0:n.video.size)||0),$=(null==n?void 0:n.video.format)||"N/A",D=n?`${N_(n.video.bitrate,n.video.bitrateUnit)} ${n.video.bitrateUnit}`:"N/A",P=(null==n?void 0:n.source)||"N/A",T=(null==n?void 0:n.numberOfFiles)||(a?1:o.number_of_episodes||1);let A="N/A";n&&n.audio.length>0&&(A=n.audio.map(e=>{let t=Yw(e.languageCode);!t.flag&&e.language&&(t=Yw(e.language));return`${t.flag?` ${t.flag} `:""}${e.language} [${e.channels}] ${e.codec} @ ${N_(e.bitrate,e.bitrateUnit)} ${"Mbps"===e.bitrateUnit?"Mb/s":"kb/s"}`}).join(", "));let F="Aucun";n&&n.subtitles.length>0&&(F=n.subtitles.map(e=>{let t=Yw(e.languageCode);!t.flag&&e.language&&(t=Yw(e.language));const r=t.flag?` ${t.flag} `:"";let n="complets";return e.isForced?n="Forc":e.isSDH&&(n="SDH"),`${r}${e.language} (${e.format} - ${n})`}).join(", "));const R=null==n?void 0:n.releaseGroup,I=null==n?void 0:n.notes;let M=`[table][tr][td] [/td][td][table][tr][td][table][tr][td][table][tr][td]\n&nbsp; &nbsp; &nbsp; [img width=550]${x}[/img] &nbsp; &nbsp; &nbsp; [/td][td] [/td][/tr][/table][/td][td][table][tr][td]\n  [/td][td]   [/td][/tr][/table][/td][td][table][tr][td][table][tr][td][table][tr][td][color=#3d85c6][size=29] ${d}[/size][/color][/td][/tr][tr][td][table][tr][td]  ${y} - ${w} - ${_}  [/td][td][size=10]   [/size][/td][td] &nbsp; - Note : ${k} - [url=https://www.themoviedb.org/${a?"movie":"tv"}/${e.id}][img]https://i.imgur.com/mxI05s2.png[/img][/url] &nbsp; [/td][/tr][/table][/td][/tr][tr][td][hr=#FF0000][/hr][/td][/tr][/table][/td][/tr]`;const O=i?`[url=${i}][img]https://i.imgur.com/jKQt520.png[/img][/url] &nbsp; `:"";M=M.replace(`&nbsp; - Note : ${k} - [url=https://www.themoviedb.org/${a?"movie":"tv"}/${e.id}][img]https://i.imgur.com/mxI05s2.png[/img][/url] &nbsp; [/td][/tr][/table][/td][/tr][tr][td][hr=#FF0000][/hr][/td][/tr][/table][/td][/tr]`,`&nbsp; - Note : ${k} - [url=https://www.themoviedb.org/${a?"movie":"tv"}/${e.id}][img]https://i.imgur.com/mxI05s2.png[/img][/url] &nbsp; ${O}[/td][/tr][/table][/td][/tr][tr][td][hr=#FF0000][/hr][/td][/tr][/table][/td][/tr]`),m&&(M+=`[tr][td][i][color=#c27ba0][size=18][center][b]"${m}"[/b][/center][/size][/color][/i]\n[/td][/tr]`);M+=`[tr][td] \n[/td][/tr][tr][td][table][tr][td][b][color=#3d85c6]Titre original : &nbsp;[/color][/b] ${h}[/td][/tr][tr][td][b][color=#3d85c6]Ralisateur : &nbsp;[/color][/b] ${N}[/td][/tr][tr][td][b][color=#3d85c6]Acteurs : &nbsp;[/color][/b] ${j}[/td][/tr][/table][/td][/tr][tr][td]  [br] [/br][b][color=#3d85c6]Synopsis &nbsp;[br] [/br] [br] [/br][/color][/b][/td][/tr][tr][td]  &nbsp; ${S}[br] [/br][hr=#FF0000][/hr][/td][/tr][/table][/td][/tr][tr][td][table][tr][td][b][color=#3d85c6]Qualit :  &nbsp;[/color][/b][/td][td]${C}[/td][td] &nbsp; [/td][td][b][color=#3d85c6]&nbsp;&nbsp;&nbsp;[right]Format vido :  &nbsp;[/right][/color][/b][/td][td]${$}[/td][/tr][/table][/td][/tr][tr][td][table][tr][td][b][color=#3d85c6]Dbit vido : &nbsp;[/color][/b][/td][td]${D}[/td][td] &nbsp; [/td][td][b][color=#3d85c6]&nbsp;&nbsp;&nbsp;[right]Source  : &nbsp;[/right][/color][/b][/td][td]&nbsp;${P}[/td][/tr][/table][/td][/tr][tr][td][table][tr][td] [b][color=#3d85c6]Taille totale : &nbsp;[/color][/b][/td][td]${E}[/td][td] &nbsp; [/td][td][b][color=#3d85c6]&nbsp;&nbsp;&nbsp;[right]Nb de fichiers : &nbsp;[/right][/color][/b][/td][td]&nbsp;${T}[/td][/tr][/table][/td][/tr][tr][td][table][tr][td][br] [/br][/td][td][br] [/br][/td][/tr][/table][/td][/tr][tr][td][table][tr][td][b][color=#3d85c6] Audio : &nbsp;[/color][/b][/td][td][br] [/br][/td][/tr][/table][/td][/tr][tr][td][table][tr][td][size=13]&nbsp;&nbsp;${A}[/size][/td][td][br] [/br][/td][/tr][/table][/td][/tr][tr][td][table][tr][td][br] [/br][b][color=#3d85c6]Sous-titres : &nbsp;[/color][/b][/td][td][br] [/br][/td][/tr][/table][/td][/tr][tr][td][table][tr][td][size=13]&nbsp;&nbsp;${F}[/size][br] [/br][/td][td][br] [/br][/td][/tr][/table][/td][/tr][/table][/td][/tr][/table][/td][/tr][tr][td][hr=#FF0000][/hr][/td][/tr]`,R&&(M+=`[tr][td][b][color=#3d85c6]Nom release : &nbsp; [/color][/b] [br] [/br] ${R}[/td][/tr]`);I&&(M+=`[tr][td][b][color=#3d85c6][br] [/br]Notes:  [/color][/b] [br] [/br] ${I}[/td][/tr]`);return M+="[/table][/td][/tr][/table]",M}(e,t,r,n,a)}}function P_(e,t,r,n,i){const{isMovie:a,movie:s,tvShow:o,director:l,creators:c,mainActors:u,title:d,originalTitle:h,releaseDate:p,overview:f,tagline:m,voteAverage:g,voteCount:v,id:b,posterPath:x,genres:y,productionCountries:w}=E_(e,t,r);let _=`[center][b][font=Verdana][color=#3d85c6][size=29]${d}[/size]\n    \n    [size=18](${new Date(p).getFullYear()})[/size][/color][/font][/b]\n\n[img]${Cw.getImageUrl(x,"original")}[/img]${m?`\n\n[color=#ea9999][i][b][font=Verdana][size=29]\n"${m}"[/size][/font][/b][/i][/color]`:""}\n\n[img]${(e=>"movie"===e?"https://i.imgur.com/EXBOmiU.png":"https://i.imgur.com/u3WEe1w.png")(r)}[/img]${a?"":"\n"}\n\n[font=Verdana][size=13]${a?`[b][color=#3d85c6]Titre original :[/color][/b] [i]${h}[/i]\n`:""}[b][color=#3d85c6]Pays :[/color][/b] [i]${w.map(e=>e.name).join(", ")||"N/A"}[/i]\n[b][color=#3d85c6]Genres :[/color][/b] ${$_(y)}\n[b][color=#3d85c6]Date de sortie :[/color][/b] [i]${k=p,new Date(k).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})}[/i]\n${a?`[b][color=#3d85c6]Dure :[/color][/b] [i]${S_(s.runtime)}[/i]`:`[b][color=#3d85c6]Titre original :[/color][/b] [i]${h}[/i]\n[b][color=#3d85c6]Dure : [/color][/b] [i]${C_(o.episode_run_time)}[/i]`}\n[b][color=#3d85c6]${a?" Ralisateur":" Crateur(s)"} :[/color][/b] [i]${a?(null==l?void 0:l.name)||"N/A":c.slice(0,2).map(e=>e.name).join(", ")||"N/A"}[/i]\n[b][color=#3d85c6]Acteurs :[/color][/b] [i] ${u.map(e=>e.name).join(", ")}[/i]`;var k;const N=u.filter(e=>e.profile_path).map(e=>`[img]${Cw.getImageUrl(e.profile_path,"w185")}[/img]`).join(" ");return N&&(_+=`\n${a?"\n":""}${N}`),_+=`\n[img]https://img.streetprez.com/note/${Math.round(10*g)}.svg[/img] [i]${g.toFixed(2)} (${v})[/i] \n\n [url=https://www.themoviedb.org/${a?"movie":"tv"}/${b}][img]https://i.imgur.com/mxI05s2.png[/img][/url]  ${i?`[url=${i}][img]https://i.imgur.com/jKQt520.png[/img][/url]`:""}\n\n[img]https://i.imgur.com/W3pvv6q.png[/img]\n\n${f||"Aucun synopsis disponible."}\n\n\n[img]https://i.imgur.com/KMZsqZn.png[/img]`,n&&(_+=`\n[b][color=#3d85c6]${a?"Source":"Release source"} :[/color][/b] [i]${n.source||"N/A"}[/i]\n[b][color=#3d85c6]Qualit vido :[/color][/b] [i]${n.video.quality}[/i]\n[b][color=#3d85c6]Format vido :[/color][/b] [i]${n.video.format}[/i]\n[b][color=#3d85c6]Codec vido :[/color][/b] [i]${n.video.codec}[/i]\n[b][color=#3d85c6]Dbit vido :[/color][/b] [i]${N_(n.video.bitrate,n.video.bitrateUnit)} ${n.video.bitrateUnit}${a?"\n[/i]":"[/i]"}\n\n[b][color=#3d85c6] Audio${a?"(s)":""} :[/color][/b]`,_+=`\n${(e=>e.audio.map(e=>{let t=Yw(e.languageCode);return!t.flag&&e.language&&(t=Yw(e.language)),`${t.flag?` ${t.flag} `:""}${e.language} [${e.channels}] ${e.codec} @ ${N_(e.bitrate,e.bitrateUnit)} ${"Mbps"===e.bitrateUnit?"Mb/s":"kb/s"}`}).join("\n"))(n)}\n${a?"\n":""}[b][color=#3d85c6]Sous-titres :[/color][/b]\n${(e=>0===e.subtitles.length?"Aucun":e.subtitles.map(e=>{let t=Yw(e.languageCode);!t.flag&&e.language&&(t=Yw(e.language));const r=t.flag?` ${t.flag} `:"";let n="complets";return e.isForced?n="Forc":e.isSDH&&(n="SDH"),`${r}${e.language} : ${e.format} (${n})`}).join("\n"))(n)}`),_+="\n\n[img]https://i.imgur.com/KFsABlN.png[/img]",(null==n?void 0:n.releaseGroup)&&(_+=`\n[b][color=#3d85c6]Release :[/color][/b] [i]${n.releaseGroup}[/i]`),(null==n?void 0:n.notes)&&(_+=`\n[b][color=#3d85c6]Notes :[/color][/b] [i]${n.notes}[/i]`),_+=`\n[b][color=#3d85c6]Taille totale :[/color][/b] ${j_((null==n?void 0:n.video.size)||0)}\n[b][color=#3d85c6]Nombre de fichier :[/color][/b] ${(null==n?void 0:n.numberOfFiles)||(a?1:o.number_of_episodes||1)}[/size][/font][/center]`,_}const T_=e=>{if(e<1){const t=1e3*e;return t>=100?`${t.toLocaleString("fr-FR").replace(/,/g," ")} MB`:`${t} MB`}return`${e} GB`},A_=(e,t)=>"Kbps"===t&&e>=1e3?e.toLocaleString("fr-FR").replace(/,/g," "):e.toString(),F_=e=>{var t,r;const n=null==(r=null==(t=import.meta)?void 0:t.env)?void 0:r.VITE_IMG_PROXY_BASE;return n&&"string"==typeof n&&n.length>0?`${n}${encodeURIComponent(e)}`:e},R_=async(e,t,r)=>{try{const n=await fetch(e,{headers:{Accept:"image/*"},mode:"cors"});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const i=await n.blob(),a=await i.arrayBuffer(),s=r.folder("images");return null==s||s.file(t,a),`images/${t}`}catch(n){if(console.error("Image download failed:",e,n),n instanceof TypeError&&(n.message.includes("Failed to fetch")||n.message.includes("CORS")||n.message.includes("Access-Control-Allow-Origin")))throw new Error("CORS_ERROR");throw n}},I_=(e,t,r,n="remote",i)=>{var a;const s="title"in e,o=s?e.title:e.name,l=s?e.release_date:e.first_air_date,c=t.crew.find(e=>"Director"===e.job),u=t.crew.filter(e=>"Writer"===e.job||"Screenplay"===e.job),d=t.cast.slice(0,6),h=e.id,p=s?e.imdb_id:null==(a=e.external_ids)?void 0:a.imdb_id,f=s?e.budget:void 0,m=s?e.revenue:void 0,g=h?s?`https://www.themoviedb.org/movie/${h}`:`https://www.themoviedb.org/tv/${h}`:void 0,v=e=>"number"==typeof e&&e>0?e.toLocaleString("fr-FR",{style:"currency",currency:"USD",maximumFractionDigits:0}):null,b=s?void 0:e.created_by,x=s?void 0:e.last_air_date,y=s?[]:e.episode_run_time||[],w=!s&&y.length?Math.round(y.reduce((e,t)=>e+t,0)/y.length):void 0,_=e=>"remote"===n?e:"embedded"===n?(null==i?void 0:i.get(e))||e:"local"===n&&(null==i?void 0:i.get(e))||e;return`<!DOCTYPE html>\n<html lang="fr">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>${o}</title>\n    <style>\n        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: linear-gradient(135deg, #1e1b4b, #312e81, #3730a3); min-height: 100vh; color: white; }\n        .container { max-width: 1200px; margin: 0 auto; background: linear-gradient(135deg, #1f2937, #374151, #1f2937); border-radius: 16px; overflow: hidden; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); }\n        .header { position: relative; height: 420px; background-size: cover; }\n        .header::before { content: ''; position: absolute; inset: 0; background: linear-gradient(to right, rgba(0,0,0,0.8), rgba(0,0,0,0.4), transparent); }\n        .header::after { content: ''; position: absolute; inset: 0; background: linear-gradient(to top, #1f2937, transparent); }\n        .header-content { position: absolute; bottom: 0; left: 0; right: 0; padding: 32px; z-index: 10; }\n        .header-flex { display: flex; align-items: end; gap: 24px; }\n        .poster { width: 192px; height: 288px; border-radius: 12px; object-fit: cover; border: 4px solid rgba(255,255,255,0.2); box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); }\n        .title-info { flex: 1; padding-bottom: 16px; }\n        .title { font-size: 48px; font-weight: bold; margin-bottom: 8px; }\n        .original-title { font-size: 20px; color: #d1d5db; margin-bottom: 16px; }\n        .meta-info { display: flex; align-items: center; gap: 24px; margin-bottom: 16px; }\n        .rating { display: flex; align-items: center; color: #fbbf24; }\n        .star { width: 20px; height: 20px; fill: currentColor; margin-right: 4px; }\n        .genres { display: flex; flex-wrap: wrap; gap: 8px; }\n        .genre { padding: 4px 12px; background: rgba(139, 92, 246, 0.3); color: #c4b5fd; border-radius: 9999px; font-size: 14px; border: 1px solid rgba(139, 92, 246, 0.3); }\n        .content { padding: 32px; }\n        .grid { display: grid; grid-template-columns: 2fr 1fr; gap: 32px; }\n        .section { margin-bottom: 32px; }\n        .section-title { font-size: 24px; font-weight: bold; margin-bottom: 16px; display: flex; align-items: center; }\n        /*.icon { width: 24px; height: 24px; margin-right: 12px; color: #a78bfa; }*/\n        .synopsis { font-size: 18px; line-height: 1.75; color: #d1d5db; }\n        .tagline { color: #c4b5fd; font-style: italic; font-size: 18px; margin-top: 16px; border-left: 4px solid #8b5cf6; padding-left: 16px; }\n        .cast-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }\n        .cast-member { background: rgba(31, 41, 55, 0.5); border-radius: 12px; padding: 16px; text-align: center; }\n        .cast-photo { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin: 0 auto 12px; background: #374151; }\n        .cast-name { font-weight: 600; font-size: 14px; }\n        .cast-character { color: #9ca3af; font-size: 12px; margin-top: 4px; }\n        .sidebar { display: flex; flex-direction: column; gap: 24px; }\n        .icon { width: 24px; height: 24px; margin-right: 12px; color: #8b5cf6; padding: 0.25rem; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }\n        .info-card { background: rgba(31, 41, 55, 0.5); border-radius: 12px; padding: 0 24px 24px 24px; }\n        .info-card h3 { font-size: 20px; font-weight: bold; margin-bottom: 16px; }\n        .info-item { margin-bottom: 12px; }\n        .info-label { color: #9ca3af; font-size: 14px; }\n        .info-value { font-weight: 500; margin-top: 4px;}\n        .info-value a { --tw-text-opacity: 1; color: rgb(96 165 250 / var(--tw-text-opacity, 1)); text-decoration: none; }\n        .info-value a:hover { --tw-text-opacity: 1; color: rgb(147 197 253 / var(--tw-text-opacity, 1)); text-decoration: none; }\n        .studio-item { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; }\n        .studio-logo { width: 32px; height: 32px; object-fit: contain; background: white; border-radius: 4px; padding: 2px; }\n        .info-note { color: #9ca3af; font-size: 14px; white-space: pre-line; }\n        .specs-section { margin-bottom: 16px; }\n        .specs-title { font-size: 18px; font-weight: 600; margin-bottom: 8px; }\n        .video-title { color: #c4b5fd; }\n        .audio-title { color: #86efac; }\n        .subtitle-title { color: #fde047; }\n        .spec-item { display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 8px; }\n        .track { background: rgba(55, 65, 81, 0.5); border-radius: 8px; padding: 12px; margin-bottom: 8px; }\n        .track-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }\n        .track-name { font-weight: 500; font-size: 14px; }\n        .track-codec { color: #9ca3af; font-size: 12px; }\n        .track-details { display: flex; justify-content: space-between; font-size: 12px; color: #9ca3af; }\n        .text-gray-400 { --tw-text-opacity: 1; color: rgb(156 163 175 / var(--tw-text-opacity, 1));}\n    </style>\n</head>\n<body>\n    <div class="container">\n        <div class="header" style="background-image: url('${_(`https://image.tmdb.org/t/p/w1280${e.backdrop_path}`)}')">\n            <div class="header-content">\n                <div class="header-flex">\n                    <img\n                        src="${_(`https://image.tmdb.org/t/p/original${e.poster_path}`)}"\n                        alt="${o}"\n                        class="poster"\n                    />\n                    <div class="title-info">\n                        <h1 class="title">${o}</h1>\n                        ${s&&e.original_title!==o||!s&&e.original_name!==o?`<h2 class="original-title">${s?e.original_title:e.original_name}</h2>`:""}\n                        <div class="meta-info">\n                            <div class="rating">\n                                <svg class="star" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>\n                                <span style="font-size: 18px; font-weight: 600;">${e.vote_average.toFixed(1)}</span>\n                                <span style="color: #9ca3af; margin-left: 4px;">(${e.vote_count.toLocaleString()} votes)</span>\n                            </div>\n                            <div style="color: #d1d5db;"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 25 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar w-5 h-5 mr-2"><path d="M8 2v4"></path><path d="M16 2v4"></path><rect width="18" height="18" x="3" y="4" rx="2"></rect><path d="M3 10h18"></path></svg> ${new Date(l).getFullYear()}</div>\n                            ${s?`<div style="color: #d1d5db;"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 25 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock w-5 h-5 mr-2"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> ${e.runtime?`${Math.floor(e.runtime/60)}h${(e.runtime%60).toString().padStart(2,"0")}`:"N/A"}</div>`:`<div style="color: #d1d5db;">${e.number_of_seasons} saison${e.number_of_seasons>1?"s":""}</div>`}\n                        </div>\n                        <div class="genres">\n                            ${e.genres.map(e=>`<span class="genre">${e.name}</span>`).join("")}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <div class="content">\n            <div class="grid">\n                <div>\n                    ${e.tagline?`\n                    <div class="section" style="text-align: center; margin-bottom: 32px;">\n                        <p style="color: #c4b5fd; font-style: italic; font-size: 24px; font-weight: 500; line-height: 1.75;">"${e.tagline}"</p>\n                    </div>\n                    `:""}\n                    \n                    <div class="section">\n                        <h3 class="section-title">\n                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M2 7h20v13H2z"/><path d="M17 2l-5 5-5-5"/></svg>\n                             Synopsis\n                        </h3>\n                        <p class="synopsis">${e.overview||"Aucun synopsis disponible."}</p>\n                    </div>\n                    \n                    ${d.length>0?`\n                    <div class="section">\n                        <h3 class="section-title">\n                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>\n                            Casting principal\n                        </h3>\n                        <div class="cast-grid">\n                            ${d.map(e=>`\n                                <div class="cast-member">\n                                    ${e.profile_path?`<img src="${_(`https://image.tmdb.org/t/p/w185${e.profile_path}`)}" alt="${e.name}" class="cast-photo">`:'<div class="cast-photo"></div>'}\n                                    <h4 class="cast-name">${e.name}</h4>\n                                    <p class="cast-character">${e.character}</p>\n                                </div>\n                            `).join("")}\n                        </div>\n                    </div>\n                    `:""}\n                    ${r&&r.notes?`\n                    <div class="section">\n                      <h3 class="section-title">\n                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/></svg>\n                        Notes\n                      </h3>\n                      <p class="info-note">${r.notes}</p>\n                    </div>\n                    `:""}\n                </div>\n                \n                <div class="sidebar">\n                    ${r?`\n                    <div class="info-card">\n                        <h3 style="display: flex; align-items: center;">\n                           <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="white"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M7 3v18"/><path d="M3 7.5h4"/><path d="M3 12h18"/><path d="M3 16.5h4"/><path d="M17 3v18"/><path d="M17 7.5h4"/><path d="M17 16.5h4"/></svg>\n                           Spcifications techniques\n                        </h3>\n                        \n                        <div class="specs-section">\n                            <h4 class="specs-title video-title">Vido</h4>\n                            <div class="spec-item"><span class="text-gray-400">Qualit : </span><span>${r.video.quality}</span></div>\n                            <div class="spec-item"><span class="text-gray-400">Format : </span><span>${r.video.format}</span></div>\n                            <div class="spec-item"><span class="text-gray-400">Codec : </span><span>${r.video.codec}</span></div>\n                            <div class="spec-item"><span class="text-gray-400">Dbit : </span><span>${A_(r.video.bitrate,r.video.bitrateUnit)} ${r.video.bitrateUnit}</span></div>\n                            <div class="spec-item"><span class="text-gray-400">Taille : </span><span>${T_(r.video.size)}</span></div>\n                            ${r.source?`<div class="spec-item"><span class="text-gray-400">Source :</span><span>${r.source}</span></div>`:""}\n                            \n                        </div>\n                        \n                        <div class="specs-section">\n                            <h4 class="specs-title audio-title">Audio</h4>\n                            ${r.audio.map(e=>`\n                                <div class="track">\n                                    <div class="track-header">\n                                        <span class="track-name">${e.language} ${e.isDefault?"(Dfaut)":""}</span>\n                                        <span class="track-codec">${e.codec}</span>\n                                    </div>\n                                    <div class="track-details">\n                                        <span>${e.channels}</span>\n                                        <span>${A_(e.bitrate,e.bitrateUnit)} ${e.bitrateUnit}</span>\n                                    </div>\n                                </div>\n                            `).join("")}\n                        </div>\n                        \n                        ${r.subtitles.length>0?`\n                        <div class="specs-section">\n                            <h4 class="specs-title subtitle-title">Sous-titres</h4>\n                            ${r.subtitles.map(e=>`\n                                <div class="track">\n                                    <div class="track-header">\n                                        <span class="track-name">${e.language} ${e.isDefault?"(Dfaut)":""} ${e.isForced?"(Forc)":""}</span>\n                                        <span class="track-codec">${e.format}</span>\n                                    </div>\n                                </div>\n                            `).join("")}\n                        </div>\n                        `:""}\n                        <div class="spec-item"><span class="text-gray-400">Nombre de fichiers:</span><span>${r.numberOfFiles||(s?1:e.number_of_episodes||1)}</span></br></div>\n                        ${r.releaseGroup?`<div class="spec-item"><span class="text-gray-400">${r.releaseGroup}</span></div>`:""}\n                    </div>\n                    `:""}\n                    \n                    <div class="info-card">\n                        <h3 style="display: flex; align-items: center;">\n                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="white"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>\n                            Infos\n                        </h3>\n                        ${c?`<div class="info-item"><div class="info-label">Ralisateur</div><div class="info-value">${c.name}</div></div>`:""}\n                        ${u.length>0?`<div class="info-item"><div class="info-label">Scnariste${u.length>1?"s":""}</div><div class="info-value">${u.map(e=>e.name).join(", ")}</div></div>`:""}\n                        ${!s&&b&&b.length?`<div class="info-item"><div class="info-label">Crateurs</div><div class="info-value">${b.map(e=>e.name).join(", ")}</div></div>`:""}\n                        <div class="info-item"><div class="info-label">${s?"Date de sortie":"Premire diffusion"}</div><div class="info-value">${new Date(l).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}</div></div>\n                        ${!s&&x?`<div class="info-item"><div class="info-label">Dernire diffusion</div><div class="info-value">${new Date(x).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}</div></div>`:""}\n                        ${s?`\n    <div class="info-item"><div class="info-label">Dure</div><div class="info-value">${e.runtime?`${Math.floor(e.runtime/60)}h${(e.runtime%60).toString().padStart(2,"0")}`:"N/A"}</div></div>\n  `:`\n    <div class="info-item"><div class="info-label">Nombre de saisons</div><div class="info-value">${e.number_of_seasons}</div></div>\n    <div class="info-item"><div class="info-label">Nombre d'pisodes</div><div class="info-value">${e.number_of_episodes}</div></div>\n    ${w?`<div class="info-item"><div class="info-label">Dure moyenne</div><div class="info-value">${k=w,("number"==typeof k&&k>0?`${Math.floor(k/60)}h${(k%60).toString().padStart(2,"0")}`:null)||w+" min"}</div></div>`:""}\n  `}\n                        ${s&&v(f)?`<div class="info-item"><div class="info-label">Budget</div><div class="info-value">${v(f)}</div></div>`:""}\n                        ${s&&v(m)?`<div class="info-item"><div class="info-label">Recettes</div><div class="info-value">${v(m)}</div></div>`:""}\n                        ${p?`<div class="info-item"><div class="info-label">IMDB ID</div><div class="info-value"><a href="https://www.imdb.com/title/${p}/" target="_blank" rel="noopener noreferrer">${p}</a></div></div>`:""}\n                        ${h?`<div class="info-item"><div class="info-label">TMDB ID</div><div class="info-value"><a href="${g}" target="_blank" rel="noopener noreferrer">${h}</a></div></div>`:""}\n                    </div>\n                    \n                    <div class="info-card">\n                        <h3 style="display: flex; align-items: center;">\n                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="white"><circle cx="12" cy="12" r="10"/> <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>\n                            Production\n                        </h3>\n                        ${e.production_companies&&e.production_companies.length>0?`\n                        <div class="info-item">\n                            <div class="info-label">Studios</div>\n                            <div class="info-value">\n                                ${e.production_companies.slice(0,3).map(e=>`\n                                    <div class="studio-item">\n                                        ${e.logo_path?`<img src="${_(`https://image.tmdb.org/t/p/w92${e.logo_path}`)}" alt="${e.name}" class="studio-logo">`:""}\n                                        <span>${e.name}</span>\n                                    </div>\n                                `).join("")}\n                            </div>\n                        </div>\n                        `:""}\n                        ${e.production_countries&&e.production_countries.length>0?`\n                        <div class="info-item">\n                            <div class="info-label">Pays</div>\n                            <div class="info-value">${e.production_countries.map(e=>e.name).join(", ")}</div>\n                        </div>\n                        `:""}\n                        ${e.spoken_languages&&e.spoken_languages.length>0?`\n                        <div class="info-item">\n                            <div class="info-label">Langues</div>\n                            <div class="info-value">${e.spoken_languages.map(e=>e.name).join(", ")}</div>\n                        </div>\n                        `:""}\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n</html>`;var k},M_=async(e,t,r)=>{console.log("Starting HTML export with images...");const n="title"in e?e.title:e.name,a=new i;a.folder("images");const s=new Map,o=[],l=(e,t)=>{if(!e)return;const r=((e,t="")=>`${t}${(e.split("/").pop()||"image.jpg").replace(/[^a-zA-Z0-9._-]/g,"_")}`)(e,t);o.some(t=>t.url===e)||o.push({url:e,filename:r})};if(e.backdrop_path){const t=`https://image.tmdb.org/t/p/w1280${e.backdrop_path}`;l(t,"backdrop_")}if(e.poster_path){const t=`https://image.tmdb.org/t/p/original${e.poster_path}`;l(t,"poster_")}if(t.cast.slice(0,6).forEach((e,t)=>{if(e.profile_path){const r=`https://image.tmdb.org/t/p/w185${e.profile_path}`;l(r,`actor_${t+1}_`)}}),e.production_companies&&e.production_companies.slice(0,3).forEach((e,t)=>{if(e.logo_path){const r=`https://image.tmdb.org/t/p/w92${e.logo_path}`;l(r,`studio_${t+1}_`)}}),o.length>0){console.log("Testing CORS with first image...");try{if(!(await fetch(o[0].url,{method:"HEAD",mode:"cors"})).ok)throw new Error("Test fetch failed");console.log("CORS test passed, proceeding with download...")}catch(p){return console.log("CORS test failed:",p),{success:!1,error:"CORS_ERROR"}}}try{console.log(`Attempting to download ${o.length} images...`);for(const{url:e,filename:t}of o){console.log(`Downloading image: ${e}`);const r=F_(e),n=await R_(r,t,a);s.set(e,n)}console.log("All images downloaded successfully")}catch(p){return console.error("Error during image download:",p),p instanceof Error&&"CORS_ERROR"===p.message?(console.log("CORS error detected, returning error status"),{success:!1,error:"CORS_ERROR"}):{success:!1,error:"DOWNLOAD_ERROR"}}console.log("Generating HTML with local paths...");const c=I_(e,t,r,"local",s);a.file("index.html",c),console.log("Generating ZIP file...");const u=await a.generateAsync({type:"blob"}),d=URL.createObjectURL(u),h=document.createElement("a");return h.href=d,h.download=`${n.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_complete.zip`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(d),console.log("Export completed successfully"),{success:!0}},O_=(e,t,r)=>{const n="title"in e,i=n?e.title:e.name,a=n?e.release_date:e.first_air_date;return`# ${i}\n\n${e.poster_path?`![${i}](https://image.tmdb.org/t/p/w500${e.poster_path})`:""}\n\n## Informations gnrales\n\n- **Date de sortie:** ${a||"N/A"}\n- **Note TMDB:** ${e.vote_average}/10\n${n?"- **Dure:** "+(e.runtime?`${e.runtime} min`:"N/A"):`- **Saisons:** ${e.number_of_seasons}`}\n- **Genres:** ${e.genres.map(e=>e.name).join(", ")}\n\n## Synopsis\n\n${e.overview||"Aucun synopsis disponible."}\n\n## Distribution\n\n${t.cast.slice(0,10).map(e=>`- **${e.name}** - ${e.character}`).join("\n")}\n\n${r?`\n## Spcifications Techniques\n\n| Proprit | Valeur |\n|-----------|--------|\n| Qualit | ${r.video.quality} |\n| Format | ${r.video.format} |\n| Codec Vido | ${r.video.codec} |\n| Taille | ${T_(r.video.size)} |\n| Audio | ${r.audio.map(e=>`${e.language} ${e.codec} ${e.channels}`).join(", ")} |\n| Sous-titres | ${r.subtitles.map(e=>`${e.language} (${e.format})`).join(", ")} |\n${r.releaseGroup?`| Release | ${r.releaseGroup} |`:""}\n| Nb de fichiers | ${r.numberOfFiles||(n?1:e.number_of_episodes||1)} |\n${r.notes?`| Notes | ${r.notes} |`:""}\n`:""}`},L_=(e,t,r)=>{const n="title"in e,i=n?e.title:e.name,a=n?e.release_date:e.first_air_date;return`${i}\n${"=".repeat(i.length)}\n\nINFORMATIONS GNRALES\nDate de sortie: ${a||"N/A"}\nNote TMDB: ${e.vote_average}/10\n${n?"Dure: "+(e.runtime?`${e.runtime} min`:"N/A"):`Saisons: ${e.number_of_seasons}`}\nGenres: ${e.genres.map(e=>e.name).join(", ")}\n\nSYNOPSIS\n${e.overview||"Aucun synopsis disponible."}\n\nDISTRIBUTION\n${t.cast.slice(0,10).map(e=>`${e.name} - ${e.character}`).join("\n")}\n\n${r?`\nSPCIFICATIONS TECHNIQUES\nQualit: ${r.video.quality}\nFormat: ${r.video.format}\nCodec Vido: ${r.video.codec}\nTaille: ${T_(r.video.size)}\nAudio: ${r.audio.map(e=>`${e.language} ${e.codec} ${e.channels}`).join(", ")}\nSous-titres: ${r.subtitles.map(e=>`${e.language} (${e.format})`).join(", ")}\n${r.releaseGroup?`Release: ${r.releaseGroup}`:""}\nNb de fichiers: ${r.numberOfFiles||(n?1:e.number_of_episodes||1)}\n${r.notes?`Notes: ${r.notes}`:""}\n`:""}`},z_=(e,t,r)=>{const n=new Blob([e],{type:r}),i=URL.createObjectURL(n),a=document.createElement("a");a.href=i,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)};function B_({style:e,title:t,year:r,director:n,actors:i,genres:a,rating:s,runtime:o,quality:l="1080p",format:c="MKV"}){const{t:u}=__(),d=e=>{const t=[],r=Math.floor(e),n=e-r>=.5;for(let a=0;a<r;a++)t.push(J.jsx(gw,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"},a));n&&t.push(J.jsx(gw,{className:"w-3 h-3 fill-yellow-400/50 text-yellow-400"},"half"));const i=5-r-(n?1:0);for(let a=0;a<i;a++)t.push(J.jsx(gw,{className:"w-3 h-3 text-gray-400"},`empty-${a}`));return t};switch(e){case 1:return J.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 text-center text-xs",children:[J.jsx("div",{className:"text-red-400 font-bold text-lg mb-3",children:t}),J.jsx("div",{className:"w-16 h-24 bg-gray-700 rounded mx-auto mb-3 flex items-center justify-center",children:J.jsx(Xy,{className:"w-6 h-6 text-gray-500"})}),J.jsxs("div",{className:"space-y-1 text-left text-gray-300",children:[J.jsxs("div",{children:[J.jsxs("span",{className:"text-white font-semibold",children:[u("card.director"),":"]})," ",n]}),J.jsxs("div",{children:[J.jsxs("span",{className:"text-white font-semibold",children:[u("card.cast"),":"]})," ",i.slice(0,3).join(", ")]}),J.jsxs("div",{children:[J.jsxs("span",{className:"text-white font-semibold",children:[u("card.genres"),":"]})," ",a.slice(0,2).join(", ")]}),J.jsxs("div",{className:"flex items-center",children:[d(s)," ",J.jsx("span",{className:"ml-1",children:s.toFixed(1)})]}),J.jsxs("div",{children:[J.jsxs("span",{className:"text-white font-semibold",children:[u("specs.quality"),":"]})," ",l]}),J.jsxs("div",{children:[J.jsxs("span",{className:"text-white font-semibold",children:[u("specs.format"),":"]})," ",c]})]})]});case 2:return J.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 text-xs",children:[J.jsx("div",{className:"text-white font-bold text-lg mb-2 text-center",children:t}),J.jsxs("div",{className:"text-gray-400 text-center mb-3",children:["(",r,")"]}),J.jsx("div",{className:"w-16 h-24 bg-gray-700 rounded mx-auto mb-3 flex items-center justify-center",children:J.jsx(Xy,{className:"w-6 h-6 text-gray-500"})}),J.jsxs("div",{className:"space-y-1 text-left text-gray-300",children:[J.jsxs("div",{className:"flex items-start",children:[J.jsx("span",{className:"text-xs mr-1",children:""}),J.jsxs("span",{className:"text-white font-semibold text-xs",children:[u("card.director"),":"]}),J.jsx("span",{className:"ml-1 text-xs",children:n})]}),J.jsxs("div",{className:"flex items-start",children:[J.jsx("span",{className:"text-xs mr-1",children:""}),J.jsxs("span",{className:"text-white font-semibold text-xs",children:[u("card.genres"),":"]}),J.jsx("span",{className:"ml-1 text-xs",children:a.slice(0,2).join(", ")})]}),J.jsxs("div",{className:"flex items-start",children:[J.jsx("span",{className:"text-xs mr-1",children:""}),J.jsxs("span",{className:"text-white font-semibold text-xs",children:[u("card.cast"),":"]})]}),J.jsx("div",{className:"ml-3 space-y-0.5",children:i.slice(0,2).map((e,t)=>J.jsxs("div",{className:"flex items-start",children:[J.jsx("span",{className:"text-xs mr-1",children:""}),J.jsx("span",{className:"text-xs",children:e})]},t))})]})]});case 3:return J.jsx("div",{className:"bg-gray-900 rounded-lg p-4 text-xs",children:J.jsx("div",{className:"border border-gray-700 rounded p-3",children:J.jsxs("div",{className:"flex items-start space-x-3",children:[J.jsx("div",{className:"w-12 h-18 bg-gray-700 rounded flex items-center justify-center flex-shrink-0",children:J.jsx(Xy,{className:"w-4 h-4 text-gray-500"})}),J.jsxs("div",{className:"flex-1",children:[J.jsxs("div",{className:"text-white font-bold text-lg",children:[t," ",J.jsxs("span",{className:"text-gray-400 text-sm",children:[" ",r]})]}),J.jsxs("div",{className:"text-gray-400 text-xs mt-1",children:["(US)  ",a.slice(0,2).join(", "),"  ",o]}),J.jsx("div",{className:"border-t border-gray-700 my-2"}),J.jsx("div",{className:"italic text-gray-300 text-xs",children:"Un film  dcouvrir..."}),J.jsx("div",{className:"flex items-center mt-2",children:d(s)}),J.jsxs("div",{className:"mt-3 space-y-1 text-gray-300",children:[J.jsxs("div",{children:[J.jsxs("span",{className:"text-gray-500",children:[u("card.director"),":"]})," ",n]}),J.jsxs("div",{children:[J.jsxs("span",{className:"text-gray-500",children:[u("card.cast"),":"]})," ",i.slice(0,2).join(", ")]})]})]})]})})});case 4:return J.jsx("div",{className:"bg-gray-900 rounded-lg p-4 text-xs",children:J.jsxs("div",{className:"border border-gray-700 rounded p-2",children:[J.jsxs("div",{className:"flex items-start space-x-2",children:[J.jsx("div",{className:"w-10 h-14 bg-gray-700 rounded flex items-center justify-center",children:J.jsx(Xy,{className:"w-3 h-3 text-gray-500"})}),J.jsxs("div",{className:"flex-1",children:[J.jsx("div",{className:"text-white font-bold text-sm",children:t}),J.jsxs("div",{className:"text-gray-400 text-xs",children:[a.slice(0,2).join(", ")," - ",o]}),J.jsxs("div",{className:"flex items-center mt-1",children:[J.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"TMDB"}),d(s)]}),J.jsxs("div",{className:"mt-2 space-y-1",children:[J.jsxs("div",{className:"flex justify-between",children:[J.jsx("span",{className:"text-gray-500",children:u("card.director")}),J.jsx("span",{className:"text-white",children:n.split(" ")[0]})]}),J.jsxs("div",{className:"flex justify-between",children:[J.jsx("span",{className:"text-gray-500",children:u("specs.quality")}),J.jsxs("span",{className:"text-white",children:[l," ",c]})]})]})]})]}),J.jsx("div",{className:"text-center text-gray-500 text-xs mt-2 border-t border-gray-700 pt-1",children:"Filmothque"})]})});default:return null}}function H_({isOpen:e,onClose:t,bbcode:r,title:n,onStyleChange:i,movieData:a,tvShowData:s,ebookData:o,credits:l}){const{t:c}=__(),[u,d]=U.useState(!1),[h,p]=U.useState(1),[f,m]=U.useState(r);if(q.useEffect(()=>{m(r)},[r]),q.useEffect(()=>(document.body.style.overflow=e?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[e]),!e)return null;const g=(()=>{if(a&&l){const e=l.crew.find(e=>"Director"===e.job),t=l.cast.slice(0,6);return{title:a.title,year:a.release_date?new Date(a.release_date).getFullYear().toString():"N/A",director:(null==e?void 0:e.name)||"N/A",actors:t.map(e=>e.name),genres:a.genres.map(e=>e.name),rating:a.vote_average/2,runtime:a.runtime?`${Math.floor(a.runtime/60)}h${(a.runtime%60).toString().padStart(2,"0")}`:"N/A"}}if(s&&l){const e=l.crew.filter(e=>"Creator"===e.job||"Executive Producer"===e.job),t=l.cast.slice(0,6),r=s.episode_run_time.length>0?Math.round(s.episode_run_time.reduce((e,t)=>e+t,0)/s.episode_run_time.length):0;return{title:s.name,year:s.first_air_date?new Date(s.first_air_date).getFullYear().toString():"N/A",director:e.slice(0,2).map(e=>e.name).join(", ")||"N/A",actors:t.map(e=>e.name),genres:s.genres.map(e=>e.name),rating:s.vote_average/2,runtime:r>0?`${r} min`:"N/A"}}if(o){const e=o.volumeInfo.authors||[];return{title:o.volumeInfo.title,year:o.volumeInfo.publishedDate?new Date(o.volumeInfo.publishedDate).getFullYear().toString():"N/A",director:e.join(", "),actors:[],genres:o.volumeInfo.categories||[],rating:o.volumeInfo.averageRating||0,runtime:o.volumeInfo.pageCount?`${o.volumeInfo.pageCount} ${c("ebook.pages")}`:"N/A"}}return null})();return J.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-start justify-center z-50 p-4 overflow-y-auto",children:J.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-4xl w-full min-h-[90vh] max-h-none shadow-2xl border border-gray-700 flex flex-col mt-20 mb-4",children:[J.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[J.jsxs("div",{className:"flex items-center",children:[J.jsx(Hy,{className:"w-6 h-6 text-violet-400 mr-3"}),J.jsx("h2",{className:"text-xl font-bold text-white",children:c("export.title")})]}),J.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:J.jsx(Nw,{className:"w-5 h-5"})})]}),J.jsxs("div",{className:"flex-1 p-6 overflow-hidden flex flex-col",children:[J.jsxs("div",{className:"mb-4",children:[J.jsxs("div",{className:"mb-6",children:[J.jsxs("div",{className:"flex items-center mb-3",children:[J.jsx(lw,{className:"w-5 h-5 text-violet-400 mr-2"}),J.jsx("span",{className:"text-white font-medium",children:c("export.style")})]}),J.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[1,2,3].map(e=>J.jsxs("div",{className:"space-y-2",children:[J.jsxs("button",{onClick:()=>(e=>{p(e),i&&i(e)})(e),className:"w-full p-3 rounded-lg border-2 transition-all "+(h===e?"border-violet-500 bg-violet-500/20 text-white":"border-gray-600 bg-gray-700/50 text-gray-300 hover:border-gray-500"),children:[J.jsxs("div",{className:"text-sm font-medium",children:[c("export.style.label")," ",e]}),J.jsx("div",{className:"text-xs mt-1 opacity-75",children:c(o?1===e?"export.modal.style.complete":2===e?"export.modal.style.minimalist":"export.modal.style.modern":1===e?"export.modal.style.classic":2===e?"export.modal.style.minimalist":"export.modal.style.modern.emux")})]}),g&&J.jsx("div",{className:"hidden sm:block border-2 rounded-lg transition-all "+(h===e?"border-violet-500/50":"border-gray-600/30"),children:J.jsx(B_,{style:e,title:g.title,year:g.year,director:g.director,actors:g.actors,genres:g.genres,rating:g.rating,runtime:g.runtime})})]},e))})]}),J.jsxs("p",{className:"text-gray-300 mb-4",children:[c("export.modal.desc")," ",J.jsx("strong",{children:n}),".",c("export.modal.desc.suffix")]}),J.jsxs("div",{className:"flex space-x-3 mb-4",children:[J.jsxs("button",{onClick:async()=>{try{await navigator.clipboard.writeText(f),d(!0),setTimeout(()=>d(!1),2e3)}catch(e){console.error(c("export.error.copy"),e)}},className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors "+(u?"bg-green-600 text-white":"bg-violet-600 hover:bg-violet-500 text-white"),children:[u?J.jsx(My,{className:"w-4 h-4"}):J.jsx(Uy,{className:"w-4 h-4"}),J.jsx("span",{children:c(u?"nfo.viewer.copied":"export.copy")})]}),J.jsxs("button",{onClick:()=>{const e=new Blob([f],{type:"text/plain"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=`${n.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_bbcode.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)},className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:[J.jsx(qy,{className:"w-4 h-4"}),J.jsx("span",{children:c("export.download")})]})]})]}),J.jsxs("div",{className:"flex-1 bg-gray-900 rounded-xl border border-gray-600 overflow-hidden",children:[J.jsx("div",{className:"bg-gray-700 px-4 py-2 border-b border-gray-600",children:J.jsx("span",{className:"text-gray-300 text-sm font-medium",children:c("export.modal.generated")})}),J.jsx("textarea",{value:f,onChange:e=>m(e.target.value),className:"w-full h-full p-4 bg-transparent text-gray-300 text-sm font-mono leading-relaxed resize-none border-none outline-none",style:{minHeight:"400px"},placeholder:c("export.modal.placeholder")})]})]}),J.jsx("div",{className:"p-6 border-t border-gray-700",children:J.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:J.jsxs("p",{className:"text-blue-300 text-sm",children:[J.jsx("strong",{children:c("export.modal.warning")})," ",c("export.modal.warning.desc")]})})})]})})}function U_({isOpen:e,onClose:t,onSelect:r,movieId:n,tvShowId:i,currentPoster:a,mediaType:s}){const{t:o}=__(),[l,c]=U.useState([]),[u,d]=U.useState(!1),[h,p]=U.useState(a);U.useEffect(()=>{e&&(n||i)&&f()},[e,n,i]);const f=async()=>{d(!0);try{let e;if("movie"===s&&n?e=await Cw.getMovieImages(n):"tv"===s&&i&&(e=await Cw.getTVImages(i)),console.log("TMDB Images Response:",e),e&&e.posters){const t=e.posters.sort((e,t)=>{const r=(e.vote_average||0)*(e.vote_count||0),n=(t.vote_average||0)*(t.vote_count||0);return n!==r?n-r:t.height-e.height});c(t),console.log("Sorted Posters:",t)}else console.log("No posters found in response")}catch(e){console.error("Erreur lors du chargement des affiches:",e)}d(!1)};return e?J.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:J.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-6xl w-full max-h-[90vh] shadow-2xl border border-gray-700 flex flex-col",children:[J.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[J.jsxs("div",{className:"flex items-center",children:[J.jsx(nw,{className:"w-6 h-6 text-violet-400 mr-3"}),J.jsx("h2",{className:"text-xl font-bold text-white",children:o("poster.choose")})]}),J.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:J.jsx(Nw,{className:"w-5 h-5"})})]}),J.jsxs("div",{className:"flex-1 p-6 overflow-hidden",children:[J.jsx("p",{className:"text-gray-300 mb-6",children:o("poster.description")}),u?J.jsxs("div",{className:"flex items-center justify-center h-64",children:[J.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-violet-500"}),J.jsx("span",{className:"text-white text-lg ml-4",children:o("poster.loading")})]}):J.jsxs("div",{className:"overflow-auto max-h-[60vh]",children:[J.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:l.map((e,t)=>J.jsxs("div",{className:"relative cursor-pointer rounded-lg overflow-hidden transition-all duration-200 hover:scale-105 "+(h===e.file_path?"ring-4 ring-violet-500 shadow-lg shadow-violet-500/25":"hover:ring-2 hover:ring-gray-400"),onClick:()=>{return t=e.file_path,void p(t);var t},children:[J.jsx("div",{className:"aspect-[2/3] bg-gray-700",children:J.jsx("img",{src:Cw.getImageUrl(e.file_path,"w342"),alt:`Affiche ${t+1}`,className:"w-full h-full object-cover",loading:"lazy"})}),h===e.file_path&&J.jsx("div",{className:"absolute inset-0 bg-violet-500/20 flex items-center justify-center",children:J.jsx("div",{className:"bg-violet-500 rounded-full p-2",children:J.jsx(My,{className:"w-6 h-6 text-white"})})}),J.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2",children:J.jsxs("div",{className:"text-white text-xs",children:[J.jsxs("div",{children:[e.width,"",e.height]}),e.vote_count>0&&J.jsxs("div",{className:"flex items-center",children:[J.jsx("span",{className:"text-yellow-400",children:""}),J.jsx("span",{className:"ml-1",children:e.vote_average.toFixed(1)})]})]})})]},e.file_path))}),0===l.length&&!u&&J.jsxs("div",{className:"text-center py-12",children:[J.jsx(nw,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),J.jsx("p",{className:"text-gray-400 text-lg",children:o("poster.none")}),J.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Vrifiez la console pour plus d'informations de dbogage"})]})]})]}),J.jsx("div",{className:"p-6 border-t border-gray-700",children:J.jsxs("div",{className:"flex justify-end space-x-3",children:[J.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:o("poster.close")}),J.jsx("button",{onClick:()=>{h&&(r(h),t())},disabled:!h,className:"px-6 py-2 bg-violet-600 hover:bg-violet-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:o("poster.use")})]})})]})}):null}function q_({isOpen:e,onClose:t,onExportSimple:r,onExportComplete:n,title:i}){const{t:a}=__(),[s,o]=U.useState(!1),[l,c]=U.useState(null),[u,d]=U.useState(!1),[h,p]=U.useState(""),[f,m]=U.useState("");if(U.useEffect(()=>(e?(document.body.style.overflow="hidden",d(!1),p(""),m(""),o(!1),c(null)):document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),!e)return null;const g=async e=>{o(!0),c(e),d(!1),p(""),console.log(`Starting ${e} export...`);try{if("simple"===e)console.log("Performing simple export..."),r(),o(!1),c(null),t();else{console.log("Performing complete export...");const e=await n();console.log("Export result:",e),e&&e.success||(console.log("Export failed, showing error modal"),"CORS_ERROR"===(null==e?void 0:e.error)?(p(a("html.export.error.cors")),m(a("html.export.error.cors.details"))):(p(a("html.export.error.generic")),m(a("html.export.error.generic.details").replace("{error}",(null==e?void 0:e.error)||"Erreur inconnue"))),d(!0)),o(!1),c(null),(null==e?void 0:e.success)&&(console.log("Export successful, closing modal"),t())}}catch(i){console.error("Erreur lors de l'export:",i),p(a("html.export.error.unexpected")),m(a("html.export.error.unexpected.details").replace("{error}",i instanceof Error?i.message:"Erreur inconnue")),o(!1),c(null),d(!0)}},v=()=>{d(!1),p(""),m("")},b=u?J.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[60] p-4",children:J.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-lg w-full shadow-2xl border border-gray-700",children:[J.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[J.jsxs("div",{className:"flex items-center",children:[J.jsx(Sy,{className:"w-6 h-6 text-red-400 mr-3"}),J.jsx("h2",{className:"text-xl font-bold text-white",children:h})]}),J.jsx("button",{onClick:v,className:"text-gray-400 hover:text-white transition-colors",children:J.jsx(Nw,{className:"w-5 h-5"})})]}),J.jsxs("div",{className:"p-6",children:[J.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 mb-6",children:J.jsx("p",{className:"text-red-300 text-sm leading-relaxed whitespace-pre-line",children:f})}),J.jsxs("div",{className:"flex justify-end space-x-3",children:[J.jsx("button",{onClick:v,className:"px-6 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:a("html.export.close")}),J.jsx("button",{onClick:()=>{v(),g("simple")},className:"px-6 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors",children:a("html.export.try.simple")})]})]})]})}):null;return J.jsxs(J.Fragment,{children:[J.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:J.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-md w-full shadow-2xl border border-gray-700",children:[J.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[J.jsxs("div",{className:"flex items-center",children:[J.jsx(qy,{className:"w-6 h-6 text-violet-400 mr-3"}),J.jsx("h2",{className:"text-xl font-bold text-white",children:a("html.export.title")})]}),J.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",disabled:s,children:J.jsx(Nw,{className:"w-5 h-5"})})]}),J.jsxs("div",{className:"p-6",children:[J.jsxs("p",{className:"text-gray-300 mb-6",children:[a("html.export.choose")," ",J.jsx("strong",{children:i})," :"]}),J.jsxs("div",{className:"space-y-4",children:[J.jsx("button",{onClick:()=>g("simple"),disabled:s,className:"w-full p-4 bg-gray-700/50 hover:bg-gray-600/50 disabled:bg-gray-700/30 border border-gray-600 hover:border-gray-500 disabled:border-gray-600 rounded-xl transition-all text-left group",children:J.jsxs("div",{className:"flex items-start space-x-4",children:[J.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg group-hover:bg-blue-500/30 transition-colors",children:J.jsx(Zy,{className:"w-6 h-6 text-blue-400"})}),J.jsxs("div",{className:"flex-1",children:[J.jsx("h3",{className:"text-white font-semibold mb-1",children:a("html.export.simple.title")}),J.jsx("p",{className:"text-gray-400 text-sm mb-2",children:a("html.export.simple.desc")}),J.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[J.jsx(My,{className:"w-3 h-3 mr-1"}),J.jsx("span",{children:a("html.export.simple.check1")})]}),J.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[J.jsx(Zy,{className:"w-3 h-3 mr-1"}),J.jsx("span",{children:a("html.export.simple.check2")})]})]}),s&&"simple"===l&&J.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500"})]})}),J.jsx("button",{onClick:()=>g("complete"),disabled:s,className:"w-full p-4 bg-gray-700/50 hover:bg-gray-600/50 disabled:bg-gray-700/30 border border-gray-600 hover:border-gray-500 disabled:border-gray-600 rounded-xl transition-all text-left group",children:J.jsxs("div",{className:"flex items-start space-x-4",children:[J.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg group-hover:bg-green-500/30 transition-colors",children:J.jsx(ew,{className:"w-6 h-6 text-green-400"})}),J.jsxs("div",{className:"flex-1",children:[J.jsx("h3",{className:"text-white font-semibold mb-1",children:a("html.export.complete.title")}),J.jsx("p",{className:"text-gray-400 text-sm mb-2",children:a("html.export.complete.desc")}),J.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[J.jsx(nw,{className:"w-3 h-3 mr-1"}),J.jsx("span",{children:a("html.export.complete.check1")})]}),J.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[J.jsx(ew,{className:"w-3 h-3 mr-1"}),J.jsx("span",{children:a("html.export.complete.check2")})]})]}),s&&"complete"===l&&J.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-green-500"})]})})]}),s&&J.jsx("div",{className:"mt-6 p-4 bg-violet-500/10 border border-violet-500/30 rounded-lg",children:J.jsxs("div",{className:"flex items-center",children:[J.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-violet-500 mr-3"}),J.jsx("span",{className:"text-violet-300 text-sm",children:a("simple"===l?"html.export.generating":"html.export.downloading")})]})})]})]})}),b]})}function V_({nfoContent:e,mediaTitle:t,generatedTag:r}){const{t:n}=__(),[i,a]=U.useState(!1),[s,o]=U.useState(!1),[l,c]=U.useState(!1),u=()=>{navigator.clipboard.writeText(e),o(!0),setTimeout(()=>o(!1),2e3)},d=()=>{const r=new Blob([e],{type:"text/plain"}),n=URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=`${(()=>{const r=e.match(/Complete name\s*:\s*(.+?)\.(mkv|mp4|avi|m2ts|iso)/i);return r&&r[1]?r[1].trim():t||"media"})()}.nfo`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)};return J.jsxs(J.Fragment,{children:[J.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-cyan-600/10 backdrop-blur-sm border border-blue-400/20 rounded-2xl p-6",children:[J.jsx("div",{className:"flex items-center justify-between mb-4",children:J.jsxs("div",{className:"flex items-center space-x-3",children:[J.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:J.jsx(Gy,{className:"w-5 h-5 text-blue-400"})}),J.jsxs("div",{children:[J.jsx("h3",{className:"text-white font-semibold",children:n("nfo.viewer.title")}),J.jsx("p",{className:"text-gray-400 text-sm",children:n("nfo.viewer.subtitle")})]})]})}),J.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[J.jsxs("button",{onClick:()=>a(!0),className:"flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600/20 hover:bg-blue-600/30 border border-blue-500/30 rounded-xl text-blue-300 hover:text-blue-200 transition-all",children:[J.jsx(Wy,{className:"w-4 h-4"}),J.jsx("span",{children:n("nfo.viewer.show")})]}),J.jsxs("button",{onClick:u,className:"flex items-center justify-center space-x-2 px-4 py-3 bg-green-600/20 hover:bg-green-600/30 border border-green-500/30 rounded-xl text-green-300 hover:text-green-200 transition-all",children:[s?J.jsx(My,{className:"w-4 h-4"}):J.jsx(Uy,{className:"w-4 h-4"}),J.jsx("span",{children:n(s?"nfo.viewer.copied":"nfo.viewer.copy")})]}),J.jsxs("button",{onClick:d,className:"flex items-center justify-center space-x-2 px-4 py-3 bg-violet-600/20 hover:bg-violet-600/30 border border-violet-500/30 rounded-xl text-violet-300 hover:text-violet-200 transition-all",children:[J.jsx(qy,{className:"w-4 h-4"}),J.jsx("span",{children:n("nfo.viewer.download")})]})]})]}),r&&J.jsxs("div",{className:"mt-6 bg-gradient-to-br from-purple-500/10 to-violet-600/10 backdrop-blur-sm border border-purple-400/20 rounded-2xl p-6",children:[J.jsx("div",{className:"flex items-center justify-between mb-4",children:J.jsxs("div",{className:"flex items-center space-x-3",children:[J.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:J.jsx(vw,{className:"w-5 h-5 text-purple-400"})}),J.jsx("h3",{className:"text-white font-semibold",children:"Tag gnr"})]})}),J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx("div",{className:"flex-1 bg-gray-700/50 border border-purple-500/30 rounded-lg px-4 py-3 overflow-x-auto",children:J.jsx("code",{className:"text-green-400 font-mono text-sm whitespace-nowrap",children:r})}),J.jsx("button",{onClick:()=>{r&&(navigator.clipboard.writeText(r),c(!0),setTimeout(()=>c(!1),2e3))},className:"p-3 bg-purple-600/20 hover:bg-purple-600/30 border border-purple-500/30 rounded-lg text-purple-300 hover:text-purple-200 transition-all",title:l?"Copi":"Copier le tag",children:l?J.jsx(My,{className:"w-4 h-4"}):J.jsx(Uy,{className:"w-4 h-4"})})]})]}),i&&J.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:J.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-4xl w-full max-h-[80vh] shadow-2xl border border-gray-700 flex flex-col",children:[J.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[J.jsxs("div",{className:"flex items-center space-x-3",children:[J.jsx(Gy,{className:"w-6 h-6 text-blue-400"}),J.jsx("h2",{className:"text-xl font-bold text-white",children:n("nfo.viewer.title")})]}),J.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-white transition-colors",children:J.jsx(Nw,{className:"w-5 h-5"})})]}),J.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:J.jsx("pre",{className:"bg-gray-900 border border-gray-700 rounded-lg p-4 text-gray-300 font-mono text-sm whitespace-pre-wrap break-words",children:e})}),J.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-700",children:[J.jsxs("button",{onClick:u,className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors flex items-center space-x-2",children:[s?J.jsx(My,{className:"w-4 h-4"}):J.jsx(Uy,{className:"w-4 h-4"}),J.jsx("span",{children:n(s?"nfo.viewer.copied":"nfo.viewer.copy")})]}),J.jsxs("button",{onClick:d,className:"px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors flex items-center space-x-2",children:[J.jsx(qy,{className:"w-4 h-4"}),J.jsx("span",{children:n("nfo.viewer.download")})]})]})]})})]})}function K_({movie:e,credits:t,torrentSpecs:r,isPreview:n=!1,selectedPoster:i,onPosterChange:a,generatedNFO:s}){const{t:o}=__(),[l,c]=U.useState(!1),[u,d]=U.useState(1),[h,p]=U.useState(!1),[f,m]=U.useState(e.poster_path),[g,v]=U.useState(null),[b,x]=U.useState(!1),y=void 0!==i?i:f,w=t.crew.find(e=>"Director"===e.job),_=t.crew.filter(e=>"Writer"===e.job||"Screenplay"===e.job),k=t.cast.slice(0,6),N=e=>{if(!e)return"N/A";return`${Math.floor(e/60)}h${(e%60).toString().padStart(2,"0")}`},j=e=>0===e?"N/A":e>=1e6?`$${(e/1e6).toFixed(0)}M`:`$${e.toLocaleString()}`,S={...e,poster_path:y},C=function(e,t,r,n=1,i){return D_(e,t,"movie",r,n,i)}(S,t,r,u,g);return U.useEffect(()=>{(async()=>{try{const t=await Cw.getTrailerUrl(e.id,"movie");v(t)}catch(t){console.error("Erreur lors de la rcupration de la bande-annonce:",t)}})()},[e.id]),J.jsxs(J.Fragment,{children:[J.jsxs("div",{className:"max-w-6xl mx-auto bg-gradient-to-br from-gray-900 rounded-2xl overflow-hidden shadow-2xl",children:[J.jsxs("div",{className:"relative h-96 overflow-hidden",children:[J.jsx("div",{className:"absolute inset-0 bg-cover",style:{backgroundImage:`url(${Cw.getBackdropUrl(e.backdrop_path,"w1280")})`}}),J.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 via-black/40 to-transparent"}),J.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent"}),J.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 pt-12",children:J.jsxs("div",{className:"flex items-end space-x-6",children:[J.jsx("div",{className:"flex-shrink-0 w-48 h-72 rounded-xl overflow-hidden shadow-2xl border-4 border-white/20",children:J.jsx("img",{src:Cw.getImageUrl(y,"w500"),alt:e.title,className:"w-full h-full object-cover cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>!n&&p(!0)})}),J.jsxs("div",{className:"flex-1 pb-4",children:[J.jsx("h1",{className:"text-5xl font-bold text-white mb-2",children:e.title}),e.original_title!==e.title&&J.jsx("h2",{className:"text-xl text-gray-300 mb-4",children:e.original_title}),J.jsxs("div",{className:"flex items-center space-x-6 mb-4",children:[J.jsxs("div",{className:"flex items-center text-yellow-400",children:[J.jsx(gw,{className:"w-5 h-5 mr-1 fill-current"}),J.jsx("span",{className:"text-lg font-semibold",children:e.vote_average.toFixed(1)}),J.jsxs("span",{className:"text-gray-400 ml-1",children:["(",e.vote_count.toLocaleString()," ",o("card.votes"),")"]})]}),J.jsxs("div",{className:"flex items-center text-gray-300",children:[J.jsx(Fy,{className:"w-5 h-5 mr-2"}),J.jsx("span",{children:new Date(e.release_date).getFullYear()})]}),J.jsxs("div",{className:"flex items-center text-gray-300",children:[J.jsx(By,{className:"w-5 h-5 mr-2"}),J.jsx("span",{children:N(e.runtime)})]})]}),J.jsx("div",{className:"flex flex-wrap gap-2",children:e.genres.map(e=>J.jsx("span",{className:"px-3 py-1 bg-violet-600/30 text-violet-300 rounded-full text-sm border border-violet-500/30",children:e.name},e.id))})]})]})}),!n&&J.jsx("div",{className:"absolute top-4 right-4",children:J.jsx("div",{className:"bg-black/60 backdrop-blur-md rounded-2xl p-4 border border-white/10",children:J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("div",{className:"text-white text-sm font-medium text-center mb-2",children:o("card.export.actions")}),J.jsxs("button",{onClick:()=>p(!0),className:"flex items-center space-x-3 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors text-sm font-medium",children:[J.jsx(nw,{className:"w-4 h-4"}),J.jsx("span",{children:o("card.change.poster")})]}),J.jsxs("div",{className:"border-t border-white/10 pt-3",children:[J.jsx("div",{className:"text-white text-xs font-medium text-center mb-2 opacity-75",children:o("card.export.formats")}),J.jsxs("button",{onClick:()=>{c(!0)},className:"w-full flex items-center justify-center space-x-2 px-3 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors text-sm font-medium mb-2",children:[J.jsx(qy,{className:"w-4 h-4"}),J.jsx("span",{children:"BBCODE"})]}),J.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[J.jsxs("button",{onClick:()=>x(!0),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg transition-colors text-xs font-medium",children:[J.jsx(Hy,{className:"w-3 h-3"}),J.jsx("span",{children:"HTML"})]}),J.jsxs("button",{onClick:()=>{const n=O_(S,t,r);z_(n,`${e.title}.md`,"text/markdown")},className:"flex items-center justify-center space-x-2 px-3 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors text-xs font-medium",children:[J.jsx(Gy,{className:"w-3 h-3"}),J.jsx("span",{children:"MD"})]}),J.jsxs("button",{onClick:()=>{const n=L_(S,t,r);z_(n,`${e.title}.txt`,"text/plain")},className:"flex items-center justify-center space-x-2 px-3 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors text-xs font-medium",children:[J.jsx(Qy,{className:"w-3 h-3"}),J.jsx("span",{children:"TXT"})]})]})]})]})})})]}),J.jsx("div",{className:"p-8",children:J.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(0,1fr)_404px] gap-8",children:[J.jsxs("div",{className:"space-y-8",children:[e.tagline&&e.tagline.trim()&&J.jsx("div",{className:"text-center",children:J.jsxs("p",{className:"text-violet-300 italic text-2xl font-medium leading-relaxed",children:['"',e.tagline,'"']})}),J.jsxs("div",{children:[J.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center",children:[J.jsx(Ey,{className:"w-6 h-6 mr-3 text-violet-400"}),o("card.synopsis")]}),J.jsx("p",{className:"text-gray-300 text-lg leading-relaxed",children:e.overview||"Aucun synopsis disponible."})]}),k.length>0&&J.jsxs("div",{children:[J.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center",children:[J.jsx(ww,{className:"w-6 h-6 mr-3 text-violet-400"}),o("card.main.cast")]}),J.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:k.map(e=>J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 text-center",children:[J.jsx("div",{className:"w-20 h-20 mx-auto mb-3 rounded-full overflow-hidden bg-gray-700",children:e.profile_path?J.jsx("img",{src:Cw.getImageUrl(e.profile_path,"w185"),alt:e.name,className:"w-full h-full object-cover"}):J.jsx("div",{className:"w-full h-full flex items-center justify-center",children:J.jsx(ww,{className:"w-8 h-8 text-gray-500"})})}),J.jsx("h4",{className:"text-white font-semibold text-sm",children:e.name}),J.jsx("p",{className:"text-gray-400 text-xs mt-1",children:e.character})]},e.id))})]}),r&&r.notes&&J.jsxs("div",{children:[J.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center",children:[J.jsx(hw,{className:"w-6 h-6 mr-3 text-violet-400"}),o("specs.notes")]}),J.jsx("p",{className:"text-gray-400 text-sm leading-relaxed whitespace-pre-line",children:r.notes})]})]}),J.jsxs("div",{className:"space-y-6",children:[s&&!n&&J.jsx(V_,{nfoContent:s,mediaTitle:e.title,generatedTag:null==r?void 0:r.generatedTag}),r&&!n&&J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[J.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[J.jsx(ew,{className:"w-5 h-5 mr-2"}),o("card.torrent.specs")]}),J.jsxs("div",{className:"mb-4",children:[J.jsx("h4",{className:"text-lg font-semibold text-violet-300 mb-2",children:o("specs.video")}),J.jsxs("div",{className:"space-y-2 text-sm",children:[J.jsxs("div",{className:"flex justify-between",children:[J.jsxs("span",{className:"text-gray-400",children:[o("specs.quality"),":"]}),J.jsx("span",{className:"text-white font-medium",children:r.video.quality})]}),J.jsxs("div",{className:"flex justify-between",children:[J.jsxs("span",{className:"text-gray-400",children:[o("specs.format"),":"]}),J.jsx("span",{className:"text-white font-medium",children:r.video.format})]}),J.jsxs("div",{className:"flex justify-between",children:[J.jsxs("span",{className:"text-gray-400",children:[o("specs.codec"),":"]}),J.jsx("span",{className:"text-white font-medium",children:r.video.codec})]}),J.jsxs("div",{className:"flex justify-between",children:[J.jsxs("span",{className:"text-gray-400",children:[o("specs.bitrate.label"),":"]}),J.jsxs("span",{className:"text-white font-medium",children:[r.video.bitrate," ",r.video.bitrateUnit]})]}),J.jsxs("div",{className:"flex justify-between",children:[J.jsxs("span",{className:"text-gray-400",children:[o("specs.size"),":"]}),J.jsxs("span",{className:"text-white font-medium",children:[r.video.size," GB"]})]}),r.source&&J.jsxs("div",{className:"flex justify-between",children:[J.jsxs("span",{className:"text-gray-400",children:[o("ebook.source"),":"]}),J.jsx("span",{className:"text-white font-medium",children:r.source})]})]})]}),J.jsxs("div",{className:"mb-4",children:[J.jsx("h4",{className:"text-lg font-semibold text-green-300 mb-2",children:o("specs.audio")}),J.jsx("div",{className:"space-y-2",children:r.audio.map(e=>J.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[J.jsxs("div",{className:"flex items-center justify-between mb-1",children:[J.jsxs("span",{className:"text-white font-medium text-sm",children:[e.language," ",e.isDefault&&`(${o("specs.default")})`]}),J.jsx("span",{className:"text-gray-400 text-xs",children:e.codec})]}),J.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[J.jsx("span",{children:e.channels}),J.jsxs("span",{children:[e.bitrate," ",e.bitrateUnit]})]})]},e.id))})]}),r.subtitles.length>0&&J.jsxs("div",{className:"mb-4",children:[J.jsx("h4",{className:"text-lg font-semibold text-yellow-300 mb-2",children:o("specs.subtitles")}),J.jsx("div",{className:"space-y-2",children:r.subtitles.map(e=>J.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[J.jsxs("div",{className:"flex items-center justify-between mb-1",children:[J.jsxs("span",{className:"text-white font-medium text-sm",children:[e.language," ",e.isDefault&&`(${o("specs.default")})`," ",e.isForced&&`(${o("specs.forced")})`]}),J.jsx("span",{className:"text-gray-400 text-xs",children:e.format})]}),J.jsx("div",{className:"text-xs text-gray-400",children:e.isForced?o("specs.forced"):e.isSDH?"SDH":"Complet"})]},e.id))})]}),r.releaseGroup&&J.jsx("div",{children:J.jsx("div",{className:"flex justify-between mb-2",children:J.jsx("span",{className:"text-gray-400  font-medium text-sm",children:r.releaseGroup})})})]}),J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[J.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[J.jsx(Zy,{className:"w-5 h-5 mr-2"}),o("card.production")]}),J.jsxs("div",{className:"space-y-3",children:[e.production_companies.length>0&&J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:o("card.company")}),J.jsx("div",{className:"mt-2 space-y-2",children:e.production_companies.slice(0,3).map(e=>J.jsxs("div",{className:"flex items-center space-x-2",children:[e.logo_path&&J.jsx("img",{src:Cw.getImageUrl(e.logo_path,"w92"),alt:e.name,className:"w-8 h-8 object-contain bg-white rounded p-1"}),J.jsx("span",{className:"text-white text-sm",children:e.name})]},e.id))})]}),e.production_countries.length>0&&J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:o("card.country")}),J.jsx("p",{className:"text-white font-medium",children:e.production_countries.map(e=>e.name).join(", ")})]}),e.spoken_languages.length>0&&J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:o("ebook.language")}),J.jsx("p",{className:"text-white font-medium",children:e.spoken_languages.map(e=>e.name).join(", ")})]})]})]}),J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[J.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[J.jsx(iw,{className:"w-5 h-5 mr-2"}),o("card.technical")]}),J.jsxs("div",{className:"space-y-3",children:[w&&J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:o("card.director")}),J.jsx("p",{className:"text-white font-medium",children:w.name})]}),_.length>0&&J.jsxs("div",{children:[J.jsxs("span",{className:"text-gray-400 text-sm",children:[o("card.writer"),_.length>1?"s":""]}),J.jsx("p",{className:"text-white font-medium",children:_.map(e=>e.name).join(", ")})]}),J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:o("card.release")}),J.jsx("p",{className:"text-white font-medium",children:new Date(e.release_date).toLocaleDateString("Franais"===o("lang.french")?"fr-FR":"en-US",{year:"numeric",month:"long",day:"numeric"})})]}),J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:o("card.runtime")}),J.jsx("p",{className:"text-white font-medium",children:N(e.runtime)})]}),e.budget>0&&J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:o("card.budget")}),J.jsx("p",{className:"text-white font-medium",children:j(e.budget)})]}),e.revenue>0&&J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:o("card.revenue")}),J.jsx("p",{className:"text-white font-medium",children:j(e.revenue)})]}),e.imdb_id&&J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:"IMDB ID"}),J.jsx("p",{className:"text-white font-medium",children:J.jsx("a",{href:`https://www.imdb.com/title/${e.imdb_id}/`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors",children:e.imdb_id})})]}),J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:"TMDB ID"}),J.jsx("p",{className:"text-white font-medium",children:J.jsx("a",{href:`https://www.themoviedb.org/movie/${e.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors",children:e.id})})]})]})]})]})]})}),J.jsx("div",{className:"px-8 pb-6",children:J.jsxs("div",{className:"flex items-center justify-center space-x-3 pt-4 border-t border-gray-700/50",children:[J.jsx("img",{src:"https://www.themoviedb.org/assets/2/v4/logos/v2/blue_square_1-5bdc75aaebeb75dc7ae79426ddd9be3b2be1e342510f8202baf6bffa71d7f5c4.svg",alt:"TMDB Logo",className:"w-6 h-6"}),J.jsxs("p",{className:"text-gray-400 text-xs",children:[o("card.data.provided")," ",J.jsx("a",{href:"https://www.themoviedb.org/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors",children:"TMDB"})]})]})})]}),!n&&J.jsxs(J.Fragment,{children:[J.jsx(H_,{isOpen:l,onClose:()=>c(!1),bbcode:C,title:e.title,onStyleChange:e=>{d(e)},movieData:S,credits:t}),J.jsx(U_,{isOpen:h,onClose:()=>p(!1),onSelect:e=>{a?a(e):m(e)},movieId:e.id,currentPoster:y,mediaType:"movie"}),J.jsx(q_,{isOpen:b,onClose:()=>x(!1),onExportSimple:()=>{const n=I_(S,t,r);z_(n,`${e.title}.html`,"text/html")},onExportComplete:async()=>{try{console.log("MovieCard: Starting complete export...");const e=await M_(S,t,r);return console.log("MovieCard: Export result:",e),e}catch(e){return console.error("MovieCard: Erreur dans exportHTMLComplete:",e),{success:!1,error:"UNEXPECTED_ERROR"}}},title:e.title})]})]})}function W_({tvShow:e,credits:t,torrentSpecs:r,isPreview:n=!1,selectedPoster:i,onPosterChange:a,onSeasonSelect:s,generatedNFO:o}){const{t:l}=__(),[c,u]=U.useState(!1),[d,h]=U.useState(1),[p,f]=U.useState(!1),[m,g]=U.useState((null==e?void 0:e.poster_path)||null),[v,b]=U.useState(null),[x,y]=U.useState(!1);if(U.useEffect(()=>{if(!e)return;(async()=>{try{const t=await Cw.getTrailerUrl(e.id,"tv");b(t)}catch(t){console.error("Erreur lors de la rcupration de la bande-annonce:",t)}})()},[e]),!e)return null;const w=void 0!==i?i:m,_=t.crew.filter(e=>"Creator"===e.job||"Executive Producer"===e.job),k=t.cast.slice(0,6),N=e=>{if(!e||0===e.length)return"N/A";const t=Math.round(e.reduce((e,t)=>e+t,0)/e.length);return`${t} min`},j={...e,poster_path:w},S=function(e,t,r,n=1,i){return D_(e,t,"tv",r,n,i)}(j,t,r,d,v),C={"Returning Series":{text:"En cours",color:"text-green-400"},Ended:{text:"Termine",color:"text-red-400"},Canceled:{text:"Annule",color:"text-red-400"},"In Production":{text:"En production",color:"text-blue-400"},Planned:{text:"Planifie",color:"text-yellow-400"}}[E=e.status]||{text:E,color:"text-gray-400"};var E;return J.jsxs(J.Fragment,{children:[J.jsxs("div",{className:"max-w-6xl mx-auto bg-gradient-to-br from-gray-900 rounded-2xl overflow-hidden shadow-2xl",children:[J.jsxs("div",{className:"relative h-96 overflow-hidden",children:[J.jsx("div",{className:"absolute inset-0 bg-cover",style:{backgroundImage:`url(${Cw.getBackdropUrl(e.backdrop_path,"w1280")})`}}),J.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 via-black/40 to-transparent"}),J.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent"}),J.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 pt-12",children:J.jsxs("div",{className:"flex items-end space-x-6",children:[J.jsx("div",{className:"flex-shrink-0 w-48 h-72 rounded-xl overflow-hidden shadow-2xl border-4 border-white/20",children:J.jsx("img",{src:Cw.getImageUrl(w,"w500"),alt:e.name,className:"w-full h-full object-cover cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>!n&&f(!0)})}),J.jsxs("div",{className:"flex-1 pb-4",children:[J.jsx("h1",{className:"text-5xl font-bold text-white mb-2",children:e.name}),e.original_name!==e.name&&J.jsx("h2",{className:"text-xl text-gray-300 mb-4",children:e.original_name}),J.jsxs("div",{className:"flex items-center space-x-6 mb-4",children:[J.jsxs("div",{className:"flex items-center text-yellow-400",children:[J.jsx(gw,{className:"w-5 h-5 mr-1 fill-current"}),J.jsx("span",{className:"text-lg font-semibold",children:e.vote_average.toFixed(1)}),J.jsxs("span",{className:"text-gray-400 ml-1",children:["(",e.vote_count.toLocaleString()," votes)"]})]}),J.jsxs("div",{className:"flex items-center text-gray-300",children:[J.jsx(Fy,{className:"w-5 h-5 mr-2"}),J.jsx("span",{children:new Date(e.first_air_date).getFullYear()}),e.last_air_date&&"Ended"===e.status&&J.jsxs("span",{children:[" - ",new Date(e.last_air_date).getFullYear()]})]}),J.jsxs("div",{className:"flex items-center text-gray-300",children:[J.jsx(By,{className:"w-5 h-5 mr-2"}),J.jsx("span",{children:N(e.episode_run_time)})]}),J.jsxs("div",{className:`flex items-center ${C.color}`,children:[J.jsx(xw,{className:"w-5 h-5 mr-2"}),J.jsx("span",{children:C.text})]})]}),J.jsx("div",{className:"flex flex-wrap gap-2",children:e.genres.map(e=>J.jsx("span",{className:"px-3 py-1 bg-violet-600/30 text-violet-300 rounded-full text-sm border border-violet-500/30",children:e.name},e.id))})]})]})}),!n&&J.jsx("div",{className:"absolute top-4 right-4",children:J.jsx("div",{className:"bg-black/60 backdrop-blur-md rounded-2xl p-4 border border-white/10",children:J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("div",{className:"text-white text-sm font-medium text-center mb-2",children:l("card.export.actions")}),J.jsxs("button",{onClick:()=>f(!0),className:"flex items-center space-x-3 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors text-sm font-medium",children:[J.jsx(nw,{className:"w-4 h-4"}),J.jsx("span",{children:l("card.change.poster")})]}),J.jsxs("div",{className:"border-t border-white/10 pt-3",children:[J.jsx("div",{className:"text-white text-xs font-medium text-center mb-2 opacity-75",children:l("card.export.formats")}),J.jsxs("button",{onClick:()=>{u(!0)},className:"w-full flex items-center justify-center space-x-2 px-3 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors text-sm font-medium mb-2",children:[J.jsx(qy,{className:"w-4 h-4"}),J.jsx("span",{children:"BBCODE"})]}),J.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[J.jsxs("button",{onClick:()=>y(!0),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg transition-colors text-xs font-medium",children:[J.jsx(Hy,{className:"w-3 h-3"}),J.jsx("span",{children:"HTML"})]}),J.jsxs("button",{onClick:()=>{const n=O_(j,t,r);z_(n,`${e.name}.md`,"text/markdown")},className:"flex items-center justify-center space-x-2 px-3 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors text-xs font-medium",children:[J.jsx(Gy,{className:"w-3 h-3"}),J.jsx("span",{children:"MD"})]}),J.jsxs("button",{onClick:()=>{const n=L_(j,t,r);z_(n,`${e.name}.txt`,"text/plain")},className:"flex items-center justify-center space-x-2 px-3 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors text-xs font-medium",children:[J.jsx(Qy,{className:"w-3 h-3"}),J.jsx("span",{children:"TXT"})]})]})]})]})})})]}),J.jsx("div",{className:"p-8",children:J.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(0,1fr)_404px] gap-8",children:[J.jsxs("div",{className:"space-y-8",children:[e.tagline&&e.tagline.trim()&&J.jsx("div",{className:"text-center",children:J.jsxs("p",{className:"text-violet-300 italic text-2xl font-medium leading-relaxed",children:['"',e.tagline,'"']})}),J.jsxs("div",{children:[J.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center",children:[J.jsx(xw,{className:"w-6 h-6 mr-3 text-violet-400"}),"Synopsis"]}),J.jsx("p",{className:"text-gray-300 text-lg leading-relaxed",children:e.overview||"Aucun synopsis disponible."})]}),k.length>0&&J.jsxs("div",{children:[J.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center",children:[J.jsx(ww,{className:"w-6 h-6 mr-3 text-violet-400"}),"Casting principal"]}),J.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:k.map(e=>J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 text-center",children:[J.jsx("div",{className:"w-20 h-20 mx-auto mb-3 rounded-full overflow-hidden bg-gray-700",children:e.profile_path?J.jsx("img",{src:Cw.getImageUrl(e.profile_path,"w185"),alt:e.name,className:"w-full h-full object-cover"}):J.jsx("div",{className:"w-full h-full flex items-center justify-center",children:J.jsx(ww,{className:"w-8 h-8 text-gray-500"})})}),J.jsx("h4",{className:"text-white font-semibold text-sm",children:e.name}),J.jsx("p",{className:"text-gray-400 text-xs mt-1",children:e.character})]},e.id))})]}),e.seasons&&e.seasons.length>0&&J.jsxs("div",{children:[J.jsxs("h3",{className:"text-2xl font-bold text-white mb-4",children:["Saisons",n&&s&&J.jsx("span",{className:"text-sm text-violet-400 ml-2 font-normal",children:"(Cliquez pour slectionner)"})]}),J.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.seasons.filter(e=>e.season_number>0).map(e=>J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 flex space-x-4 "+(n&&s?"cursor-pointer hover:bg-gray-700/50 hover:border-violet-500 border border-transparent transition-all duration-200":""),onClick:()=>n&&s&&s(e.season_number),children:[J.jsx("div",{className:"w-16 h-24 flex-shrink-0 rounded overflow-hidden bg-gray-700",children:(null==e?void 0:e.poster_path)?J.jsx("img",{src:Cw.getImageUrl(null==e?void 0:e.poster_path,"w154"),alt:e.name,className:"w-full h-full object-cover"}):J.jsx("div",{className:"w-full h-full flex items-center justify-center",children:J.jsx(xw,{className:"w-6 h-6 text-gray-500"})})}),J.jsxs("div",{className:"flex-1",children:[J.jsx("h4",{className:"text-white font-semibold",children:e.name}),J.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[e.episode_count," pisode",e.episode_count>1?"s":""]}),e.air_date&&J.jsx("p",{className:"text-gray-400 text-sm",children:new Date(e.air_date).getFullYear()})]})]},e.id))})]}),r&&r.notes&&J.jsxs("div",{children:[J.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center",children:[J.jsx(hw,{className:"w-6 h-6 mr-3 text-violet-400"}),"Notes"]}),J.jsx("p",{className:"text-gray-400 text-sm leading-relaxed whitespace-pre-line",children:r.notes})]})]}),J.jsxs("div",{className:"space-y-6",children:[o&&!n&&J.jsx(V_,{nfoContent:o,mediaTitle:e.name,generatedTag:null==r?void 0:r.generatedTag}),r&&!n&&J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[J.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[J.jsx(ew,{className:"w-5 h-5 mr-2"}),l("card.torrent.specs")]}),J.jsxs("div",{className:"mb-4",children:[J.jsx("h4",{className:"text-lg font-semibold text-violet-300 mb-2",children:"Vido"}),J.jsxs("div",{className:"space-y-2 text-sm",children:[J.jsxs("div",{className:"flex justify-between",children:[J.jsx("span",{className:"text-gray-400",children:"Qualit:"}),J.jsx("span",{className:"text-white font-medium",children:r.video.quality})]}),J.jsxs("div",{className:"flex justify-between",children:[J.jsx("span",{className:"text-gray-400",children:"Format:"}),J.jsx("span",{className:"text-white font-medium",children:r.video.format})]}),J.jsxs("div",{className:"flex justify-between",children:[J.jsx("span",{className:"text-gray-400",children:"Codec:"}),J.jsx("span",{className:"text-white font-medium",children:r.video.codec})]}),J.jsxs("div",{className:"flex justify-between",children:[J.jsx("span",{className:"text-gray-400",children:"Dbit:"}),J.jsxs("span",{className:"text-white font-medium",children:[r.video.bitrate," ",r.video.bitrateUnit]})]}),J.jsxs("div",{className:"flex justify-between",children:[J.jsx("span",{className:"text-gray-400",children:"Taille:"}),J.jsxs("span",{className:"text-white font-medium",children:[r.video.size," GB"]})]}),r.source&&J.jsxs("div",{className:"flex justify-between",children:[J.jsx("span",{className:"text-gray-400",children:"Source:"}),J.jsx("span",{className:"text-white font-medium",children:r.source})]})]})]}),J.jsxs("div",{className:"mb-4",children:[J.jsx("h4",{className:"text-lg font-semibold text-green-300 mb-2",children:"Audio"}),J.jsx("div",{className:"space-y-2",children:r.audio.map(e=>J.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[J.jsxs("div",{className:"flex items-center justify-between mb-1",children:[J.jsxs("span",{className:"text-white font-medium text-sm",children:[e.language," ",e.isDefault&&"(Dfaut)"]}),J.jsx("span",{className:"text-gray-400 text-xs",children:e.codec})]}),J.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[J.jsx("span",{children:e.channels}),J.jsxs("span",{children:[e.bitrate," ",e.bitrateUnit]})]})]},e.id))})]}),r.subtitles.length>0&&J.jsxs("div",{className:"mb-4",children:[J.jsx("h4",{className:"text-lg font-semibold text-yellow-300 mb-2",children:"Sous-titres"}),J.jsx("div",{className:"space-y-2",children:r.subtitles.map(e=>J.jsx("div",{className:"bg-gray-700/50 rounded-lg p-3",children:J.jsxs("div",{className:"flex items-center justify-between mb-1",children:[J.jsxs("span",{className:"text-white font-medium text-sm",children:[e.language," ",e.isDefault&&"(Dfaut)"," ",e.isForced&&"(Forc)"]}),J.jsx("span",{className:"text-gray-400 text-xs",children:e.format})]})},e.id))})]}),(r.releaseGroup||r.notes)&&J.jsx("div",{children:r.releaseGroup&&J.jsx("div",{className:"flex justify-between mb-2",children:J.jsx("span",{className:"text-gray-400  font-medium text-sm",children:r.releaseGroup})})})]}),J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[J.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[J.jsx(iw,{className:"w-5 h-5 mr-2"}),"Informations"]}),J.jsxs("div",{className:"space-y-3",children:[_.length>0&&J.jsxs("div",{children:[J.jsxs("span",{className:"text-gray-400 text-sm",children:["Crateur",_.length>1?"s":""]}),J.jsx("p",{className:"text-white font-medium",children:_.slice(0,2).map(e=>e.name).join(", ")})]}),J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:"Premire diffusion"}),J.jsx("p",{className:"text-white font-medium",children:new Date(e.first_air_date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_air_date&&"Ended"===e.status&&J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:"Dernire diffusion"}),J.jsx("p",{className:"text-white font-medium",children:new Date(e.last_air_date).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})})]}),J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:"Statut"}),J.jsx("p",{className:`font-medium ${C.color}`,children:C.text})]}),J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:"Nombre de saisons"}),J.jsx("p",{className:"text-white font-medium",children:e.number_of_seasons})]}),J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:"Nombre d'pisodes"}),J.jsx("p",{className:"text-white font-medium",children:e.number_of_episodes})]}),J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:"Dure moyenne"}),J.jsx("p",{className:"text-white font-medium",children:N(e.episode_run_time)})]}),J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:"TMDB ID"}),J.jsx("p",{className:"text-white font-medium",children:J.jsx("a",{href:`https://www.themoviedb.org/tv/${e.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors",children:e.id})})]})]})]}),e.networks.length>0&&J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[J.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Diffuseurs"}),J.jsx("div",{className:"space-y-3",children:e.networks.map(e=>J.jsxs("div",{className:"flex items-center space-x-3",children:[e.logo_path&&J.jsx("img",{src:Cw.getImageUrl(e.logo_path,"w92"),alt:e.name,className:"w-12 h-8 object-contain bg-white rounded p-1"}),J.jsxs("div",{children:[J.jsx("p",{className:"text-white font-medium",children:e.name}),J.jsx("p",{className:"text-gray-400 text-sm",children:e.origin_country})]})]},e.id))})]}),J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[J.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[J.jsx(Zy,{className:"w-5 h-5 mr-2"}),"Production"]}),J.jsxs("div",{className:"space-y-3",children:[e.production_companies.length>0&&J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:"Studios"}),J.jsx("div",{className:"mt-2 space-y-2",children:e.production_companies.slice(0,3).map(e=>J.jsxs("div",{className:"flex items-center space-x-2",children:[e.logo_path&&J.jsx("img",{src:Cw.getImageUrl(e.logo_path,"w92"),alt:e.name,className:"w-8 h-8 object-contain bg-white rounded p-1"}),J.jsx("span",{className:"text-white text-sm",children:e.name})]},e.id))})]}),e.production_countries.length>0&&J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:"Pays"}),J.jsx("p",{className:"text-white font-medium",children:e.production_countries.map(e=>e.name).join(", ")})]}),e.spoken_languages.length>0&&J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400 text-sm",children:"Langues"}),J.jsx("p",{className:"text-white font-medium",children:e.spoken_languages.map(e=>e.name).join(", ")})]})]})]})]})]})}),J.jsx("div",{className:"px-8 pb-6",children:J.jsxs("div",{className:"flex items-center justify-center space-x-3 pt-4 border-t border-gray-700/50",children:[J.jsx("img",{src:"https://www.themoviedb.org/assets/2/v4/logos/v2/blue_square_1-5bdc75aaebeb75dc7ae79426ddd9be3b2be1e342510f8202baf6bffa71d7f5c4.svg",alt:"TMDB Logo",className:"w-6 h-6"}),J.jsxs("p",{className:"text-gray-400 text-xs",children:["Donnes fournies par"," ",J.jsx("a",{href:"https://www.themoviedb.org//",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors",children:"TMDB"})]})]})})]}),!n&&J.jsxs(J.Fragment,{children:[J.jsx(H_,{isOpen:c,onClose:()=>u(!1),bbcode:S,title:e.name,onStyleChange:e=>{h(e)},tvShowData:j,credits:t}),J.jsx(U_,{isOpen:p,onClose:()=>f(!1),onSelect:e=>{a?a(e):g(e)},tvShowId:e.id,currentPoster:w,mediaType:"tv"}),J.jsx(q_,{isOpen:x,onClose:()=>y(!1),onExportSimple:()=>{const n=I_(j,t,r);z_(n,`${e.name}.html`,"text/html")},onExportComplete:async()=>{try{console.log("TVShowCard: Starting complete export...");const e=await M_(j,t,r);return console.log("TVShowCard: Export result:",e),e}catch(e){return console.error("TVShowCard: Erreur dans exportHTMLComplete:",e),{success:!1,error:"UNEXPECTED_ERROR"}}},title:e.name})]})]})}const G_=["UHD Full BluRay","UHD-Remux","Full BluRay","BluRay-Remux","2160p","1080p/i","720p/i","SD"],Y_=["MKV","MP4","AVI","M2TS","ISO","Autre"],Q_=["H.264","H.265","x264","x265","VC-1","AV1","VP9","VP8","DivX","XviD","MPEG-2","MPEG-4","Autre"],X_=["Dolby Digital / AC3","Dolby Digital Plus / E-AC3","Dolby Digital Plus / E-AC3 Atmos","Dolby TrueHD","Dolby TrueHD Atmos","DTS","DTS-ES","DTS-HD HRA","DTS-HD MA","AAC","PCM","FLAC","Opus","Autre"],J_=["Mono","Stro","5.1","5.1.x","6.1","7.1","7.1.x"],Z_=["SRT","ASS","SSA","PGS","VobSub","SUP"],ek=["BluRay","UHD BluRay","WEB","WEBRip","HDTV","DVDRip","BDRip","REMUX"];function tk({onSave:e,onCancel:t,initialSpecs:r,mediaTitle:n,mediaYear:i}){var a,s,o,l,c,u,d;const{t:h}=__(),[p,f]=U.useState(!1),[m,g]=U.useState(!1),[v,b]=U.useState(!1),[x,y]=U.useState(n||""),[w,_]=U.useState(i||0),[k,N]=U.useState(()=>{var e;const t=null==(e=null==r?void 0:r.releaseGroup)?void 0:e.match(/-([A-Za-z][A-Za-z0-9]*)$/i);if(t&&t[1]){const e=t[1];if(!/^(ray|x265|x264|hdma|es|hd|ma|hra|ac3|dts|ddp|aac|pcm|flac|opus|truehd|atmos)$/i.test(e))return e}return""}),[j,S]=U.useState(!1),[C,E]=U.useState(!1),[$,D]=U.useState(null),[P,T]=U.useState([]),[A,F]=U.useState(!1),[R,I]=U.useState(!1),[M,O]=U.useState(null),[L,z]=U.useState([]),[B,H]=U.useState(null);U.useEffect(()=>{v&&window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})},[v]);const q={CUSTOM:h("tooltip.custom"),AD:h("tooltip.ad"),Atmos:"Dolby Atmos",VFF:h("tooltip.vff"),VFI:h("tooltip.vfi"),VFQ:h("tooltip.vfq"),VF2:h("tooltip.vf2"),DV:h("tooltip.dv"),HDR:h("tooltip.hdr"),"HDR10+":h("tooltip.hdr10plus"),HLG:h("tooltip.hlg"),"10 bits":h("tooltip.10bits"),"4KLight":h("tooltip.4klight"),HDLight:h("tooltip.hdlight"),IMAX:h("tooltip.imax"),"3D":h("tooltip.3d"),DC:h("tooltip.dc"),EXTENDED:h("tooltip.extended"),THEATRiCAL:h("tooltip.theatrical"),UNRATED:h("tooltip.unrated"),"FiNAL.CUT":h("tooltip.finalcut"),REMASTERED:h("tooltip.remastered"),RESTORED:h("tooltip.restored"),REPACK:h("tooltip.repack"),PROPER:h("tooltip.proper")};U.useEffect(()=>{if(null==r?void 0:r.video){const{writingLibrary:e,encodingSettings:t}=r.video,n=`${e||""} ${t||""}`.toLowerCase();if(["nvenc","hevc_nvenc","qsv","quicksync","amf","avc coding"].some(e=>n.includes(e)))f(!0);else{let e=0;[{pattern:/x264/i,weight:1},{pattern:/libx264/i,weight:1},{pattern:/x265/i,weight:1},{pattern:/libx265/i,weight:1},{pattern:/rc=crf\s*=\s*\d+/i,weight:2},{pattern:/psy-rd/i,weight:1},{pattern:/psy-rdoq/i,weight:1},{pattern:/bframes\s*=\s*\d+/i,weight:2},{pattern:/ref\s*=\s*\d+/i,weight:2},{pattern:/wpp/i,weight:1},{pattern:/numa-pools/i,weight:1}].forEach(t=>{t.pattern.test(n)&&(e+=t.weight)}),f(!1)}}},[r]);const V=e=>Number(e.toFixed(2)).toString(),K=[{code:"fr",name:h("lang.french")},{code:"fr-ad",name:h("lang.french_ad")},{code:"fr-ca",name:h("lang.quebecois")},{code:"en",name:h("lang.english")},{code:"en-ad",name:h("lang.english_ad")},{code:"es",name:h("lang.spanish")},{code:"de",name:h("lang.german")},{code:"it",name:h("lang.italian")},{code:"pt",name:h("lang.portuguese")},{code:"ru",name:h("lang.russian")},{code:"ja",name:h("lang.japanese")},{code:"ko",name:h("lang.korean")},{code:"zh",name:h("lang.chinese")},{code:"nl",name:h("lang.dutch")},{code:"sv",name:h("lang.swedish")},{code:"no",name:h("lang.norwegian")},{code:"da",name:h("lang.danish")},{code:"fi",name:h("lang.finnish")},{code:"pl",name:h("lang.polish")},{code:"cs",name:h("lang.czech")},{code:"hu",name:h("lang.hungarian")},{code:"tr",name:h("lang.turkish")},{code:"ar",name:h("lang.arabic")},{code:"he",name:h("lang.hebrew")},{code:"th",name:h("lang.thai")},{code:"vi",name:h("lang.vietnamese")},{code:"hi",name:h("lang.hindi")},{code:"other",name:h("lang.other")}],W=(e,t)=>{const r=(t||"").toLowerCase(),n=(e||"").toLowerCase();if(n){const e=Yw(n);if(e.flag)return{code:e.code,name:e.name}}if(r){const e=Yw(r);if(e.flag)return{code:e.code,name:e.name}}if(new Set(K.map(e=>e.code)).has(n)){const e=Yw(n);return"other"===n?{code:"other",name:t||h("lang.other")}:{code:e.code,name:e.name}}const i=e=>{const t=Yw(e);return{code:t.code,name:t.name}};return/\b(french\s*\(ca\)|french ca|vfq|canadian)\b/i.test(t||"")?i("fr-ca"):/\b(french|franais)\b/i.test(t||"")?i("fr"):/\b(english|anglais)\s*ad\b/i.test(t||"")?i("en-ad"):/\b(english|anglais)\b/i.test(t||"")?i("en"):/\b(german|deutsch|\(de\))\b/i.test(t||"")?i("de"):/\b(spanish|espaol|\(es\))\b/i.test(t||"")?i("es"):/\b(portuguese|portugus|\(pt\)|\(br\))\b/i.test(t||"")?i("pt"):/\b(italian|italiano|\(it\))\b/i.test(t||"")?i("it"):/\b(finnish|suomi|\(fi\))\b/i.test(t||"")?i("fi"):/\b(japanese||\(jp\))\b/i.test(t||"")?i("ja"):/\b(dutch|nederlands|\(nl\))\b/i.test(t||"")?i("nl"):/\b(polish|polski|\(pl\))\b/i.test(t||"")?i("pl"):/\b(swedish|svenska|\(se\)|\(sv\))\b/i.test(t||"")?i("sv"):/\b(hindi|\(in\))\b/i.test(t||"")?i("hi"):{code:"other",name:t||h("lang.other")}},G=(Y=r)?{video:{quality:"1080p"===(null==(Q=Y.video)?void 0:Q.quality)?"1080p/i":"720p"===(null==(X=Y.video)?void 0:X.quality)?"720p/i":"480p"===(null==(Z=Y.video)?void 0:Z.quality)?"SD":(null==(ee=Y.video)?void 0:ee.quality)&&G_.includes(Y.video.quality)?Y.video.quality:(null==(te=Y.video)?void 0:te.quality)||"1080p/i",format:(null==(re=Y.video)?void 0:re.format)&&Y_.includes(Y.video.format)?Y.video.format:(null==(ne=Y.video)?void 0:ne.format)?"Autre":"MKV",codec:(()=>{var e,t,r,n;const i=(null==(e=Y.video)?void 0:e.codec)||"",a=(null==(t=Y.video)?void 0:t.format)||"";if("HEVC"===i||"HEVC"===a||"V_MPEGH/ISO/HEVC"===i)return"H.265";if("AVC"===a||"V_MPEG4/ISO/AVC"===i)return"H.264";const s=`${(null==(r=Y.video)?void 0:r.writingLibrary)||""} ${(null==(n=Y.video)?void 0:n.encodingSettings)||""}`.toLowerCase();return s.includes("x265")?"x265":s.includes("x264")?"x264":"MPEG Video"===i?"MPEG-2":"XVID"===i||"XviD"===i?"XviD":Q_.includes(i)?i:i?"Autre":"H.264"})(),bitrate:(()=>{var e,t;const r=(null==(e=Y.video)?void 0:e.bitrate)||5,n="Mbps"===((null==(t=Y.video)?void 0:t.bitrateUnit)||"Mbps")?1e3*r:r;return n<=9999?n:n/1e3})(),bitrateUnit:(()=>{var e,t;const r=(null==(e=Y.video)?void 0:e.bitrate)||5;return("Mbps"===((null==(t=Y.video)?void 0:t.bitrateUnit)||"Mbps")?1e3*r:r)<=9999?"Kbps":"Mbps"})(),size:(null==(ie=Y.video)?void 0:ie.size)||8,duration:null==(ae=Y.video)?void 0:ae.duration},audio:(null==(se=Y.audio)?void 0:se.map((e,t)=>({id:e.id||(t+1).toString(),...(()=>{const t=W(e.languageCode,e.language);return{language:t.name,languageCode:t.code}})(),codec:(()=>{const t=e.codec||"";return t.includes("Dolby Digital Plus with Dolby Atmos")||t.includes("Dolby Digital Plus with Atmos")?"Dolby Digital Plus / E-AC3 Atmos":t.includes("DTS-HD High Resolution Audio")||"DTS-HD HRA"===t?"DTS-HD HRA":t.includes("MLP FBA 16-ch")||t.includes("MLP FBA")?"Dolby TrueHD Atmos":t.includes("DTS-HD Master Audio")||"DTS-HD MA"===t?"DTS-HD MA":t.includes("Dolby TrueHD with Dolby Atmos")||t.includes("TrueHD Atmos")?"Dolby TrueHD Atmos":t.includes("Dolby TrueHD")||"TrueHD"===t?"Dolby TrueHD":t.includes("DTS-HD High Resolution Audio")||"DTS-HD HRA"===t?"DTS-HD HRA":t.includes("DTS-ES")||"DTS-ES"===t?"DTS-ES":"E-AC-3"===t||t.includes("E-AC-3")?"Dolby Digital Plus / E-AC3":"AC-3"===t||t.includes("AC-3")?"Dolby Digital / AC3":"DTS"===t||t.includes("DTS")?"DTS":"AAC"===t||t.includes("AAC")?"AAC":"PCM"===t||t.includes("PCM")?"PCM":X_.includes(t)?t:t?"Autre":"Dolby Digital Plus / E-AC3"})(),channels:e.channels||"5.1",bitrate:e.bitrate||640,bitrateUnit:e.bitrateUnit||"Kbps",isDefault:e.isDefault||0===t})))||[],subtitles:(null==(oe=Y.subtitles)?void 0:oe.map((e,t)=>({id:e.id||(t+1).toString(),...(()=>{const t=W(e.languageCode,e.language);return{language:t.name,languageCode:t.code}})(),format:e.format||"SRT",isForced:!0===e.isForced,isComplete:!1!==e.isComplete&&!0!==e.isForced&&!0!==e.isSDH||!0===e.isComplete,isSDH:!0===e.isSDH,isDefault:!0===e.isDefault})))||[],source:Y.source,releaseGroup:Y.releaseGroup,notes:Y.notes}:null;var Y,Q,X,Z,ee,te,re,ne,ie,ae,se,oe;const[le,ce]=U.useState({quality:(null==(a=null==G?void 0:G.video)?void 0:a.quality)||"1080p/i",format:(null==(s=null==G?void 0:G.video)?void 0:s.format)||"MKV",codec:(null==(o=null==G?void 0:G.video)?void 0:o.codec)||"H.264",bitrate:(null==(l=null==G?void 0:G.video)?void 0:l.bitrate)||2.3,bitrateUnit:(null==(c=null==G?void 0:G.video)?void 0:c.bitrateUnit)||"Mbps",size:(null==(u=null==G?void 0:G.video)?void 0:u.size)||8.5,duration:null==(d=null==G?void 0:G.video)?void 0:d.duration}),[ue,de]=U.useState(()=>{var e;return((null==(e=null==G?void 0:G.video)?void 0:e.size)||8.5)<1?"MB":"GB"}),[he,pe]=U.useState(()=>{var e;const t=(null==(e=null==G?void 0:G.video)?void 0:e.bitrate)||2.3;return V(t)}),[fe,me]=U.useState(()=>{var e;const t=(null==(e=null==G?void 0:G.video)?void 0:e.size)||8.5;return V("MB"===(t<1?"MB":"GB")?1e3*t:t)}),[ge,ve]=U.useState(()=>(null==G?void 0:G.audio)&&G.audio.length>0?G.audio.map(e=>({...e,bitrateUnit:e.bitrateUnit||"Kbps"})):[{id:"1",language:"Franais",languageCode:"fr",codec:"Dolby Digital Plus / E-AC3",channels:"5.1",bitrate:640,bitrateUnit:"Kbps",isDefault:!0}]),[be,xe]=U.useState(()=>(null==G?void 0:G.subtitles)&&G.subtitles.length>0?G.subtitles.map(e=>({...e,isForced:!0===e.isForced,isComplete:!0===e.isComplete,isSDH:!0===e.isSDH})):[]),[ye,we]=U.useState((null==G?void 0:G.releaseGroup)||""),[_e,ke]=U.useState((null==r?void 0:r.numberOfFiles)||1),[Ne,je]=U.useState(()=>{var e;if(null==G?void 0:G.source){const e={Bluray:"BluRay",BluRay:"BluRay","blu-ray":"BluRay",bluray:"BluRay","UHD BluRay":"UHD BluRay","uhd bluray":"UHD BluRay","4k bluray":"UHD BluRay",WEB:"WEB",WEBRip:"WEBRip","WEB-DL":"WEB",WEBDL:"WEB","web-dl":"WEB",webrip:"WEBRip",web:"WEB",HDTV:"HDTV",DVDRip:"DVDRip",BDRip:"BDRip",REMUX:"REMUX",remux:"REMUX"},t=(G.source||"").toString(),r=e[t]||e[t.toLowerCase()]||t;return ek.includes(r)?r:"WEB"}return"ISO"===(null==(e=null==G?void 0:G.video)?void 0:e.format)?"DVDRip":"BluRay"}),[Se,Ce]=U.useState((null==G?void 0:G.notes)||(null==r?void 0:r.notes)||""),Ee=U.useMemo(()=>{const e=[],t=x||n;if(t){const r=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,".").trim();e.push(j?r.replace(/\./g," "):r)}const r=w||i;r&&e.push(r.toString()),L.forEach(t=>{e.push(t)}),M&&e.push(M),C&&e.push("CUSTOM");const a=ge.some(e=>"fr"===e.languageCode||"fr-ca"===e.languageCode),s=ge.length>0&&ge.every(e=>"fr"===e.languageCode||"fr-ca"===e.languageCode);ge.length>1&&a&&!s?e.push("MULTi"):a?e.push("FRENCH"):e.push("VOSTFR"),$&&e.push($),A&&e.push("AD");const o={"UHD Full BluRay":"2160p","UHD-Remux":"2160p","2160p":"2160p","1080p/i":"1080p","720p/i":"720p",SD:"480p"}[le.quality]||"1080p";if(parseInt(o)>=720&&e.push(o),P.forEach(t=>{e.push("10 bits"===t?"10bits":t)}),Ne){const t="UHD BluRay"===Ne?"UHD.BluRay":Ne;e.push(t)}const l=ge.find(e=>e.isDefault)||ge[0];if(l&&"Autre"!==l.codec){const t={"Dolby Digital / AC3":"AC3","Dolby Digital Plus / E-AC3":"DDP","Dolby Digital Plus / E-AC3 Atmos":"DDP","Dolby TrueHD":"TrueHD","Dolby TrueHD Atmos":"TrueHD",DTS:"DTS","DTS-ES":"DTS-ES","DTS-HD HRA":"DTS-HDHRA","DTS-HD MA":"DTS-HDMA",AAC:"AAC",PCM:"LPCM",FLAC:"FLAC",Opus:"OPUS"}[l.codec]||"AC3",r={Mono:"1.0","Stro":"2.0",5.1:"5.1","5.1.x":"5.1",6.1:"6.1",7.1:"7.1","7.1.x":"7.1"}[l.channels]||"5.1";e.push(t),"Mono"!==l.channels&&"Stro"!==l.channels&&e.push(r),R&&e.push("Atmos")}const c=le.codec.replace("H.265","H265").replace("H.264","H264").replace("x.265","x265").replace("x.264","x264");if(e.push(c),k)return e.join(j?" ":".")+"-"+k;if(ye){const t=ye.match(/-([A-Za-z][A-Za-z0-9]*)$/i);if(t&&t[1]){const r=t[1];if(!/^(ray|x265|x264|hdma|es|hd|ma|hra|ac3|dts|ddp|aac|pcm|flac|opus|truehd|atmos)$/i.test(r))return e.join(j?" ":".")+"-"+r}}return e.join(j?" ":".")},[x,w,k,j,n,i,L,M,C,$,A,R,P,ge,le.quality,le.codec,Ne,ye]),$e=(e,t)=>{ve(ge.map(r=>r.id===e?{...r,...t}:!0===t.isDefault&&r.isDefault?{...r,isDefault:!1}:r))},De=(e,t)=>{xe(be.map(r=>r.id===e?{...r,...t}:!0===t.isDefault&&r.isDefault?{...r,isDefault:!1}:r))};return J.jsxs("div",{className:"max-w-4xl mx-auto bg-gray-800/60 backdrop-blur-sm rounded-2xl p-8 border border-gray-700/50",children:[J.jsx("div",{className:"flex items-center justify-between mb-8",children:J.jsxs("div",{className:"flex items-center",children:[J.jsxs("button",{onClick:t,className:"flex items-center space-x-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors mr-4",children:[J.jsx(Cy,{className:"w-4 h-4"}),J.jsx("span",{children:h("specs.back")})]}),J.jsx(ew,{className:"w-6 h-6 text-violet-400 mr-3"}),J.jsx("h2",{className:"text-2xl font-bold text-white",children:h("specs.title")})]})}),p&&J.jsx("div",{className:"mb-6 p-3 border rounded-lg animate-in fade-in bg-red-500/10 border-red-500/20",children:J.jsxs("div",{className:"flex items-start gap-2",children:[J.jsx($y,{className:"h-4 w-4 shrink-0 mt-0.5 text-red-500","aria-hidden":"true"}),J.jsxs("div",{className:"flex-1 space-y-1",children:[J.jsx("p",{className:"text-xs font-semibold text-red-400",children:h("nfo.generator.gpu.warning.title")}),J.jsx("p",{className:"text-xs text-gray-300",dangerouslySetInnerHTML:{__html:h("nfo.generator.gpu.warning.message")}})]})]})}),J.jsxs("div",{className:"space-y-8",children:[J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[J.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[J.jsx(_w,{className:"w-5 h-5 mr-2 text-blue-400"}),h("specs.video.title")]}),J.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:h("specs.quality")}),J.jsx("select",{value:le.quality,onChange:e=>ce({...le,quality:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:G_.map(e=>J.jsx("option",{value:e,children:e},e))})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:h("specs.format")}),J.jsx("select",{value:le.format,onChange:e=>ce({...le,format:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:Y_.map(e=>J.jsx("option",{value:e,children:e},e))})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:h("specs.codec")}),J.jsx("select",{value:le.codec,onChange:e=>ce({...le,codec:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:Q_.map(e=>J.jsx("option",{value:e,children:e},e))})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:h("ebook.source")}),J.jsx("select",{value:Ne,onChange:e=>je(e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:ek.map(e=>J.jsx("option",{value:e,children:e},e))})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:h("specs.bitrate.label")}),J.jsxs("div",{className:"flex space-x-2",children:[J.jsx("input",{type:"text",value:he,onChange:e=>{const t=e.target.value;if(""===t||/^[0-9.,\s]*$/.test(t)){pe(t);const e=t.replace(/\s/g,"").replace(/,/g,"."),r=parseFloat(e);!isNaN(r)&&r>0&&ce({...le,bitrate:r})}},onBlur:()=>{const e=he.replace(/\s/g,"").replace(/,/g,"."),t=parseFloat(e);!isNaN(t)&&t>0?pe(V(t)):pe(V(le.bitrate))},className:"w-24 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"}),J.jsxs("select",{value:le.bitrateUnit,onChange:e=>{const t=e.target.value,r=le.bitrate,n=le.bitrateUnit;let i=r;"Mbps"===n&&"Kbps"===t?i=1e3*r:"Kbps"===n&&"Mbps"===t&&(i=r/1e3),ce({...le,bitrateUnit:t,bitrate:i}),pe(V(i))},className:"w-20 bg-gray-700 border border-gray-600 rounded-lg px-2 py-2 text-white focus:outline-none focus:border-violet-500",children:[J.jsx("option",{value:"Mbps",children:"Mbps"}),J.jsx("option",{value:"Kbps",children:"Kbps"})]})]})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:h("specs.size")}),J.jsxs("div",{className:"flex space-x-2",children:[J.jsx("input",{type:"text",value:fe,onChange:e=>{const t=e.target.value;if(""===t||/^[0-9.,\s]*$/.test(t)){me(t);const e=t.replace(/\s/g,"").replace(/,/g,"."),r=parseFloat(e);if(!isNaN(r)&&r>0){const e="MB"===ue?r/1e3:r;ce({...le,size:e})}}},onBlur:()=>{const e=fe.replace(/\s/g,"").replace(/,/g,"."),t=parseFloat(e);if(!isNaN(t)&&t>0)me(V(t));else{const e="MB"===ue?1e3*le.size:le.size;me(V(e))}},className:"w-24 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"}),J.jsxs("select",{value:ue,onChange:e=>{const t=e.target.value,r=le.size;de(t);me(V("MB"===t?1e3*r:r))},className:"w-16 bg-gray-700 border border-gray-600 rounded-lg px-2 py-2 text-white focus:outline-none focus:border-violet-500",children:[J.jsx("option",{value:"MB",children:"MB"}),J.jsx("option",{value:"GB",children:"GB"})]})]})]})]})]}),J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[J.jsxs("div",{className:"flex items-center justify-between mb-6",children:[J.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[J.jsx(kw,{className:"w-5 h-5 mr-2 text-green-400"}),h("specs.audio.tracks")]}),J.jsxs("button",{onClick:()=>{const e={id:Date.now().toString(),language:"Anglais",languageCode:"en",codec:"Dolby Digital Plus / E-AC3",channels:"5.1",bitrate:640,bitrateUnit:"Kbps",isDefault:!1};ve([...ge,e])},className:"flex items-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors",children:[J.jsx(uw,{className:"w-4 h-4"}),J.jsx("span",{children:h("specs.add")})]})]}),J.jsx("div",{className:"space-y-4",children:ge.map((e,t)=>J.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[J.jsxs("div",{className:"flex items-center justify-between mb-4",children:[J.jsxs("h4",{className:"text-white font-medium",children:[h("specs.track.audio")," #",t+1]}),ge.length>1&&J.jsx("button",{onClick:()=>{return t=e.id,void(ge.length>1&&ve(ge.filter(e=>e.id!==t)));var t},className:"text-red-400 hover:text-red-300 transition-colors",children:J.jsx(bw,{className:"w-4 h-4"})})]}),J.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_1fr_auto_auto] lg:grid-cols-[1fr_1fr_auto_auto] gap-4",children:[J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:h("ebook.language")}),"other"===e.languageCode?J.jsx("input",{type:"text",value:e.language,onChange:t=>$e(e.id,{language:t.target.value,languageCode:"other"}),placeholder:"Nom de la langue",className:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500"}):J.jsx("select",{value:e.languageCode,onChange:t=>{const r=t.target.value;if("other"===r)$e(e.id,{language:"",languageCode:"other"});else{const t=K.find(e=>e.code===r),n=Yw(r);$e(e.id,{language:(null==t?void 0:t.name)||n.name,languageCode:n.code})}},className:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:K.map(e=>J.jsx("option",{value:e.code,children:e.name},e.code))})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:h("specs.codec")}),J.jsx("select",{value:e.codec,onChange:t=>$e(e.id,{codec:t.target.value}),className:"w-55 bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:X_.map(e=>J.jsx("option",{value:e,children:e},e))})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:h("specs.channels")}),J.jsx("select",{value:e.channels,onChange:t=>$e(e.id,{channels:t.target.value}),className:"w-25 bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:J_.map(e=>J.jsx("option",{value:e,children:e},e))})]}),J.jsxs("div",{children:[J.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[h("specs.bitrate.label")," (Kbps)"]}),J.jsx("input",{value:e.bitrate,onChange:t=>$e(e.id,{bitrate:parseInt(t.target.value)}),className:"w-20 bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),J.jsx("div",{className:"col-span-full mt-4 flex items-center space-x-4",children:J.jsxs("label",{className:"flex items-center",children:[J.jsx("input",{type:"checkbox",checked:e.isDefault,onChange:t=>$e(e.id,{isDefault:t.target.checked}),className:"mr-2 rounded border-gray-500 bg-gray-600 text-violet-600 focus:ring-violet-500"}),J.jsx("span",{className:"text-gray-300 text-sm",children:h("specs.track.default")})]})})]})]},e.id))})]}),J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[J.jsxs("div",{className:"flex items-center justify-between mb-6",children:[J.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[J.jsx(Ry,{className:"w-5 h-5 mr-2 text-yellow-400"}),h("specs.subtitles")]}),J.jsxs("button",{onClick:()=>{const e={id:Date.now().toString(),language:"Anglais",languageCode:"en",format:"SRT",isForced:!1,isComplete:!0,isSDH:!1,isDefault:!1};xe([...be,e])},className:"flex items-center space-x-2 px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg transition-colors",children:[J.jsx(uw,{className:"w-4 h-4"}),J.jsx("span",{children:h("specs.add")})]})]}),J.jsx("div",{className:"space-y-4",children:be.map((e,t)=>J.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[J.jsxs("div",{className:"flex items-center justify-between mb-4",children:[J.jsxs("h4",{className:"text-white font-medium",children:[h("specs.track.subtitle")," #",t+1]}),J.jsx("button",{onClick:()=>{return t=e.id,void xe(be.filter(e=>e.id!==t));var t},className:"text-red-400 hover:text-red-300 transition-colors",children:J.jsx(bw,{className:"w-4 h-4"})})]}),J.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:h("ebook.language")}),"other"===e.languageCode?J.jsx("input",{type:"text",value:e.language,onChange:t=>De(e.id,{language:t.target.value,languageCode:"other"}),placeholder:"Nom de la langue",className:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500"}):J.jsx("select",{value:e.languageCode,onChange:t=>{const r=t.target.value;if("other"===r)De(e.id,{language:"",languageCode:"other"});else{const t=K.find(e=>e.code===r),n=Yw(r);De(e.id,{language:(null==t?void 0:t.name)||n.name,languageCode:n.code})}},className:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:K.map(e=>J.jsx("option",{value:e.code,children:e.name},e.code))})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:h("specs.format")}),J.jsx("select",{value:e.format,onChange:t=>De(e.id,{format:t.target.value}),className:"w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:Z_.map(e=>J.jsx("option",{value:e,children:e},e))})]})]}),J.jsxs("div",{className:"mt-4 space-y-2",children:[J.jsx("div",{className:"flex items-center",children:J.jsxs("label",{className:"flex items-center",children:[J.jsx("input",{type:"checkbox",checked:e.isDefault,onChange:t=>De(e.id,{isDefault:t.target.checked}),className:"mr-2 rounded border-gray-500 bg-gray-600 text-violet-600 focus:ring-violet-500"}),J.jsx("span",{className:"text-gray-300 text-sm",children:h("specs.track.default")})]})}),J.jsxs("div",{className:"flex items-center space-x-4",children:[J.jsxs("span",{className:"text-gray-300 text-sm",children:[h("specs.type")," :"]}),J.jsxs("label",{className:"flex items-center",children:[J.jsx("input",{type:"radio",name:`subtitle-type-${e.id}`,checked:!0===e.isForced,onChange:()=>De(e.id,{isForced:!0,isComplete:!1,isSDH:!1}),className:"mr-1 text-violet-600 focus:ring-violet-500"}),J.jsx("span",{className:"text-gray-300 text-sm",children:h("specs.forced")})]}),J.jsxs("label",{className:"flex items-center",children:[J.jsx("input",{type:"radio",name:`subtitle-type-${e.id}`,checked:!0===e.isComplete,onChange:()=>De(e.id,{isForced:!1,isComplete:!0,isSDH:!1}),className:"mr-1 text-violet-600 focus:ring-violet-500"}),J.jsx("span",{className:"text-gray-300 text-sm",children:"Complet"})]}),J.jsxs("label",{className:"flex items-center",children:[J.jsx("input",{type:"radio",name:`subtitle-type-${e.id}`,checked:!0===e.isSDH,onChange:()=>De(e.id,{isForced:!1,isComplete:!1,isSDH:!0}),className:"mr-1 text-violet-600 focus:ring-violet-500"}),J.jsx("span",{className:"text-gray-300 text-sm",children:"SDH"})]})]})]})]},e.id))})]}),J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[J.jsxs("div",{className:"flex items-center mb-6 relative group",children:[J.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[J.jsx(vw,{className:"w-5 h-5 mr-2 text-purple-400"}),h("tag.auto.generated")]}),J.jsx(iw,{className:"w-4 h-4 ml-2 text-gray-400 cursor-help"}),J.jsx("div",{className:"absolute left-0 top-full mt-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:h("tag.audio.codec.tooltip")})]}),J.jsxs("div",{children:[J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx("div",{className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 overflow-x-auto",children:J.jsx("code",{className:"text-green-400 font-mono text-sm whitespace-nowrap",children:Ee})}),J.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(Ee),g(!0),setTimeout(()=>g(!1),2e3)}catch(e){console.error("Failed to copy:",e)}},className:"p-3 bg-gray-700 hover:bg-gray-600 border border-gray-600 rounded-lg transition-colors",title:h("tag.copy"),children:m?J.jsx(My,{className:"w-5 h-5 text-green-400"}):J.jsx(Uy,{className:"w-5 h-5 text-gray-300"})}),J.jsx("button",{onClick:()=>b(!0),className:"p-3 bg-gray-700 hover:bg-gray-600 border border-gray-600 rounded-lg transition-colors",title:h("tag.edit"),children:J.jsx(mw,{className:"w-5 h-5 text-gray-300"})})]}),J.jsxs("div",{className:"flex items-center justify-between mt-2",children:[J.jsx("p",{className:"text-xs text-gray-400",children:h("tag.format.pattern")}),J.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-400",children:[J.jsx("input",{type:"checkbox",checked:j,onChange:e=>S(e.target.checked),className:"rounded border-gray-500 bg-gray-600 text-violet-600 focus:ring-violet-500"}),J.jsx("span",{children:h("tag.spaces.instead.dots")})]})]})]})]}),J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[J.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:h("specs.additional")}),J.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:h("specs.release.group")}),J.jsx("input",{type:"text",value:ye,onChange:e=>we(e.target.value),placeholder:h("specs.release.placeholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500"})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:h("specs.files.count")}),J.jsx("input",{type:"number",value:_e,onChange:e=>ke(parseInt(e.target.value)||1),min:"1",className:"w-20 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:h("specs.notes")}),J.jsx("textarea",{value:Se,onChange:e=>Ce(e.target.value),placeholder:h("specs.notes.placeholder"),rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500"})]})]}),J.jsxs("div",{className:"flex justify-end space-x-4",children:[J.jsx("button",{onClick:t,className:"px-6 py-3 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:h("nfo.cancel")}),J.jsxs("button",{onClick:()=>{e({video:le,audio:ge,subtitles:be,releaseGroup:ye||void 0,source:Ne||void 0,notes:Se||void 0,numberOfFiles:_e,generatedTag:Ee})},className:"flex items-center space-x-2 px-6 py-3 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors",children:[J.jsx(dw,{className:"w-4 h-4"}),J.jsx("span",{children:h("specs.generate")})]})]})]}),v&&J.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-end justify-center z-50 p-4",children:J.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl p-8 w-full max-w-3xl border border-violet-500/20 shadow-2xl mb-4 max-h-[80vh] overflow-y-auto",children:[J.jsx("h3",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-violet-400 to-purple-400 mb-6",children:h("specs.edit.modal.title")}),J.jsxs("div",{className:"space-y-6",children:[J.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[J.jsxs("div",{children:[J.jsx("label",{className:"block text-xs font-semibold text-violet-300 mb-2 uppercase tracking-wide",children:h("specs.name")}),J.jsx("input",{type:"text",value:x,onChange:e=>y(e.target.value),className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all"})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-xs font-semibold text-violet-300 mb-2 uppercase tracking-wide",children:h("specs.edit.modal.year")}),J.jsx("input",{type:"number",value:w,onChange:e=>_(parseInt(e.target.value)||0),className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all"})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-xs font-semibold text-violet-300 mb-2 uppercase tracking-wide",children:h("specs.team")}),J.jsx("input",{type:"text",value:k,onChange:e=>N(e.target.value),className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all"})]})]}),J.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-4 border border-gray-600/50",children:[J.jsxs("label",{className:"block text-sm font-bold text-green-400 mb-3 flex items-center",children:[J.jsx(kw,{className:"w-4 h-4 mr-2"}),h("specs.edit.modal.audio")]}),J.jsxs("div",{className:"space-y-3",children:[J.jsxs("div",{className:"flex gap-2 flex-wrap",children:[J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>E(!C),onMouseEnter:()=>H("CUSTOM"),onMouseLeave:()=>H(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(C?"bg-violet-600 border-violet-500 text-white shadow-lg shadow-violet-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-violet-500/50"),children:"CUSTOM"}),"CUSTOM"===B&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:q.CUSTOM})]}),J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>F(!A),onMouseEnter:()=>H("AD"),onMouseLeave:()=>H(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(A?"bg-violet-600 border-violet-500 text-white shadow-lg shadow-violet-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-violet-500/50"),children:"AD"}),"AD"===B&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:q.AD})]}),J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>I(!R),onMouseEnter:()=>H("Atmos"),onMouseLeave:()=>H(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(R?"bg-violet-600 border-violet-500 text-white shadow-lg shadow-violet-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-violet-500/50"),children:"Atmos"}),"Atmos"===B&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:q.Atmos})]})]}),ge.length>1&&ge.some(e=>"fr"===e.languageCode||"fr-ca"===e.languageCode)&&J.jsx("div",{className:"flex gap-2 flex-wrap",children:["VFF","VFI","VFQ","VF2"].map(e=>J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>D($===e?null:e),onMouseEnter:()=>H(e),onMouseLeave:()=>H(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+($===e?"bg-violet-600 border-violet-500 text-white shadow-lg shadow-violet-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-violet-500/50"),children:e}),B===e&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:q[e]})]},e))})]})]}),J.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-4 border border-gray-600/50",children:[J.jsxs("label",{className:"block text-sm font-bold text-blue-400 mb-3 flex items-center",children:[J.jsx(_w,{className:"w-4 h-4 mr-2"}),h("specs.edit.modal.video.standards")]}),J.jsxs("div",{className:"flex gap-2 flex-wrap",children:[["HDR","HDR10+","HLG"].map(e=>{const t=["HDR","HDR10+","HLG"];return J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>{T(r=>r.includes(e)?r.filter(t=>t!==e):[...r.filter(e=>!t.includes(e)),e])},onMouseEnter:()=>H(e),onMouseLeave:()=>H(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(P.includes(e)?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-blue-500/50"),children:e}),B===e&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:q[e]})]},e)}),J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>{T(e=>e.includes("DV")?e.filter(e=>"DV"!==e):[...e,"DV"])},onMouseEnter:()=>H("DV"),onMouseLeave:()=>H(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(P.includes("DV")?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-blue-500/50"),children:"DV"}),"DV"===B&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:q.DV})]}),"2160p"===le.quality&&J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>{T(e=>e.includes("4KLight")?e.filter(e=>"4KLight"!==e):[...e,"4KLight"])},onMouseEnter:()=>H("4KLight"),onMouseLeave:()=>H(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(P.includes("4KLight")?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-blue-500/50"),children:"4KLight"}),"4KLight"===B&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:q["4KLight"]})]}),"1080p/i"===le.quality&&J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>{T(e=>e.includes("HDLight")?e.filter(e=>"HDLight"!==e):[...e,"HDLight"])},onMouseEnter:()=>H("HDLight"),onMouseLeave:()=>H(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(P.includes("HDLight")?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-blue-500/50"),children:"HDLight"}),"HDLight"===B&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:q.HDLight})]}),J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>{T(e=>e.includes("10 bits")?e.filter(e=>"10 bits"!==e):[...e,"10 bits"])},onMouseEnter:()=>H("10 bits"),onMouseLeave:()=>H(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(P.includes("10 bits")?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-blue-500/50"),children:"10 bits"}),"10 bits"===B&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:q["10 bits"]})]}),["IMAX","3D"].map(e=>J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>{T(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},onMouseEnter:()=>H(e),onMouseLeave:()=>H(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(P.includes(e)?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-blue-500/50"),children:e}),B===e&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:q[e]})]},e))]})]}),J.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-4 border border-gray-600/50",children:[J.jsxs("label",{className:"block text-sm font-bold text-yellow-400 mb-3 flex items-center",children:[J.jsx(mw,{className:"w-4 h-4 mr-2"}),h("specs.edit.modal.edition")]}),J.jsx("div",{className:"flex gap-2 flex-wrap",children:["DC","EXTENDED","THEATRiCAL","UNRATED","FiNAL.CUT","REMASTERED","RESTORED"].map(e=>J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>O(M===e?null:e),onMouseEnter:()=>H(e),onMouseLeave:()=>H(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(M===e?"bg-yellow-600 border-yellow-500 text-white shadow-lg shadow-yellow-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-yellow-500/50"),children:e}),B===e&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:q[e]})]},e))})]}),J.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-4 border border-gray-600/50",children:[J.jsxs("label",{className:"block text-sm font-bold text-red-400 mb-3 flex items-center",children:[J.jsx(vw,{className:"w-4 h-4 mr-2"}),h("specs.edit.modal.special.cases")]}),J.jsx("div",{className:"flex gap-2 flex-wrap",children:["REPACK","PROPER"].map(e=>J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>{z(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},onMouseEnter:()=>H(e),onMouseLeave:()=>H(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(L.includes(e)?"bg-red-600 border-red-500 text-white shadow-lg shadow-red-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-red-500/50"),children:e}),B===e&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:q[e]})]},e))})]})]}),J.jsx("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t border-gray-700",children:J.jsx("button",{onClick:()=>b(!1),className:"px-6 py-2.5 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white rounded-lg transition-all shadow-lg hover:shadow-violet-500/50 font-medium",children:h("specs.edit.modal.close")})})]})})]})}function rk({isOpen:e,onClose:t,onSave:r,currentApiKey:n}){const{t:i}=__(),[a,s]=U.useState(n),[o,l]=U.useState(!1);if(!e)return null;return J.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:J.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl border border-gray-700",children:[J.jsxs("div",{className:"flex items-center justify-between mb-6",children:[J.jsxs("div",{className:"flex items-center",children:[J.jsx(aw,{className:"w-6 h-6 text-violet-400 mr-3"}),J.jsx("h2",{className:"text-xl font-bold text-white",children:i("api.title")})]}),J.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:J.jsx(Nw,{className:"w-5 h-5"})})]}),J.jsxs("div",{className:"mb-6",children:[J.jsx("p",{className:"text-gray-300 mb-4",children:i("api.description")}),J.jsxs("div",{className:"bg-violet-500/10 border border-violet-500/30 rounded-lg p-4 mb-4",children:[J.jsx("p",{className:"text-violet-300 text-sm",children:J.jsx("strong",{children:"Comment obtenir votre cl API :"})}),J.jsxs("ol",{className:"list-decimal list-inside text-violet-200 text-sm mt-2 space-y-1",children:[J.jsxs("li",{children:["Crez un compte sur ",J.jsx("a",{href:"https://www.themoviedb.org/",target:"_blank",rel:"noopener noreferrer",className:"text-violet-400 hover:underline",children:"TMDB"})]}),J.jsx("li",{children:"Allez dans les paramtres de votre compte"}),J.jsx("li",{children:'Cliquez sur "API"'}),J.jsx("li",{children:"Demandez une cl API (gratuite)"}),J.jsx("li",{children:"Copiez votre cl API v3"})]}),J.jsxs("a",{href:"https://www.themoviedb.org/settings/api",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-violet-400 hover:text-violet-300 text-sm mt-3 transition-colors",children:[i("api.get.key")," ",J.jsx(Vy,{className:"w-4 h-4 ml-1"})]})]})]}),J.jsxs("div",{className:"mb-6",children:[J.jsx("label",{htmlFor:"apiKey",className:"block text-sm font-medium text-gray-300 mb-2",children:i("api.key.label")}),J.jsxs("div",{className:"relative",children:[J.jsx("input",{type:o?"text":"password",id:"apiKey",value:a,onChange:e=>s(e.target.value),placeholder:i("api.key.placeholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500 pr-12"}),J.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:o?J.jsx(Ky,{className:"w-5 h-5"}):J.jsx(Wy,{className:"w-5 h-5"})})]})]}),J.jsxs("div",{className:"flex space-x-3",children:[J.jsx("button",{onClick:t,className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 px-4 rounded-lg transition-colors",children:i("nfo.cancel")}),J.jsx("button",{onClick:()=>{r(a),t()},disabled:!a.trim(),className:"flex-1 bg-violet-600 hover:bg-violet-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors",children:i("api.save")})]})]})})}const nk=()=>{const{language:e,setLanguage:t}=__();return J.jsx("button",{onClick:()=>t("fr"===e?"en":"fr"),className:"group p-2 rounded-lg hover:bg-white/10 transition-colors",title:"fr"===e?"Switch to English":"Passer en franais",children:J.jsx("div",{className:"text-lg transition-transform duration-200 group-hover:scale-110",children:"fr"===e?"":""})})},ik={async addItem(e){if(await b_.searchHistory.count()>=50){const e=await b_.searchHistory.orderBy("createdAt").first();e&&e.id&&await b_.searchHistory.delete(e.id)}const t={...e,createdAt:Date.now()};await b_.searchHistory.add(t)},getHistory:async()=>b_.searchHistory.orderBy("createdAt").reverse().toArray(),async removeItem(e){await b_.searchHistory.delete(e)},async clearHistory(){await b_.searchHistory.clear()},getItem:async e=>b_.searchHistory.get(e),getNfoHistoryItemByContent:async e=>b_.searchHistory.where("generatedNFO").equals(e).and(e=>"nfo"===e.type).first()};function ak({isOpen:e,onClose:t,onSelectItem:r,currentMode:n}){const{t:i}=__(),[a,s]=U.useState([]),[o,l]=U.useState(!1),c=async()=>{l(!0);try{const e=await ik.getHistory();s(e)}catch(e){console.error("Failed to load history:",e),s([])}finally{l(!1)}};U.useEffect(()=>{e&&c()},[e]);return e?J.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:J.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-4xl w-full max-h-[90vh] shadow-2xl border border-gray-700 flex flex-col",children:[J.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[J.jsxs("div",{className:"flex items-center",children:[J.jsx(rw,{className:"w-6 h-6 text-violet-400 mr-3"}),J.jsx("h2",{className:"text-xl font-bold text-white",children:i("history.title")})]}),J.jsxs("div",{className:"flex items-center space-x-3",children:[a.length>0&&J.jsxs("button",{onClick:async()=>{await ik.clearHistory(),s([])},className:"flex items-center space-x-2 px-3 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg transition-colors text-sm",children:[J.jsx(bw,{className:"w-4 h-4"}),J.jsx("span",{children:i("history.clear.all")})]}),J.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:J.jsx(Nw,{className:"w-5 h-5"})})]})]}),J.jsx("div",{className:"flex-1 p-6 overflow-auto",children:o?J.jsx("div",{className:"flex justify-center items-center h-full",children:J.jsx(ow,{className:"w-8 h-8 text-violet-400 animate-spin"})}):0===a.length?J.jsxs("div",{className:"text-center py-12",children:[J.jsx(rw,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),J.jsx("p",{className:"text-gray-400 text-lg",children:i("history.empty")}),J.jsx("p",{className:"text-gray-500 text-sm mt-2",children:i("history.empty.description")})]}):J.jsx("div",{className:"space-y-4",children:a.map(e=>{return"movies"===n&&("movie"===e.type||"tv"===e.type)||"books"===n&&"book"===e.type||"nfo"===n&&"nfo"===e.type?J.jsx("div",{className:"bg-gray-700/50 rounded-xl p-4 hover:bg-gray-700/70 transition-colors",children:J.jsxs("div",{className:"flex items-center space-x-4",children:[J.jsx("div",{className:"flex-shrink-0 w-16 h-24 rounded overflow-hidden bg-gray-600",children:e.poster?J.jsx("img",{src:"book"===e.type?e.poster:Cw.getImageUrl(e.poster,"w92"),alt:e.title,className:"w-full h-full object-cover"}):J.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"movie"===e.type?J.jsx(Xy,{className:"w-6 h-6 text-gray-400"}):"tv"===e.type?J.jsx(xw,{className:"w-6 h-6 text-gray-400"}):"book"===e.type?J.jsx(Py,{className:"w-6 h-6 text-gray-400"}):J.jsx(Gy,{className:"w-6 h-6 text-gray-400"})})}),J.jsxs("div",{className:"flex-1 min-w-0",children:[J.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:["movie"===e.type?J.jsx(Xy,{className:"w-4 h-4 text-emerald-400"}):"tv"===e.type?J.jsx(xw,{className:"w-4 h-4 text-emerald-400"}):"book"===e.type?J.jsx(Py,{className:"w-4 h-4 text-emerald-400"}):J.jsx(Gy,{className:"w-4 h-4 text-emerald-400"}),J.jsx("h3",{className:"text-white font-semibold truncate",children:e.title}),"nfo"!==e.type&&J.jsxs("span",{className:"text-gray-400",children:["(",e.year,")"]})]}),J.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[J.jsx(Fy,{className:"w-4 h-4 mr-1"}),J.jsx("span",{children:(a=e.createdAt,new Date(a).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]})]}),J.jsxs("div",{className:"flex items-center space-x-2",children:[J.jsx("button",{onClick:()=>{r(e),t()},className:"px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors text-sm font-medium",children:i("history.load")}),J.jsx("button",{onClick:()=>(async e=>{"number"==typeof e&&(await ik.removeItem(e),await c())})(e.id),className:"p-2 text-red-400 hover:text-red-300 transition-colors",children:J.jsx(bw,{className:"w-4 h-4"})})]})]})},e.id):null;var a})})})]})}):null}const sk=new class{constructor(){t(this,"baseUrl","https://www.googleapis.com/books/v1"),t(this,"apiKey","AIzaSyArLOPCaSBLBp8bxd8giYPjnT4ZbK5vZ0Y"),t(this,"maxResults",40),t(this,"lastRequestTime",0),t(this,"minRequestInterval",100)}async searchBooks(e,t=0){const r=Date.now()-this.lastRequestTime;r<this.minRequestInterval&&await new Promise(e=>setTimeout(e,this.minRequestInterval-r)),this.lastRequestTime=Date.now();let n=`${this.baseUrl}/volumes?q=${encodeURIComponent(e)}&startIndex=${t}&maxResults=${this.maxResults}&printType=books&orderBy=relevance`;this.apiKey&&(n+=`&key=${this.apiKey}`);const i=await fetch(n);if(!i.ok){if(429===i.status)throw new Error("Trop de requtes. Veuillez patienter quelques secondes.");throw new Error(`Google Books API error: ${i.status}`)}const a=await i.json();return a.items&&(a.items=a.items.filter(e=>{var t;return null==(t=e.volumeInfo)?void 0:t.title}).map(e=>({...e,volumeInfo:{...e.volumeInfo,imageLinks:e.volumeInfo.imageLinks?{...e.volumeInfo.imageLinks,thumbnail:this.getBestImageUrl(e.volumeInfo.imageLinks)||e.volumeInfo.imageLinks.thumbnail}:void 0}}))),a}async getVolumeDetails(e){var t;let r=`${this.baseUrl}/volumes/${e}`;this.apiKey&&(r+=`?key=${this.apiKey}`);const n=await fetch(r);if(!n.ok)throw new Error(`Google Books API error: ${n.status}`);const i=await n.json();if(null==(t=i.volumeInfo)?void 0:t.imageLinks){const e=this.getBestImageUrl(i.volumeInfo.imageLinks);e&&(i.volumeInfo.imageLinks.thumbnail=e)}return i}getHighQualityImage(e){if(!e)return null;const t=["extraLarge","large","medium","small","thumbnail","smallThumbnail"];for(const r of t)if(e[r])return this.normalizeImageUrl(e[r]);return null}getBestImageUrl(e){const t=["extraLarge","large","medium","small","thumbnail","smallThumbnail"];for(const r of t){const t=e[r];if(t)return this.normalizeImageUrl(t)}return null}normalizeImageUrl(e){let t=e.replace("http://","https://");return t.includes("books.google.com")&&(t=t.replace(/[&?]zoom=\d+/,""),t.includes("&w=")||t.includes("?w=")?t=t.replace(/[&?]w=\d+/,"&w=500"):t+=t.includes("?")?"&w=500":"?w=500",t+="&zoom=0.jpg"),t}extractISBN(e){if(!e)return null;const t=e.find(e=>"ISBN_13"===e.type),r=e.find(e=>"ISBN_10"===e.type),n=e.find(e=>"OTHER"===e.type);return(null==t?void 0:t.identifier)||(null==r?void 0:r.identifier)||(null==n?void 0:n.identifier)||null}formatISBN(e){return e?e.filter(e=>"ISBN_10"===e.type||"ISBN_13"===e.type).map(e=>e.identifier):[]}},ok={},lk=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/fichegen/"+e}(e))in ok)return;ok[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,r&&i.setAttribute("nonce",r),document.head.appendChild(i),t?new Promise((t,r)=>{i.addEventListener("load",t),i.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};const ck=new class{async extractEpubMetadata(e){var t,r,n,a,s,o,l;try{const c=await i.loadAsync(e),u=await this.findOpfFile(c);if(!u)return{format:"EPUB"};const d=await(null==(t=c.file(u))?void 0:t.async("text"));if(!d)return{format:"EPUB"};const h=(new DOMParser).parseFromString(d,"text/xml"),p={format:"EPUB"},f=h.querySelector("title, dc\\:title");f&&(p.title=null==(r=f.textContent)?void 0:r.trim());const m=h.querySelectorAll("creator, dc\\:creator");m.length>0&&(p.authors=Array.from(m).map(e=>{var t;return(null==(t=e.textContent)?void 0:t.trim())||""}).filter(Boolean),p.author=p.authors[0]);const g=h.querySelector("publisher, dc\\:publisher");g&&(p.publisher=null==(n=g.textContent)?void 0:n.trim());const v=h.querySelectorAll("identifier, dc\\:identifier");for(const e of Array.from(v)){const t=(null==(a=e.textContent)?void 0:a.trim())||"";if(t.includes("ISBN")||/^\d{10}(\d{3})?$/.test(t.replace(/-/g,""))){p.isbn=t.replace("urn:isbn:","");break}}const b=h.querySelector("language, dc\\:language");b&&(p.language=null==(s=b.textContent)?void 0:s.trim());const x=h.querySelector("date, dc\\:date");x&&(p.publishedDate=null==(o=x.textContent)?void 0:o.trim());const y=h.querySelector("description, dc\\:description");return y&&(p.description=null==(l=y.textContent)?void 0:l.trim()),p}catch(c){return console.error("Error extracting EPUB metadata:",c),{format:"EPUB"}}}async extractPdfMetadata(e){try{const t=await lk(()=>import("./pdf-worker-1769509180204.js"),[]),r=await lk(()=>import("./pdf.worker.min-1769509180204.js"),[]);t.GlobalWorkerOptions.workerSrc=r.default;const n=await e.arrayBuffer(),i=await t.getDocument({data:n}).promise,a={format:"PDF",pageCount:i.numPages},s=await i.getMetadata();if(s.info){const e=s.info;a.title=e.Title||void 0,a.author=e.Author||void 0,a.author&&(a.authors=[a.author]),a.publisher=e.Producer||void 0}return a}catch(t){return console.error("Error extracting PDF metadata:",t),{format:"PDF"}}}async extractFb2Metadata(e){var t,r,n,i,a,s;try{const o=await e.text(),l=(new DOMParser).parseFromString(o,"text/xml"),c={format:"FB2"},u=l.querySelector("book-title");u&&(c.title=null==(t=u.textContent)?void 0:t.trim());const d=l.querySelectorAll("author"),h=[];d.forEach(e=>{var t,r,n,i;const a=`${(null==(r=null==(t=e.querySelector("first-name"))?void 0:t.textContent)?void 0:r.trim())||""} ${(null==(i=null==(n=e.querySelector("last-name"))?void 0:n.textContent)?void 0:i.trim())||""}`.trim();a&&h.push(a)}),h.length>0&&(c.authors=h,c.author=h[0]);const p=l.querySelector("publisher");p&&(c.publisher=null==(r=p.textContent)?void 0:r.trim());const f=l.querySelector("isbn");f&&(c.isbn=null==(n=f.textContent)?void 0:n.trim());const m=l.querySelector("lang");m&&(c.language=null==(i=m.textContent)?void 0:i.trim());const g=l.querySelector("date");g&&(c.publishedDate=null==(a=g.textContent)?void 0:a.trim());const v=l.querySelector("annotation");return v&&(c.description=null==(s=v.textContent)?void 0:s.trim()),c}catch(o){return console.error("Error extracting FB2 metadata:",o),{format:"FB2"}}}async extractCbzMetadata(e){var t,r,n,a,s;try{const o=await i.loadAsync(e),l={format:"CBZ"},c=Object.keys(o.files).filter(e=>/\.(jpg|jpeg|png|gif|webp)$/i.test(e)&&!o.files[e].dir);l.pageCount=c.length;const u=o.file("ComicInfo.xml");if(u){const e=await u.async("text"),i=(new DOMParser).parseFromString(e,"text/xml"),o=i.querySelector("Title");o&&(l.title=null==(t=o.textContent)?void 0:t.trim());const c=i.querySelector("Writer");c&&(l.author=null==(r=c.textContent)?void 0:r.trim(),l.authors=[l.author]);const d=i.querySelector("Publisher");d&&(l.publisher=null==(n=d.textContent)?void 0:n.trim());const h=i.querySelector("Year");h&&(l.publishedDate=null==(a=h.textContent)?void 0:a.trim());const p=i.querySelector("Summary");p&&(l.description=null==(s=p.textContent)?void 0:s.trim())}return l}catch(o){return console.error("Error extracting CBZ metadata:",o),{format:"CBZ",pageCount:0}}}async extractCbrMetadata(e){return{format:"CBR",pageCount:void 0}}async extractMetadata(e){const t=e.name.toLowerCase().split(".").pop();switch(t){case"epub":return this.extractEpubMetadata(e);case"pdf":return this.extractPdfMetadata(e);case"fb2":return this.extractFb2Metadata(e);case"cbz":return this.extractCbzMetadata(e);case"cbr":return this.extractCbrMetadata(e);default:return{format:(null==t?void 0:t.toUpperCase())||"UNKNOWN"}}}async findOpfFile(e){const t=e.file("META-INF/container.xml");if(t){const e=await t.async("text"),r=(new DOMParser).parseFromString(e,"text/xml").querySelector("rootfile");if(r)return r.getAttribute("full-path")}return Object.keys(e.files).filter(e=>e.endsWith(".opf"))[0]||null}},uk=({onBookSelect:e,onResultSelect:t,onContinueWithoutSelection:r})=>{var n,i,a,s,o,l;const{t:c}=(null==__?void 0:__())??{t:e=>e},[u,d]=U.useState(""),[h,p]=U.useState([]),[f,m]=U.useState(!1),[g,v]=U.useState(0),[b,x]=U.useState(0),[y,w]=U.useState(!1),[_,k]=U.useState(!1),[N,j]=U.useState(!1),[S,C]=U.useState(null),E=U.useRef(null),[$,D]=U.useState(0),P=U.useRef(null),T=U.useRef(null),A=U.useRef(null),F=U.useCallback(async(e,t=0,r=!1)=>{if(!e.trim())return p([]),k(!1),v(0),void w(!1);m(!0);try{const n=await sk.searchBooks(e,t),i=n.items||[];p(e=>r?[...e,...i]:i),v(n.totalItems||0),x(t),w(t+i.length<(n.totalItems||0)),k(!0)}catch(n){console.error("Erreur lors de la recherche:",n);(n instanceof Error?n.message:"Erreur inconnue").includes("Trop de requtes")&&alert(c("ebook.rate.limit")||"Trop de requtes. Veuillez patienter quelques secondes avant de rechercher  nouveau."),p([]),v(0),w(!1),k(!0)}finally{m(!1)}},[]),R=(e,t)=>e?e.length<=t?e:e.substring(0,t)+"...":"",I=e=>{if(!e)return null;if(sk.getHighQualityImage){const t=sk.getHighQualityImage(e);if(t)return t}return e.thumbnail||e.smallThumbnail||null},M=e=>{let t=e.replace(/\.[^/.]+$/,"");return t=t.replace(/\[.*?\]/g,""),t=t.replace(/\(.*?\)/g,""),t=t.replace(/\b(ENGLISH|FRENCH|SPANISH|GERMAN|ITALIAN)\b/gi,""),t=t.replace(/\b(epub|mobi|azw|azw3|pdf|fb2|cbz|cbr)\b/gi,""),t=t.replace(/\s*-\s*$/,"").replace(/\s+/g," ").trim(),t},O=e=>[".ds_store","thumbs.db","desktop.ini",".localized","$recycle.bin"].includes(e.toLowerCase()),L=async e=>{if(e.isFile)try{const t=await new Promise((t,r)=>e.file(t,r));if(t.size>0&&/\.[^.]+$/.test(t.name)&&!O(t.name)){return{ebookFiles:/\.(epub|mobi|azw|azw3|pdf|fb2|cbz|cbr)$/i.test(t.name)?[t]:[],allFiles:[t],fileCount:1}}return{ebookFiles:[],allFiles:[],fileCount:0}}catch(t){return console.warn(`Impossible de lire le fichier: ${e.fullPath}`,t),{ebookFiles:[],allFiles:[],fileCount:0}}if(e.isDirectory)try{const t=e.createReader(),r=await new Promise((e,r)=>{const n=[],i=()=>{t.readEntries(t=>{0===t.length?e(n):(n.push(...t),i())},r)};i()});return(await Promise.all(r.map(e=>L(e)))).reduce((e,t)=>({ebookFiles:e.ebookFiles.concat(t.ebookFiles),allFiles:e.allFiles.concat(t.allFiles),fileCount:e.fileCount+t.fileCount}),{ebookFiles:[],allFiles:[],fileCount:0})}catch(t){console.warn(`Impossible de lire le dossier: ${e.fullPath}`,t)}return{ebookFiles:[],allFiles:[],fileCount:0}},z=async e=>{e.target.files&&e.target.files.length>0&&await(async e=>{var t;const r=[".epub",".mobi",".azw",".azw3",".pdf",".fb2",".cbz",".cbr"];D(0);let n="";const i=Array.from(e)[0];i&&"webkitRelativePath"in i&&(n=i.webkitRelativePath.split("/")[0]);const a=Array.from(e).filter(e=>{if(0===e.size)return!1;if("directory"===e.type)return!1;if(O(e.name))return!1;const t="webkitRelativePath"in e?e.webkitRelativePath:void 0;if(t){const e=t.split("/"),r=e[e.length-1];if(!/\.[^.]+$/.test(r))return!1}return!0}),s=a.filter(e=>r.some(t=>e.name.toLowerCase().endsWith(t)));D(a.length);const o=a.reduce((e,t)=>e+t.size,0);let l,c=0;if(s.length>0)try{l=await ck.extractMetadata(s[0]);for(const e of s)try{const t=await ck.extractMetadata(e);t.pageCount&&(c+=t.pageCount)}catch(h){console.error(`Error extracting metadata from ${e.name}:`,h)}c>0&&l&&(l.pageCount=c)}catch(h){console.error("Error extracting metadata:",h)}C({ebookCount:s.length,totalFiles:a.length,totalSize:o,metadata:l});let u=null;if(s.length>0){const e=n||s[0].name.replace(/\.[^/.]+$/,"");u={ebookCount:s.length,pageCount:c,format:(null==(t=s[0].name.split(".").pop())?void 0:t.toUpperCase())||"UNKNOWN",totalSize:o,fileName:e,totalFiles:a.length,ebookFiles:s.map(e=>e.name)},E.current=u}if(D(0),s.length>0){let e="";e=(null==l?void 0:l.isbn)?`isbn:${l.isbn}`:s.length>1&&n?M(n):(null==l?void 0:l.title)&&(null==l?void 0:l.author)?`${l.title} ${l.author}`:M(n||s[0].name),d(e),F(e)}})(e.target.files)};return U.useEffect(()=>()=>{P.current&&clearTimeout(P.current)},[]),J.jsxs("div",{className:"relative w-full max-w-2xl mx-auto search-container space-y-6",children:[$>0&&J.jsx("div",{className:"mt-2 p-3 border rounded-lg animate-pulse bg-blue-500/10 border-blue-500/20",children:J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx(sw,{className:"h-4 w-4 shrink-0 animate-spin text-blue-500","aria-hidden":"true"}),J.jsxs("p",{className:"text-xs text-blue-400",children:["Scan en cours... ",$," fichier",$>1?"s":""," dtect",$>1?"s":""]})]})}),S&&!$&&J.jsx("div",{className:"mt-2 p-3 border rounded-lg animate-in fade-in bg-green-500/10 border-green-500/20",children:J.jsxs("div",{className:"flex items-start gap-2",children:[J.jsx(Iy,{className:"h-4 w-4 shrink-0 mt-0.5 text-green-500","aria-hidden":"true"}),J.jsxs("div",{className:"flex-1 space-y-1",children:[J.jsx("p",{className:"text-xs font-semibold text-green-500",children:c("ebook.scan.success")}),J.jsx("p",{className:"text-xs text-gray-300",children:c("ebook.scan.characteristics")}),(null==(n=S.metadata)?void 0:n.title)&&J.jsxs("p",{className:"text-xs text-gray-400",children:[" ",c("ebook.scan.title"),": ",J.jsx("span",{className:"text-gray-300",children:S.metadata.title})]}),(null==(i=S.metadata)?void 0:i.author)&&J.jsxs("p",{className:"text-xs text-gray-400",children:[" ",c("ebook.scan.author"),": ",J.jsx("span",{className:"text-gray-300",children:S.metadata.author})]}),J.jsxs("p",{className:"text-xs text-gray-400",children:[" ",c("ebook.scan.ebook.count"),": ",J.jsx("span",{className:"text-gray-300",children:S.ebookCount})]}),(null==(a=S.metadata)?void 0:a.pageCount)&&J.jsxs("p",{className:"text-xs text-gray-400",children:[" ",c("ebook.scan.page.count"),": ",J.jsx("span",{className:"text-gray-300",children:S.metadata.pageCount})]}),(null==(s=S.metadata)?void 0:s.format)&&J.jsxs("p",{className:"text-xs text-gray-400",children:[" ",c("ebook.scan.format"),": ",J.jsx("span",{className:"text-gray-300",children:S.metadata.format})]}),(null==(o=S.metadata)?void 0:o.isbn)&&J.jsxs("p",{className:"text-xs text-gray-400",children:[" ",c("ebook.scan.isbn"),": ",J.jsx("span",{className:"text-gray-300",children:S.metadata.isbn})]}),(null==(l=S.metadata)?void 0:l.language)&&J.jsxs("p",{className:"text-xs text-gray-400",children:[" ",c("ebook.scan.language"),": ",J.jsx("span",{className:"text-gray-300",children:(e=>{if(!e)return"";return{fr:"Franais",fre:"Franais",fra:"Franais",french:"Franais",en:"Anglais",eng:"Anglais",english:"Anglais",es:"Espagnol",spa:"Espagnol",spanish:"Espagnol",de:"Allemand",deu:"Allemand",ger:"Allemand",german:"Allemand",it:"Italien",ita:"Italien",italian:"Italien",pt:"Portugais",por:"Portugais",portuguese:"Portugais",ru:"Russe",rus:"Russe",russian:"Russe",zh:"Chinois",chi:"Chinois",zho:"Chinois",chinese:"Chinois",ja:"Japonais",jpn:"Japonais",japanese:"Japonais",ar:"Arabe",ara:"Arabe",arabic:"Arabe"}[e.toLowerCase().trim()]||e})(S.metadata.language)})]}),S.totalFiles>S.ebookCount&&J.jsxs("p",{className:"text-xs text-gray-400",children:[" ",c("ebook.scan.total.files"),": ",J.jsx("span",{className:"text-gray-300",children:S.totalFiles})]}),J.jsxs("p",{className:"text-xs text-gray-400",children:[" ",c("ebook.scan.total.size"),": ",J.jsx("span",{className:"text-gray-300",children:(B=S.totalSize,B<1024?B+" B":B<1048576?(B/1024).toFixed(2)+" KB":B<1073741824?(B/1048576).toFixed(2)+" MB":(B/1073741824).toFixed(2)+" GB")})]})]})]})}),J.jsxs("div",{className:"relative group",children:[J.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10",children:J.jsx(pw,{className:"w-5 h-5 text-gray-400 group-focus-within:text-emerald-300"})}),J.jsx("input",{type:"text",value:u,onChange:e=>{return t=e.target.value,d(t),P.current&&clearTimeout(P.current),void(P.current=setTimeout(()=>{F(t)},800));var t},placeholder:c("ebook.search.placeholder")||"Rechercher un livre par titre, auteur ou ISBN...",className:"w-full pl-12 pr-10 py-4 text-lg bg-gray-800/60 backdrop-blur-sm border-2 border-gray-700/50 rounded-2xl text-white placeholder-gray-400 focus:outline-none focus:border-emerald-500/70 focus:bg-gray-800/80 transition-all duration-300"}),u&&J.jsx("button",{onClick:()=>{d(""),p([]),k(!1),C(null)},className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-white transition-colors z-10","aria-label":"Rinitialiser",children:J.jsx(Nw,{className:"w-5 h-5"})}),f&&J.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:J.jsx(sw,{className:"w-5 h-5 text-emerald-400 animate-spin"})})]}),!_&&J.jsxs("div",{onDragOver:e=>{e.preventDefault(),j(!0)},onDragLeave:e=>{e.preventDefault(),j(!1)},onDrop:async e=>{var t;e.preventDefault(),j(!1),D(0);try{const n=[],i=[];let a=null;if(e.dataTransfer.items&&e.dataTransfer.items.length>0){const t=Array.from(e.dataTransfer.items);for(const e of t)if("file"===e.kind){const t="webkitGetAsEntry"in e?e.webkitGetAsEntry():null;if(t)if(t.isDirectory){a||(a=t.name);const e=await L(t);n.push(...e.ebookFiles),i.push(...e.allFiles)}else{const t=e.getAsFile();if(t&&t.size>0){i.push(t),D(e=>e+1);/\.(epub|mobi|azw|azw3|pdf|fb2|cbz|cbr)$/i.test(t.name)&&n.push(t)}}}}const s=i.filter(e=>e.size>0),o=n.filter(e=>e.size>0);if(D(s.length),0===o.length)return void D(0);const l=s.reduce((e,t)=>e+t.size,0);let c,u=0;if(o.length>0)try{c=await ck.extractMetadata(o[0]);for(const e of o)try{const t=await ck.extractMetadata(e);t.pageCount&&(u+=t.pageCount)}catch(r){console.error(`Error extracting metadata from ${e.name}:`,r)}u>0&&c&&(c.pageCount=u)}catch(r){console.error("Error extracting metadata:",r)}if(C({ebookCount:o.length,totalFiles:s.length,totalSize:l,metadata:c}),o.length>0){const e=a||o[0].name.replace(/\.[^/.]+$/,""),r={ebookCount:o.length,pageCount:u,format:(null==(t=o[0].name.split(".").pop())?void 0:t.toUpperCase())||"UNKNOWN",totalSize:l,fileName:e,totalFiles:s.length,ebookFiles:o.map(e=>e.name)};E.current=r}D(0);let h="";h=(null==c?void 0:c.isbn)?`isbn:${c.isbn}`:o.length>1&&a?M(a):(null==c?void 0:c.title)&&(null==c?void 0:c.author)?`${c.title} ${c.author}`:M(a||o[0].name),d(h),F(h)}catch(r){console.error("Erreur lors du traitement du drop:",r)}},className:"relative bg-gradient-to-br from-gray-800/80 to-gray-900/80 backdrop-blur-sm border-2 border-dashed rounded-2xl p-12 transition-all duration-300 "+(N?"border-emerald-500/70 bg-emerald-500/10":"border-gray-600/50 hover:border-gray-500/70"),children:[J.jsx("input",{ref:T,type:"file",multiple:!0,accept:".epub,.mobi,.azw,.azw3,.pdf,.fb2,.cbz,.cbr",onChange:z,className:"hidden"}),J.jsx("input",{ref:A,type:"file",webkitdirectory:"",directory:"",multiple:!0,onChange:z,className:"hidden"}),J.jsxs("div",{className:"text-center",children:[J.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-emerald-500/20 to-teal-500/20 rounded-full mb-6",children:J.jsx(Py,{className:"w-10 h-10 text-emerald-400"})}),J.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:c("ebook.dropzone.title")}),J.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[J.jsxs("button",{onClick:()=>{var e;return null==(e=T.current)?void 0:e.click()},className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-500 hover:to-teal-500 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-emerald-500/25 flex items-center space-x-2",children:[J.jsx(yw,{className:"w-5 h-5"}),J.jsx("span",{children:c("ebook.dropzone.select.files")})]}),J.jsxs("button",{onClick:()=>{var e;return null==(e=A.current)?void 0:e.click()},className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-green-500/25 flex items-center space-x-2",children:[J.jsx(Jy,{className:"w-5 h-5"}),J.jsx("span",{children:c("ebook.dropzone.select.folder")})]})]}),J.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-2 text-xs text-gray-500",children:[J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"EPUB"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"MOBI"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"AZW"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"PDF"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"FB2"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"CBZ"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"CBR"})]})]})]}),_&&J.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800/95 backdrop-blur-md border border-gray-700/50 rounded-2xl shadow-2xl z-50 max-h-[50vh] overflow-y-auto",children:[g>0&&J.jsxs("div",{className:"px-4 py-3 border-b border-gray-700/50 flex items-center justify-between",children:[J.jsxs("span",{className:"text-sm text-emerald-300",children:[J.jsx("strong",{children:g.toLocaleString()})," ",c("ebook.search.results")||"rsultats"]}),J.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-white transition-colors","aria-label":"Fermer les rsultats",children:J.jsx(Oy,{className:"w-4 h-4"})})]}),0===h.length&&!f&&u&&J.jsxs("div",{className:"px-4 py-8 text-center",children:[J.jsx(Py,{className:"w-12 h-12 text-gray-500 mx-auto mb-3"}),J.jsx("p",{className:"text-gray-400 mb-3",children:c("search.no.results")||"Aucun rsultat"}),E.current&&r&&J.jsx("button",{onClick:()=>{const e=E.current;e&&r&&(r(e),k(!1),d(""),p([]))},className:"text-xs text-gray-400 hover:text-gray-300 underline transition-colors",children:c("ebook.continue.without.selection")||"Continuer sans slectionner (ouvrage non rfrenc)"})]}),f&&0===h.length&&J.jsxs("div",{className:"px-4 py-8 text-center",children:[J.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-emerald-500 border-t-transparent mx-auto mb-3"}),J.jsx("p",{className:"text-emerald-300",children:c("ebook.search.loading")||"Chargement..."})]}),h.map(r=>{return J.jsx("div",{onClick:()=>(r=>{const n=E.current;null==e||e(r,n||void 0),null==t||t(r,n||void 0),k(!1),d(""),p([])})(r),className:"px-4 py-4 border-b border-gray-700/30 hover:bg-gray-700/30 cursor-pointer transition-colors group last:border-b-0",children:J.jsxs("div",{className:"flex space-x-4",children:[J.jsx("div",{className:"flex-shrink-0",children:I(r.volumeInfo.imageLinks)?J.jsx("img",{src:I(r.volumeInfo.imageLinks),alt:r.volumeInfo.title,className:"w-16 h-24 object-cover rounded-lg shadow-lg group-hover:shadow-xl transition-shadow",loading:"lazy"}):J.jsx("div",{className:"w-16 h-24 bg-gradient-to-br from-emerald-500/20 to-teal-600/20 rounded-lg flex items-center justify-center border border-emerald-400/20",children:J.jsx(Py,{className:"w-6 h-6 text-emerald-400"})})}),J.jsxs("div",{className:"flex-1 min-w-0",children:[J.jsx("h3",{className:"text-white font-semibold text-lg leading-tight mb-1 group-hover:text-emerald-300 transition-colors",children:R(r.volumeInfo.title||"",60)}),r.volumeInfo.subtitle&&J.jsx("p",{className:"text-gray-400 text-sm mb-2 leading-tight",children:R(r.volumeInfo.subtitle,80)}),J.jsxs("div",{className:"space-y-1",children:[r.volumeInfo.authors&&J.jsxs("div",{className:"flex items-center text-sm text-gray-300",children:[J.jsx(ww,{className:"w-3 h-3 mr-2 text-emerald-400 flex-shrink-0"}),J.jsx("span",{children:(n=r.volumeInfo.authors,n&&0!==n.length?1===n.length?n[0]:2===n.length?`${n[0]} & ${n[1]}`:`${n[0]} +${n.length-1} ${c("ebook.more")||"autres"}`:c("ebook.unknown.author")||"Auteur inconnu")})]}),r.volumeInfo.publishedDate&&J.jsxs("div",{className:"flex items-center text-sm text-gray-300",children:[J.jsx(Fy,{className:"w-3 h-3 mr-2 text-emerald-400 flex-shrink-0"}),J.jsx("span",{children:new Date(r.volumeInfo.publishedDate).getFullYear()})]}),r.volumeInfo.categories&&r.volumeInfo.categories.length>0&&J.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[r.volumeInfo.categories.slice(0,2).map((e,t)=>J.jsx("span",{className:"px-2 py-1 bg-emerald-500/10 text-emerald-300 text-xs rounded-full border border-emerald-400/20",children:e},t)),r.volumeInfo.categories.length>2&&J.jsxs("span",{className:"text-gray-400 text-xs px-1 py-1",children:["+",r.volumeInfo.categories.length-2," ",c("ebook.showMore")||"de plus"]})]})]})]})]})},r.id);var n}),y&&!f&&h.length>0&&J.jsx("div",{className:"px-4 py-4 text-center border-t border-gray-700/50",children:J.jsx("button",{onClick:()=>{F(u,b+40,!0)},className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors",children:c("ebook.search.loadMore")||"Charger plus"})}),y&&f&&h.length>0&&J.jsx("div",{className:"px-4 py-4 text-center border-t border-gray-700/50",children:J.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-emerald-500 border-t-transparent mx-auto"})})]})]});var B},dk={Fiction:"Fiction","Literary Fiction":"Fiction littraire","Historical Fiction":"Fiction historique","Science Fiction":"Science-fiction",Fantasy:"Fantasy",Mystery:"Mystre",Thriller:"Thriller",Romance:"Romance",Horror:"Horreur",Adventure:"Aventure",Crime:"Policier",Detective:"Policier",Suspense:"Suspense",Western:"Western","Young Adult Fiction":"Fiction jeune adulte","Children's Fiction":"Fiction pour enfants",Biography:"Biographie",Autobiography:"Autobiographie",Memoir:"Mmoires",History:"Histoire",Philosophy:"Philosophie",Psychology:"Psychologie",Religion:"Religion",Spirituality:"Spiritualit","Self-Help":"Dveloppement personnel",Health:"Sant",Fitness:"Fitness",Cooking:"Cuisine",Travel:"Voyage",Nature:"Nature",Science:"Science",Technology:"Technologie",Medicine:"Mdecine",Law:"Droit",Politics:"Politique",Economics:"conomie",Business:"Business",Management:"Management",Education:"ducation",Art:"Art",Music:"Musique",Photography:"Photographie",Sports:"Sport",Games:"Jeux",Humor:"Humour",Comics:"Bande dessine","Graphic Novels":"Roman graphique",Poetry:"Posie",Drama:"Thtre",Essays:"Essais",Reference:"Rfrence",Dictionary:"Dictionnaire",Encyclopedia:"Encyclopdie",Textbook:"Manuel scolaire","Study Guide":"Guide d'tude","Language Arts":"Arts du langage",Literature:"Littrature",Classics:"Classiques","Computer Science":"Informatique",Programming:"Programmation","Web Development":"Dveloppement web",Database:"Base de donnes",Networking:"Rseaux",Security:"Scurit","Artificial Intelligence":"Intelligence artificielle","Machine Learning":"Apprentissage automatique","Juvenile Fiction":"Fiction jeunesse","Juvenile Nonfiction":"Documentaire jeunesse","Children's Books":"Livres pour enfants","Picture Books":"Albums illustrs","Early Readers":"Premiers lecteurs","True Crime":"Faits divers","Current Events":"Actualits","Social Science":"Sciences sociales",Anthropology:"Anthropologie",Sociology:"Sociologie",Geography:"Gographie","Environmental Science":"Sciences environnementales",Mathematics:"Mathmatiques",Physics:"Physique",Chemistry:"Chimie",Biology:"Biologie",Astronomy:"Astronomie",Geology:"Gologie",Architecture:"Architecture",Design:"Design",Fashion:"Mode",Gardening:"Jardinage",Crafts:"Artisanat",Hobbies:"Loisirs",Pets:"Animaux de compagnie",Family:"Famille",Parenting:"Parentalit",Relationships:"Relations","Personal Growth":"Dveloppement personnel",Meditation:"Mditation",Yoga:"Yoga","Alternative Medicine":"Mdecine alternative",Diet:"Rgime",Nutrition:"Nutrition",Wine:"Vin",Beer:"Bire",Cocktails:"Cocktails"};function hk(e){const t=e.trim();if(dk[t])return dk[t];for(const[r,n]of Object.entries(dk))if(t.toLowerCase().includes(r.toLowerCase())||r.toLowerCase().includes(t.toLowerCase()))return n;return t}const pk=new class{generateBBCode(e,t=1){return 1===t?this.generateBBCodeStyle1(e):2===t?this.generateBBCodeStyle2(e):this.generateBBCodeStyle3(e)}generateBBCodeStyle1(e){var t,r,n;const{book:i,specs:a,coverImage:s}=e,o=a.title||i.volumeInfo.title||"Titre inconnu",l=this.formatAuthors(a.authors||i.volumeInfo.authors),c=a.publisher||i.volumeInfo.publisher||"",u=a.publishedDate||i.volumeInfo.publishedDate||"",d=a.year||(u?new Date(u).getFullYear():""),h=this.stripHtml(a.description||i.volumeInfo.description||""),p=a.mainCategory||hk((null==(t=i.volumeInfo.categories)?void 0:t[0])||"")||"",f=a.isbn||this.getISBN(a.industryIdentifiers||i.volumeInfo.industryIdentifiers)||"",m=a.pageCount||i.volumeInfo.pageCount||"",g=i.volumeInfo.infoLink||"",v=a.source||"",b=a.fileName||a.customTag||"",x=a.notes||"",y=(a.language||i.volumeInfo.language||"").toUpperCase(),w=a.ebookCount||(null==(r=a.ebookFiles)?void 0:r.length)||a.numberOfFiles||"1",_=(null==(n=a.ebookFiles)?void 0:n.join("\n"))||"";let k=`[center][font=Verdana][size=29][b][color=#1e84cc]${o}\n\n${l}[/color][/b][/size]\n\n[img]${s}[/img]\n\n[size=13]\n[b][color=#1e84cc]Album :[/color][/b] ${o}\n[b][color=#1e84cc]Artiste :[/color][/b] ${l}`;return c&&(k+=`\n[b][color=#1e84cc]Editeur :[/color][/b] ${c}`),f&&(k+=`\n[b][color=#1e84cc]ISBN :[/color][/b] ${f}`),k+="\n\n  ",p&&(k+=`\n\n[b][color=#1e84cc]Genre :[/color][/b] ${p}`),d&&(k+=`\n[b][color=#1e84cc]Date Sortie :[/color][/b] ${d}`),k+=`\n[b][color=#1e84cc]Nombre d'ebook :[/color][/b] ${w}`,m&&(k+=`\n[b][color=#1e84cc]Nombres de page :[/color][/b] ${m}`),k+=`\n[/size]\n\n[img]https://i.imgur.com/W3pvv6q.png[/img]\n\n[size=13]${h}\n\n[url=${g}][img]https://i.imgur.com/RUjTyXC.png[/img][/url]`,_&&(k+=`\n\n[img]https://i.imgur.com/AjPiM0g.png[/img]\n\n${_}`),k+="\n\n[img]https://i.imgur.com/KMZsqZn.png[/img]",v&&(k+=`\n[b][color=#1e84cc]Source : [/color][/b] ${v}`),y&&(k+=`\n[b][color=#1e84cc]Langue: [/color][/b] ${y}`),a.quality&&(k+=`\n[b][color=#1e84cc]Qualit : [/color][/b] ${a.quality}`),a.format&&(k+=`\n[b][color=#1e84cc]Format : [/color][/b] ${a.format}`),k+="\n\n[img]https://i.imgur.com/KFsABlN.png[/img]",b&&(k+=`\n[b][color=#1e84cc]Nom de la release : [/color][/b]  ${b}`),a.numberOfFiles&&(k+=`\n[b][color=#1e84cc]Nombre de fichiers : [/color][/b] ${a.numberOfFiles}`),a.fileSize&&(k+=`\n[b][color=#1e84cc]Poids Total :[/color][/b] ${a.fileSize.value} ${a.fileSize.unit}`),x&&(k+=`\n\n[b][color=#1e84cc]Notes :[/color][/b] ${x}`),k+="\n\n[/size]\n[/font][/center]",k}generateBBCodeStyle2(e){var t,r,n;const{book:i,specs:a,coverImage:s}=e,o=a.title||i.volumeInfo.title||"Titre inconnu",l=this.formatAuthors(a.authors||i.volumeInfo.authors),c=a.publisher||i.volumeInfo.publisher||"",u=a.publishedDate||i.volumeInfo.publishedDate||"",d=a.year||(u?new Date(u).getFullYear():""),h=a.mainCategory||hk((null==(t=i.volumeInfo.categories)?void 0:t[0])||"")||"",p=a.isbn||this.getISBN(a.industryIdentifiers||i.volumeInfo.industryIdentifiers)||"",f=a.pageCount||i.volumeInfo.pageCount||"",m=a.source||"",g=a.fileName||a.customTag||"",v=a.notes||"",b=(a.language||i.volumeInfo.language||"").toUpperCase(),x=a.ebookCount||(null==(r=a.ebookFiles)?void 0:r.length)||a.numberOfFiles||"1",y=(null==(n=a.ebookFiles)?void 0:n.join("\n"))||"",w=this.stripHtml(a.description||i.volumeInfo.description||"");let _=`[center][font=Comfortaa][size=29][b][color=#1e84cc]${o}\n\n${l}[/color][/b]\n[/size]\n\n[img]${s}[/img]\n\n\n[size=13][b][color=#1e84cc]Titre :[/color][/b] ${o}\n[b][color=#1e84cc]Auteur :[/color][/b] ${l}`;return c&&(_+=`\n[b][color=#1e84cc]Editeur :[/color][/b] ${c}`),p&&(_+=`\n[b][color=#1e84cc]ISBN:[/color][/b] ${p}`),_+=" [/size]\n\n[size=18]  [/size]",h&&(_+=`\n\n[size=13][b][color=#1e84cc]Genre :[/color][/b] ${h}`),d&&(_+=`\n[b][color=#1e84cc]Date Sortie :[/color][/b] ${d}`),_+=`\n[b][color=#1e84cc]Nombre d'ebook :[/color][/b] ${x}`,f&&(_+=`\n[b][color=#1e84cc]Nombres de page :[/color][/b] ${f}`),w&&(_+=`[/size]\n\n[size=13]${w}`),_+=y?`[/size]\n\n[size=13]Fichier(s) : \n${y}\n[/size]\n`:"[/size]\n\n",_+="\n[size=13]",m&&(_+=`[b][color=#1e84cc]Source : [/color][/b] ${m}\n`),b&&(_+=`[b][color=#1e84cc]Langue : [/color][/b] ${b}\n`),a.quality&&(_+=`[b][color=#1e84cc]Qualit : [/color][/b] ${a.quality}\n`),a.format&&(_+=`[b][color=#1e84cc]Format : [/color][/b] ${a.format}`),_+="[/size]",g&&(_+=`\n\n[size=13][b][color=#1e84cc] Nom de la release : [/color][/b] ${g}[/size]`),a.numberOfFiles&&(_+=`\n[size=13][b][color=#1e84cc]Nombre de fichiers : [/color][/b] ${a.numberOfFiles}[/size]`),a.fileSize&&(_+=`\n[size=13][b][color=#1e84cc]Poids Total :[/color][/b] ${a.fileSize.value} ${a.fileSize.unit}[/size]`),v&&(_+=`\n[size=13][b][color=#1e84cc]Notes :[/color][/b] ${v}[/size]`),_+="[/font][/center]",_}generateBBCodeStyle3(e){var t,r,n;const{book:i,specs:a,coverImage:s}=e,o=a.title||i.volumeInfo.title||"Titre inconnu",l=this.formatAuthors(a.authors||i.volumeInfo.authors),c=a.publisher||i.volumeInfo.publisher||"",u=a.publishedDate||i.volumeInfo.publishedDate||"",d=a.year||(u?new Date(u).getFullYear():""),h=this.stripHtml(a.description||i.volumeInfo.description||""),p=a.mainCategory||hk((null==(t=i.volumeInfo.categories)?void 0:t[0])||"")||"",f=a.isbn||this.getISBN(a.industryIdentifiers||i.volumeInfo.industryIdentifiers)||"",m=a.pageCount||i.volumeInfo.pageCount||"",g=i.volumeInfo.infoLink||"",v=a.source||"",b=a.fileName||a.customTag||"",x=a.notes||"",y=(a.language||i.volumeInfo.language||"").toUpperCase(),w=a.ebookCount||(null==(r=a.ebookFiles)?void 0:r.length)||a.numberOfFiles||"1",_=(null==(n=a.ebookFiles)?void 0:n.join("\n"))||"";let k=`[table][tr][td] [/td][td][table][tr][td][table][tr][td][table][tr][td]\n      [img width=550]${s}[/img]    [/td][td] [/td][/tr][/table][/td][td][table][tr][td]\n  [/td][td]   [/td][/tr][/table][/td][td][table][tr][td][table][tr][td][table][tr][td][color=#3d85c6][size=29]${l}[/size][/color][/td][/tr][tr][td][table][tr][td]  ${d}`;return p&&(k+=` - [i][url="/torrents?tags=${encodeURIComponent(p)}"]${p}[/url][/i]`),m&&(k+=` - ${m} pages`),k+=`[/td][td][size=10]   [/size][/td][td]  - [url=${g}][img]https://i.imgur.com/vCfx0LD.png[/img][/url]  [/td][/tr][/table][/td][/tr][tr][td][hr=#FF0000][/hr][/td][/tr][/table][/td][/tr][tr][td][i][color=#c27ba0][size=29][center][b] ${o}[/b][/center][/size][/color][/i]\n[/td][/tr][tr][td] \n[/td][/tr][tr][td][table][tr][td][b][color=#3d85c6]Titre : [/color][/b] ${o}[/td][/tr][tr][td][b][color=#3d85c6]Auteur :  [/color][/b] ${l}[/td][/tr]`,c&&(k+=`[tr][td][b][color=#3d85c6]Editeur : [/color][/b] ${c}[/td]`),f&&(k+=`[td][b][color=#3d85c6]ISBN : [/color][/b] ${f}[/td]`),(c||f)&&(k+="[/tr]"),k+=`[/table][/td][/tr][tr][td]  [br] [/br][b][color=#3d85c6]Description[br] [/br] [br] [/br][/color][/b] [size=13]${h}\n[/size][/td][/tr][tr][td]  [br] [/br][hr=#FF0000][/hr][/td][/tr][/table][/td][/tr]`,(a.quality||a.format)&&(k+="[tr][td][table][tr][td]",a.quality&&(k+=`[b][color=#3d85c6] Qualit :  [/color][/b] ${a.quality}`),k+="[/td][td]  [/td][td]",a.format&&(k+=`[b][color=#3d85c6]  [right] Format :  [/right][/color][/b] ${a.format}`),k+="[/td][/tr][/table][/td][/tr]"),(y||v)&&(k+="[tr][td][table][tr][td]",y&&(k+=`[b][color=#3d85c6] Langue :  [/color][/b] ${y}`),k+="[/td][td]   [/td][td]",v&&(k+=`[b][color=#3d85c6]  [right] Source  :  [/right][/color][/b] ${v}`),k+="[/td][/tr][/table][/td][/tr]"),(a.fileSize||w)&&(k+="[tr][td][table][tr][td]",a.fileSize&&(k+=` [b][color=#3d85c6] Taille totale :  [/color][/b] ${a.fileSize.value} ${a.fileSize.unit}`),k+="[/td][td]  [/td]",k+=`[td][b][color=#3d85c6]   [right] Nb d'eBooks' :  [/right][/color][/b] ${w} [/td]`,a.numberOfFiles&&(k+=`[td][b][color=#3d85c6]  [right] Nb de fichiers :  [/right][/color][/b] ${a.numberOfFiles}[/td]`),k+="[/tr][/table][/td][/tr]"),k+="[tr][td][/td][/tr][tr][td][/td][/tr][tr][td][/td][/tr][/table][/td][/tr][/table]\n\n[center]   :",_&&(k+=`\n\n[size=13]${_}\n\n[/size]`),k+="[/center][/td][/tr][tr][td][hr=#FF0000][/hr][/td][/tr]",b&&(k+=`[tr][td][b][color=#3d85c6]Nom release :  [/color][/b] [br] [/br]  ${b}[/td][/tr]`),x&&(k+=` [tr][td][b][color=#3d85c6][br] [/br]Notes:  [/color][/b] [br] [/br] ${x}[/td][/tr]`),k+="[/table][/td][/tr][/table]",k}generateHTML(e){var t;const{book:r,specs:n,coverImage:i}=e,a=r.volumeInfo.title||"Titre inconnu",s=this.formatAuthors(r.volumeInfo.authors),o=r.volumeInfo.publisher||"diteur inconnu",l=r.volumeInfo.publishedDate?new Date(r.volumeInfo.publishedDate).getFullYear():"Anne inconnue",c=r.volumeInfo.description||"Aucun synopsis disponible.",u=(null==(t=r.volumeInfo.categories)?void 0:t.join(", "))||"Non spcifi",d=this.getISBN(r.volumeInfo.industryIdentifiers),h=r.volumeInfo.pageCount||"Non spcifi";return`<!DOCTYPE html>\n<html lang="fr">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>${a} - Fiche eBook</title>\n    <style>\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            line-height: 1.6;\n            color: #ffffff;\n            background: linear-gradient(135deg, #064e3b, #065f46, #047857);\n            margin: 0;\n            padding: 20px;\n            min-height: 100vh;\n        }\n        .container {\n            max-width: 800px;\n            margin: 0 auto;\n            background: rgba(17, 24, 39, 0.9);\n            border-radius: 20px;\n            padding: 30px;\n            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n            border: 1px solid rgba(75, 85, 99, 0.3);\n        }\n        .header {\n            text-align: center;\n            margin-bottom: 30px;\n            padding-bottom: 20px;\n            border-bottom: 2px solid #10b981;\n        }\n        h1 {\n            color: #10b981;\n            font-size: 2.5em;\n            margin: 0 0 10px 0;\n            font-weight: 700;\n        }\n        .subtitle {\n            color: #9ca3af;\n            font-size: 1.2em;\n            margin-bottom: 20px;\n        }\n        .cover {\n            text-align: center;\n            margin: 20px 0;\n        }\n        .cover img {\n            max-width: 200px;\n            border-radius: 10px;\n            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);\n        }\n        .section {\n            margin: 30px 0;\n        }\n        .section-title {\n            color: #059669;\n            font-size: 1.5em;\n            font-weight: 600;\n            margin-bottom: 15px;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n        .info-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 15px;\n            margin: 20px 0;\n        }\n        .info-item {\n            background: rgba(31, 41, 55, 0.6);\n            padding: 15px;\n            border-radius: 10px;\n            border: 1px solid rgba(75, 85, 99, 0.3);\n        }\n        .label {\n            color: #10b981;\n            font-weight: 600;\n            margin-bottom: 5px;\n        }\n        .value {\n            color: #f3f4f6;\n        }\n        .synopsis {\n            background: rgba(31, 41, 55, 0.6);\n            padding: 20px;\n            border-radius: 10px;\n            border-left: 4px solid #10b981;\n            margin: 20px 0;\n        }\n        .specs-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 15px;\n        }\n        .footer {\n            text-align: center;\n            margin-top: 40px;\n            padding-top: 20px;\n            border-top: 1px solid rgba(75, 85, 99, 0.3);\n            color: #9ca3af;\n            font-size: 0.9em;\n        }\n        .notes {\n            background: rgba(31, 41, 55, 0.6);\n            padding: 20px;\n            border-radius: 10px;\n            border-left: 4px solid #10b981;\n            margin: 20px 0;\n            font-style: italic;\n        }\n        @media print {\n            body { background: white; color: black; }\n            .container { box-shadow: none; background: white; }\n        }\n    </style>\n</head>\n<body>\n    <div class="container">\n        <div class="header">\n            <h1>${a}</h1>\n            ${r.volumeInfo.subtitle?`<div class="subtitle">${r.volumeInfo.subtitle}</div>`:""}\n        </div>\n\n        ${i?`<div class="cover"><img src="${i}" alt="${a}"></div>`:""}\n\n        <div class="section">\n            <h2 class="section-title"> Informations gnrales</h2>\n            <div class="info-grid">\n                <div class="info-item">\n                    <div class="label">Auteur(s)</div>\n                    <div class="value">${s}</div>\n                </div>\n                <div class="info-item">\n                    <div class="label">diteur</div>\n                    <div class="value">${o}</div>\n                </div>\n                <div class="info-item">\n                    <div class="label">Anne</div>\n                    <div class="value">${l}</div>\n                </div>\n                <div class="info-item">\n                    <div class="label">Pages</div>\n                    <div class="value">${h}</div>\n                </div>\n                <div class="info-item">\n                    <div class="label">Langue</div>\n                    <div class="value">${(r.volumeInfo.language||n.language).toUpperCase()}</div>\n                </div>\n                <div class="info-item">\n                    <div class="label">Catgories</div>\n                    <div class="value">${u}</div>\n                </div>\n                ${d?`<div class="info-item"><div class="label">ISBN</div><div class="value">${d}</div></div>`:""}\n            </div>\n        </div>\n\n        <div class="section">\n            <h2 class="section-title"> Synopsis</h2>\n            <div class="synopsis">${c}</div>\n        </div>\n\n        <div class="section">\n            <h2 class="section-title"> Spcifications techniques</h2>\n            <div class="specs-grid">\n${n.customTag||n.fileName?`<div class="info-item"><div class="label">Nom du fichier</div><div class="value">${n.customTag||n.fileName}</div></div>`:""}\n                <div class="info-item">\n                    <div class="label">Format</div>\n                    <div class="value">${n.format}</div>\n                </div>\n                <div class="info-item">\n                    <div class="label">Taille</div>\n                    <div class="value">${n.fileSize.value} ${n.fileSize.unit}</div>\n                </div>\n                <div class="info-item">\n                    <div class="label">Qualit</div>\n                    <div class="value">${n.quality}</div>\n                </div>\n\n${n.source?`<div class="info-item"><div class="label">Source</div><div class="value">${n.source}</div></div>`:""}\n                ${n.edition?`<div class="info-item"><div class="label">dition</div><div class="value">${n.edition}</div></div>`:""}\n                ${n.numberOfFiles?`<div class="info-item"><div class="label">Nombre de fichiers</div><div class="value">${n.numberOfFiles}</div></div>`:""}\n                ${n.uploadedBy?`<div class="info-item"><div class="label">Upload par</div><div class="value">${n.uploadedBy}</div></div>`:""}\n            </div>\n        </div>\n\n        ${n.notes?`\n        <div class="section">\n            <h2 class="section-title"> Notes</h2>\n            <div class="notes">${n.notes}</div>\n        </div>`:""}\n\n        <div class="footer">\n            Fiche gnre avec <strong>FicheGen</strong>\n        </div>\n    </div>\n</body>\n</html>`}generateMarkdown(e){var t;const{book:r,specs:n,coverImage:i}=e,a=r.volumeInfo.title||"Titre inconnu",s=this.formatAuthors(r.volumeInfo.authors),o=r.volumeInfo.publisher||"diteur inconnu",l=r.volumeInfo.publishedDate?new Date(r.volumeInfo.publishedDate).getFullYear():"Anne inconnue",c=this.stripHtml(r.volumeInfo.description||""),u=(null==(t=r.volumeInfo.categories)?void 0:t.join(", "))||"Non spcifi",d=this.getISBN(r.volumeInfo.industryIdentifiers),h=r.volumeInfo.pageCount||"Non spcifi";return`# ${a}\n${r.volumeInfo.subtitle?`## ${r.volumeInfo.subtitle}`:""}\n\n${i?`![${a}](${i})`:""}\n\n##  Informations gnrales\n\n- **Auteur(s) :** ${s}\n- **diteur :** ${o}\n- **Anne de publication :** ${l}\n- **Pages :** ${h}\n- **Langue :** ${(r.volumeInfo.language||n.language).toUpperCase()}\n- **Catgories :** ${u}\n${d?`- **ISBN :** ${d}`:""}\n\n##  Synopsis\n\n> ${c||"Aucun synopsis disponible."}\n\n##  Spcifications techniques\n\n${n.customTag||n.fileName?`- **Nom du fichier :** ${n.customTag||n.fileName}\n`:""}- **Format :** ${n.format}\n- **Taille :** ${n.fileSize.value} ${n.fileSize.unit}\n- **Qualit :** ${n.quality}\n${n.source?`- **Source :** ${n.source}`:""}\n${n.edition?`- **dition :** ${n.edition}`:""}\n${n.numberOfFiles?`- **Nombre de fichiers :** ${n.numberOfFiles}`:""}\n${n.uploadedBy?`- **Upload par :** ${n.uploadedBy}`:""}\n\n${n.notes?`##  Notes\n\n> ${n.notes}`:""}\n\n---\n*Fiche gnre avec FicheGen*`}generateText(e){var t;const{book:r,specs:n}=e,i=r.volumeInfo.title||"Titre inconnu",a=this.formatAuthors(r.volumeInfo.authors),s=r.volumeInfo.publisher||"diteur inconnu",o=r.volumeInfo.publishedDate?new Date(r.volumeInfo.publishedDate).getFullYear():"Anne inconnue",l=this.stripHtml(r.volumeInfo.description||""),c=(null==(t=r.volumeInfo.categories)?void 0:t.join(", "))||"Non spcifi",u=this.getISBN(r.volumeInfo.industryIdentifiers),d=r.volumeInfo.pageCount||"Non spcifi";return`${i.toUpperCase()}\n${r.volumeInfo.subtitle?r.volumeInfo.subtitle:""}\n\n\nINFORMATIONS GNRALES\n\n\nAuteur(s): ${a}\nditeur: ${s}\nAnne de publication: ${o}\nPages: ${d}\nLangue: ${(r.volumeInfo.language||n.language).toUpperCase()}\nCatgories: ${c}\n${u?`ISBN: ${u}`:""}\n\n\nSYNOPSIS\n\n\n${l||"Aucun synopsis disponible."}\n\n\nSPCIFICATIONS TECHNIQUES\n\n\n${n.customTag||n.fileName?`Nom du fichier: ${n.customTag||n.fileName}\n`:""}Format: ${n.format}\nTaille: ${n.fileSize.value} ${n.fileSize.unit}\nQualit: ${n.quality}\n${n.source?`Source: ${n.source}`:""}\n${n.edition?`dition: ${n.edition}`:""}\n${n.numberOfFiles?`Nombre de fichiers: ${n.numberOfFiles}`:""}\n${n.uploadedBy?`Upload par: ${n.uploadedBy}`:""}\n\n${n.notes?`\nNOTES\n\n\n${n.notes}\n\n`:""}\nFiche gnre avec FicheGen\n`}formatAuthors(e){return e&&0!==e.length?1===e.length?e[0]:2===e.length?`${e[0]} & ${e[1]}`:e.join(", "):"Auteur inconnu"}stripHtml(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}getISBN(e){if(!e)return null;const t=e.find(e=>"ISBN_13"===e.type),r=e.find(e=>"ISBN_10"===e.type),n=e.find(e=>"OTHER"===e.type);return(null==t?void 0:t.identifier)||(null==r?void 0:r.identifier)||(null==n?void 0:n.identifier)||null}};function fk({isOpen:e,onClose:t,onCoverChange:r,currentCover:n}){const{t:i}=__(),[a,s]=U.useState(""),[o,l]=U.useState(!1);if(!e)return null;const c=()=>{t(),s(""),l(!1)};return J.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:J.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl max-w-md w-full shadow-2xl",children:[J.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[J.jsxs("h2",{className:"text-xl font-bold text-white flex items-center",children:[J.jsx(nw,{className:"w-5 h-5 mr-2 text-emerald-400"}),i("modal.cover.title")]}),J.jsx("button",{onClick:c,className:"text-gray-400 hover:text-white transition-colors",children:J.jsx(Nw,{className:"w-5 h-5"})})]}),J.jsxs("form",{onSubmit:e=>{e.preventDefault(),a.trim()&&(r(a.trim()),t(),s(""),l(!1))},className:"p-6 space-y-4",children:[n&&J.jsxs("div",{className:"text-center",children:[J.jsx("p",{className:"text-sm text-gray-400 mb-2",children:i("modal.cover.current")}),J.jsx("img",{src:n,alt:"Cover actuelle",className:"w-20 h-28 object-cover rounded-lg mx-auto border border-gray-600",onError:e=>{e.currentTarget.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='140'%3E%3Crect fill='%23374151' width='100' height='140'/%3E%3C/svg%3E"}})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:i("modal.cover.url")}),J.jsx("input",{type:"url",value:a,onChange:e=>{s(e.target.value),l(!1)},placeholder:"https://example.com/image.jpg",className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",required:!0})]}),a&&J.jsxs("div",{className:"text-center",children:[J.jsx("p",{className:"text-sm text-gray-400 mb-2",children:i("modal.cover.preview")}),o?J.jsx("div",{className:"w-20 h-28 bg-gray-800 border border-red-500 rounded-lg mx-auto flex items-center justify-center",children:J.jsx("span",{className:"text-red-400 text-xs text-center px-2",children:i("modal.cover.error")})}):J.jsx("img",{src:a,alt:"Aperu",className:"w-20 h-28 object-cover rounded-lg mx-auto border border-gray-600",onError:()=>l(!0)})]}),J.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:J.jsxs("div",{className:"flex items-start space-x-2",children:[J.jsx(Vy,{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0"}),J.jsxs("div",{className:"text-sm text-blue-300",children:[J.jsx("p",{className:"font-medium mb-1",children:i("modal.cover.help.title")}),J.jsx("p",{className:"text-blue-300/80",children:i("modal.cover.help.description")})]})]})}),J.jsxs("div",{className:"flex space-x-3 pt-4",children:[J.jsx("button",{type:"button",onClick:c,className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:i("modal.cover.cancel")}),J.jsx("button",{type:"submit",disabled:!a.trim()||o,className:"flex-1 px-4 py-2 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:i("modal.cover.confirm")})]})]})]})})}function mk({isOpen:e,onClose:t,book:r,ebookSpecs:n}){const[i,a]=U.useState(!1),{t:s}=__();if(!e)return null;const o=(()=>{var e,t,i,a;const o=n.title||r.volumeInfo.title,l=(n.authors||r.volumeInfo.authors||[]).join(", "),c=n.year||(r.volumeInfo.publishedDate?new Date(r.volumeInfo.publishedDate).getFullYear():"N/A"),u=n.publisher||r.volumeInfo.publisher||"N/A",d=n.pageCount||r.volumeInfo.pageCount||"N/A",h=(n.language||r.volumeInfo.language||"N/A").toUpperCase(),p=(null==(t=null==(e=r.volumeInfo.industryIdentifiers)?void 0:e.find(e=>"ISBN_13"===e.type))?void 0:t.identifier)||(null==(a=null==(i=r.volumeInfo.industryIdentifiers)?void 0:i.find(e=>"ISBN_10"===e.type))?void 0:a.identifier)||"N/A",f=n.ebookCount||1,m=n.numberOfFiles||f,g=n.quality||"N/A",v=n.format||"N/A",b=n.source||"",x=`${n.fileSize.value} ${n.fileSize.unit}`,y=n.ebookFiles||[n.fileName||`${o}.${v.toLowerCase()}`],w=(new Date).toLocaleDateString("fr-FR"),_=`${o} ${l}`,k=Math.max(0,Math.floor((90-_.length)/2)),N=" ".repeat(k)+_,j=y.map(e=>{var t;const r=(null==(t=e.split(".").pop())?void 0:t.toUpperCase())||v.toUpperCase();return`${e} [${r}]`}).join("\n"),S=e=>e+" "+".".repeat(Math.max(0,35-e.length)),C=b?`${S(s("ebook.nfo.source"))} : ${b}\n`:"";return`------------------------------------------------------------------------------------------\n${N}\n------------------------------------------------------------------------------------------\n\n${S(s("ebook.nfo.author"))} : ${l}\n${S(s("ebook.nfo.album"))} : ${o}\n${S(s("ebook.nfo.year"))} : ${c}\n\n${S(s("ebook.nfo.publisher"))} : ${u}\n${S(s("ebook.nfo.total.pages"))} : ${d}\n${S(s("ebook.nfo.language"))} : ${h}\n${S(s("ebook.nfo.isbn"))} : ${p}\n${S(s("ebook.nfo.ebook.count"))} : ${f}\n${S(s("ebook.nfo.quality"))} : ${g}\n${S(s("ebook.nfo.format"))} : ${v}\n\n\n------------------------------------------------------------------------------------------\n                               ${s("ebook.nfo.ebook.list")} (${f})\n------------------------------------------------------------------------------------------\n${j}\n\n\n${C}${S(s("ebook.nfo.total.files"))} : ${m}\n${S(s("ebook.nfo.total.weight"))} : ${x}\n\n\n                                                                      FicheGen @ ${w}`})();return J.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:J.jsxs("div",{className:"bg-gray-800 rounded-2xl max-w-4xl w-full max-h-[80vh] shadow-2xl border border-gray-700 flex flex-col",children:[J.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[J.jsxs("div",{className:"flex items-center space-x-3",children:[J.jsx(Gy,{className:"w-6 h-6 text-blue-400"}),J.jsx("h2",{className:"text-xl font-bold text-white",children:s("ebook.nfo.title")})]}),J.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:J.jsx(Nw,{className:"w-5 h-5"})})]}),J.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:J.jsx("pre",{className:"bg-gray-900 border border-gray-700 rounded-lg p-4 text-gray-300 font-mono text-sm whitespace-pre-wrap break-words",children:o})}),J.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-700",children:[J.jsxs("button",{onClick:async()=>{try{await navigator.clipboard.writeText(o),a(!0),setTimeout(()=>a(!1),2e3)}catch(e){console.error("Failed to copy:",e)}},className:"flex items-center justify-center space-x-2 px-4 py-3 bg-green-600/20 hover:bg-green-600/30 border border-green-500/30 rounded-xl text-green-300 hover:text-green-200 transition-all",children:[i?J.jsx(My,{className:"w-4 h-4"}):J.jsx(Uy,{className:"w-4 h-4"}),J.jsx("span",{children:s(i?"nfo.viewer.copied":"ebook.nfo.copy")})]}),J.jsxs("button",{onClick:()=>{const e=n.customTag||n.fileName||r.volumeInfo.title,t=new Blob([o],{type:"text/plain;charset=utf-8"}),i=URL.createObjectURL(t),a=document.createElement("a");a.href=i,a.download=`${e}.nfo`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)},className:"px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors flex items-center space-x-2",children:[J.jsx(qy,{className:"w-4 h-4"}),J.jsx("span",{children:s("ebook.nfo.download")})]})]})]})})}function gk({book:e,ebookSpecs:t,isPreview:r=!1,selectedCover:n,onCoverChange:i}){var a,s,o,l;const{t:c}=__(),[u,d]=U.useState(!1),[h,p]=U.useState(!1),[f,m]=U.useState(!1),[g,v]=U.useState(!1),[b,x]=U.useState(!1),[y,w]=U.useState(!1),_=()=>`data:image/svg+xml;base64,${btoa('\n          <svg width="128" height="192" viewBox="0 0 128 192" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <rect width="128" height="192" fill="#374151"/>\n                <path d="M32 48h64v8H32v-8zm0 16h64v8H32v-8zm0 16h48v8H32v-8z" fill="#6B7280"/>\n                <rect x="48" y="96" width="32" height="32" rx="4" fill="#6B7280"/>\n            </svg>\n\n        ')}`,k=()=>{if(n)return n;const t=e.volumeInfo.imageLinks||{};return t.extraLarge||t.large||t.medium||t.small||t.thumbnail||t.smallThumbnail||_()},[N,j]=U.useState(1),S=t?pk.generateBBCode({book:e,specs:t,coverImage:k()},N):"",C=e.volumeInfo.authors||[],E=(null==(s=null==(a=e.volumeInfo.industryIdentifiers)?void 0:a.find(e=>"ISBN_13"===e.type))?void 0:s.identifier)||(null==(l=null==(o=e.volumeInfo.industryIdentifiers)?void 0:o.find(e=>"ISBN_10"===e.type))?void 0:l.identifier)||"",$=t&&"description"in t?t.description||"":e.volumeInfo.description||"",D=$.length>300?$.slice(0,300)+"...":$,P=(e,t=20)=>e.padEnd(t," "),T=()=>{if(!t)return"";const r=t.title||e.volumeInfo.title,n=(t.authors||e.volumeInfo.authors||[]).join(", "),i=t.year||(e.volumeInfo.publishedDate?new Date(e.volumeInfo.publishedDate).getFullYear():"N/A"),a=t.publisher||e.volumeInfo.publisher||"N/A",s=t.pageCount||e.volumeInfo.pageCount||"N/A",o=(t.language||e.volumeInfo.language||"N/A").toUpperCase(),l=t.ebookCount||1,u=t.numberOfFiles||l,d=t.quality||"N/A",h=t.format||"N/A",p=t.source||"",f=`${t.fileSize.value} ${t.fileSize.unit}`,m=t.ebookFiles||[t.fileName||`${r}.${h.toLowerCase()}`],g=(new Date).toLocaleDateString("fr-FR"),v=`${r} ${n}`,b=Math.max(0,Math.floor((90-v.length)/2)),x=" ".repeat(b)+v,y=m.map(e=>{var t;const r=(null==(t=e.split(".").pop())?void 0:t.toUpperCase())||h.toUpperCase();return`${e} [${r}]`}).join("\n"),w=p?`${P(c("ebook.nfo.source"))} : ${p}\n`:"";return`------------------------------------------------------------------------------------------\n${x}\n------------------------------------------------------------------------------------------\n\n${P(c("ebook.nfo.author"))} : ${n}\n${P(c("ebook.nfo.album"))} : ${r}\n${P(c("ebook.nfo.year"))} : ${i}\n\n${P(c("ebook.nfo.publisher"))} : ${a}\n${P(c("ebook.nfo.total.pages"))} : ${s}\n${P(c("ebook.nfo.language"))} : ${o}\n${P(c("ebook.nfo.isbn"))} : ${E}\n${P(c("ebook.nfo.ebook.count"))} : ${l}\n${P(c("ebook.nfo.quality"))} : ${d}\n${P(c("ebook.nfo.format"))} : ${h}\n\n\n------------------------------------------------------------------------------------------\n                               ${c("ebook.nfo.ebook.list")} (${l})\n------------------------------------------------------------------------------------------\n${y}\n\n\n${w}${P(c("ebook.nfo.total.files"))} : ${u}\n${P(c("ebook.nfo.total.weight"))} : ${f}\n\n\n                                                                      FicheGen @ ${g}`},A=r=>{if(!t)return;const n={book:e,specs:t,coverImage:k()};let i="",a=`${e.volumeInfo.title.replace(/[^a-z0-9]/gi,"_")}`,s="text/plain";switch(r){case"html":i=pk.generateHTML(n),a+=".html",s="text/html";break;case"markdown":i=pk.generateMarkdown(n),a+=".md",s="text/markdown";break;case"text":i=pk.generateText(n),a+=".txt",s="text/plain"}const o=new Blob([i],{type:s}),l=URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=a,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l)};return J.jsxs(J.Fragment,{children:[J.jsxs("div",{className:"bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-md border border-gray-700/50 rounded-2xl overflow-hidden shadow-2xl",children:[J.jsx("div",{className:"bg-gradient-to-r from-emerald-600/20 to-teal-600/20 p-6 border-b border-gray-700/50",children:J.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[J.jsxs("div",{className:"flex-1 flex flex-col md:flex-row items-center md:items-start md:space-x-6",children:[J.jsx("div",{className:"flex-shrink-0 mb-4 md:mb-0",children:J.jsxs("div",{className:"relative group",children:[J.jsx("img",{src:k(),alt:e.volumeInfo.title,className:"w-32 h-48 object-cover rounded-lg border border-gray-600/50 shadow-lg group-hover:scale-105 transition-transform duration-300",onError:e=>{e.currentTarget.src=_()}}),i&&!r&&J.jsx("button",{onClick:()=>m(!0),className:"absolute inset-0 bg-black/60 backdrop-blur-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:J.jsx("span",{className:"text-white text-sm font-medium px-3 py-1 bg-emerald-600 rounded-md",children:c("card.change.poster")})})]})}),J.jsxs("div",{className:"flex-1 min-w-0",children:[J.jsx("h2",{className:"text-3xl font-bold text-white mb-2 leading-tight",children:(null==t?void 0:t.title)||e.volumeInfo.title}),((null==t?void 0:t.subtitle)||e.volumeInfo.subtitle)&&J.jsx("h3",{className:"text-xl text-gray-300 mb-3",children:(null==t?void 0:t.subtitle)||e.volumeInfo.subtitle}),((null==t?void 0:t.authors)||C).length>0&&J.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[J.jsx(ww,{className:"w-4 h-4 text-emerald-400 flex-shrink-0"}),J.jsxs("div",{className:"flex items-center flex-wrap gap-1",children:[((null==t?void 0:t.authors)||C).slice(0,3).map((e,r)=>J.jsxs("span",{className:"text-emerald-400 font-medium",children:[e,r<Math.min(3,((null==t?void 0:t.authors)||C).length)-1&&", "]},r)),((null==t?void 0:t.authors)||C).length>3&&J.jsxs("span",{className:"text-gray-400 text-sm ml-1",children:["+",((null==t?void 0:t.authors)||C).length-3," ",c("ebook.more")]})]})]}),J.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[void 0!==e.volumeInfo.averageRating&&J.jsxs("div",{className:"flex items-center space-x-2",children:[J.jsx(gw,{className:"w-4 h-4 text-yellow-400 fill-current"}),J.jsxs("span",{className:"text-white font-medium",children:[e.volumeInfo.averageRating,"/5"]}),e.volumeInfo.ratingsCount&&J.jsxs("span",{className:"text-gray-400 text-sm",children:["(",e.volumeInfo.ratingsCount," ",c("ebook.ratings"),")"]})]}),e.volumeInfo.seriesInfo&&J.jsxs("div",{className:"flex items-center space-x-2",children:[J.jsx(Ty,{className:"w-4 h-4 text-gray-400"}),J.jsx("span",{className:"text-gray-300",children:e.volumeInfo.seriesInfo.bookDisplayNumber})]}),e.volumeInfo.infoLink&&J.jsxs("div",{className:"flex items-center space-x-2",children:[J.jsx(Vy,{className:"w-4 h-4 text-emerald-400 flex-shrink-0"}),J.jsx("a",{href:`https://books.google.fr/books?id=${e.id}&printsec=frontcover&hl=fr&source=gbs_ge_summary_r&cad=0`,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-400 hover:text-emerald-300 truncate",children:c("ebook.googleBookLink")})]})]}),J.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[((null==t?void 0:t.year)||(null==t?void 0:t.publishedDate)||e.volumeInfo.publishedDate)&&J.jsxs("div",{className:"flex items-center space-x-2",children:[J.jsx(Fy,{className:"w-4 h-4 text-gray-400"}),J.jsx("span",{className:"text-gray-300",children:(null==t?void 0:t.year)||((null==t?void 0:t.publishedDate)?new Date(t.publishedDate).getFullYear():e.volumeInfo.publishedDate?new Date(e.volumeInfo.publishedDate).getFullYear():"")})]}),((null==t?void 0:t.publisher)||e.volumeInfo.publisher)&&J.jsxs("div",{className:"flex items-center space-x-2",children:[J.jsx(Ay,{className:"w-4 h-4 text-gray-400"}),J.jsx("span",{className:"text-gray-300 truncate",children:(null==t?void 0:t.publisher)||e.volumeInfo.publisher})]}),((null==t?void 0:t.pageCount)||e.volumeInfo.pageCount)&&J.jsxs("div",{className:"flex items-center space-x-2",children:[J.jsx(Ty,{className:"w-4 h-4 text-gray-400"}),J.jsxs("span",{className:"text-gray-300",children:[(null==t?void 0:t.pageCount)||e.volumeInfo.pageCount," ",c("ebook.pages")]})]}),((null==t?void 0:t.language)||e.volumeInfo.language)&&J.jsxs("div",{className:"flex items-center space-x-2",children:[J.jsx(Zy,{className:"w-4 h-4 text-gray-400"}),J.jsx("span",{className:"text-gray-300",children:((null==t?void 0:t.language)||e.volumeInfo.language).toUpperCase()})]})]}),E&&J.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[J.jsx(tw,{className:"w-4 h-4 text-gray-400"}),J.jsxs("span",{className:"text-gray-300",children:[c("ebook.isbn"),E]})]})]})]}),!r&&J.jsx("div",{className:"flex-shrink-0 lg:w-64",children:J.jsx("div",{className:"bg-black/60 backdrop-blur-md rounded-2xl p-4 border border-white/10 sticky top-4",children:J.jsxs("div",{className:"flex flex-col space-y-3",children:[J.jsx("div",{className:"text-white text-sm font-medium text-center mb-2",children:c("card.export.actions")}),J.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-3 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors text-sm font-medium",children:[J.jsx(nw,{className:"w-4 h-4"}),J.jsx("span",{children:c("card.change.poster")})]}),J.jsxs("div",{className:"border-t border-white/10 pt-3",children:[J.jsx("div",{className:"text-white text-xs font-medium text-center mb-2 opacity-75",children:c("card.export.formats")}),J.jsxs("button",{onClick:()=>p(!0),className:"w-full flex items-center justify-center space-x-2 px-3 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors text-sm font-medium mb-2",children:[J.jsx(qy,{className:"w-4 h-4"}),J.jsx("span",{children:c("ebook.export.bbcode")})]}),J.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[J.jsxs("button",{onClick:()=>A("html"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg transition-colors text-xs font-medium",children:[J.jsx(Hy,{className:"w-3 h-3"}),J.jsx("span",{children:"HTML"})]}),J.jsxs("button",{onClick:()=>A("markdown"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors text-xs font-medium",children:[J.jsx(Gy,{className:"w-3 h-3"}),J.jsx("span",{children:c("ebook.export.markdown")})]}),J.jsxs("button",{onClick:()=>A("text"),className:"flex items-center justify-center space-x-2 px-3 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors text-xs font-medium",children:[J.jsx(Qy,{className:"w-3 h-3"}),J.jsx("span",{children:c("ebook.export.text")})]})]})]})]})})})]})}),J.jsxs("div",{className:"p-6 space-y-6",children:[t&&!r&&J.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(0,1fr)_404px] gap-8",children:[J.jsxs("div",{className:"space-y-8",children:[$&&J.jsxs("div",{children:[J.jsxs("h3",{className:"text-xl font-semibold text-white mb-3 flex items-center",children:[J.jsx(Py,{className:"w-5 h-5 mr-2 text-emerald-400"}),c("card.synopsis")]}),J.jsxs("div",{className:"bg-gray-800/60 border border-gray-700/50 rounded-xl p-4",children:[J.jsx("div",{className:"text-gray-300 leading-relaxed "+(!u&&$.length>300?"line-clamp-4":""),dangerouslySetInnerHTML:{__html:u?$:D}}),$.length>300&&J.jsx("button",{onClick:()=>d(!u),className:"text-emerald-400 hover:text-emerald-300 text-sm font-medium mt-2 transition-colors",children:c(u?"ebook.showLess":"ebook.showMore")})]})]}),e.volumeInfo.categories&&e.volumeInfo.categories.length>0&&J.jsxs("div",{children:[J.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[J.jsx(vw,{className:"w-5 h-5 mr-2 text-emerald-400"}),c("ebook.categories")]}),J.jsx("div",{className:"flex flex-wrap gap-2",children:e.volumeInfo.categories.map((e,t)=>J.jsx("span",{className:"px-3 py-1 bg-emerald-600/20 text-emerald-300 rounded-full text-sm border border-emerald-600/30",children:hk(e)},t))})]}),J.jsxs("div",{children:[J.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[J.jsx(qy,{className:"w-5 h-5 mr-2 text-emerald-400"}),c("ebook.technical.specs")]}),J.jsxs("div",{className:"bg-gray-800/60 border border-gray-700/50 rounded-xl p-4 space-y-3",children:[J.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[J.jsxs("div",{children:[J.jsxs("span",{className:"text-gray-400",children:[c("ebook.format")," :"]}),J.jsx("span",{className:"text-white ml-2 font-medium",children:t.format})]}),J.jsxs("div",{children:[J.jsxs("span",{className:"text-gray-400",children:[c("ebook.quality")," :"]}),J.jsx("span",{className:"text-white ml-2 font-medium",children:t.quality})]}),J.jsxs("div",{children:[J.jsxs("span",{className:"text-gray-400",children:[c("ebook.size")," :"]}),J.jsx("span",{className:"text-white ml-2 font-medium",children:(F=t,`${F.fileSize.value} ${F.fileSize.unit}`)})]}),t.year&&J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400",children:c("ebook.yearLabel")}),J.jsx("span",{className:"text-white ml-2 font-medium",children:t.year})]}),t.edition&&J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400",children:c("ebook.editionLabel")}),J.jsx("span",{className:"text-white ml-2 font-medium",children:t.edition})]}),t.ebookCount&&J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400",children:"Nb ebooks :"}),J.jsx("span",{className:"text-white ml-2 font-medium",children:t.ebookCount})]}),t.numberOfFiles&&J.jsxs("div",{children:[J.jsx("span",{className:"text-gray-400",children:"Nb fichiers :"}),J.jsx("span",{className:"text-white ml-2 font-medium",children:t.numberOfFiles})]}),t.source&&J.jsxs("div",{children:[J.jsxs("span",{className:"text-gray-400",children:[c("ebook.source")," :"]}),J.jsx("span",{className:"text-white ml-2 font-medium",children:t.source})]}),(t.language||e.volumeInfo.language)&&J.jsxs("div",{children:[J.jsxs("span",{className:"text-gray-400",children:[c("ebook.language")," :"]}),J.jsx("span",{className:"text-white ml-2 font-medium",children:t.language||e.volumeInfo.language})]})]}),t.notes&&J.jsxs("div",{className:"pt-3 border-t border-gray-700/30",children:[J.jsxs("span",{className:"text-gray-400",children:[c("ebook.notes")," :"]}),J.jsx("p",{className:"text-white mt-1 text-sm",children:t.notes})]}),t.fileName&&J.jsxs("div",{className:"pt-3 border-t border-gray-700/30",children:[J.jsx("span",{className:"text-gray-400 text-xs",children:c("ebook.fileNameLabel")}),J.jsx("p",{className:"text-white mt-1 text-xs break-all",children:t.fileName})]})]})]})]}),J.jsxs("div",{className:"flex flex-col gap-6",children:[J.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-cyan-600/10 backdrop-blur-sm border border-blue-400/20 rounded-2xl p-6 w-full",children:[J.jsx("div",{className:"flex items-center justify-between mb-4",children:J.jsxs("div",{className:"flex items-center space-x-3",children:[J.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:J.jsx(Gy,{className:"w-5 h-5 text-blue-400"})}),J.jsxs("div",{children:[J.jsx("h3",{className:"text-white font-semibold",children:c("ebook.nfo.title")}),J.jsx("p",{className:"text-gray-400 text-sm",children:c("ebook.nfo.subtitle")})]})]})}),J.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[J.jsxs("button",{onClick:()=>v(!0),className:"flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600/20 hover:bg-blue-600/30 border border-blue-500/30 rounded-xl text-blue-300 hover:text-blue-200 transition-all",children:[J.jsx(Wy,{className:"w-4 h-4"}),J.jsx("span",{children:c("ebook.nfo.show")})]}),J.jsxs("button",{onClick:async()=>{const e=T();try{await navigator.clipboard.writeText(e),x(!0),setTimeout(()=>x(!1),2e3)}catch(t){console.error("Failed to copy NFO:",t)}},className:"flex items-center justify-center space-x-2 px-4 py-3 bg-green-600/20 hover:bg-green-600/30 border border-green-500/30 rounded-xl text-green-300 hover:text-green-200 transition-all",children:[b?J.jsx(My,{className:"w-4 h-4"}):J.jsx(Uy,{className:"w-4 h-4"}),J.jsx("span",{children:c(b?"nfo.viewer.copied":"ebook.nfo.copy")})]}),J.jsxs("button",{onClick:()=>{if(!t)return;const r=T(),n=t.customTag||t.fileName||e.volumeInfo.title,i=new Blob([r],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(i),s=document.createElement("a");s.href=a,s.download=`${n}.nfo`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)},className:"flex items-center justify-center space-x-2 px-4 py-3 bg-violet-600/20 hover:bg-violet-600/30 border border-violet-500/30 rounded-xl text-violet-300 hover:text-violet-200 transition-all",children:[J.jsx(qy,{className:"w-4 h-4"}),J.jsx("span",{children:c("ebook.nfo.download")})]})]})]}),J.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-violet-600/10 backdrop-blur-sm border border-purple-400/20 rounded-2xl p-6 w-full",children:[J.jsx("div",{className:"flex items-center justify-between mb-4",children:J.jsxs("div",{className:"flex items-center space-x-3",children:[J.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:J.jsx(vw,{className:"w-5 h-5 text-purple-400"})}),J.jsx("h3",{className:"text-white font-semibold",children:c("ebook.tag.title")})]})}),J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx("div",{className:"flex-1 bg-gray-700/50 border border-purple-500/30 rounded-lg px-4 py-3 overflow-x-auto",children:J.jsx("code",{className:"text-green-400 font-mono text-sm whitespace-nowrap",children:t.customTag||t.fileName||e.volumeInfo.title})}),J.jsx("button",{onClick:async()=>{if(!t)return;const r=t.customTag||t.fileName||e.volumeInfo.title;try{await navigator.clipboard.writeText(r),w(!0),setTimeout(()=>w(!1),2e3)}catch(n){console.error("Failed to copy tag:",n)}},className:"p-3 bg-purple-600/20 hover:bg-purple-600/30 border border-purple-500/30 rounded-lg text-purple-300 hover:text-purple-200 transition-all",title:c(y?"nfo.viewer.copied":"ebook.tag.copy"),children:y?J.jsx(My,{className:"w-4 h-4"}):J.jsx(Uy,{className:"w-4 h-4"})})]})]})]})]}),!t&&$&&J.jsxs("div",{children:[J.jsxs("h3",{className:"text-xl font-semibold text-white mb-3 flex items-center",children:[J.jsx(Py,{className:"w-5 h-5 mr-2 text-emerald-400"}),c("card.synopsis")]}),J.jsxs("div",{className:"bg-gray-800/60 border border-gray-700/50 rounded-xl p-4",children:[J.jsx("div",{className:"text-gray-300 leading-relaxed "+(!u&&$.length>300?"line-clamp-4":""),dangerouslySetInnerHTML:{__html:u?$:D}}),$.length>300&&J.jsx("button",{onClick:()=>d(!u),className:"text-emerald-400 hover:text-emerald-300 text-sm font-medium mt-2 transition-colors",children:c(u?"ebook.showLess":"ebook.showMore")})]})]}),!t&&e.volumeInfo.categories&&e.volumeInfo.categories.length>0&&J.jsxs("div",{children:[J.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[J.jsx(vw,{className:"w-5 h-5 mr-2 text-emerald-400"}),c("ebook.categories")]}),J.jsx("div",{className:"flex flex-wrap gap-2",children:e.volumeInfo.categories.map((e,t)=>J.jsx("span",{className:"px-3 py-1 bg-emerald-600/20 text-emerald-300 rounded-full text-sm border border-emerald-600/30",children:hk(e)},t))})]}),J.jsxs("div",{className:"text-center pt-4 border-t border-gray-700/30",children:[J.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-400",children:[J.jsx("span",{children:c("card.data.provided")}),J.jsxs("a",{href:e.volumeInfo.canonicalVolumeLink||`https://books.google.com/books?id=${e.id}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-emerald-400 hover:text-emerald-300 transition-colors",children:[J.jsx("span",{children:c("ebook.googleBookLink")}),J.jsx(Vy,{className:"w-3 h-3"})]})]}),E&&J.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:[c("ebook.isbn"),E]})]})]})]}),J.jsx(H_,{isOpen:h,onClose:()=>p(!1),bbcode:S,title:e.volumeInfo.title,ebookData:e,onStyleChange:e=>{j(e)}}),J.jsx(fk,{isOpen:f,onClose:()=>m(!1),onCoverChange:e=>{i&&i(e),m(!1)},currentCover:k()}),t&&J.jsx(mk,{isOpen:g,onClose:()=>v(!1),book:e,ebookSpecs:t})]});var F}const vk=["ePub","CBR","CBZ","PDF","MOBI","AZW3","FB2","TXT","DJVU","Autre"],bk=["MP3","FLAC","Autre"],xk=["Original","3200x4307","2560x3361","2100 x 2700","1650x2169","1622x2200","1325x1721","760 x 1060","Autre"],yk=["320 kbps","160 kbps","128 kbps","64 kbps","Autre"],wk=["Ko","Mo","Go"];function _k({onSave:e,onCancel:t,initialSpecs:r,bookData:n,scanInfo:i}){var a;const{t:s}=__(),[o,l]=U.useState(!1),[c,u]=U.useState(!!(null==r?void 0:r.customTag)),[d,h]=U.useState((null==r?void 0:r.customTag)||""),[p,f]=U.useState(!1),[m,g]=U.useState(!1),[v,b]=U.useState(!1),[x,y]=U.useState(""),[w,_]=U.useState(null),[k,N]=U.useState([]),[j,S]=U.useState([]),[C,E]=U.useState({title:"",tome:"",authors:"",year:"",language:"",format:"",team:"",edition:[],special:[]}),[$,D]=U.useState(()=>{var e,t,a;const s={isAudiobook:(null==r?void 0:r.isAudiobook)||!1,fileName:(null==r?void 0:r.fileName)||"",fileSize:(null==r?void 0:r.fileSize)||{value:1,unit:"Mo"},format:(null==r?void 0:r.format)||"ePub",quality:(null==r?void 0:r.quality)||"Original",source:(null==r?void 0:r.source)||"",drm:(null==r?void 0:r.drm)||!1,edition:(null==r?void 0:r.edition)||void 0,language:(null==r?void 0:r.language)||"fr",notes:(null==r?void 0:r.notes)||void 0,publisher:(null==r?void 0:r.publisher)||void 0,year:(null==r?void 0:r.year)||(new Date).getFullYear(),isbn:(null==r?void 0:r.isbn)||void 0,title:null==r?void 0:r.title,subtitle:null==r?void 0:r.subtitle,authors:null==r?void 0:r.authors,pageCount:null==r?void 0:r.pageCount,description:null==r?void 0:r.description,mainCategory:null==r?void 0:r.mainCategory,bookDisplayNumber:null==r?void 0:r.bookDisplayNumber,numberOfFiles:null==r?void 0:r.numberOfFiles,ebookCount:null==r?void 0:r.ebookCount,ebookFiles:null==r?void 0:r.ebookFiles,customTag:null==r?void 0:r.customTag};if(i){s.ebookCount=i.ebookCount,s.numberOfFiles=i.totalFiles||i.ebookCount,s.ebookFiles=i.ebookFiles,s.pageCount=i.pageCount,s.format=i.format,s.fileName=i.fileName||"";const e=i.totalSize,t=e/1024,r=e/1048576,n=e/1073741824;s.fileSize=r<1?{value:parseFloat(t.toFixed(2)),unit:"Ko"}:n<1?{value:parseFloat(r.toFixed(2)),unit:"Mo"}:{value:parseFloat(n.toFixed(2)),unit:"Go"}}if(null==n?void 0:n.volumeInfo){const{volumeInfo:r}=n;if(s.title=r.title,s.subtitle=r.subtitle,s.authors=r.authors,s.publisher=r.publisher,s.publishedDate=r.publishedDate,r.publishedDate&&(s.year=new Date(r.publishedDate).getFullYear()),r.description&&(s.description=r.description.replace(/<[^>]*>/g,"")),r.industryIdentifiers){s.industryIdentifiers=r.industryIdentifiers.map(e=>({type:e.type,identifier:e.identifier}));const n=null==(e=r.industryIdentifiers.find(e=>"ISBN_13"===e.type))?void 0:e.identifier,i=null==(t=r.industryIdentifiers.find(e=>"ISBN_10"===e.type))?void 0:t.identifier;s.isbn=n||i||(null==(a=r.industryIdentifiers[0])?void 0:a.identifier)}!s.pageCount&&r.pageCount&&(s.pageCount=r.pageCount),s.language=r.language||"fr",r.categories&&r.categories.length>0&&(s.mainCategory=hk(r.categories[0]));const i=r;if(i.seriesInfo&&"object"==typeof i.seriesInfo&&null!==i.seriesInfo){const e=i.seriesInfo;"bookDisplayNumber"in e&&(s.bookDisplayNumber=e.bookDisplayNumber)}}return s});U.useEffect(()=>{r&&D(e=>({...e,...r,fileSize:r.fileSize||e.fileSize}))},[r]),U.useEffect(()=>{D(e=>{if(e.isAudiobook){const t=bk.includes(e.format)?e.format:"MP3",r=yk.includes(e.quality)||e.quality&&"Original"!==e.quality&&!xk.includes(e.quality)?e.quality:"320 kbps";return{...e,format:t,quality:r}}{const t=vk.includes(e.format)?e.format:"ePub",r=xk.includes(e.quality)||e.quality&&"320 kbps"!==e.quality&&!yk.includes(e.quality)?e.quality:"Original";return{...e,format:t,quality:r}}})},[$.isAudiobook]);const P=(e,t)=>{D(r=>{const n={...r,[e]:t};return["title","bookDisplayNumber","authors","year","language","format"].includes(e)&&(n.customTag=void 0),n}),["title","bookDisplayNumber","authors","year","language","format"].includes(e)&&(u(!1),h(""))},T=(e,t)=>{if("unit"===e){const e=$.fileSize.unit,r=t,n=$.fileSize.value;let i=n;"Mo"===e?i=1024*n:"Go"===e&&(i=1024*n*1024);let a=i;"Mo"===r?a=i/1024:"Go"===r&&(a=i/1048576);const s=a<.01?6:a<1?4:2;D(e=>({...e,fileSize:{value:parseFloat(a.toFixed(s)),unit:r}}))}else D(e=>({...e,fileSize:{...e.fileSize,value:t}}))},A=e=>{if(!e)return"";const t=e.lastIndexOf("-");if(-1===t)return"";return e.substring(t+1).replace(/\.[^.]*$/,"")||""},F=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9.\s]/g,"").replace(/\s+/g,".").replace(/\.+/g,"."),R=()=>{if($.customTag)return o?$.customTag.replace(/\./g," "):$.customTag;const e=[];$.title&&e.push(F($.title)),$.bookDisplayNumber&&e.push(`T${$.bookDisplayNumber}`),$.authors&&$.authors.length>0&&e.push($.authors.map(e=>F(e)).join("")),$.year&&e.push($.year.toString()),j.length>0&&e.push(...j),k.length>0&&e.push(...k),$.language&&e.push($.language.toUpperCase()),$.format&&e.push($.format);const t=null!==w?w:A($.fileName),r=t?e.join(".")+"-"+t:e.join(".");return o?r.replace(/\./g," "):r},I=()=>{const e=[];C.title&&e.push(F(C.title)),C.tome&&e.push(`T${C.tome}`),C.authors&&e.push(F(C.authors)),C.year&&e.push(C.year),j.length>0&&e.push(...j),k.length>0&&e.push(...k),C.language&&e.push(C.language.toUpperCase()),C.format&&e.push(C.format);const t=C.team?e.join(".")+"-"+C.team:e.join(".");return o?t.replace(/\./g," "):t};U.useEffect(()=>{const e=null!==w?w:A($.fileName);E(t=>{var r,n;return{...t,title:$.title||"",tome:$.bookDisplayNumber||"",authors:(null==(r=$.authors)?void 0:r.join(", "))||"",year:(null==(n=$.year)?void 0:n.toString())||"",language:$.language||"",format:$.format||"",team:e,edition:k,special:j}})},[$.title,$.bookDisplayNumber,$.authors,$.year,$.language,$.format,$.fileName,w,k,j]);const M=(e,t)=>{"edition"===e?N(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]):S(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]),E(r=>({...r,[e]:r[e].includes(t)?r[e].filter(e=>e!==t):[...r[e],t]}))};return J.jsxs("div",{className:"max-w-4xl mx-auto bg-gray-800/60 backdrop-blur-sm rounded-2xl p-8 border border-gray-700/50",children:[J.jsx("div",{className:"flex items-center justify-between mb-8",children:J.jsxs("div",{className:"flex items-center",children:[J.jsxs("button",{onClick:t,className:"flex items-center space-x-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors mr-4",children:[J.jsx(Cy,{className:"w-4 h-4"}),J.jsx("span",{children:s("specs.back")})]}),J.jsx(Py,{className:"w-6 h-6 text-violet-400 mr-3"}),J.jsx("h2",{className:"text-2xl font-bold text-white",children:s("ebook.specs.title")})]})}),J.jsxs("form",{onSubmit:t=>{var r,n,i,a,s,o,l;t.preventDefault(),console.log("Description avant sauvegarde:",$.description);const u={...$,fileName:(null==(r=$.fileName)?void 0:r.trim())||"",source:(null==(n=$.source)?void 0:n.trim())||"",edition:(null==(i=$.edition)?void 0:i.trim())||void 0,notes:(null==(a=$.notes)?void 0:a.trim())||void 0,publisher:(null==(s=$.publisher)?void 0:s.trim())||void 0,isbn:(null==(o=$.isbn)?void 0:o.trim())||void 0,description:(null==(l=$.description)?void 0:l.trim())||"",customTag:c?d:R()};console.log("Specs compltes  sauvegarder:",u),e(u)},className:"space-y-8",children:[J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[J.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[J.jsx(Gy,{className:"w-5 h-5 mr-2 text-blue-400"}),s("ebook.fileInfo")]}),J.jsxs("div",{className:"mb-6 flex items-center justify-end space-x-3",children:[J.jsx("span",{className:"text-white font-medium",children:s("ebook.audiobook")}),J.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[J.jsx("input",{type:"checkbox",checked:$.isAudiobook,onChange:e=>P("isAudiobook",e.target.checked),className:"sr-only peer"}),J.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-violet-300/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-violet-600"})]})]}),J.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:s("ebook.filename")}),J.jsx("input",{type:"text",value:$.fileName,onChange:e=>P("fileName",e.target.value),placeholder:s("ebook.fileNamePlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:s("ebook.size")}),J.jsxs("div",{className:"flex space-x-2",children:[J.jsx("input",{type:"number",value:$.fileSize.value,onChange:e=>T("value",parseFloat(e.target.value)||0),min:"0",step:"0.01",className:"w-24 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"}),J.jsx("select",{value:$.fileSize.unit,onChange:e=>T("unit",e.target.value),className:"w-20 bg-gray-700 border border-gray-600 rounded-lg px-2 py-2 text-white focus:outline-none focus:border-violet-500",children:wk.map(e=>J.jsx("option",{value:e,children:e},e))})]})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:s("ebook.format")}),J.jsx("select",{value:$.format,onChange:e=>P("format",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:$.isAudiobook?bk.map(e=>J.jsx("option",{value:e,children:e},e)):vk.map(e=>J.jsx("option",{value:e,children:e},e))})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:s("ebook.quality")}),($.isAudiobook?yk.includes($.quality):xk.includes($.quality))?J.jsx("select",{value:$.quality,onChange:e=>{const t=e.target.value;P("quality","Autre"===t?"":t)},className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500",children:$.isAudiobook?yk.map(e=>J.jsx("option",{value:e,children:e},e)):xk.map(e=>J.jsx("option",{value:e,children:e},e))}):J.jsx("input",{type:"text",value:$.quality,onChange:e=>P("quality",e.target.value),onKeyDown:e=>"Enter"===e.key&&e.preventDefault(),placeholder:"Entrez la qualit",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500"})]})]})]}),J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[J.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[J.jsx(Ty,{className:"w-5 h-5 mr-2 text-green-400"}),s("ebook.metadata")]}),J.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[J.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:s("ebook.title")}),J.jsx("input",{type:"text",value:$.title||"",onChange:e=>P("title",e.target.value),placeholder:s("ebook.titlePlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),J.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:s("ebook.subtitle")}),J.jsx("input",{type:"text",value:$.subtitle||"",onChange:e=>P("subtitle",e.target.value),placeholder:s("ebook.subtitlePlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),J.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[J.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-300 mb-2",children:[J.jsx(ww,{className:"w-4 h-4"}),J.jsx("span",{children:s("ebook.authors")})]}),J.jsx("input",{type:"text",value:(null==(a=$.authors)?void 0:a.join(", "))||"",onChange:e=>P("authors",e.target.value.split(",").map(e=>e.trim())),placeholder:s("ebook.authorsPlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:s("ebook.publisher")}),J.jsx("input",{type:"text",value:$.publisher||"",onChange:e=>P("publisher",e.target.value),placeholder:s("ebook.publisherPlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),J.jsxs("div",{children:[J.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-300 mb-2",children:[J.jsx(Fy,{className:"w-4 h-4"}),J.jsx("span",{children:s("ebook.year")})]}),J.jsx("input",{type:"number",value:$.year||"",onChange:e=>P("year",e.target.value?parseInt(e.target.value):void 0),placeholder:s("ebook.yearPlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:s("ebook.isbnLabel")}),J.jsx("input",{type:"text",value:$.isbn||"",onChange:e=>P("isbn",e.target.value),placeholder:s("ebook.isbnPlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:s("ebook.tomeNumber")}),J.jsx("input",{type:"text",value:$.bookDisplayNumber||"",onChange:e=>P("bookDisplayNumber",e.target.value),placeholder:s("ebook.tomeNumberPlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:s("ebook.edition")}),J.jsx("input",{type:"text",value:$.edition||"",onChange:e=>P("edition",e.target.value),placeholder:s("ebook.editionPlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),J.jsxs("div",{children:[J.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[J.jsx(Zy,{className:"w-4 h-4 inline-block mr-1"}),s("ebook.language")]}),J.jsx("input",{type:"text",value:$.language,onChange:e=>P("language",e.target.value),placeholder:s("ebook.languagePlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),J.jsxs("div",{children:[J.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-300 mb-2",children:[J.jsx(tw,{className:"w-4 h-4"}),J.jsx("span",{children:s("ebook.pagesLabel")})]}),J.jsx("input",{type:"number",value:$.pageCount||"",onChange:e=>P("pageCount",e.target.value?parseInt(e.target.value):void 0),placeholder:s("ebook.pagesPlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),J.jsxs("div",{children:[J.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-300 mb-2",children:[J.jsx(vw,{className:"w-4 h-4"}),J.jsx("span",{children:s("ebook.mainCategory")})]}),J.jsx("input",{type:"text",value:$.mainCategory||"",onChange:e=>P("mainCategory",e.target.value),placeholder:s("ebook.mainCategoryPlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:s("ebook.publicationDate")}),J.jsx("input",{type:"text",value:$.publishedDate||"",onChange:e=>P("publishedDate",e.target.value),placeholder:s("ebook.publicationDatePlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]})]}),J.jsxs("div",{className:"mt-6",children:[J.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[J.jsx(Dy,{className:"w-4 h-4 inline-block mr-1"}),s("ebook.descriptionLabel")]}),J.jsx("textarea",{value:$.description||"",onChange:e=>P("description",e.target.value),placeholder:s("ebook.descriptionPlaceholder"),rows:5,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500"})]})]}),J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[J.jsxs("div",{className:"flex items-center mb-6 relative group",children:[J.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[J.jsx(vw,{className:"w-5 h-5 mr-2 text-purple-400"}),s("ebook.tag.auto.title")]}),J.jsx(iw,{className:"w-4 h-4 ml-2 text-gray-400 cursor-help"}),J.jsx("div",{className:"absolute left-0 top-full mt-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:s("ebook.tag.auto.tooltip")})]}),J.jsxs("div",{children:[J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx("div",{className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 overflow-x-auto",children:c?J.jsx("input",{type:"text",value:d,onChange:e=>h(e.target.value),className:"w-full bg-transparent text-green-400 font-mono text-sm outline-none",autoFocus:!0}):J.jsx("code",{className:"text-green-400 font-mono text-sm whitespace-nowrap",children:R()})}),J.jsx("button",{type:"button",onClick:()=>{const e=c?d:R();navigator.clipboard.writeText(e),g(!0),setTimeout(()=>g(!1),2e3)},className:"p-3 border rounded-lg transition-all "+(m?"bg-green-600 border-green-500":"bg-gray-700 hover:bg-gray-600 border-gray-600"),title:s("tag.copy"),children:m?J.jsx(My,{className:"w-5 h-5 text-white"}):J.jsx(Uy,{className:"w-5 h-5 text-gray-300"})}),J.jsx("button",{type:"button",onClick:()=>{const e=null!==w?w:A($.fileName);E(t=>{var r,n;return{...t,title:$.title||"",tome:$.bookDisplayNumber||"",authors:(null==(r=$.authors)?void 0:r.join(", "))||"",year:(null==(n=$.year)?void 0:n.toString())||"",language:$.language||"",format:$.format||"",team:e,edition:k,special:j}}),f(!0)},className:"p-3 bg-gray-700 hover:bg-gray-600 border border-gray-600 rounded-lg transition-colors",title:s("tag.edit"),children:J.jsx(mw,{className:"w-5 h-5 text-gray-300"})})]}),J.jsxs("div",{className:"flex items-center justify-between mt-2",children:[J.jsx("p",{className:"text-xs text-gray-400",children:s("ebook.tag.pattern")}),J.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-400",children:[J.jsx("input",{type:"checkbox",checked:o,onChange:e=>l(e.target.checked),className:"rounded border-gray-500 bg-gray-600 text-violet-600 focus:ring-violet-500"}),J.jsx("span",{children:s("ebook.tag.spaces")})]})]})]})]}),J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[J.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[J.jsx(vw,{className:"w-5 h-5 mr-2 text-yellow-400"}),s("ebook.releaseInfo")]}),J.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:s("ebook.source")}),J.jsx("input",{type:"text",value:$.source||"",onChange:e=>P("source",e.target.value),placeholder:s("ebook.sourcePlaceholder"),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:s("ebook.filesCount")}),J.jsx("input",{type:"number",value:$.numberOfFiles||"",onChange:e=>P("numberOfFiles",e.target.value?parseInt(e.target.value):void 0),placeholder:s("ebook.filesCountPlaceholder"),min:"1",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500"})]})]}),J.jsxs("div",{className:"mt-6",children:[J.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[J.jsx(cw,{className:"w-4 h-4 inline-block mr-1"}),s("specs.notes")]}),J.jsx("textarea",{value:$.notes||"",onChange:e=>P("notes",e.target.value),placeholder:s("specs.notes.placeholder"),rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-violet-500"})]})]}),J.jsxs("div",{className:"flex justify-end space-x-4",children:[J.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:s("ebook.cancel")}),J.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-6 py-3 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors",children:[J.jsx(dw,{className:"w-4 h-4"}),J.jsx("span",{children:s("ebook.generate.sheet")})]})]})]}),p&&J.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-end justify-center z-50 p-4",children:J.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl p-8 w-full max-w-3xl border border-violet-500/20 shadow-2xl mb-4 max-h-[80vh] overflow-y-auto relative",children:[J.jsx("button",{type:"button",onClick:()=>f(!1),className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",title:"Fermer",children:J.jsx(Nw,{className:"w-5 h-5"})}),J.jsx("h3",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-violet-400 to-purple-400 mb-6",children:s("ebook.tag.edit.modal.title")}),J.jsxs("div",{className:"space-y-6",children:[J.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[J.jsxs("div",{children:[J.jsx("label",{className:"block text-xs font-semibold text-violet-300 mb-2 uppercase tracking-wide",children:s("ebook.tag.edit.title")}),J.jsx("input",{type:"text",className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all",value:C.title,onChange:e=>E({...C,title:e.target.value})})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-xs font-semibold text-violet-300 mb-2 uppercase tracking-wide",children:s("ebook.tag.edit.tome")}),J.jsx("input",{type:"text",className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all",value:C.tome,onChange:e=>E({...C,tome:e.target.value})})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-xs font-semibold text-violet-300 mb-2 uppercase tracking-wide",children:s("ebook.tag.edit.authors")}),J.jsx("input",{type:"text",className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all",value:C.authors,onChange:e=>E({...C,authors:e.target.value})})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-xs font-semibold text-violet-300 mb-2 uppercase tracking-wide",children:s("ebook.tag.edit.year")}),J.jsx("input",{type:"text",className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all",value:C.year,onChange:e=>E({...C,year:e.target.value})})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-xs font-semibold text-violet-300 mb-2 uppercase tracking-wide",children:s("ebook.tag.edit.language")}),J.jsx("input",{type:"text",className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all",value:C.language,onChange:e=>E({...C,language:e.target.value})})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-xs font-semibold text-violet-300 mb-2 uppercase tracking-wide",children:s("ebook.tag.edit.format")}),J.jsx("input",{type:"text",className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all",value:C.format,onChange:e=>E({...C,format:e.target.value})})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-xs font-semibold text-violet-300 mb-2 uppercase tracking-wide",children:s("ebook.tag.edit.team")}),J.jsx("input",{type:"text",className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all",value:C.team,onChange:e=>{E({...C,team:e.target.value}),_(e.target.value)}})]})]}),J.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-4 border border-gray-600/50",children:[J.jsxs("label",{className:"block text-sm font-bold text-yellow-400 mb-3 flex items-center",children:[J.jsx(mw,{className:"w-4 h-4 mr-2"}),s("ebook.tag.edit.edition")]}),J.jsx("div",{className:"flex gap-2 flex-wrap",children:["Integrale","Hors-Serie","Pack"].map(e=>J.jsx("button",{type:"button",onClick:()=>M("edition",e),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(C.edition.includes(e)?"bg-yellow-600 border-yellow-500 text-white":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-yellow-500/50"),children:e},e))})]}),J.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-4 border border-gray-600/50",children:[J.jsxs("label",{className:"block text-sm font-bold text-red-400 mb-3 flex items-center",children:[J.jsx(vw,{className:"w-4 h-4 mr-2"}),s("ebook.tag.edit.special")]}),J.jsx("div",{className:"flex gap-2 flex-wrap",children:["REPACK","PROPER"].map(e=>J.jsx("button",{type:"button",onClick:()=>M("special",e),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(C.special.includes(e)?"bg-red-600 border-red-500 text-white":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-red-500/50"),children:e},e))})]}),J.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-4 border border-gray-600/50",children:[J.jsxs("div",{className:"flex items-center justify-between mb-2",children:[J.jsx("label",{className:"block text-sm font-bold text-green-400",children:s("ebook.tag.preview")}),J.jsx("button",{type:"button",onClick:()=>{const e=I();navigator.clipboard.writeText(e),b(!0),setTimeout(()=>b(!1),2e3)},className:"p-2 border rounded-lg transition-all "+(v?"bg-green-600 border-green-500":"bg-gray-700 hover:bg-gray-600 border-gray-600"),title:s("tag.copy"),children:v?J.jsx(My,{className:"w-4 h-4 text-white"}):J.jsx(Uy,{className:"w-4 h-4 text-gray-300"})})]}),J.jsx("div",{className:"overflow-x-auto",children:J.jsx("code",{className:"text-green-400 font-mono text-sm whitespace-nowrap",children:I()})})]})]}),J.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t border-gray-700",children:[J.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-6 py-2.5 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-all font-medium",children:s("ebook.tag.modal.close")}),J.jsx("button",{type:"button",onClick:()=>{const e=I();h(e),u(!0),P("customTag",e),f(!1)},className:"px-6 py-2.5 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white rounded-lg transition-all shadow-lg hover:shadow-violet-500/50 font-medium",children:s("ebook.tag.modal.apply")})]})]})})]})}function kk({tag:e,onTagUpdate:t,showEditButton:r=!0,fileName:n,audioTracks:i=[],videoQuality:a,releaseGroup:s}){const{t:o}=__(),[l,c]=U.useState(!1),[u,d]=U.useState(!1),[h,p]=U.useState(()=>{if(n){const e=(n.split(/[\\/]/).pop()||n).replace(/\.[^/.]+$/,""),t=e.match(/\b(19\d{2}|20\d{2})\b/);if(t){return e.substring(0,t.index).trim().replace(/[._-]+$/,"").replace(/[._-]/g," ").trim()}const r=e.match(/\b(2160p|1080p|720p|480p|UHD|HD|BluRay|WEB|HDTV|DVDRip)\b/i);if(r){return e.substring(0,r.index).trim().replace(/[._-]+$/,"").replace(/[._-]/g," ").trim()}return e.replace(/[._-]/g," ")}return""}),[f,m]=U.useState(()=>{if(n){const e=(n.split(/[\\/]/).pop()||n).match(/\b(19\d{2}|20\d{2})\b/);return e?e[1]:""}return""}),[g,v]=U.useState(()=>{if(s){const e=s.match(/-([^-]+)$/);return e?e[1]:""}return""}),[b,x]=U.useState(!1),[y,w]=U.useState(null),[_,k]=U.useState([]),[N,j]=U.useState(!1),[S,C]=U.useState(!1),[E,$]=U.useState(null),[D,P]=U.useState([]),[T,A]=U.useState(!1),[F,R]=U.useState(null),I={CUSTOM:o("tooltip.custom"),Atmos:"Dolby Atmos",VFF:o("tooltip.vff"),VFI:o("tooltip.vfi"),VFQ:o("tooltip.vfq"),VF2:o("tooltip.vf2"),DV:o("tooltip.dv"),HDR:o("tooltip.hdr"),"HDR10+":o("tooltip.hdr10plus"),HLG:o("tooltip.hlg"),"10 bits":o("tooltip.10bits"),"4KLight":o("tooltip.4klight"),HDLight:o("tooltip.hdlight"),IMAX:o("tooltip.imax"),"3D":o("tooltip.3d"),DC:o("tooltip.dc"),EXTENDED:o("tooltip.extended"),THEATRiCAL:o("tooltip.theatrical"),UNRATED:o("tooltip.unrated"),"FiNAL.CUT":o("tooltip.finalcut"),REMASTERED:o("tooltip.remastered"),RESTORED:o("tooltip.restored"),REPACK:o("tooltip.repack"),PROPER:o("tooltip.proper"),AD:o("tooltip.ad")},M=T?e.split(/([.-])/).map((e,t,r)=>{if("."===e&&t>0&&t<r.length-1){const n=r[t-1],i=r[t+1];if(/^\d+$/.test(n)&&/^\d+$/.test(i))return e;if(/^H$/i.test(n)&&/^\d+$/.test(i))return e;if(/HD$/i.test(n)&&/^(MA|HRA)$/i.test(i))return e;if(/^DTS$/i.test(n)&&/^(HD|ES)$/i.test(i))return e;if(/^FiNAL$/i.test(n)&&/^CUT$/i.test(i))return e}return"."===e?" ":e}).join(""):e;return J.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6",children:[J.jsxs("div",{className:"flex items-center mb-6 relative group",children:[J.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[J.jsx(vw,{className:"w-5 h-5 mr-2 text-purple-400"}),o("tag.auto.generated")]}),J.jsx(iw,{className:"w-4 h-4 ml-2 text-gray-400 cursor-help"}),J.jsx("div",{className:"absolute left-0 top-full mt-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:o("tag.audio.codec.tooltip")})]}),J.jsxs("div",{children:[J.jsxs("div",{className:"flex items-center gap-2",children:[J.jsx("div",{className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 overflow-x-auto",children:J.jsx("code",{className:"text-green-400 font-mono text-sm whitespace-nowrap",children:M})}),J.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(M),c(!0),setTimeout(()=>c(!1),2e3)}catch(e){console.error("Failed to copy:",e)}},className:"p-3 bg-gray-700 hover:bg-gray-600 border border-gray-600 rounded-lg transition-colors",title:o(l?"nfo.viewer.copied":"tag.copy"),children:l?J.jsx(My,{className:"w-5 h-5 text-green-400"}):J.jsx(Uy,{className:"w-5 h-5 text-gray-300"})}),r&&J.jsx("button",{onClick:()=>d(!0),className:"p-3 bg-gray-700 hover:bg-gray-600 border border-gray-600 rounded-lg transition-colors",title:o("tag.edit"),children:J.jsx(mw,{className:"w-5 h-5 text-gray-300"})})]}),J.jsxs("div",{className:"flex items-center justify-between mt-2",children:[J.jsx("p",{className:"text-xs text-gray-400",children:o("tag.format.pattern")}),J.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-400",children:[J.jsx("input",{type:"checkbox",checked:T,onChange:e=>A(e.target.checked),className:"rounded border-gray-500 bg-gray-600 text-violet-600 focus:ring-violet-500"}),J.jsx("span",{children:o("tag.spaces.instead.dots")})]})]})]}),u&&J.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:J.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl p-8 w-full max-w-2xl border border-violet-500/20 shadow-2xl max-h-[90vh] overflow-y-auto",children:[J.jsx("h3",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-violet-400 to-purple-400 mb-6",children:o("specs.edit.modal.title")}),J.jsxs("div",{className:"space-y-6",children:[J.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[J.jsxs("div",{children:[J.jsx("label",{className:"block text-xs font-semibold text-violet-300 mb-2 uppercase tracking-wide",children:o("specs.name")}),J.jsx("input",{type:"text",value:h,onChange:e=>p(e.target.value),className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all"})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-xs font-semibold text-violet-300 mb-2 uppercase tracking-wide",children:o("specs.edit.modal.year")}),J.jsx("input",{type:"text",value:f,onChange:e=>m(e.target.value),className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all"})]}),J.jsxs("div",{children:[J.jsx("label",{className:"block text-xs font-semibold text-violet-300 mb-2 uppercase tracking-wide",children:o("specs.team")}),J.jsx("input",{type:"text",value:g,onChange:e=>v(e.target.value),className:"w-full bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all"})]})]}),J.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-4 border border-gray-600/50",children:[J.jsxs("label",{className:"block text-sm font-bold text-green-400 mb-3 flex items-center",children:[J.jsx(kw,{className:"w-4 h-4 mr-2"}),o("specs.edit.modal.audio")]}),J.jsxs("div",{className:"space-y-3",children:[J.jsx("div",{className:"flex gap-2 flex-wrap",children:[{key:"CUSTOM",label:"CUSTOM"},{key:"AD",label:"AD"},{key:"Atmos",label:"Atmos"}].map(({key:e,label:t})=>J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>"CUSTOM"===e?x(!b):"AD"===e?j(!N):C(!S),onMouseEnter:()=>R(e),onMouseLeave:()=>R(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(("CUSTOM"===e?b:"AD"===e?N:S)?"bg-violet-600 border-violet-500 text-white shadow-lg shadow-violet-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-violet-500/50"),children:t}),F===e&&I[e]&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:I[e]})]},e))}),i.length>1&&i.some(e=>"fr"===e.languageCode||"fr-ca"===e.languageCode)&&J.jsx("div",{className:"flex gap-2 flex-wrap",children:["VFF","VFI","VFQ","VF2"].map(e=>J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>w(y===e?null:e),onMouseEnter:()=>R(e),onMouseLeave:()=>R(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(y===e?"bg-violet-600 border-violet-500 text-white shadow-lg shadow-violet-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-violet-500/50"),children:e}),F===e&&I[e]&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:I[e]})]},e))})]})]}),J.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-4 border border-gray-600/50",children:[J.jsxs("label",{className:"block text-sm font-bold text-blue-400 mb-3 flex items-center",children:[J.jsx(_w,{className:"w-4 h-4 mr-2"}),o("specs.edit.modal.video.standards")]}),J.jsxs("div",{className:"flex gap-2 flex-wrap",children:[["HDR","HDR10+","HLG"].map(e=>J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>{k(t=>t.includes(e)?t.filter(t=>t!==e):[...t.filter(e=>!["HDR","HDR10+","HLG"].includes(e)),e])},onMouseEnter:()=>R(e),onMouseLeave:()=>R(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(_.includes(e)?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-blue-500/50"),children:e}),F===e&&I[e]&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:I[e]})]},e)),J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>{k(e=>e.includes("DV")?e.filter(e=>"DV"!==e):[...e,"DV"])},onMouseEnter:()=>R("DV"),onMouseLeave:()=>R(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(_.includes("DV")?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-blue-500/50"),children:"DV"}),"DV"===F&&I.DV&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:I.DV})]}),"2160p"===a&&J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>{k(e=>e.includes("4KLight")?e.filter(e=>"4KLight"!==e):[...e,"4KLight"])},onMouseEnter:()=>R("4KLight"),onMouseLeave:()=>R(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(_.includes("4KLight")?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-blue-500/50"),children:"4KLight"}),"4KLight"===F&&I["4KLight"]&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:I["4KLight"]})]}),"1080p"===a&&J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>{k(e=>e.includes("HDLight")?e.filter(e=>"HDLight"!==e):[...e,"HDLight"])},onMouseEnter:()=>R("HDLight"),onMouseLeave:()=>R(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(_.includes("HDLight")?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-blue-500/50"),children:"HDLight"}),"HDLight"===F&&I.HDLight&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:I.HDLight})]}),J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>{k(e=>e.includes("10 bits")?e.filter(e=>"10 bits"!==e):[...e,"10 bits"])},onMouseEnter:()=>R("10 bits"),onMouseLeave:()=>R(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(_.includes("10 bits")?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-blue-500/50"),children:"10 bits"}),"10 bits"===F&&I["10 bits"]&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:I["10 bits"]})]}),["IMAX","3D"].map(e=>J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>{k(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},onMouseEnter:()=>R(e),onMouseLeave:()=>R(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(_.includes(e)?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-blue-500/50"),children:e}),F===e&&I[e]&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:I[e]})]},e))]})]}),J.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-4 border border-gray-600/50",children:[J.jsxs("label",{className:"block text-sm font-bold text-yellow-400 mb-3 flex items-center",children:[J.jsx(mw,{className:"w-4 h-4 mr-2"}),o("specs.edit.modal.edition")]}),J.jsx("div",{className:"flex gap-2 flex-wrap",children:["DC","EXTENDED","THEATRiCAL","UNRATED","FiNAL.CUT","REMASTERED","RESTORED"].map(e=>J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>$(E===e?null:e),onMouseEnter:()=>R(e),onMouseLeave:()=>R(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(E===e?"bg-yellow-600 border-yellow-500 text-white shadow-lg shadow-yellow-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-yellow-500/50"),children:e}),F===e&&I[e]&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:I[e]})]},e))})]}),J.jsxs("div",{className:"bg-gray-700/30 rounded-xl p-4 border border-gray-600/50",children:[J.jsxs("label",{className:"block text-sm font-bold text-red-400 mb-3 flex items-center",children:[J.jsx(vw,{className:"w-4 h-4 mr-2"}),o("specs.edit.modal.special.cases")]}),J.jsx("div",{className:"flex gap-2 flex-wrap",children:["REPACK","PROPER"].map(e=>J.jsxs("div",{className:"relative group",children:[J.jsx("button",{onClick:()=>{P(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},onMouseEnter:()=>R(e),onMouseLeave:()=>R(null),className:"px-2 py-1.5 text-sm rounded-lg border transition-all "+(D.includes(e)?"bg-red-600 border-red-500 text-white shadow-lg shadow-red-500/30":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-red-500/50"),children:e}),F===e&&I[e]&&J.jsx("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-2xl border border-gray-700 max-w-xs z-[9999] pointer-events-none",children:I[e]})]},e))})]})]}),J.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t border-gray-700",children:[J.jsx("button",{onClick:()=>{d(!1),x(!1),w(null),k([]),j(!1),C(!1),$(null),P([])},className:"px-6 py-2.5 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-all font-medium",children:o("nfo.cancel")}),J.jsx("button",{onClick:()=>{if(!(b||y||_.length>0||N||S||E||D.length>0))return void d(!1);const r=[],n=e.split(/[.\s]/).filter(e=>e&&e.trim()),i=[];let a=0;for(;a<n.length;){const e=n[a];if("DTS"===e&&a+1<n.length){if("HDHRA"===n[a+1]){i.push("DTS-HDHRA"),a+=2;continue}if("HD"===n[a+1]||"ES"===n[a+1]){i.push(`DTS-${n[a+1]}`),a+=2;continue}}/^\d+$/.test(e)&&a+1<n.length&&/^\d+$/.test(n[a+1])?(i.push(`${e}.${n[a+1]}`),a+=2):(i.push(e),a++)}if(h){const e=h.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\]()]/g,"").replace(/'/g,".").replace(/\s+/g,".").replace(/\.+/g,".").replace(/^\.|\.$/,"").trim();r.push(T?e.replace(/\./g," "):e)}f&&r.push(f),D.forEach(e=>r.push(e)),E&&r.push(E),b&&r.push("CUSTOM");const s=i.findIndex(e=>["FRENCH","MULTi","VOSTFR"].includes(e));-1!==s&&r.push(i[s]),y&&r.push(y),N&&r.push("AD");const o=i.findIndex(e=>/^\d{3,4}p$/.test(e));-1!==o&&(r.push(i[o]),_.forEach(e=>r.push("10 bits"===e?"10bits":e)));const l=i.findIndex(e=>/^(BluRay|WEB|HDTV|DVDRip|BDRip|WEBRip)$/i.test(e));-1!==l&&r.push(i[l]);const c=/^(DTS-HDHRA|DTS-HD|DTS-ES|DTS|DDP|DD|AAC|AC3|TrueHD|FLAC|MP3|Atmos)$/i,u=/^(\d+\.\d+|\d+ch)$/i;let p=null,m=null;for(let e=0;e<i.length;e++)if(c.test(i[e])){p=i[e],e+1<i.length&&u.test(i[e+1])&&(m=i[e+1]);break}p&&"Atmos"!==p&&r.push(p),m&&r.push(m),S&&r.push("Atmos");const v=i.findIndex(e=>/^(x264|x265|H264|H265|XviD|HEVC|AVC)$/i.test(e));-1!==v&&r.push(i[v]);let x=r.join(T?" ":".");g&&g.trim()&&(x+="-"+g),t&&t(x),d(!1)},className:"px-6 py-2.5 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-500 hover:to-purple-500 text-white rounded-lg transition-all shadow-lg hover:shadow-violet-500/50 font-medium",children:o("nfo.save")})]})]})})]})}function Nk({generatedNFO:e}={}){var t;const{t:r}=__(),[n,i]=U.useState(!1),[a,s]=U.useState(!1),[o,l]=U.useState(e||null),[c,u]=U.useState(null),[d,h]=U.useState({source:null,codec:null,resolution:null,audio:null}),[p,f]=U.useState(!1),[m,g]=U.useState("UNKNOWN"),[v,b]=U.useState(null),[x,y]=U.useState(null),w=U.useRef(!1);U.useEffect(()=>{(async()=>{if(e){l(e);const t=await ik.getNfoHistoryItemByContent(e);(null==t?void 0:t.fileName)&&u(t.fileName)}else l(null),u(null),f(!1),g("UNKNOWN")})()},[e]),U.useEffect(()=>{if(o){const e=t_(o);if(e){y(e);const t=e.video,r=e.audio,n={source:e.source||null,codec:(null==t?void 0:t.codec)||null,resolution:(null==t?void 0:t.quality)||null,audio:(null==r?void 0:r.map(e=>e.codec).join(", "))||null};h(n);const i=o.split(/\r?\n\r?\n/).find(e=>e.startsWith("Video"))||o,a=i.toLowerCase();if(["nvenc","hevc_nvenc","qsv","quicksync","amf","avc coding"].some(e=>a.includes(e)))g("GPU");else{let e=0;[{pattern:/x264/i,weight:1},{pattern:/libx264/i,weight:1},{pattern:/x265/i,weight:1},{pattern:/libx265/i,weight:1},{pattern:/rc=crf\s*=\s*\d+/i,weight:2},{pattern:/psy-rd/i,weight:1},{pattern:/psy-rdoq/i,weight:1},{pattern:/bframes\s*=\s*\d+/i,weight:2},{pattern:/ref\s*=\s*\d+/i,weight:2},{pattern:/wpp/i,weight:1},{pattern:/numa-pools/i,weight:1}].forEach(t=>{t.pattern.test(a)&&(e+=t.weight)}),g(e>=3?"CPU":"UNKNOWN")}const s=i.match(/Bits\/\(Pixel\*Frame\)\s*:\s*([\d.]+)/);if(s&&(null==t?void 0:t.quality)){const e=parseFloat(s[1]);"2160p"===t.quality&&e<.035||("1080p"===t.quality||"720p"===t.quality)&&e<.1?f(!0):f(!1)}else f(!1);if(!w.current){const t=function(e,t,r={}){var n,i;const a=[],{useSpaces:s=!1,mediaTitle:o,mediaYear:l}=r;if(o){const e=o.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9]/g,".").replace(/\.+/g,".").replace(/^\.|\.$/,"").trim();a.push(s?e.replace(/\./g," "):e),l&&a.push(l.toString())}else if(t){const{title:e,year:r}=function(e){const t=(e.split(/[\\/]/).pop()||e).replace(/\.[^/.]+$/,""),r=t.match(/\b(19\d{2}|20\d{2})\b/);if(r){const e=r.index;return{title:t.substring(0,e).trim().replace(/[._-]+$/,"").trim(),year:r[1]}}const n=t.match(/\b(2160p|1080p|720p|480p|UHD|HD|BluRay|WEB|HDTV|DVDRip)\b/i);return n?{title:t.substring(0,n.index).trim().replace(/[._-]+$/,"").trim()}:{title:t}}(t);if(e){const t=e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9]/g,".").replace(/\.+/g,".").replace(/^\.|\.$/,"").trim();a.push(s?t.replace(/\./g," "):t)}r&&a.push(r)}const c=e.audio||[],u=c.some(e=>{var t,r;return"fr"===e.languageCode||"fr-ca"===e.languageCode||(null==(t=e.language)?void 0:t.toLowerCase().includes("french"))||(null==(r=e.language)?void 0:r.toLowerCase().includes("franais"))}),d=c.length>0&&c.every(e=>{var t,r;return"fr"===e.languageCode||"fr-ca"===e.languageCode||(null==(t=e.language)?void 0:t.toLowerCase().includes("french"))||(null==(r=e.language)?void 0:r.toLowerCase().includes("franais"))});c.length>1&&u&&!d?a.push("MULTi"):u?a.push("FRENCH"):c.length>0&&a.push("VOSTFR");const h=(null==(n=e.video)?void 0:n.quality)?{"UHD Full BluRay":"2160p","UHD-Remux":"2160p","2160p":"2160p","1080p":"1080p","1080i":"1080p","720p":"720p","720i":"720p",SD:"480p"}[e.video.quality]||e.video.quality:"1080p";if(parseInt(h)>=1080&&a.push(h),e.source){let t=e.source;"WEB-DL"===t||"web"===t.toLowerCase()?t="WEB":"UHD BluRay"===t&&(t="UHD.BluRay"),a.push(t)}const p=c[0];if(p&&p.codec){const e={"Dolby Digital / AC3":"AC3","AC-3":"AC3","Dolby Digital Plus / E-AC3":"DDP","E-AC-3":"DDP","Dolby Digital Plus / E-AC3 Atmos":"DDP.Atmos","Dolby TrueHD":"TrueHD","Dolby TrueHD Atmos":"TrueHD.Atmos",DTS:"DTS","DTS-ES":"DTS-ES","DTS-HD HRA":"DTS-HDHRA","DTS-HD MA":"DTS-HDMA",AAC:"AAC",PCM:"LPCM",FLAC:"FLAC",Opus:"OPUS"},t=e[p.codec]||e[p.codec.toUpperCase()]||p.codec,r={Mono:"1.0","1 channel":"1.0","Stro":"2.0","2 channels":"2.0",5.1:"5.1","6 channels":"5.1","5.1.x":"5.1",6.1:"6.1","7 channels":"6.1",7.1:"7.1","8 channels":"7.1","7.1.x":"7.1"},n=p.channels?r[p.channels]||p.channels:"5.1";a.push(t),["1.0","2.0"].includes(n)||a.push(n)}if(null==(i=e.video)?void 0:i.codec){const t={HEVC:"H265",AVC:"H264",x265:"x265",x264:"x264","H.265":"H265","H.264":"H264","x.265":"x265","x.264":"x264"}[e.video.codec]||e.video.codec;a.push(t)}if(e.releaseGroup){const t=e.releaseGroup.match(/-([A-Za-z][A-Za-z0-9]*)$/i);if(t&&t[1]){const e=t[1];if(!/^(ray|x265|x264|hdma|es|hd|ma|hra|ac3|dts|ddp|aac|pcm|flac|opus|truehd|atmos)$/i.test(e))return a.join(s?" ":".")+"-"+e}}return a.join(s?" ":".")}(e,c);b(t)}}else h({source:null,codec:null,resolution:null,audio:null}),f(!1),g("UNKNOWN"),b(null),y(null)}else h({source:null,codec:null,resolution:null,audio:null}),f(!1),g("UNKNOWN"),b(null),y(null)},[o,c]);const _=U.useRef(null),k=async e=>{s(!0),u(e.name);try{const t=await Ow.analyzeFile(e);l(t),await ik.addItem({type:"nfo",title:e.name,year:(new Date).getFullYear(),poster:null,generatedNFO:t,fileName:e.name})}catch(t){console.error("Erreur lors de la gnration du NFO:",t),alert(r("nfo.generator.error"))}finally{s(!1)}};return J.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[J.jsxs("div",{className:"text-center mb-12",children:[J.jsxs("div",{className:"mb-6",children:[J.jsxs("h2",{className:"text-5xl md:text-6xl font-bold bg-clip-text text-transparent mb-6 leading-tight bg-gradient-to-r from-blue-400 via-cyan-400 to-sky-400",children:[r("nfo.generator.title"),J.jsx("br",{}),J.jsx("span",{className:"text-4xl md:text-5xl",children:r("nfo.generator.subtitle")})]}),J.jsx("div",{className:"w-24 h-1 mx-auto mb-6 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500"})]}),J.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:r("nfo.generator.description")})]}),o?J.jsxs("div",{className:"space-y-4",children:[J.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between bg-gray-800/60 backdrop-blur-sm border border-gray-700/50 rounded-xl p-4 space-y-4 sm:space-y-0",children:[J.jsxs("div",{className:"flex items-center space-x-3",children:[J.jsx(Yy,{className:"w-5 h-5 text-blue-400"}),J.jsx("div",{children:J.jsx("p",{className:"text-white font-medium",children:r("nfo.generator.success")})})]}),J.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:[J.jsxs("button",{onClick:()=>{o&&(navigator.clipboard.writeText(o),alert(r("nfo.generator.copy.success")))},className:"px-4 py-2 bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 hover:text-white transition-colors rounded-lg border border-gray-600/50 hover:border-gray-500 flex items-center justify-center space-x-2",children:[J.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:J.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),J.jsx("span",{children:r("nfo.generator.copy")})]}),J.jsxs("button",{onClick:()=>{if(!o)return;const e=new Blob([o],{type:"text/plain"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=c?`${c.replace(/\.[^/.]+$/,"")}.nfo`:"mediainfo.nfo",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white transition-colors rounded-lg flex items-center justify-center space-x-2",children:[J.jsx(qy,{className:"w-4 h-4"}),J.jsx("span",{children:r("nfo.generator.download")})]}),J.jsxs("button",{onClick:()=>{w.current=!1,l(null),u(null),f(!1),g("UNKNOWN"),b(null),y(null)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white transition-colors rounded-lg flex items-center justify-center space-x-2",children:[J.jsx(Nw,{className:"w-4 h-4"}),J.jsx("span",{children:r("nfo.generator.new")})]})]})]}),J.jsx("div",{className:"mt-2 p-3 border rounded-lg animate-in fade-in bg-green-500/10 border-green-500/20",children:J.jsxs("div",{className:"flex items-start gap-2",children:[J.jsx(Iy,{className:"h-4 w-4 shrink-0 mt-0.5 text-green-500","aria-hidden":"true"}),J.jsxs("div",{className:"flex-1 space-y-1",children:[J.jsx("p",{className:"text-xs font-semibold text-green-500",children:r("nfo.generator.summary.success")}),J.jsx("p",{className:"text-xs text-gray-300",children:r("nfo.generator.summary.description")}),d.source&&J.jsxs("p",{className:"text-xs text-gray-400",children:[" ",r("nfo.generator.summary.source"),": ",J.jsx("span",{className:"text-gray-300",children:d.source})]}),d.codec&&J.jsxs("p",{className:"text-xs text-gray-400",children:[" ",r("nfo.generator.summary.codec"),": ",J.jsx("span",{className:"text-gray-300",children:d.codec})]}),d.resolution&&J.jsxs("p",{className:"text-xs text-gray-400",children:[" ",r("nfo.generator.summary.resolution"),": ",J.jsx("span",{className:"text-gray-300",children:d.resolution})]}),d.audio&&J.jsxs("p",{className:"text-xs text-gray-400",children:[" ",r("nfo.generator.summary.audio"),": ",J.jsx("span",{className:"text-gray-300",children:d.audio})]})]})]})}),"GPU"===m&&J.jsx("div",{className:"mt-2 p-3 border rounded-lg animate-in fade-in bg-red-500/10 border-red-500/20",children:J.jsxs("div",{className:"flex items-start gap-2",children:[J.jsx($y,{className:"h-4 w-4 shrink-0 mt-0.5 text-red-500","aria-hidden":"true"}),J.jsxs("div",{className:"flex-1 space-y-1",children:[J.jsx("p",{className:"text-xs font-semibold text-red-400",children:r("nfo.generator.gpu.warning.title")}),J.jsx("p",{className:"text-xs text-gray-300",dangerouslySetInnerHTML:{__html:r("nfo.generator.gpu.warning.message")}})]})]})}),p&&"GPU"!==m&&J.jsx("div",{className:"mt-2 p-3 border rounded-lg animate-in fade-in bg-yellow-500/10 border-yellow-500/20",children:J.jsxs("div",{className:"flex items-start gap-2",children:[J.jsx(iw,{className:"h-4 w-4 shrink-0 mt-0.5 text-yellow-500","aria-hidden":"true"}),J.jsxs("div",{className:"flex-1 space-y-1",children:[J.jsx("p",{className:"text-xs font-semibold text-yellow-400",children:r("nfo.generator.hdlight.warning.title")}),J.jsx("p",{className:"text-xs text-gray-300",dangerouslySetInnerHTML:{__html:r("nfo.generator.hdlight.warning.message")}})]})]})}),v&&x&&J.jsx(kk,{tag:v,onTagUpdate:async e=>{if(w.current=!0,b(e),o&&c){const t=await ik.getNfoHistoryItemByContent(o);(null==t?void 0:t.id)&&await ik.removeItem(t.id),await ik.addItem({type:"nfo",title:c,year:(new Date).getFullYear(),poster:null,generatedNFO:o,fileName:c,torrentSpecs:x?{...x,tag:e}:void 0})}},fileName:c,showEditButton:!0,audioTracks:x.audio||[],videoQuality:null==(t=x.video)?void 0:t.quality,releaseGroup:x.releaseGroup}),J.jsxs("div",{className:"bg-gray-800/60 backdrop-blur-sm border border-gray-700/50 rounded-xl overflow-hidden",children:[J.jsxs("div",{className:"bg-gray-700/50 px-4 py-3 border-b border-gray-600/50",children:[J.jsx("h3",{className:"text-white font-medium",children:r("nfo.generator.content.title")})," ",J.jsx("p",{className:"text-gray-400 text-sm",children:c})]}),J.jsx("div",{className:"p-4 max-h-[600px] overflow-y-auto",children:J.jsx("pre",{className:"text-sm text-gray-300 font-mono whitespace-pre-wrap break-words",children:o})})]})]}):J.jsx("div",{onDragOver:e=>{e.preventDefault(),i(!0)},onDragLeave:e=>{e.preventDefault(),i(!1)},onDrop:async e=>{e.preventDefault(),i(!1);const t=Array.from(e.dataTransfer.files)[0];t&&(t.type.startsWith("video/")||t.name.match(/\.(mkv|avi|mp4|mov|wmv|flv|webm|m4v|3gp|ogv|iso|ts|m2ts)$/i))&&await k(t)},className:"relative transition-all duration-300",children:J.jsx("div",{className:"relative bg-gradient-to-br from-gray-800/80 to-gray-900/80 backdrop-blur-sm border-2 border-dashed rounded-2xl px-6 sm:px-12 lg:px-48 py-12 transition-all duration-300 "+(n?"border-blue-400 bg-blue-500/10 shadow-lg shadow-blue-500/20":"border-gray-600/50 hover:border-gray-500/70"),children:a?J.jsxs("div",{className:"text-center",children:[J.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-blue-500/20 rounded-full mb-4",children:J.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-blue-500 border-t-transparent"})}),J.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:r("nfo.generator.analyzing.title")}),J.jsx("p",{className:"text-gray-400",children:r("nfo.generator.analyzing.desc")})]}):J.jsxs("div",{className:"text-center",children:[J.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-500/20 to-cyan-500/20 rounded-full mb-6",children:J.jsx(Yy,{className:"w-10 h-10 text-blue-400"})}),J.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:r(n?"nfo.generator.drop.title":"nfo.generator.drop.subtitle")}),J.jsx("p",{className:"text-gray-400 mb-6",children:r(n?"nfo.generator.drop.analyzing":"nfo.generator.drop.desc")}),J.jsx("div",{className:"flex items-center justify-center space-x-4",children:J.jsxs("button",{onClick:()=>{var e;return null==(e=_.current)?void 0:e.click()},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-blue-500/25 flex items-center space-x-2",children:[J.jsx(yw,{className:"w-5 h-5"}),J.jsx("span",{children:r("nfo.generator.select.button")})]})}),J.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-2 text-xs text-gray-500",children:[J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"MKV"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"ISO"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"MP4"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"AVI"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"MOV"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"TS"}),J.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded",children:"M2TS"})]})]})})}),J.jsx("input",{ref:_,type:"file",accept:"video/*,.mkv,.avi,.mp4,.mov,.wmv,.flv,.webm,.m4v,.3gp,.ogv,.iso,.ts,.m2ts",onChange:async e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];r&&await k(r),e.target.value=""},className:"hidden"})]})}const jk="fichegen_migration_v1_completed";function Sk(){const{t:e,language:t}=__(),r=Rx(),n=Tx(),i=U.useRef(null),a=n.pathname.includes("/nfo")?"nfo":n.pathname.includes("/books")?"books":"movies",[s,o]=U.useState(""),[l,c]=U.useState(!1),[u,d]=U.useState(!1),[h,p]=U.useState(!1),[f,m]=U.useState(!1),[g,v]=U.useState(!1),[b,x]=U.useState(!1),[y,w]=U.useState(null),[_,k]=U.useState(null),[N,j]=U.useState(null),[S,C]=U.useState(null),[E,$]=U.useState(null),[D,P]=U.useState(null),[T,A]=U.useState(null),[F,R]=U.useState(null),[I,M]=U.useState(null),[O,L]=U.useState(null),[z,B]=U.useState(null),[H,q]=U.useState(null),[V,K]=U.useState(null);U.useEffect(()=>{(async()=>{const e=await b_.settings.get("tmdb_api_key");e&&(o(e.value),Cw.setApiKey(e.value))})()},[]);const W=U.useCallback((e,t)=>y&&(_||N)&&S?{type:y.media_type,title:(null==_?void 0:_.title)||(null==N?void 0:N.name)||"",year:_?new Date(_.release_date).getFullYear():N?new Date(N.first_air_date).getFullYear():0,poster:t,movieData:_?{..._,poster_path:t}:void 0,tvShowData:N?{...N,poster_path:t}:void 0,credits:S,torrentSpecs:e,generatedNFO:F||void 0}:null,[y,_,N,S,F]),G=U.useCallback(()=>{w(null),k(null),j(null),C(null),$(null),m(!1),p(!1),P(null),A(null)},[]),Y=e=>{if(A(e),y&&w({...y,poster_path:e}),E){const t=W(E,e);t&&ik.addItem(t)}},Q=e=>{q(e)},X=e=>{Z(),"nfo"===e?(R(null),r("/nfo")):r("books"===e?"/books":"/")},Z=()=>{w(null),k(null),j(null),C(null),$(null),A(null),P(null),M(null),L(null),B(null),q(null),K(null),p(!1),m(!1),d(!1),R(null)},ee=()=>{var e;null==(e=i.current)||e.scrollIntoView({behavior:"smooth"})};return J.jsxs("div",{className:"min-h-screen relative overflow-hidden flex flex-col transition-all duration-500 "+("nfo"===a?"bg-gradient-to-br from-blue-900 via-cyan-900 to-sky-900":"books"===a?"bg-gradient-to-br from-emerald-900 via-green-900 to-teal-900":"bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900"),children:[J.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] via-transparent to-transparent pointer-events-none transition-colors duration-500 "+("nfo"===a?"from-blue-400/20":"books"===a?"from-emerald-400/20":"from-purple-400/20")}),J.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 rounded-full blur-3xl animate-pulse pointer-events-none transition-colors duration-500 "+("nfo"===a?"bg-blue-500/10":"books"===a?"bg-emerald-500/10":"bg-violet-500/10")}),J.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 rounded-full blur-3xl animate-pulse delay-1000 pointer-events-none transition-colors duration-500 "+("nfo"===a?"bg-cyan-500/10":"books"===a?"bg-green-500/10":"bg-blue-500/10")}),J.jsx("header",{className:"border-b border-white/10 bg-black/30 backdrop-blur-md sticky top-0 z-40",children:J.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[J.jsxs("div",{className:"flex items-center justify-between",children:[J.jsxs("button",{className:"flex items-center space-x-3 hover:opacity-80 transition-opacity cursor-pointer",onClick:()=>X("movies"),children:[J.jsx("div",{className:"p-2 bg-violet-600 rounded-xl",children:J.jsx(Ly,{className:"w-6 h-6 md:w-8 md:h-8 text-white"})}),J.jsxs("div",{className:"hidden sm:block",children:[J.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:e("header.title")}),J.jsx("p",{className:"text-gray-400 text-xs md:text-sm",children:e("header.subtitle")})]})]}),J.jsx("div",{className:"hidden lg:flex absolute left-1/2 transform -translate-x-1/2",children:J.jsxs("div",{className:"flex items-center bg-gray-800/60 border border-gray-700/50 rounded-xl p-1",children:[J.jsxs("button",{onClick:()=>X("movies"),className:"flex items-center space-x-2 px-3 md:px-4 py-2 rounded-lg transition-all duration-200 "+("movies"===a?"bg-violet-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/60"),children:[J.jsx(Ly,{className:"w-4 h-4"}),J.jsx("span",{className:"text-sm",children:e("nav.movies")})]}),J.jsxs("button",{onClick:()=>X("books"),className:"flex items-center space-x-2 px-3 md:px-4 py-2 rounded-lg transition-all duration-200 "+("books"===a?"bg-emerald-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/60"),children:[J.jsx(Py,{className:"w-4 h-4"}),J.jsx("span",{className:"text-sm",children:e("nav.books")})]}),J.jsxs("button",{onClick:()=>window.open("https://jukop22.github.io/ziknfo/","_blank"),className:"flex items-center space-x-2 px-3 md:px-4 py-2 rounded-lg transition-all duration-200 text-gray-300 hover:text-white hover:bg-gray-700/60",children:[J.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4 feather feather-music",children:[J.jsx("path",{d:"M9 18V5l12-2v13"}),J.jsx("circle",{cx:"6",cy:"18",r:"3"}),J.jsx("circle",{cx:"18",cy:"16",r:"3"})]}),J.jsx("span",{className:"text-sm",children:"Audio"})]})]})}),J.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3",children:[J.jsx(nk,{}),J.jsxs("div",{className:"hidden md:flex items-center space-x-3",children:[J.jsxs("button",{onClick:()=>v(!0),className:"flex items-center space-x-2 px-3 md:px-4 py-2 bg-gray-800/60 hover:bg-gray-700/60 border border-gray-700/50 rounded-xl text-gray-300 hover:text-white transition-colors",children:[J.jsx(rw,{className:"w-4 h-4"}),J.jsx("span",{className:"text-sm",children:e("history.button")})]}),"books"!==a&&J.jsxs(J.Fragment,{children:[J.jsxs("button",{onClick:()=>c(!0),className:"flex items-center space-x-2 px-3 md:px-4 py-2 bg-gray-800/60 hover:bg-gray-700/60 border border-gray-700/50 rounded-xl text-gray-300 hover:text-white transition-colors",children:[J.jsx(fw,{className:"w-4 h-4"}),J.jsx("span",{className:"text-sm",children:"API"})]}),J.jsxs("button",{onClick:()=>X("nfo"),className:"flex items-center space-x-2 px-3 md:px-4 py-2 rounded-xl transition-colors "+("nfo"===a?"bg-blue-600 text-white shadow-lg":"bg-gray-800/60 hover:bg-gray-700/60 border border-gray-700/50 text-gray-300 hover:text-white"),children:[J.jsx(Yy,{className:"w-4 h-4"}),J.jsx("span",{className:"text-sm",children:"NFO"})]})]})]}),J.jsx("button",{className:"md:hidden p-2 text-white hover:bg-white/10 rounded-lg transition-colors",onClick:()=>x(!b),children:J.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[J.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),J.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),J.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]})]}),J.jsxs("div",{className:"lg:hidden mt-4 pt-4 border-t border-white/10",children:[J.jsx("div",{className:"flex items-center justify-center mb-4",children:J.jsxs("div",{className:"flex items-center bg-gray-800/60 border border-gray-700/50 rounded-xl p-1",children:[J.jsxs("button",{onClick:()=>X("movies"),className:"flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 "+("movies"===a?"bg-violet-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/60"),children:[J.jsx(Ly,{className:"w-4 h-4"}),J.jsx("span",{className:"text-sm",children:e("nav.movies")})]}),J.jsxs("button",{onClick:()=>X("books"),className:"flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 "+("books"===a?"bg-emerald-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700/60"),children:[J.jsx(Py,{className:"w-4 h-4"}),J.jsx("span",{className:"text-sm",children:e("nav.books")})]}),J.jsxs("button",{onClick:()=>window.open("https://jukop22.github.io/ziknfo/","_blank"),className:"flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 text-gray-300 hover:text-white hover:bg-gray-700/60",children:[J.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4 feather feather-music",children:[J.jsx("path",{d:"M9 18V5l12-2v13"}),J.jsx("circle",{cx:"6",cy:"18",r:"3"}),J.jsx("circle",{cx:"18",cy:"16",r:"3"})]}),J.jsx("span",{className:"text-sm",children:"Audio"})]})]})}),b&&J.jsxs("div",{className:"grid gap-2 md:hidden "+("books"===a?"grid-cols-1":"grid-cols-3"),children:[J.jsxs("button",{onClick:()=>{v(!0),x(!1)},className:"flex flex-col items-center px-2 py-2 bg-gray-800/60 hover:bg-gray-700/60 border border-gray-700/50 rounded-xl text-gray-300 hover:text-white transition-colors text-xs",children:[J.jsx(rw,{className:"w-4 h-4 mb-1"}),J.jsx("span",{children:e("history.button")})]}),"books"!==a&&J.jsxs(J.Fragment,{children:[J.jsxs("button",{onClick:()=>{c(!0),x(!1)},className:"flex flex-col items-center px-2 py-2 bg-gray-800/60 hover:bg-gray-700/60 border border-gray-700/50 rounded-xl text-gray-300 hover:text-white transition-colors text-xs",children:[J.jsx(fw,{className:"w-4 h-4 mb-1"}),J.jsx("span",{children:"API"})]}),J.jsxs("button",{onClick:()=>{X("nfo"),x(!1)},className:"flex flex-col items-center px-2 py-2 bg-gray-800/60 hover:bg-gray-700/60 border border-gray-700/50 rounded-xl text-gray-300 hover:text-white transition-colors text-xs",children:[J.jsx(Yy,{className:"w-4 h-4 mb-1"}),J.jsx("span",{children:"NFO"})]})]})]})]})]})}),J.jsxs("main",{className:"max-w-6xl mx-auto px-2 sm:px-4 py-4 sm:py-8 relative z-10 flex-1",children:["nfo"===a&&J.jsx("div",{className:"mb-12",children:J.jsx(Nk,{generatedNFO:F})}),"nfo"!==a&&!h&&!f&&!y&&!I&&J.jsxs("div",{className:"mb-12",ref:i,children:[J.jsxs("div",{className:"text-center mb-12",children:[J.jsxs("div",{className:"mb-6",children:[J.jsxs("h2",{className:"text-5xl md:text-6xl font-bold bg-clip-text text-transparent mb-6 leading-tight "+("books"===a?"bg-gradient-to-r from-emerald-400 via-green-400 to-teal-400":"bg-gradient-to-r from-violet-400 via-purple-400 to-blue-400"),children:[e("books"===a?"ebook.create":"app.create"),J.jsx("br",{}),J.jsx("span",{className:"text-4xl md:text-5xl",children:e("books"===a?"ebook.professional":"app.professional")})]}),J.jsx("div",{className:"w-24 h-1 mx-auto mb-6 rounded-full "+("books"===a?"bg-gradient-to-r from-emerald-500 to-teal-500":"bg-gradient-to-r from-violet-500 to-blue-500")})]}),J.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:e("books"===a?"ebook.description":"app.description")})]}),"movies"===a?J.jsx(k_,{onResultSelect:async e=>{w(e),k(null),j(null),C(null),A((null==e?void 0:e.poster_path)||null),d(!0);try{if("movie"===e.media_type){const[r,n]=await Promise.all([Cw.getMovie(e.id,t),Cw.getMovieCredits(e.id,t)]);k(r),C(n)}else if("tv"===e.media_type){const[r,n]=await Promise.all([Cw.getTVShow(e.id,t),Cw.getTVCredits(e.id,t)]);j(r),C(n)}p(!0)}catch(r){console.error("Erreur lors du chargement des dtails:",r)}d(!1)},onTechnicalSpecsFound:e=>{P(e)},onNFOGenerated:e=>{R(e)},apiKey:s,language:t}):J.jsx(uk,{onBookSelect:async(e,t)=>{M(e),K(t||null),d(!0);try{const r=await sk.getVolumeDetails(e.id);if(L(r),q(sk.getHighQualityImage(r.volumeInfo.imageLinks)),t)B(null);else{const e=await b_.ebookSpecs.get(r.id);B(e?e.specs:null)}p(!0)}catch(r){if(console.error("Error fetching book details:",r),L(e),q(sk.getHighQualityImage(e.volumeInfo.imageLinks)),t)B(null);else{const t=await b_.ebookSpecs.get(e.id);B(t?t.specs:null)}p(!0)}d(!1)},onContinueWithoutSelection:e=>{K(e),M(null),L(null),B(null),p(!1),m(!0)}})]}),u&&"nfo"!==a&&J.jsx("div",{className:"text-center py-12",children:J.jsxs("div",{className:"inline-flex items-center space-x-3",children:[J.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-violet-500"}),J.jsx("span",{className:"text-white text-lg",children:e("app.loading")})]})}),f&&(y||I||V)&&!h&&"nfo"!==a&&J.jsxs("div",{className:"mb-8",children:[D&&"movies"===a&&J.jsx("div",{className:"mb-6 bg-green-500/10 border border-green-500/30 rounded-xl p-4",children:J.jsxs("p",{className:"text-green-300",children:[J.jsx("strong",{children:e("app.specs.detected")})," ",e("app.specs.message")]})}),"movies"===a?J.jsx(tk,{onSave:e=>{$(e),m(!1),P(null);const t=W(e,T);t&&ik.addItem(t),window.scrollTo({top:0,behavior:"smooth"})},onCancel:()=>{m(!1),p(!0)},mediaTitle:(null==_?void 0:_.title)||(null==N?void 0:N.name),mediaYear:_?new Date(_.release_date).getFullYear():N?new Date(N.first_air_date).getFullYear():void 0,initialSpecs:D||(E?{video:E.video,audio:E.audio,subtitles:E.subtitles,source:E.source,releaseGroup:E.releaseGroup,notes:E.notes,numberOfFiles:E.numberOfFiles}:void 0)}):J.jsx(_k,{onSave:async e=>{if(B(e),m(!1),O&&await b_.ebookSpecs.put({id:O.id,specs:e}),O){const t={type:"book",title:O.volumeInfo.title,year:O.volumeInfo.publishedDate?new Date(O.volumeInfo.publishedDate).getFullYear():0,poster:H,bookData:O,ebookSpecs:e};await ik.addItem(t)}window.scrollTo({top:0,behavior:"smooth"})},onCancel:()=>{m(!1),p(!0)},bookData:O,initialSpecs:z,scanInfo:V})]}),h&&(y||I)&&!u&&!f&&"nfo"!==a&&J.jsxs("div",{className:"mb-8",children:[J.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mb-6 gap-4 sm:gap-0",children:[J.jsxs("div",{className:"flex items-center space-x-3",children:["books"===a?J.jsx(Py,{className:"w-6 h-6 text-emerald-400"}):"movie"===(null==y?void 0:y.media_type)?J.jsx(Xy,{className:"w-6 h-6 text-violet-400"}):J.jsx(xw,{className:"w-6 h-6 text-violet-400"}),J.jsx("h3",{className:"text-2xl font-bold text-white",children:e("app.preview.title")})]}),J.jsxs("div",{className:"flex space-x-3",children:[J.jsx("button",{onClick:()=>{p(!1),"movies"===a?G():Z()},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:e("app.preview.change")}),J.jsx("button",{onClick:()=>{p(!1),m(!0)},className:"px-6 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg transition-colors",children:e("app.preview.continue")})]})]}),J.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-4 mb-6",children:J.jsxs("p",{className:"text-blue-300",children:[J.jsx("strong",{children:e("app.preview.check")})," ",e("app.preview.verify")]})}),_&&S&&J.jsx(K_,{movie:_,credits:S,isPreview:!0,selectedPoster:T,onPosterChange:Y}),N&&S&&"movies"===a&&J.jsx(W_,{tvShow:N,credits:S,isPreview:!0,selectedPoster:T,onPosterChange:Y,onSeasonSelect:e=>{if(N){const t=N.seasons.find(t=>t.season_number===e);if(t){const e={...N,name:`${N.name} - ${t.name}`,overview:t.overview||N.overview,poster_path:t.poster_path||N.poster_path,first_air_date:t.air_date||N.first_air_date,number_of_episodes:t.episode_count,selectedSeason:t};j(e),A(t.poster_path||N.poster_path),p(!1),m(!0)}}}}),"books"===a&&I&&O&&J.jsx(gk,{book:O,isPreview:!0,selectedCover:H,onCoverChange:Q})]}),y&&!u&&!f&&!h&&E&&"movies"===a&&J.jsxs("div",{className:"mb-8",children:[J.jsxs("div",{className:"flex items-center justify-between mb-6",children:[J.jsxs("div",{className:"flex items-center space-x-3",children:["movie"===y.media_type?J.jsx(Xy,{className:"w-6 h-6 text-violet-400"}):J.jsx(xw,{className:"w-6 h-6 text-violet-400"}),J.jsx("h3",{className:"text-2xl font-bold text-white",children:e("app.sheet.generated")})]}),J.jsxs("div",{className:"flex space-x-3",children:[J.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg transition-colors",children:e("app.sheet.edit.specs")}),J.jsx("button",{onClick:G,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:e("app.sheet.new")})]})]}),_&&S&&J.jsx(K_,{movie:_,credits:S,torrentSpecs:E,selectedPoster:T,onPosterChange:Y,generatedNFO:F}),N&&S&&J.jsx(W_,{tvShow:N,credits:S,torrentSpecs:E,selectedPoster:T,onPosterChange:Y,generatedNFO:F})]}),O&&!u&&!f&&!h&&z&&"books"===a&&J.jsxs("div",{className:"mb-8",children:[J.jsxs("div",{className:"flex items-center justify-between mb-6",children:[J.jsxs("div",{className:"flex items-center space-x-3",children:[J.jsx(Py,{className:"w-6 h-6 text-emerald-400"}),J.jsx("h3",{className:"text-2xl font-bold text-white",children:e("ebook.sheet.generated")})]}),J.jsxs("div",{className:"flex space-x-3",children:[J.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-lg transition-colors",children:e("app.sheet.edit.specs")}),J.jsx("button",{onClick:Z,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:e("app.sheet.new")})]})]}),J.jsx(gk,{book:O,ebookSpecs:z,selectedCover:H,onCoverChange:Q})]}),!y&&!O&&!u&&!f&&!h&&"nfo"!==a&&J.jsxs("div",{className:"text-center py-20",children:[J.jsxs("div",{className:"mb-12",children:["movies"===a?J.jsxs("div",{className:"flex justify-center space-x-6 mb-8",children:[J.jsx("div",{className:"p-6 bg-gradient-to-br from-violet-500/20 to-purple-600/20 rounded-3xl backdrop-blur-sm border border-violet-400/20 shadow-2xl",children:J.jsx(Xy,{className:"w-16 h-16 text-violet-400"})}),J.jsx("div",{className:"p-6 bg-gradient-to-br from-blue-500/20 to-cyan-600/20 rounded-3xl backdrop-blur-sm border border-blue-400/20 shadow-2xl",children:J.jsx(xw,{className:"w-16 h-16 text-blue-400"})})]}):J.jsx("div",{className:"flex justify-center mb-8",children:J.jsx("div",{className:"p-6 bg-gradient-to-br from-emerald-500/20 to-teal-600/20 rounded-3xl backdrop-blur-sm border border-emerald-400/20 shadow-2xl",children:J.jsx(Py,{className:"w-16 h-16 text-emerald-400"})})}),J.jsx("h3",{className:"text-3xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent mb-4",children:e("books"===a?"ebook.ready.title":"app.ready.title")}),J.jsx("p",{className:"text-gray-300 text-lg max-w-lg mx-auto",children:e("books"===a?"ebook.ready.description":"app.ready.description")})]}),J.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:"movies"===a?J.jsxs(J.Fragment,{children:[J.jsxs("div",{onClick:ee,className:"bg-gradient-to-br from-green-500/10 to-emerald-600/10 backdrop-blur-sm border border-green-400/20 rounded-2xl p-8 text-center hover:scale-105 transition-transform duration-300 shadow-xl cursor-pointer",children:[J.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400/20 to-emerald-500/20 rounded-2xl mx-auto mb-6 flex items-center justify-center border border-green-400/30",children:J.jsx("span",{className:"text-green-400 text-3xl font-bold",children:"1"})}),J.jsx("h4",{className:"text-white font-bold text-lg mb-3",children:e("app.step1")}),J.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e("app.step1.desc")})]}),J.jsxs("div",{onClick:ee,className:"bg-gradient-to-br from-blue-500/10 to-cyan-600/10 backdrop-blur-sm border border-blue-400/20 rounded-2xl p-8 text-center hover:scale-105 transition-transform duration-300 shadow-xl cursor-pointer",children:[J.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-400/20 to-cyan-500/20 rounded-2xl mx-auto mb-6 flex items-center justify-center border border-blue-400/30",children:J.jsx("span",{className:"text-blue-400 text-3xl font-bold",children:"2"})}),J.jsx("h4",{className:"text-white font-bold text-lg mb-3",children:e("app.step2")}),J.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e("app.step2.desc")})]}),J.jsxs("div",{onClick:ee,className:"bg-gradient-to-br from-violet-500/10 to-purple-600/10 backdrop-blur-sm border border-violet-400/20 rounded-2xl p-8 text-center hover:scale-105 transition-transform duration-300 shadow-xl cursor-pointer",children:[J.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-violet-400/20 to-purple-500/20 rounded-2xl mx-auto mb-6 flex items-center justify-center border border-violet-400/30",children:J.jsx("span",{className:"text-violet-400 text-3xl font-bold",children:"3"})}),J.jsx("h4",{className:"text-white font-bold text-lg mb-3",children:e("app.step3")}),J.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e("app.step3.desc")})]})]}):J.jsxs(J.Fragment,{children:[J.jsxs("div",{onClick:ee,className:"bg-gradient-to-br from-emerald-500/10 to-green-600/10 backdrop-blur-sm border border-emerald-400/20 rounded-2xl p-8 text-center hover:scale-105 transition-transform duration-300 shadow-xl cursor-pointer",children:[J.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-400/20 to-green-500/20 rounded-2xl mx-auto mb-6 flex items-center justify-center border border-emerald-400/30",children:J.jsx("span",{className:"text-emerald-400 text-3xl font-bold",children:"1"})}),J.jsx("h4",{className:"text-white font-bold text-lg mb-3",children:e("ebook.step1")}),J.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e("ebook.step1.desc")})]}),J.jsxs("div",{onClick:ee,className:"bg-gradient-to-br from-teal-500/10 to-cyan-600/10 backdrop-blur-sm border border-teal-400/20 rounded-2xl p-8 text-center hover:scale-105 transition-transform duration-300 shadow-xl cursor-pointer",children:[J.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-400/20 to-cyan-500/20 rounded-2xl mx-auto mb-6 flex items-center justify-center border border-teal-400/30",children:J.jsx("span",{className:"text-teal-400 text-3xl font-bold",children:"2"})}),J.jsx("h4",{className:"text-white font-bold text-lg mb-3",children:e("ebook.step2")}),J.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e("ebook.step2.desc")})]}),J.jsxs("div",{onClick:ee,className:"bg-gradient-to-br from-green-500/10 to-emerald-600/10 backdrop-blur-sm border border-green-400/20 rounded-2xl p-8 text-center hover:scale-105 transition-transform duration-300 shadow-xl cursor-pointer",children:[J.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400/20 to-emerald-500/20 rounded-2xl mx-auto mb-6 flex items-center justify-center border border-green-400/30",children:J.jsx("span",{className:"text-green-400 text-3xl font-bold",children:"3"})}),J.jsx("h4",{className:"text-white font-bold text-lg mb-3",children:e("ebook.step3")}),J.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e("ebook.step3.desc")})]})]})})]})]}),J.jsx("footer",{className:"border-t border-white/10 bg-black/30 backdrop-blur-md mt-auto relative",children:J.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:J.jsx("div",{className:"text-center",children:J.jsx("p",{className:"text-gray-300 text-sm font-medium",children:e("footer.version")})})})}),J.jsx(rk,{isOpen:l,onClose:()=>c(!1),onSave:async e=>{o(e),await b_.settings.put({key:"tmdb_api_key",value:e}),Cw.setApiKey(e)},currentApiKey:s}),J.jsx(ak,{isOpen:g,onClose:()=>v(!1),currentMode:a,onSelectItem:e=>{var t,r,n,i,s,o,l,c,u,d,h,f;if("nfo"===e.type)R(e.generatedNFO||null);else if("book"===e.type)"books"!==a&&X("books"),M(e.bookData||null),L(e.bookData||null),B(e.ebookSpecs||null),q(e.poster),p(!1),m(!1),P(null),R(null);else{const g={id:(null==(t=e.movieData)?void 0:t.id)||(null==(r=e.tvShowData)?void 0:r.id)||0,title:null==(n=e.movieData)?void 0:n.title,name:null==(i=e.tvShowData)?void 0:i.name,media_type:e.type,poster_path:(null==e?void 0:e.poster)||null,backdrop_path:(null==(s=null==e?void 0:e.movieData)?void 0:s.backdrop_path)||(null==(o=null==e?void 0:e.tvShowData)?void 0:o.backdrop_path)||null,release_date:null==(l=null==e?void 0:e.movieData)?void 0:l.release_date,first_air_date:null==(c=null==e?void 0:e.tvShowData)?void 0:c.first_air_date,vote_average:(null==(u=null==e?void 0:e.movieData)?void 0:u.vote_average)||(null==(d=null==e?void 0:e.tvShowData)?void 0:d.vote_average)||0,overview:(null==(h=null==e?void 0:e.movieData)?void 0:h.overview)||(null==(f=null==e?void 0:e.tvShowData)?void 0:f.overview)||""};"nfo"===a&&X("movies"),w(g),k(e.movieData||null),j(e.tvShowData||null),C(e.credits||null),$(e.torrentSpecs||null),A(e.poster),R(e.generatedNFO||null),m(!1),p(!1),P(null)}}})]})}function Ck(){const[e,t]=U.useState(!0);return U.useEffect(()=>{(async()=>{await(async()=>{if(!localStorage.getItem(jk)){console.log("Running data migration from localStorage to IndexedDB...");try{const e=localStorage.getItem("language");e&&(await b_.settings.put({key:"language",value:e}),localStorage.removeItem("language"));const t=localStorage.getItem("tmdb_api_key");t&&(await b_.settings.put({key:"tmdb_api_key",value:t}),localStorage.removeItem("tmdb_api_key"));const r="fichegen_history",n=localStorage.getItem(r);if(n){const e=JSON.parse(n);if(Array.isArray(e)){const t=e.map(({id:e,...t})=>t);await b_.searchHistory.bulkAdd(t),localStorage.removeItem(r)}}const i=[];for(let a=0;a<localStorage.length;a++){const e=localStorage.key(a);if(e&&e.startsWith("ebook_specs_")){const t=e.replace("ebook_specs_",""),r=localStorage.getItem(e);r&&i.push({id:t,specs:JSON.parse(r)})}}i.length>0&&(await b_.ebookSpecs.bulkAdd(i),i.forEach(e=>localStorage.removeItem(`ebook_specs_${e.id}`))),localStorage.setItem(jk,"true"),console.log("Data migration completed successfully.")}catch(e){console.error("Error during data migration:",e)}}})(),t(!1)})()},[]),e?J.jsx("div",{className:"bg-gray-900 min-h-screen flex items-center justify-center text-white",children:J.jsx("p",{children:"Migrating data..."})}):J.jsx(w_,{children:J.jsx(by,{basename:"/fichegen",children:J.jsxs(Qx,{children:[J.jsx(Gx,{path:"/",element:J.jsx(Sk,{})}),J.jsx(Gx,{path:"/books",element:J.jsx(Sk,{})}),J.jsx(Gx,{path:"/nfo",element:J.jsx(Sk,{})})]})})})}$b.init("phc_vGaBRZRBuU7CRUv59CvqDtRYIleL5kqSSup7qiZnAGo",{api_host:"https://eu.i.posthog.com",person_profiles:"identified_only",capture_pageview:!0,capture_exceptions:!0,debug:!1,enable_recording_console_log:!1}),window.posthog=$b,ad(document.getElementById("root")).render(J.jsx(U.StrictMode,{children:J.jsx(Tb,{client:$b,children:J.jsx(Ck,{})})}));
